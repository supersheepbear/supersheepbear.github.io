<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>321 - ç±»å†…å˜é‡è‡ªå¼•ç”¨ | Bear's dream</title><meta name="description" content="321 - ç±»å†…å˜é‡è‡ªå¼•ç”¨"><meta name="keywords" content="Cpp,Coding,Developer,Class,Programming"><meta name="author" content="supersheepbear"><meta name="copyright" content="supersheepbear"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="p43hXBn3_dLvbyxUzx0eo5eYmj9OVYOV52pdrhBa2sw"><meta name="baidu-site-verification" content="EXLlfLv2pV"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="321 - ç±»å†…å˜é‡è‡ªå¼•ç”¨"><meta name="twitter:description" content="321 - ç±»å†…å˜é‡è‡ªå¼•ç”¨"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta property="og:type" content="article"><meta property="og:title" content="321 - ç±»å†…å˜é‡è‡ªå¼•ç”¨"><meta property="og:url" content="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/321%20-%20%E7%B1%BB%E5%86%85%E5%8F%98%E9%87%8F%E8%87%AA%E5%BC%95%E7%94%A8/"><meta property="og:site_name" content="Bear's dream"><meta property="og:description" content="321 - ç±»å†…å˜é‡è‡ªå¼•ç”¨"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/321%20-%20%E7%B1%BB%E5%86%85%E5%8F%98%E9%87%8F%E8%87%AA%E5%BC%95%E7%94%A8/"><link rel="prev" title="344  - cpp å†…è”å˜é‡å‡½æ•°è§£å†³ ODR" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/344%20%20-%20cpp%20%E5%86%85%E8%81%94%E5%8F%98%E9%87%8F%E5%87%BD%E6%95%B0%E8%A7%A3%E5%86%B3%20ODR/"><link rel="next" title="Pandas_Basic_Command_Quick_Check_Table" href="https://yxiong.org/2025/06/08/30-resources/coding/python/Pandas_Basic_Command_Quick_Check_Table/"><link rel="stylesheet" href="hfttps://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bear's dream" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Bear's dream</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200520153141.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">152</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">151</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">20</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ç±»å†…å˜é‡è‡ªå¼•ç”¨"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">ç±»å†…å˜é‡è‡ªå¼•ç”¨</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#C-ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€ä¹‹è°œï¼šæ·±å…¥è§£æä¸å®Œæ•´ç±»å‹"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">C++ ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€ä¹‹è°œï¼šæ·±å…¥è§£æä¸å®Œæ•´ç±»å‹</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-è¯¦ç»†è®²è§£"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">1. è¯¦ç»†è®²è§£</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-å¼•è¨€ï¼šä½ å¯èƒ½é‡åˆ°çš„å›°å¢ƒ"><span class="toc_mobile_items-number">2.1.1.</span> <span class="toc_mobile_items-text">1.1 å¼•è¨€ï¼šä½ å¯èƒ½é‡åˆ°çš„å›°å¢ƒ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-2-é—®é¢˜æ ¹æºï¼šâ€œä¸å®Œæ•´ç±»å‹â€é”™è¯¯"><span class="toc_mobile_items-number">2.1.2.</span> <span class="toc_mobile_items-text">1.2 é—®é¢˜æ ¹æºï¼šâ€œä¸å®Œæ•´ç±»å‹â€é”™è¯¯</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-3-è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆ"><span class="toc_mobile_items-number">2.1.3.</span> <span class="toc_mobile_items-text">1.3 è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-4-è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡"><span class="toc_mobile_items-number">2.1.4.</span> <span class="toc_mobile_items-text">1.4 è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-5-æ€»ç»“ä¸æœ€ä½³å®è·µ"><span class="toc_mobile_items-number">2.1.5.</span> <span class="toc_mobile_items-text">1.5 æ€»ç»“ä¸æœ€ä½³å®è·µ</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-è¯¦ç»†ä»£ç ç¤ºä¾‹"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">2. è¯¦ç»†ä»£ç ç¤ºä¾‹</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-é—®ç­”é—ªå¡-QA-Flash-Cards"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">3. é—®ç­”é—ªå¡ (QA Flash Cards)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-å¸¸è§è¯¯è§£æˆ–é”™è¯¯"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text">4. å¸¸è§è¯¯è§£æˆ–é”™è¯¯</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-ç¼–ç¨‹ç»ƒä¹ "><span class="toc_mobile_items-number">2.5.</span> <span class="toc_mobile_items-text">5. ç¼–ç¨‹ç»ƒä¹ </span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-1"><span class="toc_mobile_items-number">2.6.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-1"><span class="toc_mobile_items-number">2.7.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-2"><span class="toc_mobile_items-number">2.8.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-2"><span class="toc_mobile_items-number">2.9.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#7-è¯„åˆ†ä¸ç­”æ¡ˆè§£æ"><span class="toc_mobile_items-number">2.10.</span> <span class="toc_mobile_items-text">7. è¯„åˆ†ä¸ç­”æ¡ˆè§£æ</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Point-h-æ–‡ä»¶"><span class="toc_mobile_items-number">2.10.1.</span> <span class="toc_mobile_items-text">Point.h æ–‡ä»¶</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Point-cpp-æ–‡ä»¶"><span class="toc_mobile_items-number">2.10.2.</span> <span class="toc_mobile_items-text">Point.cpp æ–‡ä»¶</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å®é™…ç­”æ¡ˆ"><span class="toc_mobile_items-number">2.11.</span> <span class="toc_mobile_items-text">å®é™…ç­”æ¡ˆ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#8-å»ºè®®ä¸æ‰©å±•é—®é¢˜"><span class="toc_mobile_items-number">2.12.</span> <span class="toc_mobile_items-text">8. å»ºè®®ä¸æ‰©å±•é—®é¢˜</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ç±»å†…å˜é‡è‡ªå¼•ç”¨"><span class="toc-number">1.</span> <span class="toc-text">ç±»å†…å˜é‡è‡ªå¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant"><span class="toc-number">1.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#C-ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€ä¹‹è°œï¼šæ·±å…¥è§£æä¸å®Œæ•´ç±»å‹"><span class="toc-number">2.</span> <span class="toc-text">C++ ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€ä¹‹è°œï¼šæ·±å…¥è§£æä¸å®Œæ•´ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-è¯¦ç»†è®²è§£"><span class="toc-number">2.1.</span> <span class="toc-text">1. è¯¦ç»†è®²è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-å¼•è¨€ï¼šä½ å¯èƒ½é‡åˆ°çš„å›°å¢ƒ"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.1 å¼•è¨€ï¼šä½ å¯èƒ½é‡åˆ°çš„å›°å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-é—®é¢˜æ ¹æºï¼šâ€œä¸å®Œæ•´ç±»å‹â€é”™è¯¯"><span class="toc-number">2.1.2.</span> <span class="toc-text">1.2 é—®é¢˜æ ¹æºï¼šâ€œä¸å®Œæ•´ç±»å‹â€é”™è¯¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆ"><span class="toc-number">2.1.3.</span> <span class="toc-text">1.3 è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡"><span class="toc-number">2.1.4.</span> <span class="toc-text">1.4 è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-æ€»ç»“ä¸æœ€ä½³å®è·µ"><span class="toc-number">2.1.5.</span> <span class="toc-text">1.5 æ€»ç»“ä¸æœ€ä½³å®è·µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-è¯¦ç»†ä»£ç ç¤ºä¾‹"><span class="toc-number">2.2.</span> <span class="toc-text">2. è¯¦ç»†ä»£ç ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-é—®ç­”é—ªå¡-QA-Flash-Cards"><span class="toc-number">2.3.</span> <span class="toc-text">3. é—®ç­”é—ªå¡ (QA Flash Cards)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-å¸¸è§è¯¯è§£æˆ–é”™è¯¯"><span class="toc-number">2.4.</span> <span class="toc-text">4. å¸¸è§è¯¯è§£æˆ–é”™è¯¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-ç¼–ç¨‹ç»ƒä¹ "><span class="toc-number">2.5.</span> <span class="toc-text">5. ç¼–ç¨‹ç»ƒä¹ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-1"><span class="toc-number">2.6.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-1"><span class="toc-number">2.7.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-2"><span class="toc-number">2.8.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-2"><span class="toc-number">2.9.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-è¯„åˆ†ä¸ç­”æ¡ˆè§£æ"><span class="toc-number">2.10.</span> <span class="toc-text">7. è¯„åˆ†ä¸ç­”æ¡ˆè§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Point-h-æ–‡ä»¶"><span class="toc-number">2.10.1.</span> <span class="toc-text">Point.h æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Point-cpp-æ–‡ä»¶"><span class="toc-number">2.10.2.</span> <span class="toc-text">Point.cpp æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®é™…ç­”æ¡ˆ"><span class="toc-number">2.11.</span> <span class="toc-text">å®é™…ç­”æ¡ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-å»ºè®®ä¸æ‰©å±•é—®é¢˜"><span class="toc-number">2.12.</span> <span class="toc-text">8. å»ºè®®ä¸æ‰©å±•é—®é¢˜</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)"><div id="post-info"><div id="post-title"><div class="posttitle">321 - ç±»å†…å˜é‡è‡ªå¼•ç”¨</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2025-06-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2025-06-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/">10-projects</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/">cplusplus</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/lectures/">lectures</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/2025/06/08/10-projects/cplusplus/lectures/321%20-%20%E7%B1%BB%E5%86%85%E5%8F%98%E9%87%8F%E8%87%AA%E5%BC%95%E7%94%A8/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2025/06/08/10-projects/cplusplus/lectures/321%20-%20%E7%B1%BB%E5%86%85%E5%8F%98%E9%87%8F%E8%87%AA%E5%BC%95%E7%94%A8/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="ç±»å†…å˜é‡è‡ªå¼•ç”¨"><a href="#ç±»å†…å˜é‡è‡ªå¼•ç”¨" class="headerlink" title="ç±»å†…å˜é‡è‡ªå¼•ç”¨"></a>ç±»å†…å˜é‡è‡ªå¼•ç”¨</h1><h2 id="ğŸ§‘â€ğŸ’»-User"><a href="#ğŸ§‘â€ğŸ’»-User" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>In this lecture, weâ€™re going to explore the case where you are declaring the class, but at the sametime you want to use member variables of the same class.Letâ€™s look at an example here We have a point class.It is an innocent point class.We have a public section inside.We have a private section inside and down here.You see we have a bunch of problematic member variables.You see, we are setting up member variables of type point in the declaration of the class point.And sometimes you want to do this.And a possible example of this is, for example, if you want to set up the origin point and you wantto model something like line, you will need the origin point or the starting point for the line, andyou might model that as a member variable inside the point class here.So this is something possible.But if you try to set up your member variables in any of these ways, if you set up like an origin pointone here or make it const or make it a static inline const variable, youâ€™re going to get a compilererror that says that the type is incomplete here.And what this really means is that you are trying to set up a variable of the class you havenâ€™t finishedbuilding yet or setting up yet, so the compiler isnâ€™t really going to have enough information to setup this member variables.This is the message here.Okay.So if you try to use any of these syntaxes, this is not going to work and you need to be aware of this.However, there are ways we can make this work.For example, if we make the member variable a pointer like you see here, the compiler is going totake this because a pointer really is not a pointer type.It is just a pointer to a point.And we have the option to specify this point later when our program is running.So again, this is going to work because the PM origin point for here is not a point type.It is a pointer to a point type.So this is going to work.If we have a setup like this, we might want to initialize our pointer member variable like we see hereand initialize this with null pointer.And this is going to work if you use null pointer, but if you donâ€™t use null pointer and for exampleinside your initializer you say new point youâ€™re trying to set up a new point youâ€™re going to get somethingwrong.Try to think about this.You are trying to build a point.This is a constructor for the point class and in the same constructor we are trying to call anotherconstructor.We say New point here and this is going to call the constructor again.So what this is going to do is really set up a chain of recursive calls to the constructor for pointand it will keep calling itself, for example, billions of times.And at some point youâ€™re going to run out of heap memory and your program is going to crash.Please note that C plus plus is not going to protect you from this, or I should say C plus plus compilersare not going to protect you from this.A solution to this is to initialize our pointer with null pointer and later set it up if we really needto do this when the object has already been constructed, weâ€™re going to see an example of this in awhile If this is not making sense yet.So bear with me.This is going to work in a minute.Another way we can set up member variables of point here is to use static member variables like this.The static member variables can either be constant or not const.This is going to work because this is going to delegate the initialization of point at some later pointin an implementation file or a CPP file.And the linker is going to look for this later when the program actually gets to run.So the compiler is basically going to say, okay, I see a setup for a member variable for a point,but I can leave it for later to really put in a value and Iâ€™m going to accept this.The syntax is going to work because the C plus plus compiler is going to see that it can initializethis properly later when we hit the linker stage and we are building our program.So this syntax is going to work here, but you need to be aware of the syntaxes that are going to giveyou compiler errors and you need to be aware of these errors here.Okay.With these member variables in place, we can initialize them in a CPP file.For example, here we are initializing M origin 0.5 and here we are putting value inside M origin 0.6.And this is going to work just fine.Now that you know this, I think it is time we headed over to Visual Studio code and play with thisa little more.Okay, Here we are in our working folder.The current project is Member Variables of Type Self.We are going to reuse a project we have done before, and thatâ€™s what we see here in line static membervariables.And weâ€™re going to grab whatever we have inside.Weâ€™re going to grab the VS code folder here.Weâ€™re going to grab the main CPP file and the point class, but weâ€™re going to leave out the binaryhere for Rooster because weâ€™re going to be generating our own.Weâ€™re going to grab those files and put them in the current project and we are going to open this upa little bit in Visual Studio Code.This is going to open our project and we will have our main CPP file.We can remove anything we have inside because weâ€™re going to be setting up things later and weâ€™re goingto open the point class, the header and the CPP file.Letâ€™s do that.Okay, so we have our class here and we want to set up a member variables of the point class that weare declaring here and weâ€™re going to see how this plays out.I am going to go on top here and put all this in its own public section.Itâ€™s not going to matter if it is public or private, but I want this to be separate from our privatemember variables here.So weâ€™re going to set up a point member variable.Itâ€™s going to be point and weâ€™re going to call this end point one.And if we try to do this, notice what we have here.Okay?So letâ€™s try and build before we put this in to try and prove that the program is just going to workfine and it is going to be the change that we have here that is going to break our program.You see, the build is good.So letâ€™s put our point one in here.And the moment we do this, weâ€™re going to get a squiggly line from Visual Studio code.This is going to be a warning and it is going to say incomplete type is not allowed because at thispoint we are trying to set up a point member variable, but the class is not declared to completionyet, so the compiler wonâ€™t really know how to set up this.Youâ€™re going to get an incomplete type compiler error.Okay, so this is what I want you to be aware of.If we ignore the warning from Visual Studio code and just move on with whatever we want to do, weâ€™regoing to get a compiler error and it is going to say the same thing.Failed End Point one has incomplete type point because we havenâ€™t finished building the point classyet and we want to set up its own member variable.So this is not going to work.If we try and make this const, for example, we say const point M point two here.This is also not going to work.Weâ€™re going to get the same compiler error.Letâ€™s wait for Visual Studio code to realize the problem.Weâ€™re going to get a squiggly line and again, weâ€™re going to say failed point two, incomplete type.We should say point two, letâ€™s build again.Weâ€™re going to use GCC and now the problem should be updated.Point two has incomplete type and the compiler error is going to say the same thing.M 0.1 or M point two has an incomplete type, so we canâ€™t do this either.So this is also going to give us the same compiler error.But if we try to set up a static variable and make it inline, weâ€™re also going to get the same problembecause that will force the compiler to initialize the variable in place here.And thatâ€™s not going to work.Weâ€™re going to get the same compiler error here.Letâ€™s give you an example.Weâ€™re going to say static inline const and say point and say M point three, letâ€™s say three here.So if we try to say static inline const point and say M point three and try to initialize this for example,because we can do this, if the variable is inline, weâ€™re going to get the same compiler error becausethe type is incomplete.Weâ€™re going to get this because the compiler will try to initialize this guy, but we donâ€™t have enoughinformation to build a point object.So weâ€™re going to get an incomplete type compiler error.Letâ€™s build this so that you can really see this with your own eyes.The build is going to give us an error because we donâ€™t have enough information to build a point objectlike we do here yet.So weâ€™re going to get the same compiler error.Okay, so now you know this, but there is a way we can have member variables of the same type, evenif the type is not complete yet.One way to do this is to use a pointer.So for example, if we say point pointer and say p m point and say for here you see that this is notgoing to give us a compiler error.In fact it is going to compile.Weâ€™re going to build with GCC and weâ€™re going to see that the world is good.So this is valid syntax.The reason this is working is because the pointer to a point is really not a point.So the compiler has no problem setting up this guy because all it really needs to know is that thisis a pointer.It is going to have the size of a point.Later on my system and the compiler can leave the details it doesnâ€™t have for later when somebody triesto store something in this pointer.So this is going to work.Weâ€™re not going to get the same compiler error we had here.Letâ€™s save the errors for all the other cases here so that it is super clear letâ€™s do that.But this is going to work.Okay.So if this is taken in, we can grab this and try to initialize this when we build any point objectthrough the constructor.So for example, we can come here and say we can put this in front.I think we can do that and we can initialize this with null pointer, for example.And this is going to work through our initializer list.Letâ€™s use curly braces because we want to be consistent here and this is going to work.You see, if we try to build, the build is going to be good.Okay.This is building successfully.But one problem some people might have is if they try, for example, to initialize this using the newoperator and try to construct a point in place.I know some people are going to do this.Letâ€™s take out null pointer here and say new point.Okay, if we do this this is going to call our constructor here and weâ€™re going to land in this placehere.But try to think about what we are doing here.If we come in main, for example, and say point P one and we say something like this, this is goingto come and call our constructor here, which is not taking any parameter.Weâ€™re going to delegate to our constructor on top here, and this constructor will try to set up a newpoint object because thatâ€™s what we are saying here.But this is also going to call this constructor again and we will keep calling this constructor endlesslyand at some point the compiler is going to see that this function is calling itself repeatedly, andweâ€™re going to be allocating memory.For example, for billions of times, and we are going to run out of heap memory for our program andwe are going to get a crash.Letâ€™s try and run it to really show you this.The compiler is not going to protect us from this.So the world is really good.We can clear.But if we run Rooster, notice what happens here.The program is basically going to keep creating new point objects because the constructor is callingitself billions of times.And at some point weâ€™re going to crash the program.The operating system is going to say, this program is crazy.It is creating billions and billions of objects of point type.So it is going to die.If we wait, weâ€™re going to see that this program is going to die.But I donâ€™t want to wait.All this time you have seen the main message here.It is crashing.It is not doing anything.We can hit Ctrl C to stop this.And now you know that this is really bad.You shouldnâ€™t do this.If you want to do something like this, it is advised to initialize your pointer to null pointer andthen do the work to put in some data later.When you want to do this, for example, we can go in our point class here, the declaration for thisand we can set up a function to initialize that pointer member variable.For example, we can say initialize our pointer, letâ€™s say initialize pointer and weâ€™re going to putin the values we can use to initialize that and weâ€™re going to initialize our pointer member variable,for example, we can grab that here.I think it is this little guy here.We can grab that and say we want to initialize this pointer and weâ€™re going to create a point objectand weâ€™re going to let this pointer point to this.When you do this, the initialization of this memory location is going to be left for later when a pointerobject has been already created.For example, here, if we have 0.1 here, we can come down and say 0.1 and say initialize.How did we call the method?We can grab the name here.I donâ€™t remember the name and we can say initialize our guy using ten and ten, for example, and thisis going to work.Letâ€™s world youâ€™re going to see that the compiler is going to accept this and we have a problem here.Which problem do we have request for member initialized pointer in P one which is of non-class typepoint.For example, if we use the point here and here we have a problem.What we put here is not really good syntax to create a point object.This is not going to create our point object.This is basically going to be interpreted by the compiler as the function called P one, which is notgoing to take any parameter and itâ€™s going to return a point object by value.So sorry for this.This is referred to in C plus plus as the most vexing course and it is basically a.Situation in which Cplusplus canâ€™t really know if we are declaring a point.Object or declaring a function.And this is a situation in which Cplusplus is going to be confused and think we are creating a declarationfor a function when we really want to create a point object to remove this confusion.For example, we can either remove the parentheses here.This is going to be a point.This is going to call the default constructor that we have declared here.Or we could just pass in parameters.We can, for example, pass in five and five.We can do this.This is going to be a valid point.Now that the valid point is created, weâ€™re going to take it and say initialize pointer and we can passin whatever we want.Letâ€™s pass in ten and ten and our pointer member variable is now going to be initialized to a pointobject that is pointing to a point with these values inside.And if we print it, weâ€™re going to get the information for our point in place.For example, if we say this guy and say print info, weâ€™re going to see the information and this isgoing to work just fine.If we build this is going to build fine.Letâ€™s see this.Youâ€™re going to see that the build is good.We donâ€™t really care to print the information because if we do, this is just going to give us letâ€™ssee what weâ€™re going to get.If we print information, weâ€™re just going to print the addresses for the member variables.And this is really not what we are interested in.But the important bit is that we had to initialize our pointer member variable after a point objectwas already created because if we go in the constructor and try to say new point here, weâ€™re goingto get a problem because weâ€™re going to get the constructor to call itself multiple times and weâ€™renot even going to hit the body.Weâ€™re going to be basically keeping calling the point constructor and the program is basically goingto hang and eventually it is going to crash When we run out of memory for the point objects here.So we donâ€™t want this.We want to initialize this to a null pointer here and then initialize that pointer through some memberfunction if we need to do that.Okay.This covers the point where we want to set up a pointer member variable.Weâ€™re going to comment this out and I am going to show you two other scenarios where this is going towork and this is basically going to work if we use static member variables, but we donâ€™t make theminline, we leave the initialization for them in some CPP file.So letâ€™s do that.Weâ€™re going to say static const point and weâ€™re going to say End point four and weâ€™re going to set upanother one, which is not cost.Weâ€™re going to say static point and say end point five, this is going to work and we can head overin the CPP file and initialize these guys.We can copy them and put them in the CPP file and we can come on top here and we can say const point.Weâ€™re going to remove the static here and weâ€™re going to say that this is declared in the point classand weâ€™re going to initialize this to a point object.We can do that.We can say point, for example, and put in a value of four and five.Why not?This is going to work and we can do the same for this little guy here.So letâ€™s take out the static.This is going to be our type and weâ€™re going to say that this is a variable from the point class andweâ€™re going to initialize this to some point, letâ€™s say point, for example, and use curly bracesand put in three and eight.This is going to work.If we try to use these guys, weâ€™re going to get what we expect.And we took out this pointer.I think we should bring it back because itâ€™s not going to crash our program or give us a compiler errorso we can build again.If we build, youâ€™re going to see that this is going to work.You see, the build is good.We can use member variables of type self if we are declaring static variables and not making them inline.This is really all I wanted you to see in this lecture.I hope you found it interesting.If you happen to want to set up a member variables of the same class you are declaring, you shouldreally be careful because if you use the syntax we see here, youâ€™re going to get a compiler error.But if you avoid this syntaxes and for example, use pointers or static member variables that are notin line, this is going to work because for pointers, the C plus plus compiler is going to say, okay,this is a pointer, I can leave it for later to put in the details and you can initialize the pointerlater when you are creating your object here.This is going to work for static member variables.Youâ€™re going to leave the proper initialization of the variables in some CPP file and the compiler isgoing to take this.And it is going to work really well.So, for example, we have these guys initialized here.We have M 0.4.I think we can grab this in the main function and use it.For example, we can say P1M 0.4.We can have access to that and we can say print a full letâ€™s change what printing full does think thisis going to be educational?Letâ€™s go in and change that to say and print the member variables instead instead of printing the addressesdirectly, we can do that.So weâ€™re going to say M, y and m X here and weâ€™re going to build again.The world should be good, so weâ€™re going to clear and run Rooster and weâ€™re going to print the informationin 0.4.And if we go in our CPP file, weâ€™re going to see that we initialized that to four and five, and thatâ€™swhat we see here.It is working exactly like we want.We are going to stop here in this lecture.In the next one, weâ€™re going to see that we donâ€™t have this limitations.If the member variable is not of self type and we are using our own class types.So go ahead and finish up here and meet me there.</p>
<hr>
<h2 id="ğŸ¤–-Assistant"><a href="#ğŸ¤–-Assistant" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¥½çš„ï¼Œå¾ˆé«˜å…´èƒ½ä¸ºæ‚¨æ­å¼€ C++ ä¸­â€œç±»æˆå‘˜å˜é‡è‡ªæˆ‘å¼•ç”¨â€è¿™ä¸ªæœ‰è¶£è€Œåˆå¸¸è§çš„è°œå›¢ã€‚ä½œä¸ºæ‚¨ä¸“å±çš„ C++ å¯¼å¸ˆï¼Œæˆ‘å°†å°½åŠ›ç”¨æœ€æ¸…æ™°ã€æœ€æ˜“æ‡‚çš„æ–¹å¼æ¥è®²è§£ï¼Œå¹¶ç¡®ä¿æ‚¨èƒ½æŒæ¡æ‰€æœ‰å…³é”®æ¦‚å¿µã€‚</p>
<hr>
<h1 id="C-ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€ä¹‹è°œï¼šæ·±å…¥è§£æä¸å®Œæ•´ç±»å‹"><a href="#C-ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€ä¹‹è°œï¼šæ·±å…¥è§£æä¸å®Œæ•´ç±»å‹" class="headerlink" title="C++ ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€ä¹‹è°œï¼šæ·±å…¥è§£æä¸å®Œæ•´ç±»å‹"></a>C++ ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€ä¹‹è°œï¼šæ·±å…¥è§£æä¸å®Œæ•´ç±»å‹</h1><p><strong>æ‘˜è¦</strong>ï¼šæœ¬è®²åº§å°†æ·±å…¥æ¢è®¨ C++ ä¸­ä¸€ä¸ªå¸¸è§çš„ç¼–è¯‘é—®é¢˜ï¼šåœ¨ç±»å£°æ˜ï¼ˆ<a href="class declaration">class declaration</a>ï¼‰ä¸­ï¼Œå°è¯•å°†è‡ªèº«ç±»å‹ä½œä¸ºæˆå‘˜å˜é‡ï¼ˆ<a href="member variable">member variable</a>ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥å‘Šâ€œä¸å®Œæ•´ç±»å‹â€ï¼ˆ<a href="incomplete type">incomplete type</a>ï¼‰é”™è¯¯ã€‚æˆ‘ä»¬å°†è¯¦ç»†è§£é‡Šå…¶åŸå› ï¼Œå¹¶æä¾›ä¸¤ç§æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æŒ‡é’ˆï¼ˆ<a href="pointer">pointer</a>ï¼‰æˆ–é™æ€æˆå‘˜å˜é‡ï¼ˆ<a href="static member variable">static member variable</a>ï¼‰ï¼ŒåŒæ—¶æ­ç¤ºç›¸å…³é™·é˜±ä¸æœ€ä½³å®è·µã€‚</p>
<hr>
<h2 id="1-è¯¦ç»†è®²è§£"><a href="#1-è¯¦ç»†è®²è§£" class="headerlink" title="1. è¯¦ç»†è®²è§£"></a>1. è¯¦ç»†è®²è§£</h2><h3 id="1-1-å¼•è¨€ï¼šä½ å¯èƒ½é‡åˆ°çš„å›°å¢ƒ"><a href="#1-1-å¼•è¨€ï¼šä½ å¯èƒ½é‡åˆ°çš„å›°å¢ƒ" class="headerlink" title="1.1 å¼•è¨€ï¼šä½ å¯èƒ½é‡åˆ°çš„å›°å¢ƒ"></a>1.1 å¼•è¨€ï¼šä½ å¯èƒ½é‡åˆ°çš„å›°å¢ƒ</h3><p>åœ¨ C++ ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šåˆ›å»ºç±»ï¼ˆ<a href="class">class</a>ï¼‰æ¥æ¨¡æ‹Ÿç°å®ä¸–ç•Œçš„æ¦‚å¿µã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª <code>Point</code> ç±»å¯ä»¥ä»£è¡¨ä¸€ä¸ªäºŒç»´åæ ‡ç‚¹ã€‚æœ‰æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸€ç§ç‰¹æ®Šçš„éœ€æ±‚ï¼šä½ å¸Œæœ›åœ¨ä¸€ä¸ªç±»å†…éƒ¨ï¼Œå£°æ˜ä¸€ä¸ªè¯¥ç±»è‡ªèº«ç±»å‹çš„æˆå‘˜å˜é‡ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æ­£åœ¨è®¾è®¡ä¸€ä¸ª <code>Point</code> ç±»ï¼Œä½†ä½ åˆæƒ³åœ¨ <code>Point</code> ç±»ä¸­é¢„è®¾ä¸€ä¸ªâ€œåŸç‚¹â€ï¼ˆ<a href="origin point">origin point</a>ï¼‰ä½œä¸ºå…¶æˆå‘˜ã€‚æˆ–è€…ï¼Œå¦‚æœä½ æ­£åœ¨å»ºæ¨¡ä¸€æ¡çº¿ï¼ˆ<a href="line">line</a>ï¼‰ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸º <code>Point</code> ç±»å†…éƒ¨éœ€è¦ä¸€ä¸ª <code>startPoint</code> æˆ– <code>endPoint</code>ã€‚è™½ç„¶å¯¹äº <code>Point</code> ç±»æœ¬èº«æ¥è¯´ï¼Œè¿™ç§è®¾è®¡å¯èƒ½ä¸å¸¸è§ï¼ˆé€šå¸¸åŸç‚¹æ˜¯å…¨å±€å¸¸é‡æˆ–é™æ€æˆå‘˜ï¼‰ï¼Œä½†å®ƒç¡®å®æ˜¯æˆ‘ä»¬åœ¨æ›´å¤æ‚çš„åœºæ™¯ä¸­å¯èƒ½é‡åˆ°çš„æƒ…å†µï¼Œä¾‹å¦‚é“¾è¡¨ï¼ˆ<a href="linked list">linked list</a>ï¼‰èŠ‚ç‚¹ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬å°è¯•è¿™æ ·åšï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h3 id="1-2-é—®é¢˜æ ¹æºï¼šâ€œä¸å®Œæ•´ç±»å‹â€é”™è¯¯"><a href="#1-2-é—®é¢˜æ ¹æºï¼šâ€œä¸å®Œæ•´ç±»å‹â€é”™è¯¯" class="headerlink" title="1.2 é—®é¢˜æ ¹æºï¼šâ€œä¸å®Œæ•´ç±»å‹â€é”™è¯¯"></a>1.2 é—®é¢˜æ ¹æºï¼šâ€œä¸å®Œæ•´ç±»å‹â€é”™è¯¯</h3><p>å½“ä½ å°è¯•åœ¨ <code>Point</code> ç±»çš„å£°æ˜ä¸­ç›´æ¥å®šä¹‰ä¸€ä¸ª <code>Point</code> ç±»å‹çš„æˆå‘˜å˜é‡æ—¶ï¼Œæ¯”å¦‚åƒè¿™æ ·ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Point m_problematicPoint; <span class="comment">// å°è¯•å£°æ˜è‡ªèº«ç±»å‹çš„æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>C++ ç¼–è¯‘å™¨ä¼šç«‹å³æŠ¥é”™ï¼Œæç¤ºâ€œä¸å®Œæ•´ç±»å‹â€ï¼ˆ<a href="incomplete type">incomplete type</a>ï¼‰ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p><strong>ä»€ä¹ˆæ˜¯â€œä¸å®Œæ•´ç±»å‹â€ï¼Ÿ</strong></p>
<p>ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªç±»å‹è¢«è®¤ä¸ºæ˜¯â€œä¸å®Œæ•´â€çš„ï¼Œæ„å‘³ç€ç¼–è¯‘å™¨åœ¨å½“å‰ç‚¹è¿˜æ²¡æœ‰æŒæ¡è¿™ä¸ªç±»å‹çš„<strong>å®Œæ•´å®šä¹‰ä¿¡æ¯</strong>ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒä¸çŸ¥é“è¿™ä¸ªç±»å‹å å¤šå¤§å†…å­˜ç©ºé—´ï¼ˆ<a href="size">size</a>ï¼‰ã€å†…éƒ¨æœ‰å“ªäº›æˆå‘˜ä»¥åŠå®ƒä»¬çš„å†…å­˜å¸ƒå±€ï¼ˆ<a href="memory layout">memory layout</a>ï¼‰ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ç¼–è¯‘å™¨æ­£åœ¨é€è¡Œé˜…è¯»ä½ çš„ <code>Point</code> ç±»å®šä¹‰ï¼š</p>
<ol>
<li>å®ƒçœ‹åˆ°äº† <code>class Point {</code>ï¼ŒçŸ¥é“ä½ æ­£åœ¨å®šä¹‰ä¸€ä¸ªåä¸º <code>Point</code> çš„ç±»ã€‚</li>
<li>ç„¶åå®ƒè¯»åˆ° <code>Point m_problematicPoint;</code>ã€‚æ­¤æ—¶ï¼Œç¼–è¯‘å™¨éœ€è¦ä¸º <code>m_problematicPoint</code> åˆ†é…å†…å­˜ç©ºé—´ã€‚ä½†é—®é¢˜æ˜¯ï¼Œ<code>Point</code> ç±»æœ¬èº«çš„å®šä¹‰<strong>è¿˜æ²¡æœ‰ç»“æŸ</strong>ï¼ç¼–è¯‘å™¨ä¸çŸ¥é“ <code>Point</code> åˆ°åº•æœ‰å¤šå¤§ï¼Œå®ƒè¿˜åœ¨ç­‰å¾… <code>{ ... };</code> ä¹‹é—´çš„å†…å®¹æ¥å®Œæˆ <code>Point</code> çš„å®šä¹‰ã€‚</li>
<li>è¿™å°±å½¢æˆäº†ä¸€ä¸ªâ€œé¸¡ç”Ÿè›‹ï¼Œè›‹ç”Ÿé¸¡â€çš„æ­»å¾ªç¯ï¼šä¸ºäº†å®šä¹‰ <code>Point</code>ï¼Œç¼–è¯‘å™¨éœ€è¦çŸ¥é“ <code>m_problematicPoint</code> çš„å¤§å°ï¼›ä½†ä¸ºäº†çŸ¥é“ <code>m_problematicPoint</code> çš„å¤§å°ï¼Œå®ƒéœ€è¦çŸ¥é“ <code>Point</code> çš„å®Œæ•´å¤§å°ï¼Œè€Œ <code>Point</code> çš„å®Œæ•´å¤§å°åˆä¾èµ–äº <code>m_problematicPoint</code> çš„å¤§å°ã€‚</li>
</ol>
<p>ç”±äºè¿™ç§å¾ªç¯ä¾èµ–ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®š <code>Point</code> ç±»çš„æ€»å¤§å°å’Œå†…å­˜å¸ƒå±€ï¼Œå› æ­¤å®ƒä¼šç»™å‡ºâ€œä¸å®Œæ•´ç±»å‹â€çš„é”™è¯¯ã€‚</p>
<p><strong>å¤±è´¥çš„ä¾‹å­</strong></p>
<p>ä»¥ä¸‹å‡ ç§å°è¯•éƒ½ä¼šå¯¼è‡´ç›¸åŒçš„â€œä¸å®Œæ•´ç±»å‹â€ç¼–è¯‘é”™è¯¯ï¼š</p>
<ul>
<li><strong>ç›´æ¥å£°æ˜éæŒ‡é’ˆ/å¼•ç”¨ç±»å‹çš„æˆå‘˜å˜é‡ï¼š</strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Point m_point1; <span class="comment">// é”™è¯¯ï¼šä¸å®Œæ•´ç±»å‹</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>å£°æ˜ <code>const</code> ç±»å‹çš„æˆå‘˜å˜é‡ï¼š</strong> <code>const</code> å…³é”®å­—å¹¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œå› ä¸ºç¼–è¯‘å™¨ä»ç„¶éœ€è¦çŸ¥é“ <code>Point</code> çš„å®Œæ•´å¤§å°ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> Point m_point2; <span class="comment">// é”™è¯¯ï¼šä¸å®Œæ•´ç±»å‹</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>å£°æ˜ <code>static inline const</code> ç±»å‹çš„æˆå‘˜å˜é‡ï¼š</strong> <code>static</code> æˆå‘˜å˜é‡çš„å®šä¹‰é€šå¸¸åœ¨ç±»å¤–ï¼Œä½† <code>inline</code> å…³é”®å­—ï¼ˆå°¤å…¶åœ¨ C++17 ä¹‹åï¼‰ä¼šå¼ºåˆ¶è¦æ±‚å˜é‡åœ¨ç±»å£°æ˜æ—¶å°±åœ°ï¼ˆ<a href="in-place">in-place</a>ï¼‰å®šä¹‰å’Œåˆå§‹åŒ–ã€‚è¿™å°±å›åˆ°äº†ä¸å®Œæ•´ç±»å‹çš„é—®é¢˜ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">const</span> Point m_point3 = Point(<span class="number">0</span>, <span class="number">0</span>); <span class="comment">// é”™è¯¯ï¼šä¸å®Œæ•´ç±»å‹</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
å¯¹äº <code>static inline</code> å˜é‡ï¼Œç¼–è¯‘å™¨åœ¨é‡åˆ°å®ƒæ—¶å°±éœ€è¦çŸ¥é“å…¶å®Œæ•´çš„ç±»å‹ä¿¡æ¯ä»¥ä¾¿è¿›è¡Œåˆå§‹åŒ–ï¼Œä½†æ­¤æ—¶ <code>Point</code> ä»æœªå®Œæ•´å®šä¹‰ã€‚</li>
</ul>
<h3 id="1-3-è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆ"><a href="#1-3-è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆ" class="headerlink" title="1.3 è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆ"></a>1.3 è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆ</h3><p>å°½ç®¡ä¸èƒ½ç›´æ¥å£°æ˜è‡ªèº«ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>æŒ‡é’ˆ</strong>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Point* pm_origin_point; <span class="comment">// æ­£ç¡®ï¼šå£°æ˜ä¸€ä¸ªæŒ‡å‘ Point ç±»å‹çš„æŒ‡é’ˆ</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨æŒ‡é’ˆå°±å¯ä»¥å‘¢ï¼Ÿ</p>
<p>æŒ‡é’ˆçš„å¥¥ç§˜åœ¨äºï¼šä¸€ä¸ªæŒ‡é’ˆå˜é‡å®ƒæœ¬èº«çš„å¤§å°æ˜¯<strong>å›ºå®š</strong>çš„ï¼ˆé€šå¸¸æ˜¯ 4 å­—èŠ‚æˆ– 8 å­—èŠ‚ï¼Œå–å†³äºä½ çš„ç³»ç»Ÿæ¶æ„ï¼‰ï¼Œæ— è®ºå®ƒæŒ‡å‘ä»€ä¹ˆç±»å‹ã€‚å½“ä½ å£°æ˜ <code>Point* pm_origin_point;</code> æ—¶ï¼Œç¼–è¯‘å™¨åªéœ€è¦çŸ¥é“ <code>pm_origin_point</code> æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå°±å¯ä»¥ç¡®å®šå®ƒåœ¨ <code>Point</code> å¯¹è±¡ä¸­éœ€è¦å ç”¨å¤šå¤§ç©ºé—´ã€‚å®ƒä¸éœ€è¦çŸ¥é“ <code>Point</code> ç±»çš„å®Œæ•´å®šä¹‰ï¼Œå› ä¸ºå®ƒç°åœ¨åªå…³å¿ƒâ€œæŒ‡é’ˆâ€æœ¬èº«çš„å¤§å°ã€‚</p>
<p>çœŸæ­£çš„ <code>Point</code> å¯¹è±¡å¯ä»¥åœ¨ <code>Point</code> ç±»å®šä¹‰å®Œæˆåï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åœ°ï¼ˆ<a href="dynamically">dynamically</a>ï¼‰åˆ›å»ºï¼Œå¹¶å°†å…¶åœ°å€èµ‹å€¼ç»™è¿™ä¸ªæŒ‡é’ˆã€‚</p>
<p><strong>é™·é˜±ï¼šåœ¨æ„é€ å‡½æ•°ä¸­ <code>new Point()</code></strong></p>
<p>è™½ç„¶ä½¿ç”¨æŒ‡é’ˆè§£å†³äº†ç¼–è¯‘é—®é¢˜ï¼Œä½†è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„é™·é˜±éœ€è¦é¿å…ï¼š<strong>ä¸è¦åœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨ <code>new Point()</code> æ¥åˆå§‹åŒ–è¿™ä¸ªæŒ‡é’ˆæˆå‘˜å˜é‡ã€‚</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Point* pm_origin_point;</span><br><span class="line"></span><br><span class="line">    Point() &#123;</span><br><span class="line">        pm_origin_point = <span class="keyword">new</span> Point(); <span class="comment">// æåº¦å±é™©ï¼ä¼šå¯¼è‡´æ— é™é€’å½’è°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>è®©æˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆå±é™©ï¼š</p>
<ol>
<li>å½“ä½ åˆ›å»ºä¸€ä¸ª <code>Point</code> å¯¹è±¡ï¼ˆä¾‹å¦‚ <code>Point p1;</code>ï¼‰æ—¶ï¼Œ<code>Point</code> çš„æ„é€ å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>è¿›å…¥æ„é€ å‡½æ•°åï¼Œå®ƒä¼šæ‰§è¡Œ <code>pm_origin_point = new Point();</code>ã€‚</li>
<li><code>new Point()</code> è¿™è¡Œä»£ç çš„å«ä¹‰æ˜¯<strong>å†æ¬¡è°ƒç”¨ <code>Point</code> ç±»çš„æ„é€ å‡½æ•°</strong>æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Point</code> å¯¹è±¡ã€‚</li>
<li>è¿™ä¸ªæ–°çš„ <code>Point</code> å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå®ƒçš„æ„é€ å‡½æ•°åˆä¼šå†æ¬¡è¢«è°ƒç”¨ï¼Œç„¶åå®ƒåˆä¼šå°è¯• <code>new Point()</code>â€¦</li>
</ol>
<p>è¿™å°±å½¢æˆäº†ä¸€ä¸ª<strong>æ— é™é€’å½’</strong>ï¼ˆ<a href="infinite recursion">infinite recursion</a>ï¼‰çš„å¾ªç¯ã€‚æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šåœ¨å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªæ–°çš„ <code>Point</code> å¯¹è±¡ï¼Œå¹¶ä¸”ä¼šå ç”¨æ ˆï¼ˆ<a href="stack">stack</a>ï¼‰ç©ºé—´æ¥å­˜å‚¨å½“å‰çš„å‡½æ•°è°ƒç”¨ä¿¡æ¯ã€‚å¾ˆå¿«ï¼Œä½ çš„ç¨‹åºå°±ä¼šï¼š</p>
<ul>
<li><strong>è€—å°½å †å†…å­˜</strong>ï¼ˆ<a href="heap memory exhaustion">heap memory exhaustion</a>ï¼‰ï¼šå› ä¸ºä¸æ–­åœ° <code>new</code> æ–°å¯¹è±¡ã€‚</li>
<li><strong>æ ˆæº¢å‡º</strong>ï¼ˆ<a href="stack overflow">stack overflow</a>ï¼‰ï¼šå› ä¸ºæ— é™çš„å‡½æ•°è°ƒç”¨å¯¼è‡´æ ˆç©ºé—´è€—å°½ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œä½ çš„ç¨‹åºä¼šå´©æºƒï¼ˆ<a href="crash">crash</a>ï¼‰ã€‚C++ ç¼–è¯‘å™¨é€šå¸¸<strong>ä¸ä¼š</strong>æ£€æµ‹è¿™ç§è¿è¡Œæ—¶é€»è¾‘é”™è¯¯å¹¶ä¿æŠ¤ä½ ï¼Œå®ƒåªä¼šæŒ‰ç…§ä½ å†™çš„ä»£ç å»æ‰§è¡Œã€‚</p>
<p><strong>éä»£ç ç¤ºä¾‹</strong>ï¼š<br>æƒ³è±¡ä½ æ˜¯ä¸€å®¶ç©å…·å‚çš„å·¥äººï¼Œæ­£åœ¨ç»„è£…ä¸€ä¸ªå«åšâ€œç‚¹â€çš„å¤æ‚ç©å…·ã€‚è¿™ä¸ªâ€œç‚¹â€ç©å…·çš„è¯´æ˜ä¹¦ä¸Šå†™ç€ï¼šâ€œç©å…·å†…éƒ¨åŒ…å«ä¸€ä¸ªå«åšâ€˜å­ç‚¹â€™çš„å°ç©å…·ã€‚â€ç„¶åï¼Œâ€œå­ç‚¹â€çš„è¯´æ˜ä¹¦ä¸Šåˆå†™ç€ï¼šâ€œâ€˜å­ç‚¹â€™ç©å…·å†…éƒ¨åŒ…å«ä¸€ä¸ªå«åšâ€˜å­å­ç‚¹â€™çš„å°ç©å…·ã€‚â€å¦‚æœä½ æŒ‰ç…§è¿™ä¸ªè¯´æ˜ä¹¦å¼€å§‹ç»„è£…ï¼Œä½ å°±ä¼šé™·å…¥ä¸€ä¸ªæ°¸æ— æ­¢å¢ƒçš„ç»„è£…è¿‡ç¨‹ï¼Œæ°¸è¿œå®Œä¸æˆç¬¬ä¸€ä¸ªâ€œç‚¹â€ç©å…·çš„ç»„è£…ï¼Œç›´åˆ°ä½ ç”¨å…‰äº†æ‰€æœ‰é›¶ä»¶å’Œå·¥ä½œå°ç©ºé—´ã€‚è¿™å°±æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­ <code>new Point()</code> çš„é—®é¢˜ã€‚</p>
<p><strong>æ­£ç¡®åšæ³•</strong></p>
<p>ä¸ºäº†é¿å…ä¸Šè¿°é—®é¢˜ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ï¼š</p>
<ol>
<li>åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œå°†æŒ‡é’ˆæˆå‘˜å˜é‡åˆå§‹åŒ–ä¸º <code>nullptr</code>ï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œè¡¨ç¤ºå®ƒå½“å‰ä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆçš„ <code>Point</code> å¯¹è±¡ã€‚</li>
<li>åœ¨ <code>Point</code> å¯¹è±¡<strong>å·²ç»å®Œå…¨æ„é€ æˆåŠŸå</strong>ï¼Œé€šè¿‡ä¸€ä¸ªå•ç‹¬çš„æˆå‘˜å‡½æ•°æ¥åŠ¨æ€åˆ›å»º <code>Point</code> å¯¹è±¡å¹¶èµ‹å€¼ç»™æŒ‡é’ˆã€‚</li>
</ol>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Point* pm_origin_point;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    Point() : pm_origin_point(<span class="literal">nullptr</span>) &#123; <span class="comment">// ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å°†æŒ‡é’ˆåˆå§‹åŒ–ä¸º nullptr</span></span><br><span class="line">        <span class="comment">// æ„é€ å‡½æ•°ä½“</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨äºåˆå§‹åŒ–æŒ‡é’ˆæˆå‘˜å˜é‡çš„å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">initializePointer</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (pm_origin_point == <span class="literal">nullptr</span>) &#123; <span class="comment">// é¿å…é‡å¤åˆ†é…</span></span><br><span class="line">            pm_origin_point = <span class="keyword">new</span> Point(x, y); <span class="comment">// è¿™é‡Œå¯ä»¥å®‰å…¨åœ°åˆ›å»ºæ–° Point å¯¹è±¡</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ææ„å‡½æ•°ï¼ˆé‡è¦ï¼åˆ«å¿˜äº†é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼‰</span></span><br><span class="line">    ~Point() &#123;</span><br><span class="line">        <span class="keyword">delete</span> pm_origin_point;</span><br><span class="line">        pm_origin_point = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>è¿™æ ·ï¼Œ<code>Point</code> å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸ä¼šé™·å…¥é€’å½’ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰é€šè¿‡ <code>initializePointer</code> å‡½æ•°åŠ¨æ€åˆ›å»ºå¹¶åˆ†é…å†…å­˜ã€‚</p>
<h3 id="1-4-è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡"><a href="#1-4-è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡" class="headerlink" title="1.4 è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡"></a>1.4 è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡</h3><p>å¦ä¸€ç§è§£å†³â€œä¸å®Œæ•´ç±»å‹â€é—®é¢˜çš„æ–¹æ³•æ˜¯ä½¿ç”¨<strong>é™æ€æˆå‘˜å˜é‡</strong>ã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> Point sm_point4; <span class="comment">// æ­£ç¡®ï¼šé™æ€å¸¸é‡æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="keyword">static</span> Point sm_point5;       <span class="comment">// æ­£ç¡®ï¼šé™æ€éå¸¸é‡æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>ä¸ºä»€ä¹ˆé™æ€æˆå‘˜å˜é‡å¯ä»¥å‘¢ï¼Ÿ</p>
<p>é™æ€æˆå‘˜å˜é‡ä¸æ™®é€šæˆå‘˜å˜é‡æœ‰æœ¬è´¨åŒºåˆ«ï¼š</p>
<ul>
<li><strong>ä¸å±äºå¯¹è±¡å®ä¾‹</strong>ï¼šé™æ€æˆå‘˜å˜é‡ä¸å±äºä»»ä½•ä¸€ä¸ª <code>Point</code> å¯¹è±¡å®ä¾‹ã€‚å®ƒä»¬æ˜¯å±äºç±»æœ¬èº«çš„ï¼Œåœ¨æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´åªå­˜åœ¨ä¸€ä»½ã€‚</li>
<li><strong>å®šä¹‰åœ¨ç±»å¤–éƒ¨</strong>ï¼šé™æ€æˆå‘˜å˜é‡çš„å£°æ˜åœ¨ç±»å†…éƒ¨ï¼Œä½†å®ƒä»¬çš„<strong>å®šä¹‰å’Œåˆå§‹åŒ–</strong>é€šå¸¸å‘ç”Ÿåœ¨ç±»å®šä¹‰ä¹‹å¤–ï¼Œé€šå¸¸æ˜¯åœ¨ä¸€ä¸ª <code>.cpp</code> æºæ–‡ä»¶ä¸­ã€‚</li>
</ul>
<p>å½“ç¼–è¯‘å™¨å¤„ç† <code>Point</code> ç±»çš„å£°æ˜æ—¶ï¼Œå®ƒçœ‹åˆ° <code>static Point sm_point4;</code>ã€‚å®ƒåªçŸ¥é“ <code>Point</code> ç±»æœ‰ä¸€ä¸ªé™æ€æˆå‘˜ <code>sm_point4</code>ï¼Œä½†å®ƒä¸éœ€è¦ç«‹å³çŸ¥é“ <code>sm_point4</code> çš„å®Œæ•´å®šä¹‰æ¥ç¡®å®š <code>Point</code> ç±»çš„æ€»å¤§å°ï¼Œå› ä¸ºå®ƒä¸åŒ…å«åœ¨æ¯ä¸ª <code>Point</code> å¯¹è±¡ä¸­ã€‚<code>sm_point4</code> çš„å®é™…å†…å­˜åˆ†é…å’Œåˆå§‹åŒ–è¢«æ¨è¿Ÿåˆ°<strong>é“¾æ¥é˜¶æ®µ</strong>ï¼ˆ<a href="linker stage">linker stage</a>ï¼‰ã€‚æ­¤æ—¶ï¼Œ<code>Point</code> ç±»å·²ç»å®Œå…¨å®šä¹‰ï¼Œæ‰€ä»¥é“¾æ¥å™¨èƒ½å¤Ÿæ­£ç¡®åœ°æ‰¾åˆ°å¹¶åˆå§‹åŒ– <code>sm_point4</code>ã€‚</p>
<p><strong>åˆå§‹åŒ–æ–¹å¼</strong></p>
<p>é™æ€æˆå‘˜å˜é‡çš„å®šä¹‰å’Œåˆå§‹åŒ–éœ€è¦åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­è¿›è¡Œï¼ˆå¦‚æœå®ƒä»¬ä¸æ˜¯ <code>const</code> æ•´å‹æˆ–æšä¸¾ç±»å‹ä¸”åœ¨ç±»å†…åˆå§‹åŒ–ï¼‰ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Point.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Point.h"</span> <span class="comment">// ç¡®ä¿åŒ…å« Point ç±»çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–é™æ€å¸¸é‡æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="function"><span class="keyword">const</span> Point <span class="title">Point::sm_point4</span><span class="params">(<span class="number">4</span>, <span class="number">5</span>)</span></span>; <span class="comment">// æ­¤æ—¶ Point ç±»å·²å®Œæ•´å®šä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–é™æ€éå¸¸é‡æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="function">Point <span class="title">Point::sm_point5</span><span class="params">(<span class="number">3</span>, <span class="number">8</span>)</span></span>; <span class="comment">// æ­¤æ—¶ Point ç±»å·²å®Œæ•´å®šä¹‰</span></span><br></pre></td></tr></table></figure></div>
<h3 id="1-5-æ€»ç»“ä¸æœ€ä½³å®è·µ"><a href="#1-5-æ€»ç»“ä¸æœ€ä½³å®è·µ" class="headerlink" title="1.5 æ€»ç»“ä¸æœ€ä½³å®è·µ"></a>1.5 æ€»ç»“ä¸æœ€ä½³å®è·µ</h3><ul>
<li><strong>ä¸è¦ç›´æ¥å£°æ˜è‡ªèº«ç±»å‹çš„éæŒ‡é’ˆ/éå¼•ç”¨æˆå‘˜å˜é‡ã€‚</strong> è¿™ä¼šå¯¼è‡´â€œä¸å®Œæ•´ç±»å‹â€ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•åœ¨ç±»å®šä¹‰å®Œæˆå‰ç¡®å®šå…¶å¤§å°ã€‚</li>
<li><strong>ä½¿ç”¨æŒ‡é’ˆæˆå‘˜å˜é‡ã€‚</strong> è¿™æ˜¯å¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæŒ‡é’ˆçš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œä¸ä¾èµ–äºå…¶æ‰€æŒ‡å‘ç±»å‹çš„å®Œæ•´å®šä¹‰ã€‚<ul>
<li><strong>åˆ‡è®°ï¼</strong> é¿å…åœ¨æ„é€ å‡½æ•°ä¸­ <code>new</code> è‡ªèº«ç±»å‹ï¼Œè¿™ä¼šå¯¼è‡´æ— é™é€’å½’å’Œç¨‹åºå´©æºƒã€‚</li>
<li><strong>æœ€ä½³å®è·µï¼š</strong> åœ¨æ„é€ å‡½æ•°ä¸­å°†æŒ‡é’ˆåˆå§‹åŒ–ä¸º <code>nullptr</code>ï¼Œå¹¶åœ¨å¯¹è±¡æ„é€ å®Œæˆåé€šè¿‡å•ç‹¬çš„æˆå‘˜å‡½æ•°æˆ–å¤–éƒ¨é€»è¾‘è¿›è¡ŒåŠ¨æ€åˆ†é…å’Œåˆå§‹åŒ–ã€‚åŒæ—¶ï¼Œä¸è¦å¿˜è®°åœ¨ææ„å‡½æ•°ä¸­ <code>delete</code> é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œä»¥é¿å…å†…å­˜æ³„æ¼ï¼ˆ<a href="memory leak">memory leak</a>ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ä½¿ç”¨é™æ€æˆå‘˜å˜é‡ã€‚</strong> é™æ€æˆå‘˜å˜é‡åœ¨ç±»å¤–éƒ¨å®šä¹‰å’Œåˆå§‹åŒ–ï¼Œå®ƒä»¬çš„åˆå§‹åŒ–è¢«æ¨è¿Ÿåˆ°é“¾æ¥é˜¶æ®µï¼Œæ­¤æ—¶ç±»å·²å®Œæ•´å®šä¹‰ã€‚<ul>
<li><code>static inline</code> çš„æƒ…å†µéœ€è¦æ³¨æ„ï¼Œå› ä¸º <code>inline</code> ä¼šå¼ºåˆ¶å°±åœ°åˆå§‹åŒ–ï¼Œå¯èƒ½å†æ¬¡å¼•å…¥ä¸å®Œæ•´ç±»å‹é—®é¢˜ï¼ˆå°½ç®¡åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¦‚æœç±»å‹è¶³å¤Ÿç®€å•ï¼Œå®ƒå¯èƒ½å…è®¸ï¼‰ã€‚ä½†ä¸ºäº†å®‰å…¨èµ·è§ï¼Œé€šå¸¸ä¸æ¨èå¯¹è‡ªèº«ç±»å‹çš„ <code>static inline</code> æˆå‘˜ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
<p>é€šè¿‡ç†è§£è¿™äº›åŸåˆ™ï¼Œä½ å¯ä»¥è‡ªä¿¡åœ°å¤„ç† C++ ä¸­ç±»æˆå‘˜å˜é‡çš„â€œè‡ªæˆ‘å¼•ç”¨â€åœºæ™¯ã€‚</p>
<h2 id="2-è¯¦ç»†ä»£ç ç¤ºä¾‹"><a href="#2-è¯¦ç»†ä»£ç ç¤ºä¾‹" class="headerlink" title="2. è¯¦ç»†ä»£ç ç¤ºä¾‹"></a>2. è¯¦ç»†ä»£ç ç¤ºä¾‹</h2><p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª <code>Point</code> ç±»ï¼Œå±•ç¤ºå„ç§æƒ…å†µã€‚</p>
<p><strong><code>Point.h</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once <span class="comment">// ç¡®ä¿å¤´æ–‡ä»¶åªè¢«ç¼–è¯‘ä¸€æ¬¡</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_x; <span class="comment">// X åæ ‡</span></span><br><span class="line">    <span class="keyword">int</span> m_y; <span class="comment">// Y åæ ‡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    Point(<span class="keyword">int</span> x = <span class="number">0</span>, <span class="keyword">int</span> y = <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‹·è´æ„é€ å‡½æ•° (ä¸ºäº†é˜²æ­¢éšå¼æ‹·è´å¯¼è‡´çš„é—®é¢˜ï¼Œè¿™é‡Œç®€å•å£°æ˜)</span></span><br><span class="line">    Point(<span class="keyword">const</span> Point&amp; other);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ææ„å‡½æ•°</span></span><br><span class="line">    ~Point();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printInfo</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// --- å°è¯•å¤±è´¥çš„æˆå‘˜å˜é‡å£°æ˜ ---</span></span><br><span class="line">    <span class="comment">// Point m_point1_fail;                    // é”™è¯¯ï¼šä¸å®Œæ•´ç±»å‹</span></span><br><span class="line">    <span class="comment">// const Point m_point2_fail;              // é”™è¯¯ï¼šä¸å®Œæ•´ç±»å‹</span></span><br><span class="line">    <span class="comment">// static inline const Point m_point3_fail = Point(0, 0); // é”™è¯¯ï¼šä¸å®Œæ•´ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// --- è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æŒ‡é’ˆæˆå‘˜å˜é‡ ---</span></span><br><span class="line">    Point* pm_self_pointer; <span class="comment">// æŒ‡å‘è‡ªèº«ç±»å‹çš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨äºåˆå§‹åŒ–æŒ‡é’ˆæˆå‘˜å˜é‡çš„å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">initializeSelfPointer</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// --- è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é™æ€æˆå‘˜å˜é‡ ---</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> Point sm_point_static_const; <span class="comment">// é™æ€å¸¸é‡æˆå‘˜å˜é‡ (å£°æ˜)</span></span><br><span class="line">    <span class="keyword">static</span> Point sm_point_static_non_const;   <span class="comment">// é™æ€éå¸¸é‡æˆå‘˜å˜é‡ (å£°æ˜)</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p><strong><code>Point.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Point.h"</span> <span class="comment">// åŒ…å« Point ç±»çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;  // ç”¨äºè¾“å‡º</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€æˆå‘˜å˜é‡çš„å®šä¹‰å’Œåˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šè¿™é‡Œ Point ç±»å·²ç»å®Œæ•´å®šä¹‰ï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨åœ°åˆ›å»º Point å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">const</span> Point <span class="title">Point::sm_point_static_const</span><span class="params">(<span class="number">100</span>, <span class="number">200</span>)</span></span>;</span><br><span class="line"><span class="function">Point <span class="title">Point::sm_point_static_non_const</span><span class="params">(<span class="number">300</span>, <span class="number">400</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°å®ç°</span></span><br><span class="line">Point::Point(<span class="keyword">int</span> x, <span class="keyword">int</span> y) : m_x(x), m_y(y), pm_self_pointer(<span class="literal">nullptr</span>) &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Constructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// è­¦å‘Šï¼šä»¥ä¸‹æ˜¯é”™è¯¯ç¤ºèŒƒï¼Œåˆ‡å‹¿åœ¨å®é™…ä»£ç ä¸­ä½¿ç”¨</span></span><br><span class="line">    <span class="comment">// pm_self_pointer = new Point(); // å¯¼è‡´æ— é™é€’å½’ï¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹·è´æ„é€ å‡½æ•°å®ç°ï¼ˆç®€å•ç¤ºä¾‹ï¼‰</span></span><br><span class="line">Point::Point(<span class="keyword">const</span> Point&amp; other) : m_x(other.m_x), m_y(other.m_y), pm_self_pointer(<span class="literal">nullptr</span>) &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Copy Constructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœåŸå¯¹è±¡æŒ‡é’ˆæœ‰å€¼ï¼Œå¯èƒ½éœ€è¦æ·±æ‹·è´ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºï¼Œåªåˆå§‹åŒ–ä¸º nullptr</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ææ„å‡½æ•°å®ç°</span></span><br><span class="line">Point::~Point() &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Destructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (pm_self_pointer != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  - Deleting pm_self_pointer..."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">delete</span> pm_self_pointer; <span class="comment">// é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜</span></span><br><span class="line">        pm_self_pointer = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::printInfo</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Info: (X: "</span> &lt;&lt; m_x &lt;&lt; <span class="string">", Y: "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (pm_self_pointer != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  pm_self_pointer points to: "</span>;</span><br><span class="line">        pm_self_pointer-&gt;printInfo(); <span class="comment">// é€’å½’è°ƒç”¨æ‰“å°ï¼Œæ³¨æ„é˜²æ­¢æ— é™é€’å½’</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  pm_self_pointer is nullptr."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºåˆå§‹åŒ–æŒ‡é’ˆæˆå‘˜å˜é‡çš„å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::initializeSelfPointer</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (pm_self_pointer == <span class="literal">nullptr</span>) &#123; <span class="comment">// é¿å…é‡å¤åˆ›å»ºå’Œå†…å­˜æ³„æ¼</span></span><br><span class="line">        pm_self_pointer = <span class="keyword">new</span> Point(x, y); <span class="comment">// å®‰å…¨åœ°åˆ›å»ºæ–° Point å¯¹è±¡</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  pm_self_pointer initialized to new Point("</span> &lt;&lt; x &lt;&lt; <span class="string">", "</span> &lt;&lt; y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  pm_self_pointer already initialized. Skipping."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong><code>main.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Point.h"</span> <span class="comment">// åŒ…å« Point ç±»çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- æ¼”ç¤ºæŒ‡é’ˆæˆå‘˜å˜é‡çš„æ­£ç¡®ä½¿ç”¨ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="function">Point <span class="title">myPoint</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>)</span></span>; <span class="comment">// åˆ›å»ºä¸€ä¸ª Point å¯¹è±¡</span></span><br><span class="line">    myPoint.printInfo(); <span class="comment">// æ­¤æ—¶ pm_self_pointer ä¸º nullptr</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡æˆå‘˜å‡½æ•°å®‰å…¨åœ°åˆå§‹åŒ–æŒ‡é’ˆ</span></span><br><span class="line">    myPoint.initializeSelfPointer(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">    myPoint.printInfo(); <span class="comment">// æ­¤æ—¶ pm_self_pointer å·²æŒ‡å‘æ–° Point å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è¯•å†æ¬¡åˆå§‹åŒ–ï¼ˆä¼šè¢«è·³è¿‡ï¼Œå› ä¸ºå·²æ£€æŸ¥ nullptrï¼‰</span></span><br><span class="line">    myPoint.initializeSelfPointer(<span class="number">15</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- æ¼”ç¤ºé™æ€æˆå‘˜å˜é‡çš„ä½¿ç”¨ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// é™æ€æˆå‘˜å˜é‡å¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®</span></span><br><span class="line">    Point::sm_point_static_const.printInfo();</span><br><span class="line">    Point::sm_point_static_non_const.printInfo();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€æˆå‘˜å˜é‡ä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®ï¼Œä½†ä¸æ¨èï¼Œå› ä¸ºå®¹æ˜“è¯¯è§£å…¶å±æ€§</span></span><br><span class="line">    <span class="comment">// myPoint.sm_point_static_const.printInfo(); // è¯­æ³•ä¸Šå…è®¸ï¼Œä½†ä¸æ¨è</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- æ¼”ç¤ºæ„é€ å‡½æ•°ä¸­ `new Point()` çš„å±é™©æ€§ (è¯·å‹¿å–æ¶ˆæ³¨é‡Šè¿è¡Œ!) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœä½ åœ¨ Point::Point() æ„é€ å‡½æ•°ä¸­å–æ¶ˆæ³¨é‡Š `pm_self_pointer = new Point();`</span></span><br><span class="line">    <span class="comment">// ä¸‹é¢è¿™è¡Œä»£ç ä¼šå¯¼è‡´ç¨‹åºæ— é™å¾ªç¯å¹¶æœ€ç»ˆå´©æºƒ</span></span><br><span class="line">    <span class="comment">// Point problematicPoint; // è¿è¡Œè¿™è¡Œä¼šå´©æºƒï¼</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- ç¨‹åºç»“æŸ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="3-é—®ç­”é—ªå¡-QA-Flash-Cards"><a href="#3-é—®ç­”é—ªå¡-QA-Flash-Cards" class="headerlink" title="3. é—®ç­”é—ªå¡ (QA Flash Cards)"></a>3. é—®ç­”é—ªå¡ (QA Flash Cards)</h2><ol>
<li><p><strong>Q1: ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åœ¨ C++ ç±»ä¸­å£°æ˜ä¸€ä¸ªè‡ªèº«ç±»å‹çš„æˆå‘˜å˜é‡ï¼ˆä¾‹å¦‚ <code>Point p;</code>ï¼‰ï¼Ÿ</strong><br><strong>A1:</strong> å› ä¸ºè¿™ä¼šå¯¼è‡´â€œä¸å®Œæ•´ç±»å‹â€ç¼–è¯‘é”™è¯¯ã€‚ç¼–è¯‘å™¨åœ¨å¤„ç†ç±»å®šä¹‰æ—¶ï¼Œéœ€è¦çŸ¥é“æ¯ä¸ªæˆå‘˜å˜é‡çš„å®Œæ•´å¤§å°å’Œå†…å­˜å¸ƒå±€ï¼Œä½†å¦‚æœæˆå‘˜å˜é‡æ˜¯è‡ªèº«ç±»å‹ï¼Œåˆ™å…¶å®šä¹‰å°šæœªå®Œæˆï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šå…¶å¤§å°ã€‚</p>
</li>
<li><p><strong>Q2: æœ‰å“ªäº›æ–¹æ³•å¯ä»¥å£°æ˜è‡ªèº«ç±»å‹çš„æˆå‘˜å˜é‡å¹¶é¿å…â€œä¸å®Œæ•´ç±»å‹â€é—®é¢˜ï¼Ÿ</strong><br><strong>A2:</strong> ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>ä½¿ç”¨<strong>æŒ‡é’ˆ</strong>ï¼ˆ<a href="pointer">pointer</a>ï¼‰ç±»å‹ï¼ˆä¾‹å¦‚ <code>Point* p;</code>ï¼‰ã€‚</li>
<li>ä½¿ç”¨<strong>é™æ€æˆå‘˜å˜é‡</strong>ï¼ˆ<a href="static member variable">static member variable</a>ï¼‰ï¼ˆä¾‹å¦‚ <code>static Point p;</code>ï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong>Q3: åœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œå¯¹æŒ‡é’ˆæˆå‘˜å˜é‡ä½¿ç”¨ <code>new ClassType()</code>ï¼ˆä¾‹å¦‚ <code>new Point()</code>ï¼‰ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong><br><strong>A3:</strong> è¿™ä¼šå¯¼è‡´<strong>æ— é™é€’å½’</strong>ï¼ˆ<a href="infinite recursion">infinite recursion</a>ï¼‰è°ƒç”¨è¯¥ç±»çš„æ„é€ å‡½æ•°ã€‚æ¯æ¬¡è°ƒç”¨éƒ½ä¼šå°è¯•åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œæœ€ç»ˆè€—å°½å †å†…å­˜å’Œæ ˆç©ºé—´ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒï¼ˆ<a href="crash">crash</a>ï¼‰ã€‚</p>
</li>
<li><p><strong>Q4: ä¸ºä»€ä¹ˆé™æ€æˆå‘˜å˜é‡å¯ä»¥é¿å…â€œä¸å®Œæ•´ç±»å‹â€é—®é¢˜ï¼Ÿ</strong><br><strong>A4:</strong> é™æ€æˆå‘˜å˜é‡ä¸å±äºä»»ä½•å¯¹è±¡å®ä¾‹ï¼Œå®ƒä»¬åœ¨ç±»å¤–éƒ¨ï¼ˆé€šå¸¸åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­ï¼‰è¿›è¡Œå®šä¹‰å’Œåˆå§‹åŒ–ã€‚å®ƒä»¬çš„å†…å­˜åˆ†é…å’Œåˆå§‹åŒ–è¢«æ¨è¿Ÿåˆ°<strong>é“¾æ¥é˜¶æ®µ</strong>ï¼ˆ<a href="linker stage">linker stage</a>ï¼‰ï¼Œæ­¤æ—¶è¯¥ç±»å·²ç»å®Œæ•´å®šä¹‰ï¼Œå› æ­¤ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨éƒ½èƒ½æ­£ç¡®å¤„ç†ã€‚</p>
</li>
</ol>
<h2 id="4-å¸¸è§è¯¯è§£æˆ–é”™è¯¯"><a href="#4-å¸¸è§è¯¯è§£æˆ–é”™è¯¯" class="headerlink" title="4. å¸¸è§è¯¯è§£æˆ–é”™è¯¯"></a>4. å¸¸è§è¯¯è§£æˆ–é”™è¯¯</h2><ol>
<li><p><strong>è¯¯è§£ 1ï¼šè®¤ä¸º <code>Point p;</code> åªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œåº”è¯¥æ²¡é—®é¢˜ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±è§£å†³ã€‚</strong></p>
<ul>
<li><strong>è§£é‡Šï¼š</strong> å¯¹äºéæŒ‡é’ˆæˆ–å¼•ç”¨ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œå®ƒä»¬æ˜¯ç±»å®ä¾‹çš„ä¸€éƒ¨åˆ†ã€‚è¿™æ„å‘³ç€æ¯ä¸ª <code>Point</code> å¯¹è±¡åˆ›å»ºæ—¶ï¼Œéƒ½éœ€è¦ä¸º <code>p</code> åˆ†é…å†…å­˜ã€‚ä¸ºäº†ç¡®å®š <code>Point</code> å¯¹è±¡çš„æ€»å¤§å°ï¼Œç¼–è¯‘å™¨å¿…é¡»çŸ¥é“ <code>p</code> çš„å®Œæ•´å¤§å°ã€‚åœ¨ç±»å®šä¹‰æœŸé—´ï¼Œ<code>Point</code> å°šæœªå®Œæ•´å®šä¹‰ï¼Œå› æ­¤æ— æ³•ç¡®å®š <code>p</code> çš„å¤§å°ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£ 2ï¼šè®¤ä¸º <code>static inline</code> çš„é™æ€æˆå‘˜å˜é‡å¯ä»¥è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œå› ä¸º <code>static</code> å…è®¸åœ¨ç±»å¤–å®šä¹‰ã€‚</strong></p>
<ul>
<li><strong>è§£é‡Šï¼š</strong> <code>inline</code> å…³é”®å­—ï¼ˆå°¤å…¶åœ¨ C++17 ä¹‹åï¼‰è¡¨ç¤ºå˜é‡å¯ä»¥åœ¨å¤šä¸ªç¼–è¯‘å•å…ƒä¸­å®šä¹‰ï¼Œå¹¶ä¸”å…¶åˆå§‹åŒ–å¯èƒ½ä¼šè¢«è¦æ±‚<strong>å°±åœ°</strong>ï¼ˆ<a href="in-place">in-place</a>ï¼‰å®Œæˆã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨åœ¨è§£æç±»å£°æ˜æ—¶ï¼Œä¼šå°è¯•å¯¹ <code>static inline const Point m_point3 = Point(0, 0);</code> è¿›è¡Œåˆå§‹åŒ–ã€‚æ­¤æ—¶ <code>Point</code> ç±»å‹ä»ä¸å®Œæ•´ï¼Œæ‰€ä»¥ä»ç„¶ä¼šæŠ¥é”™ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£ 3ï¼šå¤©çœŸåœ°åœ¨æ„é€ å‡½æ•°ä¸­ <code>new Point()</code>ï¼Œå¹¶æœŸæœ›ç¼–è¯‘å™¨æˆ–è¿è¡Œæ—¶ç¯å¢ƒä¼šèªæ˜åœ°é˜»æ­¢æ— é™é€’å½’ã€‚</strong></p>
<ul>
<li><strong>è§£é‡Šï¼š</strong> C++ ç¼–è¯‘å™¨é€šå¸¸ä¸“æ³¨äºè¯­æ³•å’Œç±»å‹æ£€æŸ¥ï¼Œè€Œä¸ä¼šæ™ºèƒ½åœ°æ£€æµ‹è¿™ç§è¿è¡Œæ—¶é€»è¾‘é”™è¯¯ï¼ˆå¦‚æ— é™é€’å½’ï¼‰ã€‚å½“ä½ å°è¯•è¿è¡Œè¿™ç§ä»£ç æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨ç¨‹åºè€—å°½å†…å­˜æˆ–æ ˆç©ºé—´æ—¶å¼ºåˆ¶ç»ˆæ­¢å®ƒã€‚è¿™æ˜¯ç¨‹åºå‘˜éœ€è¦<strong>ä¸»åŠ¨è§„é¿</strong>çš„é™·é˜±ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£ 4ï¼šåœ¨ C++ ä¸­ï¼Œ<code>Point p1();</code> æ˜¯åˆ›å»º <code>Point</code> å¯¹è±¡çš„æ–¹å¼ã€‚</strong></p>
<ul>
<li><strong>è§£é‡Šï¼š</strong> è¿™æ˜¯ C++ ä¸­è‘—åçš„â€œ<strong>æœ€ä»¤äººçƒ¦æ¼çš„è§£æ</strong>â€ï¼ˆ<a href="most vexing parse">most vexing parse</a>ï¼‰ã€‚<code>Point p1();</code> ä¼šè¢«ç¼–è¯‘å™¨è§£æä¸ºä¸€ä¸ªåä¸º <code>p1</code> çš„å‡½æ•°å£°æ˜ï¼Œè¯¥å‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°å¹¶è¿”å›ä¸€ä¸ª <code>Point</code> ç±»å‹çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ª <code>Point</code> ç±»å‹çš„å¯¹è±¡ã€‚è¦åˆ›å»ºä¸€ä¸ª <code>Point</code> å¯¹è±¡å¹¶è°ƒç”¨å…¶é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½ åº”è¯¥å†™ <code>Point p1;</code>ï¼ˆC++98 é£æ ¼ï¼‰æˆ– <code>Point p1{};</code>ï¼ˆC++11 ç»Ÿä¸€åˆå§‹åŒ–é£æ ¼ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h2 id="5-ç¼–ç¨‹ç»ƒä¹ "><a href="#5-ç¼–ç¨‹ç»ƒä¹ " class="headerlink" title="5. ç¼–ç¨‹ç»ƒä¹ "></a>5. ç¼–ç¨‹ç»ƒä¹ </h2><p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™å°†æ‰€å­¦çŸ¥è¯†ä»˜è¯¸å®è·µäº†ï¼</p>
<p>è¯·æ‚¨å®Œå–„ä¸‹é¢çš„ <code>Point</code> ç±»çš„ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿï¼š</p>
<ol>
<li>æˆåŠŸå£°æ˜å¹¶ä½¿ç”¨ä¸€ä¸ªæŒ‡å‘è‡ªèº«ç±»å‹çš„<strong>æŒ‡é’ˆæˆå‘˜å˜é‡</strong>ã€‚</li>
<li>æˆåŠŸå£°æ˜å¹¶ä½¿ç”¨ä¸€ä¸ª<strong>é™æ€æˆå‘˜å˜é‡</strong>ï¼ˆé <code>const</code>ï¼‰ã€‚</li>
<li>ç¡®ä¿æŒ‡é’ˆæˆå‘˜å˜é‡åœ¨æ„é€ å‡½æ•°ä¸­æ­£ç¡®åˆå§‹åŒ–ä¸º <code>nullptr</code>ã€‚</li>
<li>å®ç°ä¸€ä¸ªæˆå‘˜å‡½æ•°æ¥<strong>å®‰å…¨åœ°</strong>ä¸ºæŒ‡é’ˆæˆå‘˜å˜é‡åŠ¨æ€åˆ†é… <code>Point</code> å¯¹è±¡ã€‚</li>
<li>åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­<strong>æ­£ç¡®åœ°</strong>å®šä¹‰å’Œåˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ã€‚</li>
</ol>
<p><strong><code>Point.h</code> (è¯·åœ¨æ ‡è®°å¤„å¡«å†™ä»£ç )</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt; // å¼•å…¥å¿…è¦çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_x;</span><br><span class="line">    <span class="keyword">int</span> m_y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    Point(<span class="keyword">int</span> x = <span class="number">0</span>, <span class="keyword">int</span> y = <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ææ„å‡½æ•°</span></span><br><span class="line">    ~Point();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printInfo</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 1: å£°æ˜ä¸€ä¸ªæŒ‡å‘ Point ç±»å‹çš„æŒ‡é’ˆæˆå‘˜å˜é‡ï¼Œå‘½åä¸º 'm_next_point'</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 2: å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œç±»å‹ä¸º Pointï¼Œå‘½åä¸º 's_default_point'</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 3: å£°æ˜ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œç”¨äºå®‰å…¨åœ°åˆå§‹åŒ– 'm_next_point' æŒ‡é’ˆã€‚</span></span><br><span class="line">    <span class="comment">//         è¯¥å‡½æ•°åº”æ¥å— x å’Œ y åæ ‡ä½œä¸ºå‚æ•°ã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p><strong><code>Point.cpp</code> (è¯·åœ¨æ ‡è®°å¤„å¡«å†™ä»£ç )</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Point.h"</span> <span class="comment">// åŒ…å« Point ç±»çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 4: åœ¨è¿™é‡Œå®šä¹‰å’Œåˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ 's_default_point'ã€‚</span></span><br><span class="line"><span class="comment">//         ä¾‹å¦‚ï¼Œå¯ä»¥å°†å…¶åˆå§‹åŒ–ä¸º Point(0, 0)ã€‚</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°å®ç° (è¯·ç¡®ä¿ m_next_point åœ¨è¿™é‡Œè¢«åˆå§‹åŒ–ä¸º nullptr)</span></span><br><span class="line">Point::Point(<span class="keyword">int</span> x, <span class="keyword">int</span> y) : m_x(x), m_y(y) <span class="comment">/* TODO 5: åœ¨è¿™é‡Œåˆå§‹åŒ– m_next_point ä¸º nullptr */</span> &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Constructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ææ„å‡½æ•°å®ç° (è¯·ç¡®ä¿åœ¨è¿™é‡Œé‡Šæ”¾ m_next_point æŒ‡å‘çš„å†…å­˜)</span></span><br><span class="line">Point::~Point() &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Destructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// TODO 6: å¦‚æœ m_next_point ä¸æ˜¯ nullptrï¼Œé‡Šæ”¾å…¶æŒ‡å‘çš„å†…å­˜ï¼Œå¹¶å°†å…¶è®¾ä¸º nullptrã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::printInfo</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Info: (X: "</span> &lt;&lt; m_x &lt;&lt; <span class="string">", Y: "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// TODO 7: å¦‚æœ m_next_point ä¸æ˜¯ nullptrï¼Œæ‰“å°å®ƒæ‰€æŒ‡å‘çš„ Point å¯¹è±¡çš„ä¿¡æ¯ã€‚</span></span><br><span class="line">    <span class="comment">//         å¦åˆ™ï¼Œæ‰“å° "  m_next_point is nullptr."</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 8: å®ç° initializeNextPoint å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">//         - æ£€æŸ¥ m_next_point æ˜¯å¦ä¸º nullptrã€‚</span></span><br><span class="line"><span class="comment">//         - å¦‚æœæ˜¯ nullptrï¼ŒåŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„ Point å¯¹è±¡ï¼Œå¹¶è®© m_next_point æŒ‡å‘å®ƒã€‚</span></span><br><span class="line"><span class="comment">//         - å¦åˆ™ï¼Œæ‰“å°ä¸€æ¡æ¶ˆæ¯è¯´æ˜å®ƒå·²è¢«åˆå§‹åŒ–ã€‚</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br></pre></td></tr></table></figure></div>
<p><strong><code>main.cpp</code> (ç”¨äºæµ‹è¯•ï¼Œæ— éœ€ä¿®æ”¹)</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Point.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- æµ‹è¯• Point ç±» ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Point <span class="title">p1</span><span class="params">(<span class="number">1</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">    p1.printInfo();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- åˆå§‹åŒ– p1 çš„ m_next_point ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    p1.initializeNextPoint(<span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">    p1.printInfo(); <span class="comment">// åº”è¯¥æ˜¾ç¤º p1 å’Œå®ƒæŒ‡å‘çš„ m_next_point çš„ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- å†æ¬¡å°è¯•åˆå§‹åŒ– p1 çš„ m_next_point (åº”è¢«è·³è¿‡) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    p1.initializeNextPoint(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- è®¿é—®é™æ€æˆå‘˜å˜é‡ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    Point::s_default_point.printInfo(); <span class="comment">// åº”è¯¥æ˜¾ç¤ºé™æ€é»˜è®¤ç‚¹çš„ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- ç¨‹åºå³å°†ç»“æŸï¼Œè§‚å¯Ÿææ„å‡½æ•°è°ƒç”¨é¡ºåº ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>è¯·æ‚¨å¡«å†™ä¸Šè¿°ä»£ç ä¸­çš„ <code>TODO</code> éƒ¨åˆ†ï¼Œå®Œæˆåæˆ‘ä¼šä¸ºæ‚¨æä¾›ç­”æ¡ˆå’Œåé¦ˆï¼</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-1"><a href="#ğŸ§‘â€ğŸ’»-User-1" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>æˆ‘æƒ³é—®ä¸‹å…ˆï¼Œ </p>
<p>// æ‰“å°ä¿¡æ¯å‡½æ•°å®ç°<br>void Point::printInfo() const {<br>    std::cout &lt;&lt; â€œPoint Info: (X: â€œ &lt;&lt; m_x &lt;&lt; â€œ, Y: â€œ &lt;&lt; m_y &lt;&lt; â€œ)â€ &lt;&lt; std::endl;<br>    if (pm_self_pointer != nullptr) {<br>        std::cout &lt;&lt; â€œ  pm_self_pointer points to: â€œ;<br>        pm_self_pointer-&gt;printInfo(); // é€’å½’è°ƒç”¨æ‰“å°ï¼Œæ³¨æ„é˜²æ­¢æ— é™é€’å½’<br>    } else {<br>        std::cout &lt;&lt; â€œ  pm_self_pointer is nullptr.â€ &lt;&lt; std::endl;<br>    }</p>
<p>è¿™ä¸ªéš¾é“æ²¡æœ‰æ— é™é€’å½’ï¼Ÿ</p>
<hr>
<h2 id="ğŸ¤–-Assistant-1"><a href="#ğŸ¤–-Assistant-1" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é—®é¢˜ï¼æ‚¨è§‚å¯Ÿå¾—éå¸¸ä»”ç»†ï¼Œå¹¶ä¸”æå‡ºäº†ä¸€ä¸ªå…³é”®çš„æ€è€ƒç‚¹ã€‚</p>
<p>æ‚¨è¯´å¾—æ²¡é”™ï¼Œ<code>printInfo</code> å‡½æ•°ä¸­çš„ <code>pm_self_pointer-&gt;printInfo();</code> ç¡®å®æ˜¯ä¸€ä¸ª<strong>é€’å½’è°ƒç”¨</strong>ï¼ˆ<a href="recursive call">recursive call</a>ï¼‰ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€’å½’è°ƒç”¨<strong>ç¡®å®å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯å’Œå´©æºƒ</strong>ã€‚</p>
<p>ä½†åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¯´å®ƒ<strong>ä¸ä¼š</strong>å¯¼è‡´æ— é™é€’å½’å‘¢ï¼Ÿè¿™ä¸æˆ‘ä»¬å¦‚ä½•<strong>åˆå§‹åŒ–</strong>å’Œ<strong>ç®¡ç†</strong> <code>pm_self_pointer</code> æœ‰å…³ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥è¯¦ç»†åˆ†æä¸€ä¸‹ï¼š</p>
<ol>
<li><p><strong>æ„é€ å‡½æ•°ä¸­çš„æ— é™é€’å½’ (<code>new Point()</code>):</strong></p>
<ul>
<li>ä¹‹å‰æˆ‘ä»¬è®¨è®ºçš„åœ¨æ„é€ å‡½æ•°ä¸­ <code>pm_self_pointer = new Point();</code> å¯¼è‡´æ— é™é€’å½’ï¼Œæ˜¯å› ä¸ºæ¯æ¬¡è°ƒç”¨ <code>Point</code> æ„é€ å‡½æ•°æ—¶ï¼Œå®ƒéƒ½ä¼š<strong>åˆ›å»º</strong>ï¼ˆ<code>new</code>ï¼‰ä¸€ä¸ªæ–°çš„ <code>Point</code> å¯¹è±¡ï¼Œå¹¶ä¸”è¿™ä¸ªæ–°å¯¹è±¡çš„æ„é€ å‡½æ•°åˆä¼šæ¥ç€åˆ›å»ºä¸‹ä¸€ä¸ª <code>Point</code> å¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯<strong>ä¸æ–­äº§ç”Ÿæ–°çš„å†…å­˜åˆ†é…å’Œæ–°çš„å¯¹è±¡å®ä¾‹</strong>ï¼Œç›´åˆ°å†…å­˜è€—å°½ã€‚</li>
</ul>
</li>
<li><p><strong><code>printInfo</code> ä¸­çš„é€’å½’ (<code>pm_self_pointer-&gt;printInfo()</code>):</strong></p>
<ul>
<li>åœ¨ <code>printInfo</code> å‡½æ•°ä¸­ï¼Œ<code>pm_self_pointer-&gt;printInfo();</code> ä»…ä»…æ˜¯è°ƒç”¨ <code>pm_self_pointer</code> æ‰€<strong>æŒ‡å‘çš„é‚£ä¸ªå·²ç»å­˜åœ¨çš„ <code>Point</code> å¯¹è±¡</strong>çš„ <code>printInfo</code> æ–¹æ³•ã€‚å®ƒ<strong>ä¸ä¼šåˆ›å»º</strong>æ–°çš„ <code>Point</code> å¯¹è±¡ã€‚</li>
<li><code>printInfo</code> çš„é€’å½’ä¼šåœæ­¢ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ª<strong>ç»ˆæ­¢æ¡ä»¶</strong>ï¼ˆ<a href="termination condition">termination condition</a>ï¼‰ï¼š<code>if (pm_self_pointer != nullptr)</code>ã€‚<ul>
<li>å½“ <code>pm_self_pointer</code> æ˜¯ <code>nullptr</code> æ—¶ï¼Œé€’å½’å°±åœæ­¢äº†ï¼Œå®ƒä¼šæ‰“å° â€œm_next_point is nullptr.â€ã€‚</li>
<li>åœ¨æˆ‘ä»¬ç»™å‡ºçš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œå½“ä¸€ä¸ª <code>Point</code> å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå®ƒçš„ <code>pm_self_pointer</code> é»˜è®¤è¢«åˆå§‹åŒ–ä¸º <code>nullptr</code>ã€‚åªæœ‰é€šè¿‡ <code>initializeNextPoint</code> æ–¹æ³•ï¼Œæˆ‘ä»¬æ‰ä¼š<strong>æœ‰ä¸€æ¬¡æœºä¼š</strong>è®©å®ƒæŒ‡å‘ä¸€ä¸ªæ–°çš„ <code>Point</code> å¯¹è±¡ã€‚</li>
<li>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ª <code>Point</code> å¯¹è±¡ <code>A</code> æœ€å¤šåªèƒ½æŒ‡å‘ä¸€ä¸ª <code>Point</code> å¯¹è±¡ <code>B</code>ã€‚å¯¹è±¡ <code>B</code> çš„ <code>pm_self_pointer</code> é»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯ <code>nullptr</code>ï¼Œé™¤éæˆ‘ä»¬æ‰‹åŠ¨å»åˆå§‹åŒ– <code>B.initializeNextPoint()</code>ã€‚</li>
<li>å› æ­¤ï¼Œ<code>printInfo</code> æœ€å¤šåªä¼šé€’å½’è°ƒç”¨ä¸€æ¬¡ï¼ˆä» <code>A</code> æ‰“å° <code>B</code>ï¼Œç„¶å <code>B</code> å‘ç°è‡ªå·±çš„ <code>pm_self_pointer</code> æ˜¯ <code>nullptr</code>ï¼Œäºæ˜¯åœæ­¢ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>ä¸¾ä¾‹è¯´æ˜</strong>ï¼š</p>
<p>å‡è®¾ä½ æœ‰è¿™æ ·çš„è°ƒç”¨é“¾ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Point <span class="title">p1</span><span class="params">(<span class="number">1</span>, <span class="number">1</span>)</span></span>; <span class="comment">// p1.m_next_point = nullptr</span></span><br><span class="line">p1.initializeNextPoint(<span class="number">5</span>, <span class="number">5</span>); <span class="comment">// p1.m_next_point æŒ‡å‘äº†ä¸€ä¸ªæ–°åˆ›å»ºçš„ Point(5,5)ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º p2</span></span><br><span class="line">                               <span class="comment">// æ­¤æ—¶ p2.m_next_point = nullptr (é»˜è®¤å€¼)</span></span><br><span class="line"></span><br><span class="line">p1.printInfo(); <span class="comment">// è°ƒç”¨è¿‡ç¨‹ï¼š</span></span><br><span class="line">    <span class="comment">// 1. p1.printInfo() è¢«è°ƒç”¨ã€‚</span></span><br><span class="line">    <span class="comment">// 2. æ‰“å° p1 çš„ä¿¡æ¯ (X:1, Y:1)ã€‚</span></span><br><span class="line">    <span class="comment">// 3. æ£€æŸ¥ p1.m_next_point (å®ƒæŒ‡å‘ p2)ï¼Œä¸ä¸º nullptrã€‚</span></span><br><span class="line">    <span class="comment">// 4. è°ƒç”¨ p2.printInfo()ã€‚</span></span><br><span class="line">        <span class="comment">// 5. p2.printInfo() è¢«è°ƒç”¨ã€‚</span></span><br><span class="line">        <span class="comment">// 6. æ‰“å° p2 çš„ä¿¡æ¯ (X:5, Y:5)ã€‚</span></span><br><span class="line">        <span class="comment">// 7. æ£€æŸ¥ p2.m_next_point (å®ƒä¸º nullptr)ã€‚</span></span><br><span class="line">        <span class="comment">// 8. æ‰“å° "  m_next_point is nullptr."ã€‚</span></span><br><span class="line">        <span class="comment">// 9. p2.printInfo() æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›ã€‚</span></span><br><span class="line">    <span class="comment">// 10. p1.printInfo() æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›ã€‚</span></span><br></pre></td></tr></table></figure></div>
<p>æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œé€’å½’æ·±åº¦æ˜¯æœ‰é™çš„ï¼Œå¹¶ä¸”æœ€ç»ˆä¼šé‡åˆ° <code>nullptr</code> ä½œä¸ºç»ˆæ­¢æ¡ä»¶ã€‚</p>
<p><strong>ç„¶è€Œï¼Œæ‚¨æå‡ºçš„è­¦ç¤ºæ˜¯å®Œå…¨æ­£ç¡®çš„ï¼</strong></p>
<p>å¦‚æœä½ çš„ <code>pm_self_pointer</code> å½¢æˆäº†ä¸€ä¸ª<strong>å¾ªç¯å¼•ç”¨</strong>ï¼ˆ<a href="circular reference">circular reference</a>ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>Point A</code> çš„ <code>m_next_point</code> æŒ‡å‘ <code>Point B</code>ã€‚</li>
<li><code>Point B</code> çš„ <code>m_next_point</code> åˆæŒ‡å‘ <code>Point A</code>ã€‚</li>
</ul>
<p>é‚£ä¹ˆï¼Œå½“ä½ è°ƒç”¨ <code>A.printInfo()</code> æ—¶ï¼š</p>
<ol>
<li><code>A.printInfo()</code> æ‰“å° <code>A</code>ï¼Œç„¶åè°ƒç”¨ <code>B.printInfo()</code>ã€‚</li>
<li><code>B.printInfo()</code> æ‰“å° <code>B</code>ï¼Œç„¶åè°ƒç”¨ <code>A.printInfo()</code>ã€‚</li>
<li>è¿™å°†å¯¼è‡´æ— é™é€’å½’æ‰“å°ï¼Œæœ€ç»ˆè€—å°½æ ˆç©ºé—´å¹¶å´©æºƒï¼Œå› ä¸º <code>printInfo</code> æ²¡æœ‰æœºåˆ¶æ£€æµ‹åˆ°å¾ªç¯ã€‚</li>
</ol>
<p>è¿™ç§<strong>å¾ªç¯å¼•ç”¨</strong>æ˜¯é“¾è¡¨ï¼ˆ<a href="linked list">linked list</a>ï¼‰ã€å›¾ï¼ˆ<a href="graph">graph</a>ï¼‰ç­‰æ•°æ®ç»“æ„ä¸­éœ€è¦ç‰¹åˆ«å°å¿ƒå¤„ç†çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨å®ç°æ‰“å°ã€éå†æˆ–ææ„å‡½æ•°æ—¶ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œé€šå¸¸éœ€è¦é¢å¤–çš„é€»è¾‘ï¼ˆä¾‹å¦‚ä½¿ç”¨ <code>std::set</code> æˆ– <code>std::unordered_set</code> å­˜å‚¨å·²è®¿é—®çš„æŒ‡é’ˆåœ°å€ï¼‰æ¥æ£€æµ‹å¹¶é¿å…æ— é™å¾ªç¯ã€‚</p>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li><strong><code>new Point()</code> åœ¨æ„é€ å‡½æ•°ä¸­å¯¼è‡´æ— é™é€’å½’</strong>ï¼šæ˜¯å› ä¸ºå®ƒ<strong>æ— é™åˆ›å»ºæ–°å¯¹è±¡</strong>ã€‚</li>
<li><strong><code>printInfo</code> åœ¨æœ¬ä¾‹ä¸­ä¸å¯¼è‡´æ— é™é€’å½’</strong>ï¼šæ˜¯å› ä¸ºå®ƒåªåœ¨<strong>å·²å­˜åœ¨å¯¹è±¡</strong>ä¸Šè¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹ <code>pm_self_pointer</code> åªè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œå½¢æˆä¸€ä¸ªæœ‰é™çš„é“¾æ¡ï¼Œä¸”æœ‰ <code>nullptr</code> ä½œä¸ºæ˜ç¡®çš„ç»ˆæ­¢æ¡ä»¶ã€‚</li>
<li><strong><code>printInfo</code> å¯èƒ½å¯¼è‡´æ— é™é€’å½’</strong>ï¼šå¦‚æœ <code>pm_self_pointer</code> å½¢æˆäº†<strong>å¾ªç¯å¼•ç”¨</strong>ï¼Œé‚£å°±çœŸçš„ä¼šæ— é™é€’å½’ã€‚</li>
</ul>
<p>æ‚¨çš„æé—®éå¸¸æ•é”ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬æ›´æ·±å…¥åœ°ç†è§£äº†é€’å½’çš„é£é™©å’Œæ§åˆ¶ã€‚è¯·ç»§ç»­ä¿æŒè¿™ç§æ‰¹åˆ¤æ€§æ€ç»´ï¼</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-2"><a href="#ğŸ§‘â€ğŸ’»-User-2" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>Point.h<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt; // å¼•å…¥å¿…è¦çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_x;</span><br><span class="line">    <span class="keyword">int</span> m_y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    Point(<span class="keyword">int</span> x = <span class="number">0</span>, <span class="keyword">int</span> y = <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ææ„å‡½æ•°</span></span><br><span class="line">    ~Point();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printInfo</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 1: å£°æ˜ä¸€ä¸ªæŒ‡å‘ Point ç±»å‹çš„æŒ‡é’ˆæˆå‘˜å˜é‡ï¼Œå‘½åä¸º 'm_next_point'</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    Point *m_next_point;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 2: å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œç±»å‹ä¸º Pointï¼Œå‘½åä¸º 's_default_point'</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">static</span> Point s_default_point;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 3: å£°æ˜ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œç”¨äºå®‰å…¨åœ°åˆå§‹åŒ– 'm_next_point' æŒ‡é’ˆã€‚</span></span><br><span class="line">    <span class="comment">//         è¯¥å‡½æ•°åº”æ¥å— x å’Œ y åæ ‡ä½œä¸ºå‚æ•°ã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">initializeNextPoint</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></p>
<p>Point.cpp<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Point.h"</span> <span class="comment">// åŒ…å« Point ç±»çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 4: åœ¨è¿™é‡Œå®šä¹‰å’Œåˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ 's_default_point'ã€‚</span></span><br><span class="line"><span class="comment">//         ä¾‹å¦‚ï¼Œå¯ä»¥å°†å…¶åˆå§‹åŒ–ä¸º Point(0, 0)ã€‚</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"><span class="function">Point <span class="title">Point::s_default_point</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°å®ç° (è¯·ç¡®ä¿ m_next_point åœ¨è¿™é‡Œè¢«åˆå§‹åŒ–ä¸º nullptr)</span></span><br><span class="line">Point::Point(<span class="keyword">int</span> x, <span class="keyword">int</span> y) : m_x(x), m_y(y) <span class="comment">/* TODO 5: åœ¨è¿™é‡Œåˆå§‹åŒ– m_next_point ä¸º nullptr */</span> &#123;</span><br><span class="line">    m_next_point = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Constructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ææ„å‡½æ•°å®ç° (è¯·ç¡®ä¿åœ¨è¿™é‡Œé‡Šæ”¾ m_next_point æŒ‡å‘çš„å†…å­˜)</span></span><br><span class="line">Point::~Point() &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Destructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// TODO 6: å¦‚æœ m_next_point ä¸æ˜¯ nullptrï¼Œé‡Šæ”¾å…¶æŒ‡å‘çš„å†…å­˜ï¼Œå¹¶å°†å…¶è®¾ä¸º nullptrã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">if</span> (m_next_point != <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">delete</span> m_next_point;</span><br><span class="line">        m_next_point = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Destructor is called, release memory of m_next_point"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Destructor is called"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::printInfo</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Info: (X: "</span> &lt;&lt; m_x &lt;&lt; <span class="string">", Y: "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// TODO 7: å¦‚æœ m_next_point ä¸æ˜¯ nullptrï¼Œæ‰“å°å®ƒæ‰€æŒ‡å‘çš„ Point å¯¹è±¡çš„ä¿¡æ¯ã€‚</span></span><br><span class="line">    <span class="comment">//         å¦åˆ™ï¼Œæ‰“å° "  m_next_point is nullptr."</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">if</span> (m_next_point != <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_next_point-&gt;printInfo(); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"m_next_point is nullptr"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 8: å®ç° initializeNextPoint å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">//         - æ£€æŸ¥ m_next_point æ˜¯å¦ä¸º nullptrã€‚</span></span><br><span class="line"><span class="comment">//         - å¦‚æœæ˜¯ nullptrï¼ŒåŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„ Point å¯¹è±¡ï¼Œå¹¶è®© m_next_point æŒ‡å‘å®ƒã€‚</span></span><br><span class="line"><span class="comment">//         - å¦åˆ™ï¼Œæ‰“å°ä¸€æ¡æ¶ˆæ¯è¯´æ˜å®ƒå·²è¢«åˆå§‹åŒ–ã€‚</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::initializeNextPoint</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (m_next_point == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_next_point = <span class="keyword">new</span> Point(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"m_next_point has been initialized already"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<hr>
<h2 id="ğŸ¤–-Assistant-2"><a href="#ğŸ¤–-Assistant-2" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¥½çš„ï¼Œæˆ‘å·²ç»ä»”ç»†å®¡é˜…äº†æ‚¨çš„ä»£ç ã€‚æ€»çš„æ¥è¯´ï¼Œæ‚¨çš„è§£å†³æ–¹æ¡ˆéå¸¸å‡ºè‰²ï¼Œæ¶µç›–äº†æ‰€æœ‰è¦æ±‚ï¼Œå¹¶ä¸”æ­£ç¡®åœ°åº”ç”¨äº†æˆ‘ä»¬ä¹‹å‰å­¦åˆ°çš„çŸ¥è¯†ã€‚è¿™è¡¨æ˜æ‚¨å¯¹è¿™äº›æ¦‚å¿µç†è§£å¾—å¾ˆå¥½ï¼</p>
<h2 id="7-è¯„åˆ†ä¸ç­”æ¡ˆè§£æ"><a href="#7-è¯„åˆ†ä¸ç­”æ¡ˆè§£æ" class="headerlink" title="7. è¯„åˆ†ä¸ç­”æ¡ˆè§£æ"></a>7. è¯„åˆ†ä¸ç­”æ¡ˆè§£æ</h2><p><strong>æ€»ä½“è¯„åˆ†ï¼š4.5/5 æ˜Ÿ</strong></p>
<p>åšå¾—éå¸¸æ£’ï¼æ‚¨æ­£ç¡®åœ°è§£å†³äº†â€œä¸å®Œæ•´ç±»å‹â€çš„é—®é¢˜ï¼Œå¹¶ä½¿ç”¨äº†æŒ‡é’ˆå’Œé™æ€æˆå‘˜å˜é‡ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚å†…å­˜ç®¡ç†ï¼ˆææ„å‡½æ•°ä¸­çš„ <code>delete</code>ï¼‰ä¹Ÿå¤„ç†å¾—å¾ˆå¥½ã€‚</p>
<p>è®©æˆ‘ä»¬é€ä¸€çœ‹çœ‹æ‚¨çš„ä»£ç ï¼Œå¹¶ç»™å‡ºä¸€äº› C++ æœ€ä½³å®è·µå’Œç»†èŠ‚ä¼˜åŒ–å»ºè®®ã€‚</p>
<hr>
<h3 id="Point-h-æ–‡ä»¶"><a href="#Point-h-æ–‡ä»¶" class="headerlink" title="Point.h æ–‡ä»¶"></a><code>Point.h</code> æ–‡ä»¶</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt; // å¼•å…¥å¿…è¦çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_x;</span><br><span class="line">    <span class="keyword">int</span> m_y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    Point(<span class="keyword">int</span> x = <span class="number">0</span>, <span class="keyword">int</span> y = <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ææ„å‡½æ•°</span></span><br><span class="line">    ~Point();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printInfo</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 1: å£°æ˜ä¸€ä¸ªæŒ‡å‘ Point ç±»å‹çš„æŒ‡é’ˆæˆå‘˜å˜é‡ï¼Œå‘½åä¸º 'm_next_point'</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    Point *m_next_point; <span class="comment">// æ­£ç¡®ï¼å£°æ˜äº†æŒ‡å‘è‡ªèº«ç±»å‹çš„æŒ‡é’ˆã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 2: å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œç±»å‹ä¸º Pointï¼Œå‘½åä¸º 's_default_point'</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">static</span> Point s_default_point; <span class="comment">// æ­£ç¡®ï¼å£°æ˜äº†é™æ€æˆå‘˜å˜é‡ã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 3: å£°æ˜ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œç”¨äºå®‰å…¨åœ°åˆå§‹åŒ– 'm_next_point' æŒ‡é’ˆã€‚</span></span><br><span class="line">    <span class="comment">//         è¯¥å‡½æ•°åº”æ¥å— x å’Œ y åæ ‡ä½œä¸ºå‚æ•°ã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">initializeNextPoint</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span>; <span class="comment">// **å»ºè®®ä¼˜åŒ–ï¼š**å‚æ•°ç±»å‹åº”ä¸ Point æ„é€ å‡½æ•°åŒ¹é…ã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p><strong><code>Point.h</code> è¯„ä»·ï¼š</strong></p>
<ul>
<li><strong>TODO 1 å’Œ TODO 2</strong>ï¼šå®Œç¾ï¼æ‚¨æ­£ç¡®å£°æ˜äº†æŒ‡é’ˆæˆå‘˜å˜é‡å’Œé™æ€æˆå‘˜å˜é‡ã€‚</li>
<li><strong>TODO 3</strong>ï¼šé€»è¾‘æ­£ç¡®ï¼Œä½†æœ‰ä¸ªå°ç»†èŠ‚å¯ä»¥ä¼˜åŒ–ã€‚<code>Point</code> ç±»çš„æ„é€ å‡½æ•°æ˜¯ <code>Point(int x, int y)</code>ï¼Œå®ƒæ¥å—çš„æ˜¯ <code>int</code> ç±»å‹ã€‚å› æ­¤ï¼Œ<code>initializeNextPoint</code> å‡½æ•°çš„å‚æ•°æœ€å¥½ä¹Ÿä½¿ç”¨ <code>int</code> ç±»å‹ï¼Œä»¥é¿å…æ½œåœ¨çš„æµ®ç‚¹æ•°åˆ°æ•´æ•°çš„éšå¼è½¬æ¢å’Œç²¾åº¦ä¸¢å¤±ã€‚è™½ç„¶è¿™é‡Œ <code>double</code> åˆ° <code>int</code> çš„è½¬æ¢åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šæ­£å¸¸å·¥ä½œï¼ˆç›´æ¥æˆªæ–­å°æ•°éƒ¨åˆ†ï¼‰ï¼Œä½†åœ¨ä¸¥è°¨çš„ç±»å‹åŒ¹é…ä¸Šï¼Œä½¿ç”¨ <code>int</code> ä¼šæ›´å¥½ã€‚</li>
</ul>
<hr>
<h3 id="Point-cpp-æ–‡ä»¶"><a href="#Point-cpp-æ–‡ä»¶" class="headerlink" title="Point.cpp æ–‡ä»¶"></a><code>Point.cpp</code> æ–‡ä»¶</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Point.h"</span> <span class="comment">// åŒ…å« Point ç±»çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 4: åœ¨è¿™é‡Œå®šä¹‰å’Œåˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ 's_default_point'ã€‚</span></span><br><span class="line"><span class="comment">//         ä¾‹å¦‚ï¼Œå¯ä»¥å°†å…¶åˆå§‹åŒ–ä¸º Point(0, 0)ã€‚</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"><span class="function">Point <span class="title">Point::s_default_point</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>)</span></span>; <span class="comment">// å®Œç¾ï¼æ­£ç¡®åœ¨ç±»å¤–éƒ¨å®šä¹‰å¹¶åˆå§‹åŒ–äº†é™æ€æˆå‘˜å˜é‡ã€‚</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°å®ç° (è¯·ç¡®ä¿ m_next_point åœ¨è¿™é‡Œè¢«åˆå§‹åŒ–ä¸º nullptr)</span></span><br><span class="line">Point::Point(<span class="keyword">int</span> x, <span class="keyword">int</span> y) : m_x(x), m_y(y) <span class="comment">/* TODO 5: åœ¨è¿™é‡Œåˆå§‹åŒ– m_next_point ä¸º nullptr */</span> &#123;</span><br><span class="line">    m_next_point = <span class="literal">nullptr</span>; <span class="comment">// æ­£ç¡®å®ç°äº†åˆå§‹åŒ–ä¸º nullptrã€‚</span></span><br><span class="line">                            <span class="comment">// **å»ºè®®ä¼˜åŒ–ï¼š** æœ€å¥½ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ã€‚</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Constructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ææ„å‡½æ•°å®ç° (è¯·ç¡®ä¿åœ¨è¿™é‡Œé‡Šæ”¾ m_next_point æŒ‡å‘çš„å†…å­˜)</span></span><br><span class="line">Point::~Point() &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Destructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// TODO 6: å¦‚æœ m_next_point ä¸æ˜¯ nullptrï¼Œé‡Šæ”¾å…¶æŒ‡å‘çš„å†…å­˜ï¼Œå¹¶å°†å…¶è®¾ä¸º nullptrã€‚</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">if</span> (m_next_point != <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">delete</span> m_next_point;</span><br><span class="line">        m_next_point = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Destructor is called, release memory of m_next_point"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Destructor is called"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// è¿™è¡Œè¾“å‡ºæ˜¯å¤šä½™çš„ï¼Œä½†æ— å®³ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::printInfo</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Info: (X: "</span> &lt;&lt; m_x &lt;&lt; <span class="string">", Y: "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// TODO 7: å¦‚æœ m_next_point ä¸æ˜¯ nullptrï¼Œæ‰“å°å®ƒæ‰€æŒ‡å‘çš„ Point å¯¹è±¡çš„ä¿¡æ¯ã€‚</span></span><br><span class="line">    <span class="comment">//         å¦åˆ™ï¼Œæ‰“å° "  m_next_point is nullptr."</span></span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">    <span class="keyword">if</span> (m_next_point != <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  m_next_point points to: "</span>; <span class="comment">// **å»ºè®®ä¼˜åŒ–ï¼š** å¢åŠ æ­¤è¡Œï¼Œä½¿è¾“å‡ºæ›´æ¸…æ™°ã€‚</span></span><br><span class="line">        m_next_point-&gt;printInfo();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  m_next_point is nullptr"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// -------------------------------------------------------------</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 8: å®ç° initializeNextPoint å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">//         - æ£€æŸ¥ m_next_point æ˜¯å¦ä¸º nullptrã€‚</span></span><br><span class="line"><span class="comment">//         - å¦‚æœæ˜¯ nullptrï¼ŒåŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„ Point å¯¹è±¡ï¼Œå¹¶è®© m_next_point æŒ‡å‘å®ƒã€‚</span></span><br><span class="line"><span class="comment">//         - å¦åˆ™ï¼Œæ‰“å°ä¸€æ¡æ¶ˆæ¯è¯´æ˜å®ƒå·²è¢«åˆå§‹åŒ–ã€‚</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::initializeNextPoint</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span> <span class="comment">// **å»ºè®®ä¼˜åŒ–ï¼š**å‚æ•°ç±»å‹åº”ä¸º intã€‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (m_next_point == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_next_point = <span class="keyword">new</span> Point(x, y); <span class="comment">// è¿™é‡Œ double åˆ° int çš„éšå¼è½¬æ¢ã€‚</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  m_next_point initialized to new Point("</span> &lt;&lt; x &lt;&lt; <span class="string">", "</span> &lt;&lt; y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// **å»ºè®®ä¼˜åŒ–ï¼š**å¢åŠ æ­¤è¡Œï¼Œæ›´æ¸…æ™°ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"m_next_point has been initialized already"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// **å»ºè®®ä¼˜åŒ–ï¼š** å¢åŠ  std::endlã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -------------------------------------------------------------</span></span><br></pre></td></tr></table></figure></div>
<p><strong><code>Point.cpp</code> è¯„ä»·ï¼š</strong></p>
<ul>
<li><strong>TODO 4</strong>ï¼šå®Œç¾ã€‚</li>
<li><strong>TODO 5 (æ„é€ å‡½æ•°)</strong>ï¼šæ‚¨æ­£ç¡®åœ°å°† <code>m_next_point</code> åˆå§‹åŒ–ä¸º <code>nullptr</code>ã€‚ä½†æ˜¯ï¼Œåœ¨ C++ ä¸­ï¼Œå¯¹äºæˆå‘˜å˜é‡çš„åˆå§‹åŒ–ï¼Œ<strong>æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨</strong>ï¼ˆ<a href="member initializer list">member initializer list</a>ï¼‰æ˜¯æ›´æ¨èå’Œæ›´é«˜æ•ˆçš„æ–¹å¼ã€‚å®ƒåœ¨å¯¹è±¡æ„é€ æ—¶ç›´æ¥åˆå§‹åŒ–æˆå‘˜ï¼Œè€Œä¸æ˜¯å…ˆé»˜è®¤æ„é€ ï¼ˆå¦‚æœå­˜åœ¨ï¼‰å†èµ‹å€¼ã€‚<ul>
<li><strong>æ‚¨çš„å†™æ³•ï¼š</strong> <code>Point(int x, int y) : m_x(x), m_y(y) { m_next_point = nullptr; ... }</code></li>
<li><strong>æ›´ä½³å†™æ³•ï¼š</strong> <code>Point(int x, int y) : m_x(x), m_y(y), m_next_point(nullptr) { ... }</code></li>
</ul>
</li>
<li><strong>TODO 6 (ææ„å‡½æ•°)</strong>ï¼šé€»è¾‘éå¸¸æ­£ç¡®ï¼Œç¡®ä¿äº†å†…å­˜çš„é‡Šæ”¾ï¼Œé¿å…äº†å†…å­˜æ³„æ¼ï¼ˆ<a href="memory leak">memory leak</a>ï¼‰ã€‚åˆ¤æ–­ <code>nullptr</code> å’Œç½®ç©ºæŒ‡é’ˆéƒ½æ˜¯å¥½ä¹ æƒ¯ã€‚é‚£å¥ <code>else</code> åˆ†æ”¯çš„ <code>std::cout &lt;&lt; &quot;Destructor is called&quot; &lt;&lt; std::endl;</code> æ˜¯å¤šä½™çš„ï¼Œå› ä¸ºææ„å‡½æ•°æ€»æ˜¯ä¼šè¢«è°ƒç”¨ï¼Œè¿™ä¸ªè¾“å‡ºæ²¡æœ‰æä¾›é¢å¤–çš„ä¿¡æ¯ï¼Œåè€Œå¯èƒ½é€ æˆæ··æ·†ã€‚</li>
<li><strong>TODO 7 (printInfo)</strong>ï¼šæ ¸å¿ƒé€»è¾‘æ­£ç¡®ã€‚ä¸ºäº†è¾“å‡ºæ›´æ¸…æ™°ï¼Œå»ºè®®åœ¨é€’å½’è°ƒç”¨ <code>m_next_point-&gt;printInfo()</code> å‰ä¹ŸåŠ ä¸Š <code>std::cout &lt;&lt; &quot; m_next_point points to: &quot;;</code> è¿™æ ·å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å±‚çº§å…³ç³»ã€‚</li>
<li><strong>TODO 8 (initializeNextPoint)</strong>ï¼š<ul>
<li>é€»è¾‘éå¸¸æ­£ç¡®ï¼Œå®Œç¾åœ°å®ç°äº†â€œåªåˆå§‹åŒ–ä¸€æ¬¡â€å¹¶é¿å…äº†é‡å¤åˆ†é…ã€‚</li>
<li>å‚æ•°ç±»å‹é—®é¢˜ï¼šä¸ <code>Point.h</code> ä¸­çš„å»ºè®®ç›¸åŒï¼Œå°† <code>double x, double y</code> æ”¹ä¸º <code>int x, int y</code> ä¼šä¸æ„é€ å‡½æ•°æ›´åŒ¹é…ã€‚</li>
<li>è¾“å‡ºä¼˜åŒ–ï¼šåœ¨ <code>if</code> å’Œ <code>else</code> åˆ†æ”¯ä¸­éƒ½åŠ ä¸Š <code>std::endl</code> ä¼šè®©è¾“å‡ºæ›´æ•´æ´ï¼Œé¿å…ä¸åŒ <code>cout</code> è¾“å‡ºæ··åœ¨åŒä¸€è¡Œã€‚</li>
</ul>
</li>
</ul>
<hr>
<h2 id="å®é™…ç­”æ¡ˆ"><a href="#å®é™…ç­”æ¡ˆ" class="headerlink" title="å®é™…ç­”æ¡ˆ"></a>å®é™…ç­”æ¡ˆ</h2><p>è¿™æ˜¯æŒ‰ç…§æœ€ä½³å®è·µå’Œæ‚¨çš„æ”¹è¿›ç‚¹ä¿®æ”¹åçš„ä»£ç ï¼š</p>
<p><strong><code>Point.h</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_x;</span><br><span class="line">    <span class="keyword">int</span> m_y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    Point(<span class="keyword">int</span> x = <span class="number">0</span>, <span class="keyword">int</span> y = <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ææ„å‡½æ•°</span></span><br><span class="line">    ~Point();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printInfo</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 1: å£°æ˜ä¸€ä¸ªæŒ‡å‘ Point ç±»å‹çš„æŒ‡é’ˆæˆå‘˜å˜é‡ï¼Œå‘½åä¸º 'm_next_point'</span></span><br><span class="line">    Point *m_next_point;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 2: å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œç±»å‹ä¸º Pointï¼Œå‘½åä¸º 's_default_point'</span></span><br><span class="line">    <span class="keyword">static</span> Point s_default_point;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 3: å£°æ˜ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œç”¨äºå®‰å…¨åœ°åˆå§‹åŒ– 'm_next_point' æŒ‡é’ˆã€‚</span></span><br><span class="line">    <span class="comment">//         è¯¥å‡½æ•°åº”æ¥å— x å’Œ y åæ ‡ä½œä¸ºå‚æ•°ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">initializeNextPoint</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">// å‚æ•°æ”¹ä¸º int</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p><strong><code>Point.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Point.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 4: åœ¨è¿™é‡Œå®šä¹‰å’Œåˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ 's_default_point'ã€‚</span></span><br><span class="line"><span class="function">Point <span class="title">Point::s_default_point</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°å®ç°</span></span><br><span class="line"><span class="comment">// TODO 5: åœ¨è¿™é‡Œåˆå§‹åŒ– m_next_point ä¸º nullptr</span></span><br><span class="line">Point::Point(<span class="keyword">int</span> x, <span class="keyword">int</span> y) : m_x(x), m_y(y), m_next_point(<span class="literal">nullptr</span>) &#123; <span class="comment">// ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Constructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ææ„å‡½æ•°å®ç°</span></span><br><span class="line">Point::~Point() &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Destructor called for ("</span> &lt;&lt; m_x &lt;&lt; <span class="string">", "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// TODO 6: å¦‚æœ m_next_point ä¸æ˜¯ nullptrï¼Œé‡Šæ”¾å…¶æŒ‡å‘çš„å†…å­˜ï¼Œå¹¶å°†å…¶è®¾ä¸º nullptrã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (m_next_point != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  - Releasing memory for m_next_point..."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// æ›´å…·ä½“çš„è¾“å‡º</span></span><br><span class="line">        <span class="keyword">delete</span> m_next_point;</span><br><span class="line">        m_next_point = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ä¿¡æ¯å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::printInfo</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point Info: (X: "</span> &lt;&lt; m_x &lt;&lt; <span class="string">", Y: "</span> &lt;&lt; m_y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// TODO 7: å¦‚æœ m_next_point ä¸æ˜¯ nullptrï¼Œæ‰“å°å®ƒæ‰€æŒ‡å‘çš„ Point å¯¹è±¡çš„ä¿¡æ¯ã€‚</span></span><br><span class="line">    <span class="comment">//         å¦åˆ™ï¼Œæ‰“å° "  m_next_point is nullptr."</span></span><br><span class="line">    <span class="keyword">if</span> (m_next_point != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  m_next_point points to: "</span>; <span class="comment">// å¢åŠ æ­¤è¡Œï¼Œè¾“å‡ºæ›´æ¸…æ™°</span></span><br><span class="line">        m_next_point-&gt;printInfo();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  m_next_point is nullptr."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 8: å®ç° initializeNextPoint å‡½æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Point::initializeNextPoint</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123; <span class="comment">// å‚æ•°æ”¹ä¸º int</span></span><br><span class="line">    <span class="keyword">if</span> (m_next_point == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        m_next_point = <span class="keyword">new</span> Point(x, y);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  m_next_point initialized to new Point("</span> &lt;&lt; x &lt;&lt; <span class="string">", "</span> &lt;&lt; y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// å¢åŠ æ­¤è¡Œ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  m_next_point has been initialized already. Skipping."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// å¢åŠ  std::endl</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<hr>
<h2 id="8-å»ºè®®ä¸æ‰©å±•é—®é¢˜"><a href="#8-å»ºè®®ä¸æ‰©å±•é—®é¢˜" class="headerlink" title="8. å»ºè®®ä¸æ‰©å±•é—®é¢˜"></a>8. å»ºè®®ä¸æ‰©å±•é—®é¢˜</h2><p>æ‚¨å·²ç»å¾ˆå¥½åœ°æŒæ¡äº† C++ ä¸­ç±»æˆå‘˜å˜é‡è‡ªæˆ‘å¼•ç”¨çš„åŸºæœ¬å¤„ç†æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œä¸ºäº†è®©æ‚¨çš„ C++ æŠ€èƒ½æ›´ä¸Šä¸€å±‚æ¥¼ï¼Œæˆ‘å»ºè®®æ‚¨æ·±å…¥ç ”ç©¶ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p>
<ol>
<li><p><strong>â€œä¸‰/äº”/é›¶æ³•åˆ™â€ï¼ˆRule of Three/Five/Zeroï¼‰</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> å½“ä¸€ä¸ªç±»ç®¡ç†ç€åŠ¨æ€å†…å­˜ï¼ˆæ¯”å¦‚æˆ‘ä»¬çš„ <code>Point</code> ç±»ä¸­çš„ <code>m_next_point</code> æŒ‡é’ˆï¼‰ï¼Œé€šå¸¸éœ€è¦æ˜¾å¼åœ°å®šä¹‰ï¼š<ul>
<li><strong>æ‹·è´æ„é€ å‡½æ•°</strong>ï¼ˆ<a href="Copy Constructor">Copy Constructor</a>ï¼‰</li>
<li><strong>æ‹·è´èµ‹å€¼è¿ç®—ç¬¦</strong>ï¼ˆ<a href="Copy Assignment Operator">Copy Assignment Operator</a>ï¼‰</li>
<li><strong>ææ„å‡½æ•°</strong>ï¼ˆ<a href="Destructor">Destructor</a>ï¼‰ï¼ˆæ‚¨å·²ç»æ­£ç¡®å®ç°äº†ï¼‰</li>
</ul>
</li>
<li>C++11 ä¹‹åå¼•å…¥äº†<strong>ç§»åŠ¨æ„é€ å‡½æ•°</strong>ï¼ˆ<a href="Move Constructor">Move Constructor</a>ï¼‰å’Œ<strong>ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦</strong>ï¼ˆ<a href="Move Assignment Operator">Move Assignment Operator</a>ï¼‰ï¼Œå½¢æˆäº†â€œäº”æ³•åˆ™â€ã€‚è€Œå¦‚æœæ‚¨çš„ç±»ä¸ç›´æ¥ç®¡ç†èµ„æºï¼ˆä¾‹å¦‚ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼‰ï¼Œåˆ™å¯èƒ½ä¸éœ€è¦è‡ªå®šä¹‰è¿™äº›ï¼Œè¿™å°±æ˜¯â€œé›¶æ³•åˆ™â€ã€‚</li>
<li><strong>æ€è€ƒï¼š</strong> å¦‚æœæ‚¨ä¸å®šä¹‰æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼Œå½“ <code>Point</code> å¯¹è±¡è¢«æ‹·è´ï¼ˆä¾‹å¦‚ <code>Point p2 = p1;</code> æˆ– <code>Point p2; p2 = p1;</code>ï¼‰æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¼šæ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Ÿè¿™å¯èƒ½å¯¼è‡´åŒé‡é‡Šæ”¾ï¼ˆ<a href="double-free">double-free</a>ï¼‰é”™è¯¯ï¼</li>
</ul>
</li>
<li><p><strong>æ™ºèƒ½æŒ‡é’ˆï¼ˆ<a href="Smart Pointers">Smart Pointers</a>ï¼‰</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> C++11 å¼•å…¥çš„ <code>std::unique_ptr</code>ã€<code>std::shared_ptr</code> å’Œ <code>std::weak_ptr</code> æ˜¯ RAIIï¼ˆ<a href="Resource Acquisition Is Initialization">Resource Acquisition Is Initialization</a>ï¼‰åŸåˆ™çš„ä½“ç°ã€‚å®ƒä»¬è‡ªåŠ¨ç®¡ç†åŠ¨æ€å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¤§å¤§å‡å°‘äº†å†…å­˜æ³„æ¼å’Œæ‚¬å‚æŒ‡é’ˆï¼ˆ<a href="dangling pointer">dangling pointer</a>ï¼‰çš„é£é™©ã€‚</li>
<li><strong>æ€è€ƒï¼š</strong> å¦‚ä½•ç”¨ <code>std::unique_ptr&lt;Point&gt; m_next_point;</code> æˆ– <code>std::shared_ptr&lt;Point&gt; m_next_point;</code> æ¥æ›¿æ¢æ‚¨å½“å‰çš„åŸå§‹æŒ‡é’ˆï¼Ÿä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆåï¼Œææ„å‡½æ•°ä¸­çš„ <code>delete</code> è¿˜éœ€è¦æ‰‹åŠ¨ç¼–å†™å—ï¼Ÿå®ƒä»¬å¦‚ä½•å¸®åŠ©ç®€åŒ–ä»£ç å¹¶æé«˜å®‰å…¨æ€§ï¼Ÿ</li>
</ul>
</li>
<li><p><strong>å‰å‘å£°æ˜ï¼ˆ<a href="Forward Declaration">Forward Declaration</a>ï¼‰</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> å½“ä¸¤ä¸ªç±»ç›¸äº’å¼•ç”¨ï¼ˆä¾‹å¦‚ <code>ClassA</code> åŒ…å« <code>ClassB</code> çš„æŒ‡é’ˆï¼Œ<code>ClassB</code> ä¹ŸåŒ…å« <code>ClassA</code> çš„æŒ‡é’ˆï¼‰æ—¶ï¼Œæœ‰æ—¶ä¸éœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­åŒ…å«å®Œæ•´çš„ç±»å®šä¹‰ï¼Œåªéœ€è¦è¿›è¡Œâ€œå‰å‘å£°æ˜â€ï¼ˆ<code>class ClassB;</code>ï¼‰ã€‚</li>
<li><strong>æ€è€ƒï¼š</strong> åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>Point</code> ç±»å†…éƒ¨ç›´æ¥ä½¿ç”¨äº† <code>Point*</code>ï¼Œæ‰€ä»¥ <code>Point</code> ç±»çš„å®šä¹‰å¿…é¡»æ˜¯å·²çŸ¥çš„ã€‚ä½†å¦‚æœ <code>Point</code> åªæ˜¯ä½œä¸ºå¦ä¸€ä¸ªç±» <code>Line</code> çš„æˆå‘˜ï¼ˆ<code>Line</code> åŒ…å« <code>Point</code> æˆå‘˜ï¼‰ï¼Œè€Œ <code>Point</code> åˆéœ€è¦çŸ¥é“ <code>Line</code>ï¼ˆä¾‹å¦‚ <code>Point</code> å†…éƒ¨æœ‰ <code>Line*</code>ï¼‰ï¼Œé‚£ä¹ˆå‰å‘å£°æ˜å°±å˜å¾—å¾ˆé‡è¦äº†ã€‚</li>
</ul>
</li>
<li><p><strong><code>const</code> æ­£ç¡®æ€§ä¸æŒ‡é’ˆ</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> <code>const</code> å…³é”®å­—ä¸æŒ‡é’ˆç»“åˆæ—¶æœ‰å¤šç§å«ä¹‰ï¼š<ul>
<li><code>const Point* p;</code> (æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ)ï¼šæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½é€šè¿‡è¯¥æŒ‡é’ˆä¿®æ”¹ï¼Œä½†æŒ‡é’ˆæœ¬èº«å¯ä»¥æ”¹å˜æŒ‡å‘ã€‚</li>
<li><code>Point* const p;</code> (å¸¸é‡æŒ‡é’ˆ)ï¼šæŒ‡é’ˆä¸èƒ½æ”¹å˜æŒ‡å‘ï¼Œä½†æŒ‡å‘çš„å¯¹è±¡å¯ä»¥é€šè¿‡è¯¥æŒ‡é’ˆä¿®æ”¹ã€‚</li>
<li><code>const Point* const p;</code> (æŒ‡å‘å¸¸é‡çš„å¸¸é‡æŒ‡é’ˆ)ï¼šæŒ‡é’ˆå’Œå…¶æŒ‡å‘çš„å¯¹è±¡éƒ½ä¸èƒ½é€šè¿‡è¯¥æŒ‡é’ˆä¿®æ”¹ã€‚</li>
</ul>
</li>
<li><strong>æ€è€ƒï¼š</strong> æ‚¨çš„ <code>printInfo()</code> æ–¹æ³•è¢«æ ‡è®°ä¸º <code>const</code>ï¼Œè¿™æ„å‘³ç€å®ƒä¸èƒ½ä¿®æ”¹å¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚æ‚¨çš„ <code>m_next_point</code> å¦‚æœå¸Œæœ›å®ƒä¸èƒ½è¢« <code>printInfo</code> ä¿®æ”¹ï¼Œæˆ–è€…æ‚¨å¸Œæœ› <code>m_next_point</code> å§‹ç»ˆæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥å¦‚ä½•ä½¿ç”¨ <code>const</code> å…³é”®å­—ï¼Ÿ</li>
</ul>
</li>
<li><p><strong>å¾ªç¯å¼•ç”¨ä¸<code>printInfo</code>çš„é€’å½’å®‰å…¨</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> æ‚¨ä¹‹å‰æå‡ºçš„é—®é¢˜éå¸¸å…³é”®ã€‚å¦‚æœ <code>Point</code> å¯¹è±¡å¯èƒ½å½¢æˆå¾ªç¯é“¾ï¼ˆä¾‹å¦‚ A -&gt; B -&gt; C -&gt; Aï¼‰ï¼Œé‚£ä¹ˆæ‚¨çš„ <code>printInfo</code> æ–¹æ³•å°†é™·å…¥æ— é™é€’å½’ã€‚</li>
<li><strong>æ€è€ƒï¼š</strong> å¦‚ä½•ä¿®æ”¹ <code>printInfo</code> å‡½æ•°ï¼Œä½¿å…¶èƒ½å¤Ÿæ£€æµ‹å¹¶é˜»æ­¢æ— é™é€’å½’ï¼Ÿä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯åœ¨é€’å½’è°ƒç”¨æ—¶ï¼Œç»´æŠ¤ä¸€ä¸ªâ€œå·²è®¿é—®èŠ‚ç‚¹â€çš„é›†åˆï¼Œå¦‚æœå°è¯•è®¿é—®ä¸€ä¸ªå·²è®¿é—®è¿‡çš„èŠ‚ç‚¹ï¼Œå°±åœæ­¢é€’å½’ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡æ·±å…¥å­¦ä¹ è¿™äº›æ‰©å±•é—®é¢˜ï¼Œæ‚¨å°†å¯¹ C++ çš„å†…å­˜ç®¡ç†ã€é¢å‘å¯¹è±¡è®¾è®¡ä»¥åŠå¦‚ä½•ç¼–å†™æ›´å¥å£®ã€æ›´å®‰å…¨çš„ C++ ä»£ç æœ‰æ›´æ·±åˆ»çš„ç†è§£ã€‚</p>
<p>æœŸå¾…æ‚¨åœ¨æœªæ¥çš„å­¦ä¹ ä¸­å–å¾—æ›´å¤§çš„è¿›æ­¥ï¼</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cpp/">Cpp    </a><a class="post-meta__tags" href="/tags/Coding/">Coding    </a><a class="post-meta__tags" href="/tags/Developer/">Developer    </a><a class="post-meta__tags" href="/tags/Class/">Class    </a><a class="post-meta__tags" href="/tags/Programming/">Programming    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2025/06/08/10-projects/cplusplus/lectures/344%20%20-%20cpp%20%E5%86%85%E8%81%94%E5%8F%98%E9%87%8F%E5%87%BD%E6%95%B0%E8%A7%A3%E5%86%B3%20ODR/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>344  - cpp å†…è”å˜é‡å‡½æ•°è§£å†³ ODR</span></div></a></div><div class="next-post pull_right"><a href="/2025/06/08/30-resources/coding/python/Pandas_Basic_Command_Quick_Check_Table/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202104250.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>Pandas_Basic_Command_Quick_Check_Table</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/notes/é™æ€æˆå‘˜è®¿é—®æ§åˆ¶/" title="é™æ€æˆå‘˜è®¿é—®æ§åˆ¶"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">é™æ€æˆå‘˜è®¿é—®æ§åˆ¶</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•/" title="277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹/" title="278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/299 - æ˜¾å¼æ„é€ å‡½æ•°/" title="299 - æ˜¾å¼æ„é€ å‡½æ•°"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">299 - æ˜¾å¼æ„é€ å‡½æ•°</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/276 - Class across multiple files/" title="276 - Class across multiple files"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">276 - Class across multiple files</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/322 - Different Type Members/" title="322 - Different Type Members"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">322 - Different Type Members</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'xvMxbws16Erd8WUfqxkvHmb5-gzGzoHsz',
  appKey:'4U0Vo7NQIUL0eJzHdkPzdCDr',
  placeholder:'ä¸è¯´è¯çš„äººä¼šç–¯æ‰å—?',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By supersheepbear</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="external nofollow noopener noreferrer"><span>Butterfly</span></a></div><div class="footer_custom_text">å¤–å‘å­¤ç‹¬è€…æ‚£è€…</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="canvas_nest" color="255,240,245" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>