<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>340 - ODR Cpp | Bear's dream</title><meta name="description" content="340 - ODR Cpp"><meta name="keywords" content="Cpp,Coding,Development,Developer,Definition"><meta name="author" content="supersheepbear"><meta name="copyright" content="supersheepbear"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="p43hXBn3_dLvbyxUzx0eo5eYmj9OVYOV52pdrhBa2sw"><meta name="baidu-site-verification" content="EXLlfLv2pV"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="340 - ODR Cpp"><meta name="twitter:description" content="340 - ODR Cpp"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta property="og:type" content="article"><meta property="og:title" content="340 - ODR Cpp"><meta property="og:url" content="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/340%20-%20ODR%20Cpp/"><meta property="og:site_name" content="Bear's dream"><meta property="og:description" content="340 - ODR Cpp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/340%20-%20ODR%20Cpp/"><link rel="prev" title="Pandas_Basic_Command_Quick_Check_Table" href="https://yxiong.org/2025/06/08/30-resources/coding/python/Pandas_Basic_Command_Quick_Check_Table/"><link rel="next" title="Pandas_10_sets_of_exercises" href="https://yxiong.org/2025/06/08/30-resources/coding/python/Pandas_10_sets_of_exercises/"><link rel="stylesheet" href="hfttps://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bear's dream" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Bear's dream</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200520153141.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">178</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">160</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">23</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#340-ODR-Cpp"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">340 - ODR Cpp</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#C-æ ¸å¿ƒæ¦‚å¿µï¼šä¸€æ¬¡å®šä¹‰è§„åˆ™-One-Definition-Rule-ODR"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">C++æ ¸å¿ƒæ¦‚å¿µï¼šä¸€æ¬¡å®šä¹‰è§„åˆ™ (One Definition Rule - ODR)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#è¯¦ç»†è§£é‡Š"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">è¯¦ç»†è§£é‡Š</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-è‡ªç”±å˜é‡-Freestanding-Variables"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">1. è‡ªç”±å˜é‡ (Freestanding Variables)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-å‡½æ•°-Functions"><span class="toc_mobile_items-number">1.4.2.</span> <span class="toc_mobile_items-text">2. å‡½æ•° (Functions)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-ç±»-Classes"><span class="toc_mobile_items-number">1.4.3.</span> <span class="toc_mobile_items-text">3. ç±» (Classes)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-æˆå‘˜å‡½æ•°-Member-Functions-å’Œ-é™æ€æˆå‘˜-Static-Members"><span class="toc_mobile_items-number">1.4.4.</span> <span class="toc_mobile_items-text">4. æˆå‘˜å‡½æ•° (Member Functions) å’Œ é™æ€æˆå‘˜ (Static Members)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#QA-é—ªå­˜å¡-Flash-Cards"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">QA é—ªå­˜å¡ (Flash Cards)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å¸¸è§è¯¯è§£æˆ–ç¼–ç é”™è¯¯"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">å¸¸è§è¯¯è§£æˆ–ç¼–ç é”™è¯¯</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ç¼–ç¨‹ç»ƒä¹ "><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">ç¼–ç¨‹ç»ƒä¹ </span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-1"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-1"><span class="toc_mobile_items-number">1.9.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-2"><span class="toc_mobile_items-number">1.10.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-2"><span class="toc_mobile_items-number">1.11.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-ä»€ä¹ˆæ˜¯â€œç±»çš„å®šä¹‰â€ï¼Ÿ"><span class="toc_mobile_items-number">1.12.</span> <span class="toc_mobile_items-text">1. ä»€ä¹ˆæ˜¯â€œç±»çš„å®šä¹‰â€ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-ä¸ºä»€ä¹ˆâ€œç±»çš„å®šä¹‰â€è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ-hï¼‰é‡Œï¼Ÿ"><span class="toc_mobile_items-number">1.13.</span> <span class="toc_mobile_items-text">2. ä¸ºä»€ä¹ˆâ€œç±»çš„å®šä¹‰â€è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ.hï¼‰é‡Œï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-é‚£ä¹ˆï¼Œä»€ä¹ˆå®šä¹‰è¦æ”¾åœ¨-cpp-æ–‡ä»¶é‡Œå‘¢ï¼Ÿ"><span class="toc_mobile_items-number">1.14.</span> <span class="toc_mobile_items-text">3. é‚£ä¹ˆï¼Œä»€ä¹ˆå®šä¹‰è¦æ”¾åœ¨ .cpp æ–‡ä»¶é‡Œå‘¢ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-æ€»ç»“ï¼šå¤´æ–‡ä»¶-Vs-cpp-æ–‡ä»¶ä¸­çš„å®šä¹‰"><span class="toc_mobile_items-number">1.15.</span> <span class="toc_mobile_items-text">4. æ€»ç»“ï¼šå¤´æ–‡ä»¶ Vs. .cpp æ–‡ä»¶ä¸­çš„å®šä¹‰</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-3"><span class="toc_mobile_items-number">1.16.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ifndef-GEOM-CYLINDER-H"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">ifndef GEOM_CYLINDER_H</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#define-GEOM-CYLINDER-H"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">define GEOM_CYLINDER_H</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#endif"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">endif</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-3"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-4"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-4"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å®˜æ–¹å«æ³•ä¸æ¦‚å¿µè¾¨æ"><span class="toc_mobile_items-number">4.4.</span> <span class="toc_mobile_items-text">å®˜æ–¹å«æ³•ä¸æ¦‚å¿µè¾¨æ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘çš„è¡¨è¿°ä¼šå¼•èµ·æ‚¨çš„å›°æƒ‘ï¼Ÿ"><span class="toc_mobile_items-number">4.5.</span> <span class="toc_mobile_items-text">ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘çš„è¡¨è¿°ä¼šå¼•èµ·æ‚¨çš„å›°æƒ‘ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æœ€ç»ˆæ¾„æ¸…ä¸æœ€ä½³å®è·µ"><span class="toc_mobile_items-number">4.6.</span> <span class="toc_mobile_items-text">æœ€ç»ˆæ¾„æ¸…ä¸æœ€ä½³å®è·µ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-5"><span class="toc_mobile_items-number">4.7.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-5"><span class="toc_mobile_items-number">4.8.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ"><span class="toc_mobile_items-number">4.9.</span> <span class="toc_mobile_items-text">ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ä¾‹å­"><span class="toc_mobile_items-number">4.10.</span> <span class="toc_mobile_items-text">ä¾‹å­</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æ€»ç»“"><span class="toc_mobile_items-number">4.11.</span> <span class="toc_mobile_items-text">æ€»ç»“</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-6"><span class="toc_mobile_items-number">4.12.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-6"><span class="toc_mobile_items-number">4.13.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ä¸ºä»€ä¹ˆå˜é‡å’Œå‡½æ•°çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ"><span class="toc_mobile_items-number">4.14.</span> <span class="toc_mobile_items-text">ä¸ºä»€ä¹ˆå˜é‡å’Œå‡½æ•°çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ç¤ºä¾‹"><span class="toc_mobile_items-number">4.15.</span> <span class="toc_mobile_items-text">ç¤ºä¾‹</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-å˜é‡çš„å£°æ˜-Variable-Declaration"><span class="toc_mobile_items-number">4.15.1.</span> <span class="toc_mobile_items-text">1. å˜é‡çš„å£°æ˜ (Variable Declaration)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-å‡½æ•°çš„å£°æ˜-Function-Declaration-Function-Prototype"><span class="toc_mobile_items-number">4.15.2.</span> <span class="toc_mobile_items-text">2. å‡½æ•°çš„å£°æ˜ (Function Declaration &#x2F; Function Prototype)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æ€»ç»“-1"><span class="toc_mobile_items-number">4.16.</span> <span class="toc_mobile_items-text">æ€»ç»“</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-7"><span class="toc_mobile_items-number">4.17.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-7"><span class="toc_mobile_items-number">4.18.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ä¸¾ä¾‹è¯´æ˜-header-guard-çš„å¿…è¦æ€§"><span class="toc_mobile_items-number">4.19.</span> <span class="toc_mobile_items-text">ä¸¾ä¾‹è¯´æ˜ header guard çš„å¿…è¦æ€§</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#header-guard-çš„ä½œç”¨"><span class="toc_mobile_items-number">4.20.</span> <span class="toc_mobile_items-text">header guard çš„ä½œç”¨</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æ€»ç»“-2"><span class="toc_mobile_items-number">4.21.</span> <span class="toc_mobile_items-text">æ€»ç»“</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-8"><span class="toc_mobile_items-number">4.22.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-8"><span class="toc_mobile_items-number">4.23.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Cè¯­è¨€ä¸­çš„ä¾‹å­"><span class="toc_mobile_items-number">4.24.</span> <span class="toc_mobile_items-text">Cè¯­è¨€ä¸­çš„ä¾‹å­</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-å˜é‡çš„å£°æ˜-Variable-Declaration-1"><span class="toc_mobile_items-number">4.24.1.</span> <span class="toc_mobile_items-text">1. å˜é‡çš„å£°æ˜ (Variable Declaration)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-å‡½æ•°çš„å£°æ˜-Function-Declaration-Function-Prototype-1"><span class="toc_mobile_items-number">4.24.2.</span> <span class="toc_mobile_items-text">2. å‡½æ•°çš„å£°æ˜ (Function Declaration &#x2F; Function Prototype)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Cè¯­è¨€ä¸C-åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸»è¦å·®å¼‚"><span class="toc_mobile_items-number">4.25.</span> <span class="toc_mobile_items-text">Cè¯­è¨€ä¸C++åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸»è¦å·®å¼‚</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-9"><span class="toc_mobile_items-number">4.26.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-9"><span class="toc_mobile_items-number">4.27.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å®˜æ–¹å«æ³•ï¼šç²¾ç¡®åŒºåˆ†â€œå£°æ˜â€ä¸â€œå®šä¹‰â€"><span class="toc_mobile_items-number">4.28.</span> <span class="toc_mobile_items-text">å®˜æ–¹å«æ³•ï¼šç²¾ç¡®åŒºåˆ†â€œå£°æ˜â€ä¸â€œå®šä¹‰â€</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ä¸ºä»€ä¹ˆ-class-MyClass-è¢«ç§°ä¸ºâ€œç±»çš„å®šä¹‰â€ï¼Ÿ"><span class="toc_mobile_items-number">4.29.</span> <span class="toc_mobile_items-text">ä¸ºä»€ä¹ˆ class MyClass { ... }; è¢«ç§°ä¸ºâ€œç±»çš„å®šä¹‰â€ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æ‚¨çš„å›°æƒ‘æ¥æº"><span class="toc_mobile_items-number">4.30.</span> <span class="toc_mobile_items-text">æ‚¨çš„å›°æƒ‘æ¥æº</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-10"><span class="toc_mobile_items-number">4.31.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-10"><span class="toc_mobile_items-number">4.32.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-C-è¯­è¨€ä¸­çš„-struct"><span class="toc_mobile_items-number">4.33.</span> <span class="toc_mobile_items-text">1. C è¯­è¨€ä¸­çš„ struct</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-C-ä¸­çš„-struct-å’Œ-class"><span class="toc_mobile_items-number">4.34.</span> <span class="toc_mobile_items-text">2. C++ ä¸­çš„ struct (å’Œ class)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æ€»ç»“æ¯”è¾ƒ"><span class="toc_mobile_items-number">4.35.</span> <span class="toc_mobile_items-text">æ€»ç»“æ¯”è¾ƒ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-11"><span class="toc_mobile_items-number">4.36.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-11"><span class="toc_mobile_items-number">4.37.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#è¯¦ç»†è§£é‡Š-1"><span class="toc_mobile_items-number">4.38.</span> <span class="toc_mobile_items-text">è¯¦ç»†è§£é‡Š</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ç¤ºä¾‹-1"><span class="toc_mobile_items-number">4.39.</span> <span class="toc_mobile_items-text">ç¤ºä¾‹</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#è§£å†³â€œä¸åŒè¡Œä¸ºâ€çš„æ–¹æ³•"><span class="toc_mobile_items-number">4.40.</span> <span class="toc_mobile_items-text">è§£å†³â€œä¸åŒè¡Œä¸ºâ€çš„æ–¹æ³•</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#C-ç±»ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™-ODR-æ·±åº¦è§£æ"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">C++ ç±»ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR) æ·±åº¦è§£æ</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-æ¦‚å¿µè¯¦è¿°ï¼šC-ä¸­çš„å£°æ˜ã€å®šä¹‰ä¸-ODR"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text">1. æ¦‚å¿µè¯¦è¿°ï¼šC++ ä¸­çš„å£°æ˜ã€å®šä¹‰ä¸ ODR</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-å£°æ˜-Declaration"><span class="toc_mobile_items-number">5.1.1.</span> <span class="toc_mobile_items-text">1.1 å£°æ˜ (Declaration)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-2-å®šä¹‰-Definition"><span class="toc_mobile_items-number">5.1.2.</span> <span class="toc_mobile_items-text">1.2 å®šä¹‰ (Definition)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-3-ç¿»è¯‘å•å…ƒ-Translation-Unit"><span class="toc_mobile_items-number">5.1.3.</span> <span class="toc_mobile_items-text">1.3 ç¿»è¯‘å•å…ƒ (Translation Unit)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-ç±»ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æœ€ä½³å®è·µ"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text">2. ç±»ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æœ€ä½³å®è·µ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-è¯¦ç»†ä»£ç ç¤ºä¾‹ï¼šGeom-Cylinder"><span class="toc_mobile_items-number">5.3.</span> <span class="toc_mobile_items-text">3. è¯¦ç»†ä»£ç ç¤ºä¾‹ï¼šGeom::Cylinder</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-QA-é—ªå¡-Flash-Cards"><span class="toc_mobile_items-number">5.4.</span> <span class="toc_mobile_items-text">4. QA é—ªå¡ (Flash Cards)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-å¸¸è§è¯¯è§£ä¸é”™è¯¯"><span class="toc_mobile_items-number">5.5.</span> <span class="toc_mobile_items-text">5. å¸¸è§è¯¯è§£ä¸é”™è¯¯</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#6-ç¼–ç ç»ƒä¹ "><span class="toc_mobile_items-number">5.6.</span> <span class="toc_mobile_items-text">6. ç¼–ç ç»ƒä¹ </span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#340-ODR-Cpp"><span class="toc-number">1.</span> <span class="toc-text">340 - ODR Cpp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant"><span class="toc-number">1.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-æ ¸å¿ƒæ¦‚å¿µï¼šä¸€æ¬¡å®šä¹‰è§„åˆ™-One-Definition-Rule-ODR"><span class="toc-number">1.3.</span> <span class="toc-text">C++æ ¸å¿ƒæ¦‚å¿µï¼šä¸€æ¬¡å®šä¹‰è§„åˆ™ (One Definition Rule - ODR)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¯¦ç»†è§£é‡Š"><span class="toc-number">1.4.</span> <span class="toc-text">è¯¦ç»†è§£é‡Š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-è‡ªç”±å˜é‡-Freestanding-Variables"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. è‡ªç”±å˜é‡ (Freestanding Variables)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-å‡½æ•°-Functions"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. å‡½æ•° (Functions)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ç±»-Classes"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. ç±» (Classes)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-æˆå‘˜å‡½æ•°-Member-Functions-å’Œ-é™æ€æˆå‘˜-Static-Members"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. æˆå‘˜å‡½æ•° (Member Functions) å’Œ é™æ€æˆå‘˜ (Static Members)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QA-é—ªå­˜å¡-Flash-Cards"><span class="toc-number">1.5.</span> <span class="toc-text">QA é—ªå­˜å¡ (Flash Cards)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¸¸è§è¯¯è§£æˆ–ç¼–ç é”™è¯¯"><span class="toc-number">1.6.</span> <span class="toc-text">å¸¸è§è¯¯è§£æˆ–ç¼–ç é”™è¯¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¼–ç¨‹ç»ƒä¹ "><span class="toc-number">1.7.</span> <span class="toc-text">ç¼–ç¨‹ç»ƒä¹ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-1"><span class="toc-number">1.8.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-1"><span class="toc-number">1.9.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-2"><span class="toc-number">1.10.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-2"><span class="toc-number">1.11.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ä»€ä¹ˆæ˜¯â€œç±»çš„å®šä¹‰â€ï¼Ÿ"><span class="toc-number">1.12.</span> <span class="toc-text">1. ä»€ä¹ˆæ˜¯â€œç±»çš„å®šä¹‰â€ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ä¸ºä»€ä¹ˆâ€œç±»çš„å®šä¹‰â€è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ-hï¼‰é‡Œï¼Ÿ"><span class="toc-number">1.13.</span> <span class="toc-text">2. ä¸ºä»€ä¹ˆâ€œç±»çš„å®šä¹‰â€è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ.hï¼‰é‡Œï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-é‚£ä¹ˆï¼Œä»€ä¹ˆå®šä¹‰è¦æ”¾åœ¨-cpp-æ–‡ä»¶é‡Œå‘¢ï¼Ÿ"><span class="toc-number">1.14.</span> <span class="toc-text">3. é‚£ä¹ˆï¼Œä»€ä¹ˆå®šä¹‰è¦æ”¾åœ¨ .cpp æ–‡ä»¶é‡Œå‘¢ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-æ€»ç»“ï¼šå¤´æ–‡ä»¶-Vs-cpp-æ–‡ä»¶ä¸­çš„å®šä¹‰"><span class="toc-number">1.15.</span> <span class="toc-text">4. æ€»ç»“ï¼šå¤´æ–‡ä»¶ Vs. .cpp æ–‡ä»¶ä¸­çš„å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-3"><span class="toc-number">1.16.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ifndef-GEOM-CYLINDER-H"><span class="toc-number">2.</span> <span class="toc-text">ifndef GEOM_CYLINDER_H</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#define-GEOM-CYLINDER-H"><span class="toc-number">3.</span> <span class="toc-text">define GEOM_CYLINDER_H</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#endif"><span class="toc-number">4.</span> <span class="toc-text">endif</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-3"><span class="toc-number">4.1.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-4"><span class="toc-number">4.2.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-4"><span class="toc-number">4.3.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®˜æ–¹å«æ³•ä¸æ¦‚å¿µè¾¨æ"><span class="toc-number">4.4.</span> <span class="toc-text">å®˜æ–¹å«æ³•ä¸æ¦‚å¿µè¾¨æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘çš„è¡¨è¿°ä¼šå¼•èµ·æ‚¨çš„å›°æƒ‘ï¼Ÿ"><span class="toc-number">4.5.</span> <span class="toc-text">ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘çš„è¡¨è¿°ä¼šå¼•èµ·æ‚¨çš„å›°æƒ‘ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æœ€ç»ˆæ¾„æ¸…ä¸æœ€ä½³å®è·µ"><span class="toc-number">4.6.</span> <span class="toc-text">æœ€ç»ˆæ¾„æ¸…ä¸æœ€ä½³å®è·µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-5"><span class="toc-number">4.7.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-5"><span class="toc-number">4.8.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ"><span class="toc-number">4.9.</span> <span class="toc-text">ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¾‹å­"><span class="toc-number">4.10.</span> <span class="toc-text">ä¾‹å­</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">4.11.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-6"><span class="toc-number">4.12.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-6"><span class="toc-number">4.13.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ºä»€ä¹ˆå˜é‡å’Œå‡½æ•°çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ"><span class="toc-number">4.14.</span> <span class="toc-text">ä¸ºä»€ä¹ˆå˜é‡å’Œå‡½æ•°çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¤ºä¾‹"><span class="toc-number">4.15.</span> <span class="toc-text">ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-å˜é‡çš„å£°æ˜-Variable-Declaration"><span class="toc-number">4.15.1.</span> <span class="toc-text">1. å˜é‡çš„å£°æ˜ (Variable Declaration)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-å‡½æ•°çš„å£°æ˜-Function-Declaration-Function-Prototype"><span class="toc-number">4.15.2.</span> <span class="toc-text">2. å‡½æ•°çš„å£°æ˜ (Function Declaration &#x2F; Function Prototype)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“-1"><span class="toc-number">4.16.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-7"><span class="toc-number">4.17.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-7"><span class="toc-number">4.18.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸¾ä¾‹è¯´æ˜-header-guard-çš„å¿…è¦æ€§"><span class="toc-number">4.19.</span> <span class="toc-text">ä¸¾ä¾‹è¯´æ˜ header guard çš„å¿…è¦æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#header-guard-çš„ä½œç”¨"><span class="toc-number">4.20.</span> <span class="toc-text">header guard çš„ä½œç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“-2"><span class="toc-number">4.21.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-8"><span class="toc-number">4.22.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-8"><span class="toc-number">4.23.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cè¯­è¨€ä¸­çš„ä¾‹å­"><span class="toc-number">4.24.</span> <span class="toc-text">Cè¯­è¨€ä¸­çš„ä¾‹å­</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-å˜é‡çš„å£°æ˜-Variable-Declaration-1"><span class="toc-number">4.24.1.</span> <span class="toc-text">1. å˜é‡çš„å£°æ˜ (Variable Declaration)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-å‡½æ•°çš„å£°æ˜-Function-Declaration-Function-Prototype-1"><span class="toc-number">4.24.2.</span> <span class="toc-text">2. å‡½æ•°çš„å£°æ˜ (Function Declaration &#x2F; Function Prototype)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cè¯­è¨€ä¸C-åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸»è¦å·®å¼‚"><span class="toc-number">4.25.</span> <span class="toc-text">Cè¯­è¨€ä¸C++åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸»è¦å·®å¼‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-9"><span class="toc-number">4.26.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-9"><span class="toc-number">4.27.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®˜æ–¹å«æ³•ï¼šç²¾ç¡®åŒºåˆ†â€œå£°æ˜â€ä¸â€œå®šä¹‰â€"><span class="toc-number">4.28.</span> <span class="toc-text">å®˜æ–¹å«æ³•ï¼šç²¾ç¡®åŒºåˆ†â€œå£°æ˜â€ä¸â€œå®šä¹‰â€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ºä»€ä¹ˆ-class-MyClass-è¢«ç§°ä¸ºâ€œç±»çš„å®šä¹‰â€ï¼Ÿ"><span class="toc-number">4.29.</span> <span class="toc-text">ä¸ºä»€ä¹ˆ class MyClass { ... }; è¢«ç§°ä¸ºâ€œç±»çš„å®šä¹‰â€ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‚¨çš„å›°æƒ‘æ¥æº"><span class="toc-number">4.30.</span> <span class="toc-text">æ‚¨çš„å›°æƒ‘æ¥æº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-10"><span class="toc-number">4.31.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-10"><span class="toc-number">4.32.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-C-è¯­è¨€ä¸­çš„-struct"><span class="toc-number">4.33.</span> <span class="toc-text">1. C è¯­è¨€ä¸­çš„ struct</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-C-ä¸­çš„-struct-å’Œ-class"><span class="toc-number">4.34.</span> <span class="toc-text">2. C++ ä¸­çš„ struct (å’Œ class)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“æ¯”è¾ƒ"><span class="toc-number">4.35.</span> <span class="toc-text">æ€»ç»“æ¯”è¾ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-11"><span class="toc-number">4.36.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-11"><span class="toc-number">4.37.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¯¦ç»†è§£é‡Š-1"><span class="toc-number">4.38.</span> <span class="toc-text">è¯¦ç»†è§£é‡Š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¤ºä¾‹-1"><span class="toc-number">4.39.</span> <span class="toc-text">ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è§£å†³â€œä¸åŒè¡Œä¸ºâ€çš„æ–¹æ³•"><span class="toc-number">4.40.</span> <span class="toc-text">è§£å†³â€œä¸åŒè¡Œä¸ºâ€çš„æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#C-ç±»ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™-ODR-æ·±åº¦è§£æ"><span class="toc-number">5.</span> <span class="toc-text">C++ ç±»ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR) æ·±åº¦è§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-æ¦‚å¿µè¯¦è¿°ï¼šC-ä¸­çš„å£°æ˜ã€å®šä¹‰ä¸-ODR"><span class="toc-number">5.1.</span> <span class="toc-text">1. æ¦‚å¿µè¯¦è¿°ï¼šC++ ä¸­çš„å£°æ˜ã€å®šä¹‰ä¸ ODR</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-å£°æ˜-Declaration"><span class="toc-number">5.1.1.</span> <span class="toc-text">1.1 å£°æ˜ (Declaration)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-å®šä¹‰-Definition"><span class="toc-number">5.1.2.</span> <span class="toc-text">1.2 å®šä¹‰ (Definition)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-ç¿»è¯‘å•å…ƒ-Translation-Unit"><span class="toc-number">5.1.3.</span> <span class="toc-text">1.3 ç¿»è¯‘å•å…ƒ (Translation Unit)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ç±»ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æœ€ä½³å®è·µ"><span class="toc-number">5.2.</span> <span class="toc-text">2. ç±»ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æœ€ä½³å®è·µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-è¯¦ç»†ä»£ç ç¤ºä¾‹ï¼šGeom-Cylinder"><span class="toc-number">5.3.</span> <span class="toc-text">3. è¯¦ç»†ä»£ç ç¤ºä¾‹ï¼šGeom::Cylinder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-QA-é—ªå¡-Flash-Cards"><span class="toc-number">5.4.</span> <span class="toc-text">4. QA é—ªå¡ (Flash Cards)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-å¸¸è§è¯¯è§£ä¸é”™è¯¯"><span class="toc-number">5.5.</span> <span class="toc-text">5. å¸¸è§è¯¯è§£ä¸é”™è¯¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-ç¼–ç ç»ƒä¹ "><span class="toc-number">5.6.</span> <span class="toc-text">6. ç¼–ç ç»ƒä¹ </span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)"><div id="post-info"><div id="post-title"><div class="posttitle">340 - ODR Cpp</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2025-06-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2025-06-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/">10-projects</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/">cplusplus</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/lectures/">lectures</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/2025/06/08/10-projects/cplusplus/lectures/340%20-%20ODR%20Cpp/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2025/06/08/10-projects/cplusplus/lectures/340%20-%20ODR%20Cpp/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="340-ODR-Cpp"><a href="#340-ODR-Cpp" class="headerlink" title="340 - ODR Cpp"></a>340 - ODR Cpp</h1><h2 id="ğŸ§‘â€ğŸ’»-User"><a href="#ğŸ§‘â€ğŸ’»-User" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>In this lecture, weâ€™re going to learn about the one definition rule.And this is a rule that says definitions canâ€™t show up more than once in your entire C plus plus program,or in some cases, a definition can show up more than once in a translation unit.We are going to look at the one definition rule in the context of free standing variables, functions,classes, member functions, and static members in our classes.In most cases, a definition canâ€™t really show up more than once in your entire C plus plus program.But we have exceptions to this rule and the exception is for classes.A definition for a class can show up in multiple translation units, and the reason is we need to createobjects of those classes.So each translation unit really needs to see the definition for the class and we are going to try andmake this super clear with examples once we hit Visual Studio code.Okay, so it is time to head over to Visual Studio code and shed some more light on the one definitionrule.Here we are in our working folder.The current project is one definition rule.Weâ€™re going to grab our template files like we always do.Weâ€™re going to put them in place and weâ€™re going to open this little guy in Visual Studio code.Letâ€™s do that.Weâ€™re going to drag and drop and weâ€™re going to have our main CPP file here.Weâ€™re going to clean it up.Thatâ€™s what we always do.And now we want to explore the one definition rule in the context of variables.So we have a free standing variable here, and thatâ€™s going to be the same variable we had in the lastlecture.Weâ€™re going to initialize this and this is really good.We can use it, we can go in main and use it however we want.We can print the weight and if we build and run this program, it is going to work.But the one definition rule says we canâ€™t have more than one definition for anything.And for this variable here we have seen that this is both a declaration and a definition.So we canâ€™t have more than one definition for the weight name here.For example, if we try and grab it and copy and paste it here.So weâ€™re going to try and build this program.Weâ€™re going to use GCC, weâ€™re going to see that we have a problem and the problem is going to say redefinitionof double weight and it is not going to help.Even if you take this and put that in another file.So letâ€™s create another file to really show you this.Weâ€™re going to call it some other file dot CPP and weâ€™re going to grab our definition and move thatthere.And youâ€™re going to see that if we try and build this program, weâ€™re going to get the same problem.Weâ€™re going to have redefinition.So weâ€™re going to see what is the problem here.The compiler error is a little bit different, but it is going to say multiple definitions of weightand itâ€™s going to say one is defined in the main CPP file.So this is a linker error.This was caught by the linker because the definition is showing up in multiple files.So the linker was linking this program and it needed to see a definition for weight and it had seenone definition in the main CPP file and it has seen another definition in some other file.And this is a problem.The linker doesnâ€™t know which one to choose, so itâ€™s going to throw an error and you canâ€™t really havemultiple definitions for a variable in your C plus plus program.And this is the one definition rule and the context of freestanding variables like the weight here.But this is the same in the context of functions.If we go down and put up our Add function here, weâ€™re going to say double A and double B here and weâ€™regoing to put the definition below the main CPP file.Letâ€™s grab this.You can copy this and put this in the code here.Iâ€™m going to remove this little thing.We donâ€™t want it.Weâ€™re going to put in our body and weâ€™re going to return A plus B here.Okay.So this is our function.It is working.We can take out what we had here because it had served its purpose.We can say double result and weâ€™re going to add up ten and 20 like we did in the last lecture, no problem.And we can try and print out our result here.If we build and run this program, it is going to work without a problem because we only have one definitionfor the Add function.What is the problem here?We have weight defined multiple times.Weâ€™re going to comment out one the definition for weight and weâ€™re going to build again.Now the world is good and we can run this program.We can kill our terminal here and bring up another one and run rooster.Youâ€™re going to see that the result is 30 and the program is working just fine.But if we set up another definition for Add even.If we put this in the same file, weâ€™re going to get a problem because we are violating the one definitionrule.Letâ€™s run again.Youâ€™re going to see the problem here.Weâ€™re going to see the definition redefinition of the Add function.This is not allowed.Your program is not going to compile.We see the compiler error here.Even if you put the definition in another file, thatâ€™s not going to help.Weâ€™re going to take this and put this in our some other file and try to compile the program.Weâ€™re going to get a linker error and it is going to say multiple definition of the Add function.And this is not allowed.This is a linker error in this time.If we comment out one definition, letâ€™s do that.Weâ€™re going to comment out the one in the main function.This is going to work and we want to be violating the one definition rule.So this is good.The world is good.We can clear and run Rooster.Weâ€™re going to see our result here.So the one definition rule says you canâ€™t have multiple definitions for freestanding variables or evenfunctions.And we said that if you do that, youâ€™re going to get a compiler error.Letâ€™s look at this in the context of classes.Weâ€™re going to do a class, weâ€™re going to say struct and weâ€™re going to call this point like we alwaysdo.Mostly weâ€™re going to call this point and weâ€™re going to put in a few member variables.One is going to be M X, the other is going to be M y, and this is going to be our definition here.But what youâ€™re going to see is that it is possible to have multiple definitions for classes.For example, if we take this and have a copy of this in another file, weâ€™re going to do that.Weâ€™re going to declare this structure here and weâ€™re going to try and build this program.Youâ€™re going to see that it is working.We have multiple definitions of this, guys.We can go in Maine, for example, and say point P one and we can build and see that the program isgoing to work.Okay?So if you go in here, for example, and try to print Stdcout P one and print X, weâ€™re going to dothat.Weâ€™re going to say P1MX, weâ€™re going to be able to use this because this is a struct.The member variables are public by default.We can do this and we can say P1Y is P1YMY.Letâ€™s do that and we can say Stdendl What is the problem here?We need to put our output stream.Operator I think now the compiler is going to be happy and if we build, weâ€™re going to use GCC.You like to say that if we run the program, weâ€™re going to see our things here and we have some junkvalues inside because these things are not initialized.But if we initialize them to zero using braced initialization here, weâ€™re going to build again.And we should see zero inside.So letâ€™s clear and run, Rooster.Now we have zero in X and Y for our object here.This is working fine and we have multiple definitions for our class, but the definitions canâ€™t showup in a single translation unit.For example, if we took this definition here and brought that back in main and put that just belowour structure here, if we try to build, the compiler is going to complain because now we have multipledefinitions for the same class in the same translation unit for classes, we can have multiple definitions,but the definitions have to show up in different translation units.And thatâ€™s what I want you to see here.So we have a redefinition of our point struct and it is not good.It is going to violate the one definition rule.Okay.Now that you have seen this, we also want to see this in the context of a class that also has somestatic member variables.Weâ€™re going to take this out because we have already seen this and weâ€™re going to bring in our personclass like we used in the last lecture.Weâ€™re going to add in a new header file.Itâ€™s going to be called person dot H, and weâ€™re going to jump into what did we do?Is this a folder?Letâ€™s remove this.We didnâ€™t want a folder.Weâ€™re going to delete this folder.We donâ€™t want it.And weâ€™re going to just add a file called Person Dot H.Thatâ€™s our file here and weâ€™re going to put in the content.The content is going to be our person class.Letâ€™s close this so that you can see more of this class here.Okay, so we have our person class here.We have our include card, we have our person class definition, we have a constructor and we have aprinter form function.We have our member variables.And down below here you see that we have a static variable, which is person count.We need to put in the definition for this guys.So letâ€™s go down and do that.Weâ€™re going to put in the definition for the person constructor.Weâ€™re going to go on top here and include our person header file and weâ€™re going to put in place ourconstructor.We can go down and do that.We can say person and say person.Thatâ€™s going to be our constructor.Weâ€™re going to go back to the class and grab the parameters because I donâ€™t want to type all this things,so letâ€™s do that.Weâ€™re going to put them in.We are going to put in our initializer list.I think we should also delete the parentheses here.Weâ€™re going to go down and put in our initializer list.Weâ€™re going to say full name.Weâ€™re going to initialize this with name param and weâ€™re going to also put in our age and weâ€™re goingto initialize this with age param, the parameter we have from the function.And this is going to be all inside the body, weâ€™re going to increment the static variable, weâ€™re goingto say increment person count.You can select that here and this is going to be good.We also need to initialize our static variable.So weâ€™re going to say person, person count, letâ€™s do person count and weâ€™re going to initialize thisto maybe eight like we did in the last lecture.And this should be all we need here.So if we build and run this program, I think itâ€™s going to run.Letâ€™s select the main function here.And what problem do we have here?Letâ€™s build and see.Weâ€™re going to let the compiler figure this out.Weâ€™re going to see that the world is good and we can create person objects and really use them in ourprograms.So letâ€™s come down here and delete whatever we had.Weâ€™re going to include person and weâ€™re going to go down here and create a person object.Weâ€™re going to say person P one and weâ€™re going to specify the name to be Jon Snow.Why not?And weâ€™re going to say that they are 35.Why not?And we can print information about this person.We can say person Printinfo And if we try to build this program, letâ€™s use GCC to do that.The world is going to be good.As you see down here, we can clear and run roster.Weâ€™re going to see Jon Snow.He is 35 years old.So this is working just fine.But we canâ€™t have multiple definitions for the same class in the same translation unit here.For example, if we come in the main function, notice we are including person.So this is bringing in the definition for person we have in our person dot here.If we also try to declare another class called person, if and if we donâ€™t put anything in, the compileris going to complain because we have two definitions for the same name, which is person here.If we try to build, I think we are going to get a compiler error saying that we have a definition,say we have a definition of person.So this is not allowed.We canâ€™t really do this.But notice that this person class is included both in some other file, which is a separate translationunit and main.We have it included here.So it is really in a separate translation unit.We have the definition for the class and separate translation units and thatâ€™s not a problem.But if you try and put the same definition multiple times in a single translation unit, youâ€™re goingto get a problem and you need to be aware of that.What I want you to see right here is that you can also have multiple definitions for your static variablesand the member functions of your class.For example, if we grab what we have here and also put that in our main function, we can do that.Why not?Weâ€™re going to come in our main function here and weâ€™re going to put the same definitions here.Now weâ€™re going to have a problem because the linker is going to see two definitions for the staticvariable and the constructor for person here.And this is going to be a problem.You canâ€™t really do that.If we built, weâ€™re going to see a problem.Weâ€™re going to see that.The problem is we have multiple definitions for the constructor and we have multiple definitions forperson account.And this is not allowed.You canâ€™t really do that.You can either remove the one from some other file dot cpp.For example.If we comment this out, letâ€™s do that.We can.And come on up here and comment this out and try to build the program.Now, the program is going to work because we have one definition for these guys.You see, the world is good.We can even run the program to show you that it works or we can remove the one in the main CPP fileand we can leave this alive.So letâ€™s go back in the CPP file, the main CPP file I should say, and remove this.And if we build, weâ€™re going to see that this is going to work and we are compliant with what the Cplus plus standard expects us to do in our C plus plus programs.If we rerun, weâ€™re going to see that this is going to work.And this is really cool.This is really all I wanted you to see in this lecture.The one definition rule, which says that you canâ€™t have multiple definitions for the same name in yourentire C plus plus program.But for classes, we can violate this rule a little bit and make it the same definition.Show up in multiple translation units.We are going to stop here in this lecture.In the next one, weâ€™re going to learn about linkage.Go ahead and finish up here and meet me there.</p>
<hr>
<h2 id="ğŸ¤–-Assistant"><a href="#ğŸ¤–-Assistant" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¥½çš„ï¼Œéå¸¸é«˜å…´èƒ½ä¸ºæ‚¨å¼€å¯C++å­¦ä¹ ä¹‹æ—…ï¼ä½œä¸ºæ‚¨çš„C++å¯¼å¸ˆï¼Œæˆ‘å°†å°½åŠ›ç”¨æœ€æ¸…æ™°ã€æœ€æ˜“æ‡‚çš„æ–¹å¼æ¥è®²è§£C++ä¸­çš„æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<hr>
<h2 id="C-æ ¸å¿ƒæ¦‚å¿µï¼šä¸€æ¬¡å®šä¹‰è§„åˆ™-One-Definition-Rule-ODR"><a href="#C-æ ¸å¿ƒæ¦‚å¿µï¼šä¸€æ¬¡å®šä¹‰è§„åˆ™-One-Definition-Rule-ODR" class="headerlink" title="C++æ ¸å¿ƒæ¦‚å¿µï¼šä¸€æ¬¡å®šä¹‰è§„åˆ™ (One Definition Rule - ODR)"></a><strong>C++æ ¸å¿ƒæ¦‚å¿µï¼šä¸€æ¬¡å®šä¹‰è§„åˆ™ (One Definition Rule - ODR)</strong></h2><p><strong>ç®€è¦æ€»ç»“:</strong><br>ä¸€æ¬¡å®šä¹‰è§„åˆ™ï¼ˆODRï¼‰æ˜¯C++ç¼–ç¨‹ä¸­ä¸€ä¸ªåŸºæœ¬åŸåˆ™ï¼Œå®ƒè§„å®šäº†ç¨‹åºä¸­å„ç§å®ä½“ï¼ˆå¦‚å˜é‡ã€å‡½æ•°ã€ç±»ï¼‰çš„å®šä¹‰ï¼ˆdefinitionï¼‰åœ¨æ•´ä¸ªç¨‹åºæˆ–ç‰¹å®šèŒƒå›´å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚äº†è§£å¹¶éµå®ˆODRå¯¹äºé¿å…ç¼–è¯‘é”™è¯¯å’Œé“¾æ¥é”™è¯¯è‡³å…³é‡è¦ã€‚</p>
<hr>
<h2 id="è¯¦ç»†è§£é‡Š"><a href="#è¯¦ç»†è§£é‡Š" class="headerlink" title="è¯¦ç»†è§£é‡Š"></a><strong>è¯¦ç»†è§£é‡Š</strong></h2><p>åœ¨C++ä¸­ï¼Œæ¯ä¸ªå˜é‡ã€å‡½æ•°ã€ç±»æˆ–ä»»ä½•å…¶ä»–å®ä½“éƒ½å¿…é¡»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®šä¹‰ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ä¸€æ¬¡å®šä¹‰è§„åˆ™ï¼ˆOne Definition Ruleï¼Œç®€ç§° ODRï¼‰ã€‚å®ƒå¯¹äºC++ç¨‹åºçš„æ­£ç¡®ç¼–è¯‘å’Œé“¾æ¥æ˜¯è‡³å…³é‡è¦çš„ã€‚</p>
<p>åœ¨æ·±å…¥äº†è§£ODRçš„å…·ä½“åº”ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ol>
<li><p><strong>å£°æ˜ (Declaration) ä¸ å®šä¹‰ (Definition)</strong></p>
<ul>
<li><strong>å£°æ˜</strong>ï¼šå£°æ˜å¼•å…¥äº†ä¸€ä¸ªåç§°åŠå…¶ç±»å‹ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå®ä½“å­˜åœ¨ã€‚å®ƒè®©ç¼–è¯‘å™¨çŸ¥é“è¯¥å¦‚ä½•ä½¿ç”¨è¿™ä¸ªåç§°ï¼Œä½†ä¸ä¼šä¸ºå…¶åˆ†é…å†…å­˜ã€‚å¯ä»¥æœ‰å¤šæ¬¡å£°æ˜ã€‚<ul>
<li>ä¾‹å¦‚ï¼š<code>extern int count;</code> å£°æ˜äº†ä¸€ä¸ªåä¸º <code>count</code> çš„æ•´å‹å˜é‡ï¼Œä½†æ²¡æœ‰ç»™å®ƒåˆ†é…å­˜å‚¨ç©ºé—´ã€‚</li>
<li>ä¾‹å¦‚ï¼š<code>void func();</code> å£°æ˜äº†ä¸€ä¸ªåä¸º <code>func</code> çš„å‡½æ•°ï¼Œä½†æ²¡æœ‰æä¾›å®ƒçš„å®ç°ã€‚</li>
</ul>
</li>
<li><strong>å®šä¹‰</strong>ï¼šå®šä¹‰é™¤äº†å£°æ˜å®ä½“ä¹‹å¤–ï¼Œè¿˜ä¸ºå®ƒåˆ†é…äº†å†…å­˜æˆ–æä¾›äº†å®Œæ•´çš„å®ç°ã€‚ä¸€ä¸ªå®ä½“åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚<ul>
<li>ä¾‹å¦‚ï¼š<code>int count = 0;</code> å®šä¹‰å¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªåä¸º <code>count</code> çš„æ•´å‹å˜é‡ã€‚</li>
<li>ä¾‹å¦‚ï¼š<code>void func() { /* ... */ }</code> å®šä¹‰äº† <code>func</code> å‡½æ•°çš„å®ç°ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šç±»çš„å£°æ˜ï¼ˆ<code>class MyClass { /* ... */ };</code>ï¼‰æœ¬èº«å°±æ˜¯ä¸€ç§å®šä¹‰ï¼Œå®ƒå®šä¹‰äº† <code>MyClass</code> è¿™ä¸ªç±»å‹ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ç¿»è¯‘å•å…ƒ (Translation Unit)</strong></p>
<ul>
<li>ä¸€ä¸ª<strong>ç¿»è¯‘å•å…ƒ</strong>æ˜¯æŒ‡ä¸€ä¸ª <code>.cpp</code> æºæ–‡ä»¶åŠå…¶æ‰€æœ‰è¢« <code>#include</code> é¢„å¤„ç†æŒ‡ä»¤åŒ…å«çš„å¤´æ–‡ä»¶ï¼ˆç»è¿‡å®å±•å¼€ç­‰é¢„å¤„ç†åï¼‰å…±åŒå½¢æˆçš„ä¸€ä¸ªå•ä¸€çš„ã€ç”¨äºç¼–è¯‘çš„æ–‡æœ¬æ–‡ä»¶ã€‚</li>
<li>æ¯ä¸ª <code>.cpp</code> æ–‡ä»¶éƒ½ä¼šè¢«ç‹¬ç«‹ç¼–è¯‘æˆä¸€ä¸ª<strong>ç›®æ ‡æ–‡ä»¶</strong>ï¼ˆobject fileï¼Œé€šå¸¸æ˜¯ <code>.o</code> æˆ– <code>.obj</code> åç¼€ï¼‰ã€‚</li>
<li>æœ€ç»ˆï¼Œé“¾æ¥å™¨ï¼ˆlinkerï¼‰ä¼šå°†æ‰€æœ‰è¿™äº›ç›®æ ‡æ–‡ä»¶ä»¥åŠä»»ä½•æ‰€éœ€çš„åº“æ–‡ä»¶ç»„åˆèµ·æ¥ï¼Œç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œç¨‹åºã€‚</li>
</ul>
</li>
</ol>
<p>ç†è§£äº†å£°æ˜ã€å®šä¹‰å’Œç¿»è¯‘å•å…ƒåï¼Œæˆ‘ä»¬æ¥çœ‹ODRåœ¨ä¸åŒC++å®ä½“ä¸Šçš„å…·ä½“åº”ç”¨ï¼š</p>
<h3 id="1-è‡ªç”±å˜é‡-Freestanding-Variables"><a href="#1-è‡ªç”±å˜é‡-Freestanding-Variables" class="headerlink" title="1. è‡ªç”±å˜é‡ (Freestanding Variables)"></a><strong>1. è‡ªç”±å˜é‡ (Freestanding Variables)</strong></h3><p><strong>è§„åˆ™:</strong> ä¸€ä¸ªè‡ªç”±å˜é‡ï¼ˆå³éç±»çš„æˆå‘˜ï¼Œä¹Ÿä¸åœ¨ä»»ä½•å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œé€šå¸¸æŒ‡å…¨å±€å˜é‡ï¼‰åœ¨æ•´ä¸ªC++ç¨‹åºä¸­åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚</p>
<p><strong>è§£é‡Š:</strong><br>å¦‚æœä½ åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒï¼ˆå³å¤šä¸ª <code>.cpp</code> æ–‡ä»¶ï¼‰ä¸­å®šä¹‰äº†åŒåçš„å…¨å±€å˜é‡ï¼Œé“¾æ¥å™¨åœ¨å°è¯•åˆå¹¶è¿™äº›ç›®æ ‡æ–‡ä»¶æ—¶ä¼šå‘ç°å¤šä¸ªåŒåå˜é‡çš„å®šä¹‰ï¼Œå®ƒä¸çŸ¥é“è¯¥é€‰æ‹©å“ªä¸€ä¸ªï¼Œå› æ­¤ä¼šæŠ¥é”™ã€‚å³ä½¿åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­å¤šæ¬¡å®šä¹‰åŒä¸€ä¸ªå˜é‡ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šæŠ¥é”™ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹:</strong></p>
<ul>
<li><p><strong><code>main.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹1: åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…å¤šæ¬¡å®šä¹‰å˜é‡ (ç¼–è¯‘é”™è¯¯)</span></span><br><span class="line"><span class="comment">// int weight = 10.0; // ç¬¬ä¸€æ¬¡å®šä¹‰</span></span><br><span class="line"><span class="comment">// int weight = 20.0; // å†æ¬¡å®šä¹‰ - è¿åODR</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ä¸€ä¸ªåˆæ³•çš„å…¨å±€å˜é‡</span></span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">double</span> globalWeight; <span class="comment">// å£°æ˜ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ globalWeight å­˜åœ¨äºåˆ«å¤„</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å½“å‰é‡é‡: "</span> &lt;&lt; globalWeight &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong><code>some_other_file.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹2: åœ¨ä¸åŒç¿»è¯‘å•å…ƒå†…å¤šæ¬¡å®šä¹‰å˜é‡ (é“¾æ¥é”™è¯¯)</span></span><br><span class="line"><span class="comment">// double globalWeight = 10.0; // å®šä¹‰ globalWeight</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯æ­£ç¡®çš„åšæ³•ï¼šä¸€ä¸ªç¿»è¯‘å•å…ƒå®šä¹‰ï¼Œå…¶ä»–ç¿»è¯‘å•å…ƒå£°æ˜</span></span><br><span class="line"><span class="keyword">double</span> globalWeight = <span class="number">10.0</span>; <span class="comment">// globalWeight çš„å”¯ä¸€å®šä¹‰</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>ç¼–è¯‘å’Œè¿è¡Œ:</strong></p>
<ol>
<li>å¦‚æœ <code>main.cpp</code> å’Œ <code>some_other_file.cpp</code> éƒ½åŒ…å« <code>int weight = 10.0;</code> è¿™æ ·çš„å®šä¹‰ï¼Œå½“ä½ å°è¯•ç¼–è¯‘ <code>main.cpp</code> æ—¶ï¼Œå¦‚æœ <code>weight</code> åœ¨ <code>main.cpp</code> ä¸­å®šä¹‰äº†ä¸¤æ¬¡ï¼Œä½ ä¼šç«‹å³å¾—åˆ°ä¸€ä¸ª<strong>ç¼–è¯‘é”™è¯¯</strong>ï¼ˆ<code>redefinition of &#39;weight&#39;</code>ï¼‰ã€‚</li>
<li>å¦‚æœ <code>main.cpp</code> å’Œ <code>some_other_file.cpp</code> å„è‡ªåŒ…å« <code>double globalWeight = 10.0;</code> çš„å®šä¹‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ–‡ä»¶ä¼šåˆ†åˆ«ç¼–è¯‘æˆåŠŸï¼Œç”Ÿæˆ <code>main.o</code> å’Œ <code>some_other_file.o</code>ã€‚ç„¶è€Œï¼Œå½“é“¾æ¥å™¨å°è¯•å°† <code>main.o</code> å’Œ <code>some_other_file.o</code> åˆå¹¶æ—¶ï¼Œå®ƒä¼šå‘ç° <code>globalWeight</code> æœ‰ä¸¤ä¸ªå®šä¹‰ï¼Œæ­¤æ—¶ä¼šæŠ¥<strong>é“¾æ¥é”™è¯¯</strong>ï¼ˆ<code>multiple definition of &#39;globalWeight&#39;</code>ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h3 id="2-å‡½æ•°-Functions"><a href="#2-å‡½æ•°-Functions" class="headerlink" title="2. å‡½æ•° (Functions)"></a><strong>2. å‡½æ•° (Functions)</strong></h3><p><strong>è§„åˆ™:</strong> å‡½æ•°åœ¨æ•´ä¸ªC++ç¨‹åºä¸­åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚</p>
<p><strong>è§£é‡Š:</strong><br>ä¸è‡ªç”±å˜é‡ç±»ä¼¼ï¼Œå¦‚æœä½ åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒæˆ–å¤šä¸ªç¿»è¯‘å•å…ƒä¸­æä¾›äº†åŒä¸€ä¸ªå‡½æ•°çš„å¤šä¸ªå®šä¹‰ï¼Œç¼–è¯‘å™¨æˆ–é“¾æ¥å™¨ä¼šæŠ¥é”™ã€‚ä¸€ä¸ªå‡½æ•°å¯ä»¥è¢«å¤šæ¬¡å£°æ˜ï¼ˆæ¯”å¦‚åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼‰ï¼Œä½†åªèƒ½è¢«å®šä¹‰ä¸€æ¬¡ï¼ˆé€šå¸¸åœ¨å¯¹åº”çš„ <code>.cpp</code> æ–‡ä»¶ä¸­ï¼‰ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹:</strong></p>
<ul>
<li><p><strong><code>main.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹1: åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…å¤šæ¬¡å®šä¹‰å‡½æ•° (ç¼–è¯‘é”™è¯¯)</span></span><br><span class="line"><span class="comment">// double Add(double a, double b) &#123; return a + b; &#125;</span></span><br><span class="line"><span class="comment">// double Add(double a, double b) &#123; return a - b; &#125; // å†æ¬¡å®šä¹‰ - è¿åODR</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Add</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> result = Add(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ç»“æœ: "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong><code>some_other_file.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹2: åœ¨ä¸åŒç¿»è¯‘å•å…ƒå†…å¤šæ¬¡å®šä¹‰å‡½æ•° (é“¾æ¥é”™è¯¯)</span></span><br><span class="line"><span class="comment">// double Add(double a, double b) &#123; return a + b; &#125; // å®šä¹‰ Add å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯æ­£ç¡®çš„åšæ³•ï¼šå‡½æ•°çš„å”¯ä¸€å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Add</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>ç¼–è¯‘å’Œè¿è¡Œ:</strong></p>
<ol>
<li>å¦‚æœåœ¨ <code>main.cpp</code> ä¸­å®šä¹‰äº†ä¸¤æ¬¡ <code>Add</code> å‡½æ•°ï¼Œä¼šå¾—åˆ°<strong>ç¼–è¯‘é”™è¯¯</strong>ï¼ˆ<code>redefinition of &#39;Add(double, double)&#39;</code>ï¼‰ã€‚</li>
<li>å¦‚æœ <code>main.cpp</code> å’Œ <code>some_other_file.cpp</code> å„è‡ªåŒ…å«äº† <code>Add</code> å‡½æ•°çš„å®šä¹‰ï¼Œåˆ™ä¼šå‘ç”Ÿ<strong>é“¾æ¥é”™è¯¯</strong>ï¼ˆ<code>multiple definition of &#39;Add(double, double)&#39;</code>ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h3 id="3-ç±»-Classes"><a href="#3-ç±»-Classes" class="headerlink" title="3. ç±» (Classes)"></a><strong>3. ç±» (Classes)</strong></h3><p><strong>è§„åˆ™:</strong> ç±»æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚ä¸€ä¸ªç±»çš„å®šä¹‰å¯ä»¥ï¼ˆä¹Ÿé€šå¸¸ä¼šï¼‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Œä½†å‰ææ˜¯è¿™äº›å®šä¹‰å¿…é¡»æ˜¯<strong>å®Œå…¨ç›¸åŒçš„</strong>ã€‚åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚</p>
<p><strong>è§£é‡Š:</strong><br>ä¸ºäº†åœ¨ä¸åŒçš„ <code>.cpp</code> æ–‡ä»¶ä¸­ä½¿ç”¨åŒä¸€ä¸ªç±»çš„å¯¹è±¡æˆ–è®¿é—®å…¶æˆå‘˜ï¼Œè¿™äº› <code>.cpp</code> æ–‡ä»¶éƒ½éœ€è¦â€œçœ‹åˆ°â€è¿™ä¸ªç±»çš„å®Œæ•´å®šä¹‰ã€‚è¿™é€šå¸¸é€šè¿‡å°†ç±»çš„å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ<code>.h</code> æˆ– <code>.hpp</code>ï¼‰ä¸­ï¼Œç„¶ååœ¨ä½¿ç”¨åˆ°è¯¥ç±»çš„æ‰€æœ‰ <code>.cpp</code> æ–‡ä»¶ä¸­ <code>#include</code> è¿™ä¸ªå¤´æ–‡ä»¶æ¥å®ç°ã€‚å°½ç®¡è¿™å¯¼è‡´ç±»çš„å®šä¹‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­é‡å¤å‡ºç°ï¼Œä½†C++æ ‡å‡†å…è®¸è¿™ç§æƒ…å†µï¼Œåªè¦å®ƒä»¬å®Œå…¨ä¸€è‡´ï¼Œé“¾æ¥å™¨å°±ä¸ä¼šæŠ¥é”™ã€‚å¦‚æœåŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°äº†åŒä¸€ä¸ªç±»çš„å¤šä¸ªå®šä¹‰ï¼Œç¼–è¯‘å™¨åˆ™ä¼šæŠ¥é”™ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹:</strong></p>
<ul>
<li><p><strong><code>point.h</code></strong> (å¤´æ–‡ä»¶ï¼ŒåŒ…å«ç±»çš„å®šä¹‰)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> POINT_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> POINT_H</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span> <span class="comment">// Point ç±»çš„å®šä¹‰</span></span><br><span class="line">    <span class="keyword">int</span> m_x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> m_y = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong><code>main.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"point.h"</span> <span class="comment">// åŒ…å« Point ç±»çš„å®šä¹‰</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Point p1; <span class="comment">// åˆ›å»º Point å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"P1.x: "</span> &lt;&lt; p1.m_x &lt;&lt; <span class="string">", P1.y: "</span> &lt;&lt; p1.m_y &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¤ºä¾‹ï¼šåœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…å¤šæ¬¡å®šä¹‰ç±» (ç¼–è¯‘é”™è¯¯)</span></span><br><span class="line">    <span class="comment">// struct Point &#123; int a, b; &#125;; // å†æ¬¡å®šä¹‰ Point - è¿åODR</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong><code>some_other_file.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"point.h"</span> <span class="comment">// åŒ…å« Point ç±»çš„å®šä¹‰</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createAndUsePoint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Point p2; <span class="comment">// åœ¨å¦ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­åˆ›å»º Point å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>ç¼–è¯‘å’Œè¿è¡Œ:</strong></p>
<ul>
<li>åœ¨ <code>main.cpp</code> å’Œ <code>some_other_file.cpp</code> ä¸­éƒ½åŒ…å«äº† <code>point.h</code>ï¼Œå› æ­¤ <code>Point</code> ç±»çš„å®šä¹‰åœ¨ä¸¤ä¸ªç¿»è¯‘å•å…ƒä¸­éƒ½å‡ºç°äº†ã€‚è¿™æ˜¯<strong>å…è®¸çš„</strong>ï¼Œç¨‹åºä¼šæ­£å¸¸ç¼–è¯‘å’Œé“¾æ¥ã€‚</li>
<li>å¦‚æœåœ¨ <code>main.cpp</code> ä¸­æ‰‹åŠ¨å†™äº†ä¸¤æ¬¡ <code>struct Point { ... };</code> å¹¶ä¸”å®ƒä»¬å®šä¹‰çš„å†…å®¹ä¸åŒï¼Œæˆ–è€…ç›´æ¥åœ¨ <code>main.cpp</code> ä¸­åŒ…å«äº† <code>point.h</code> åˆè‡ªå·±å®šä¹‰äº†ä¸€ä¸ªåŒåçš„ <code>Point</code> ç»“æ„ä½“ï¼Œé‚£ä¹ˆä¼šå¾—åˆ°<strong>ç¼–è¯‘é”™è¯¯</strong>ï¼ˆ<code>redefinition of &#39;Point&#39;</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 id="4-æˆå‘˜å‡½æ•°-Member-Functions-å’Œ-é™æ€æˆå‘˜-Static-Members"><a href="#4-æˆå‘˜å‡½æ•°-Member-Functions-å’Œ-é™æ€æˆå‘˜-Static-Members" class="headerlink" title="4. æˆå‘˜å‡½æ•° (Member Functions) å’Œ é™æ€æˆå‘˜ (Static Members)"></a><strong>4. æˆå‘˜å‡½æ•° (Member Functions) å’Œ é™æ€æˆå‘˜ (Static Members)</strong></h3><p><strong>è§„åˆ™:</strong></p>
<ul>
<li>ç±»çš„<strong>æˆå‘˜å‡½æ•°</strong>ï¼ˆåŒ…æ‹¬æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ï¼‰çš„å®šä¹‰ï¼Œåœ¨æ•´ä¸ªç¨‹åºä¸­åªèƒ½æœ‰ä¸€ä¸ªã€‚</li>
<li>ç±»çš„<strong>é™æ€æ•°æ®æˆå‘˜</strong>ï¼ˆ<code>static</code> æˆå‘˜å˜é‡ï¼‰çš„å®šä¹‰ï¼Œåœ¨æ•´ä¸ªç¨‹åºä¸­ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªã€‚</li>
</ul>
<p><strong>è§£é‡Š:</strong><br>è™½ç„¶ç±»çš„å®šä¹‰å¯ä»¥å‡ºç°åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒï¼Œä½†å…¶æˆå‘˜å‡½æ•°å’Œé™æ€æ•°æ®æˆå‘˜çš„<strong>å®ç°/å®šä¹‰</strong>ä»ç„¶éµå¾ªå…¨å±€çš„ODRã€‚é€šå¸¸ï¼Œå®ƒä»¬çš„å£°æ˜æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼ˆéšç±»å®šä¹‰ä¸€èµ·ï¼‰ï¼Œè€Œå®ƒä»¬çš„å®šä¹‰åˆ™æ”¾åœ¨ä¸€ä¸ªï¼ˆä¸”ä»…ä¸€ä¸ªï¼‰<code>.cpp</code> æ–‡ä»¶ä¸­ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹:</strong></p>
<ul>
<li><p><strong><code>person.h</code></strong> (å¤´æ–‡ä»¶)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> PERSON_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PERSON_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> m_fullName;</span><br><span class="line">    <span class="keyword">int</span> m_age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€æˆå‘˜å£°æ˜ (ä¸æ˜¯å®šä¹‰)</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> s_personCount; <span class="comment">// å£°æ˜é™æ€æˆå‘˜</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°å£°æ˜</span></span><br><span class="line">    Person(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; name_param, <span class="keyword">int</span> age_param);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PrintInfo</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong><code>person.cpp</code></strong> (å®ç°æ–‡ä»¶ï¼ŒåŒ…å«æˆå‘˜å‡½æ•°å’Œé™æ€æˆå‘˜çš„å®šä¹‰)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"person.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€æ•°æ®æˆå‘˜çš„å®šä¹‰ (å¿…é¡»åœ¨ç±»å¤–å®šä¹‰ï¼Œä¸”åªèƒ½å®šä¹‰ä¸€æ¬¡)</span></span><br><span class="line"><span class="keyword">int</span> Person::s_personCount = <span class="number">0</span>; <span class="comment">// Person::s_personCount çš„å”¯ä¸€å®šä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line">Person::Person(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; name_param, <span class="keyword">int</span> age_param)</span><br><span class="line">    : m_fullName(name_param), m_age(age_param) &#123;</span><br><span class="line">    s_personCount++; <span class="comment">// æ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶é€’å¢è®¡æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆå‘˜å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Person::PrintInfo</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"å§“å: "</span> &lt;&lt; m_fullName &lt;&lt; <span class="string">", å¹´é¾„: "</span> &lt;&lt; m_age</span><br><span class="line">              &lt;&lt; <span class="string">", å½“å‰äººæ•°: "</span> &lt;&lt; s_personCount &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong><code>main.cpp</code></strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"person.h"</span> <span class="comment">// åŒ…å« Person ç±»çš„å£°æ˜</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">"å¼ ä¸‰"</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line">    p1.PrintInfo();</span><br><span class="line"></span><br><span class="line">    <span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">"æå››"</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line">    p2.PrintInfo();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¤ºä¾‹ï¼šåœ¨ main.cpp ä¸­å†æ¬¡å®šä¹‰ Person::s_personCount æˆ– Person::Person (é“¾æ¥é”™è¯¯)</span></span><br><span class="line">    <span class="comment">// int Person::s_personCount = 100; // å†æ¬¡å®šä¹‰ - è¿åODR</span></span><br><span class="line">    <span class="comment">// Person::Person(const std::string&amp; name_param, int age_param) &#123;&#125; // å†æ¬¡å®šä¹‰ - è¿åODR</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>ç¼–è¯‘å’Œè¿è¡Œ:</strong></p>
<ul>
<li><code>person.cpp</code> åŒ…å«äº† <code>Person</code> ç±»æˆå‘˜å‡½æ•°å’Œé™æ€æˆå‘˜çš„å®šä¹‰ã€‚</li>
<li><code>main.cpp</code> åŒ…å«äº† <code>Person</code> ç±»çš„å£°æ˜ï¼Œå¹¶ä½¿ç”¨äº† <code>Person</code> å¯¹è±¡ã€‚</li>
<li>ç¨‹åºä¼šæ­£å¸¸ç¼–è¯‘å’Œé“¾æ¥ã€‚</li>
<li>å¦‚æœä½ åœ¨ <code>main.cpp</code> æˆ– <code>some_other_file.cpp</code> ä¸­å†æ¬¡å®šä¹‰ <code>Person::s_personCount</code> æˆ– <code>Person::Person</code> æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°<strong>é“¾æ¥é”™è¯¯</strong>ï¼ˆ<code>multiple definition of &#39;Person::s_personCount&#39;</code> æˆ– <code>multiple definition of &#39;Person::Person(std::string, int)&#39;</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ€»ç»“:</strong><br>ODRçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>â€œä¸€ä¸ªå®ä½“ï¼Œä¸€ä¸ªå®šä¹‰â€</strong>ã€‚è¿™ä¸ªè§„åˆ™ç¡®ä¿äº†ç¨‹åºä¸­æ¯ä¸ªå‘½åå®ä½“éƒ½æœ‰ä¸€ä¸ªæ˜ç¡®çš„ã€å”¯ä¸€çš„å«ä¹‰ï¼Œé¿å…äº†æ­§ä¹‰ã€‚ç±»çš„å®šä¹‰æœ¬èº«æ˜¯ç‰¹ä¾‹ï¼Œå¯ä»¥è·¨ç¿»è¯‘å•å…ƒé‡å¤å‡ºç°ï¼Œä½†å…¶å†…éƒ¨çš„æˆå‘˜å‡½æ•°å’Œé™æ€æ•°æ®æˆå‘˜çš„å®ç°ä»éœ€éµå¾ªä¸¥æ ¼çš„å•ä¸€å®šä¹‰åŸåˆ™ã€‚</p>
<hr>
<h2 id="QA-é—ªå­˜å¡-Flash-Cards"><a href="#QA-é—ªå­˜å¡-Flash-Cards" class="headerlink" title="QA é—ªå­˜å¡ (Flash Cards)"></a><strong>QA é—ªå­˜å¡ (Flash Cards)</strong></h2><p><strong>Q1:</strong> ä»€ä¹ˆæ˜¯C++ä¸­çš„ä¸€æ¬¡å®šä¹‰è§„åˆ™ï¼ˆODRï¼‰ï¼Ÿ<br><strong>A1:</strong> ä¸€æ¬¡å®šä¹‰è§„åˆ™ï¼ˆODRï¼‰è§„å®šäº†C++ç¨‹åºä¸­æ¯ä¸ªå®ä½“ï¼ˆå¦‚å˜é‡ã€å‡½æ•°ã€ç±»ï¼‰çš„å®šä¹‰åœ¨æ•´ä¸ªç¨‹åºä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</p>
<p><strong>Q2:</strong> å£°æ˜ (declaration) å’Œ å®šä¹‰ (definition) æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br><strong>A2:</strong> <strong>å£°æ˜</strong>å‘Šè¯‰ç¼–è¯‘å™¨ä¸€ä¸ªå®ä½“å­˜åœ¨åŠå…¶ç±»å‹ï¼Œä½†ä¸åˆ†é…å†…å­˜æˆ–æä¾›å®ç°ã€‚<strong>å®šä¹‰</strong>é™¤äº†å£°æ˜å¤–ï¼Œè¿˜ä¼šåˆ†é…å†…å­˜æˆ–æä¾›å®Œæ•´å®ç°ã€‚ä¸€ä¸ªå®ä½“å¯ä»¥æœ‰å¤šä¸ªå£°æ˜ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚</p>
<p><strong>Q3:</strong> ä¸ºä»€ä¹ˆç±»çš„å®šä¹‰å¯ä»¥åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Œè€Œä¸ä¼šè¿åODRï¼Ÿ<br><strong>A3:</strong> ç±»çš„å®šä¹‰æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚è™½ç„¶å®ƒåœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­â€œå‡ºç°â€ï¼Œä½†è¿™äº›å‡ºç°è¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªç±»çš„å®šä¹‰ï¼ˆå®ƒä»¬å¿…é¡»å®Œå…¨ç›¸åŒï¼‰ã€‚è¿™æ˜¯ä¸ºäº†è®©é“¾æ¥å™¨åœ¨åˆå¹¶ä¸åŒç›®æ ‡æ–‡ä»¶æ—¶ï¼ŒçŸ¥é“å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨è¯¥ç±»çš„å¯¹è±¡ã€‚å¦‚æœå®ƒä»¬ä¸å®Œå…¨ç›¸åŒï¼Œåˆ™ä¼šå¼•å‘æœªå®šä¹‰è¡Œä¸ºã€‚</p>
<p><strong>Q4:</strong> å¦‚æœæˆ‘åœ¨ä¸¤ä¸ªä¸åŒçš„ <code>.cpp</code> æ–‡ä»¶ä¸­å®šä¹‰äº†åŒä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆé”™è¯¯ï¼Ÿ<br><strong>A4:</strong> ä¼šå‘ç”Ÿ<strong>é“¾æ¥é”™è¯¯</strong>ã€‚å› ä¸ºæ¯ä¸ª <code>.cpp</code> æ–‡ä»¶ä¼šè¢«ç‹¬ç«‹ç¼–è¯‘ï¼Œé“¾æ¥å™¨åœ¨åˆå¹¶ç›®æ ‡æ–‡ä»¶æ—¶ä¼šå‘ç°åŒä¸€ä¸ªå˜é‡è¢«å®šä¹‰äº†ä¸¤æ¬¡ï¼Œå¯¼è‡´æ— æ³•å†³å®šä½¿ç”¨å“ªä¸€ä¸ªå®šä¹‰ã€‚</p>
<p><strong>Q5:</strong> ç±»ä¸­çš„æˆå‘˜å‡½æ•°å®šä¹‰å’Œé™æ€æ•°æ®æˆå‘˜å®šä¹‰ï¼Œæ˜¯å¦ä¹Ÿéµå¾ªODRï¼Ÿ<br><strong>A5:</strong> æ˜¯çš„ã€‚å°½ç®¡ç±»çš„å®šä¹‰å¯ä»¥è·¨ç¿»è¯‘å•å…ƒï¼Œä½†å…¶æˆå‘˜å‡½æ•°å’Œé™æ€æ•°æ®æˆå‘˜çš„å®šä¹‰ï¼ˆå³å®ç°æˆ–åˆå§‹åŒ–ï¼‰åœ¨æ•´ä¸ªç¨‹åºä¸­ä»ç„¶å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œé€šå¸¸æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ <code>.cpp</code> æ–‡ä»¶ä¸­ã€‚</p>
<hr>
<h2 id="å¸¸è§è¯¯è§£æˆ–ç¼–ç é”™è¯¯"><a href="#å¸¸è§è¯¯è§£æˆ–ç¼–ç é”™è¯¯" class="headerlink" title="å¸¸è§è¯¯è§£æˆ–ç¼–ç é”™è¯¯"></a><strong>å¸¸è§è¯¯è§£æˆ–ç¼–ç é”™è¯¯</strong></h2><ol>
<li><p><strong>åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰éå†…è”å‡½æ•°æˆ–å…¨å±€å˜é‡ï¼š</strong></p>
<ul>
<li><strong>è¯¯è§£/é”™è¯¯:</strong> è®¸å¤šåˆå­¦è€…å–œæ¬¢ç›´æ¥åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°æˆ–å…¨å±€å˜é‡ï¼ˆä¾‹å¦‚ <code>int myGlobal = 0;</code> æˆ– <code>void myFunction() { /* ... */ }</code>ï¼‰ã€‚</li>
<li><strong>åæœ:</strong> å¦‚æœè¿™ä¸ªå¤´æ–‡ä»¶è¢«å¤šä¸ª <code>.cpp</code> æ–‡ä»¶åŒ…å«ï¼Œé‚£ä¹ˆæ¯ä¸ª <code>.cpp</code> æ–‡ä»¶éƒ½ä¼šåŒ…å«è¿™ä¸ªå‡½æ•°æˆ–å˜é‡çš„å®šä¹‰ã€‚å½“è¿™äº› <code>.cpp</code> æ–‡ä»¶è¢«ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶åï¼Œé“¾æ¥å™¨ä¼šå‘ç°åŒä¸€ä¸ªå‡½æ•°æˆ–å˜é‡è¢«å®šä¹‰äº†å¤šæ¬¡ï¼Œä»è€Œå¯¼è‡´<strong>é“¾æ¥é”™è¯¯</strong>ï¼ˆ<code>multiple definition</code>ï¼‰ã€‚</li>
<li><strong>æ­£ç¡®åšæ³•:</strong> åœ¨å¤´æ–‡ä»¶ä¸­åªæ”¾ç½®å‡½æ•°<strong>å£°æ˜</strong>å’Œå…¨å±€å˜é‡<strong>å£°æ˜</strong>ï¼ˆä½¿ç”¨ <code>extern</code> å…³é”®å­—ï¼‰ï¼Œè€Œå®ƒä»¬çš„<strong>å®šä¹‰</strong>åˆ™æ”¾åœ¨ä¸€ä¸ªï¼ˆä¸”ä»…ä¸€ä¸ªï¼‰å¯¹åº”çš„ <code>.cpp</code> æ–‡ä»¶ä¸­ã€‚å¯¹äºå‡½æ•°ï¼Œå¦‚æœå®ƒä»¬æ˜¯å†…è”å‡½æ•°ï¼ˆ<code>inline</code>ï¼‰æˆ–è€…ç±»æ¨¡æ¿/å‡½æ•°æ¨¡æ¿ï¼Œåˆ™å…è®¸åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ODRçš„ç‰¹æ®Šä¾‹å¤–ã€‚</li>
</ul>
</li>
<li><p><strong>å¿˜è®°æˆ–é”™è¯¯åœ°å®šä¹‰é™æ€æ•°æ®æˆå‘˜ï¼š</strong></p>
<ul>
<li><strong>è¯¯è§£/é”™è¯¯:</strong> åœ¨ç±»å®šä¹‰ä¸­å£°æ˜äº† <code>static int count;</code>ï¼Œä½†å¿˜è®°åœ¨ä»»ä½• <code>.cpp</code> æ–‡ä»¶ä¸­æä¾›å…¶å®šä¹‰ï¼ˆ<code>int MyClass::count = 0;</code>ï¼‰ï¼Œæˆ–è€…åœ¨å¤šä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­é‡å¤å®šä¹‰äº†å®ƒã€‚</li>
<li><strong>åæœ:</strong> å¿˜è®°å®šä¹‰ä¼šå¯¼è‡´<strong>é“¾æ¥é”™è¯¯</strong>ï¼ˆ<code>undefined reference</code>ï¼‰ï¼Œå› ä¸ºé“¾æ¥å™¨æ‰¾ä¸åˆ°è¯¥é™æ€æˆå‘˜çš„å®é™…å­˜å‚¨ä½ç½®ã€‚é‡å¤å®šä¹‰åˆ™ä¼šå¯¼è‡´<strong>é“¾æ¥é”™è¯¯</strong>ï¼ˆ<code>multiple definition</code>ï¼‰ã€‚</li>
<li><strong>æ­£ç¡®åšæ³•:</strong> é™æ€æ•°æ®æˆå‘˜çš„å£°æ˜åœ¨ç±»å†…éƒ¨ï¼ˆå¤´æ–‡ä»¶ï¼‰ï¼Œä½†å®ƒçš„<strong>å®šä¹‰</strong>ï¼ˆåˆå§‹åŒ–ï¼‰å¿…é¡»åœ¨ç±»å¤–éƒ¨ï¼Œä¸”åªèƒ½åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­ã€‚</li>
</ul>
</li>
<li><p><strong>å¯¹å¤´æ–‡ä»¶ä¸­çš„ç±»å®šä¹‰è¿›è¡Œä¿®æ”¹ï¼Œä½†æ²¡æœ‰é‡å»ºæ‰€æœ‰ä¾èµ–çš„ <code>.cpp</code> æ–‡ä»¶ï¼š</strong></p>
<ul>
<li><strong>è¯¯è§£/é”™è¯¯:</strong> ä¿®æ”¹äº† <code>MyClass.h</code> ä¸­çš„ç±»å®šä¹‰ï¼ˆä¾‹å¦‚æ·»åŠ æˆ–åˆ é™¤æˆå‘˜ï¼‰ï¼Œä½†åªé‡æ–°ç¼–è¯‘äº† <code>main.cpp</code> è€Œä¸æ˜¯æ‰€æœ‰åŒ…å« <code>MyClass.h</code> çš„ <code>.cpp</code> æ–‡ä»¶ã€‚</li>
<li><strong>åæœ:</strong> è¿™å¯èƒ½å¯¼è‡´é“¾æ¥å™¨é”™è¯¯ï¼Œæˆ–è€…æ›´ç³Ÿçš„æ˜¯ï¼Œå¯¼è‡´è¿è¡Œæ—¶æœªå®šä¹‰è¡Œä¸ºï¼Œå› ä¸ºä¸åŒç¿»è¯‘å•å…ƒä¸­å¯¹ <code>MyClass</code> çš„ç†è§£ä¸ä¸€è‡´ï¼ˆâ€œä¸ä¸€è‡´çš„å®šä¹‰â€ï¼‰ã€‚</li>
<li><strong>æ­£ç¡®åšæ³•:</strong> åªè¦å¤´æ–‡ä»¶è¢«ä¿®æ”¹ï¼Œæ‰€æœ‰åŒ…å«è¯¥å¤´æ–‡ä»¶çš„ <code>.cpp</code> æ–‡ä»¶éƒ½åº”è¯¥é‡æ–°ç¼–è¯‘ï¼Œä»¥ç¡®ä¿æ‰€æœ‰ç¿»è¯‘å•å…ƒä¸­çš„å®šä¹‰éƒ½æ˜¯æœ€æ–°ä¸”ä¸€è‡´çš„ã€‚</li>
</ul>
</li>
<li><p><strong>æ··æ·† <code>const</code> å…¨å±€å˜é‡çš„å®šä¹‰ï¼š</strong></p>
<ul>
<li><strong>è¯¯è§£/é”™è¯¯:</strong> è®¤ä¸º <code>const int MAX_VALUE = 100;</code> è¿™æ ·çš„å…¨å±€å¸¸é‡åœ¨å¤šä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­å¯ä»¥é‡å¤å®šä¹‰ã€‚</li>
<li><strong>è§£é‡Š:</strong> C++æ ‡å‡†è§„å®šï¼Œ<code>const</code> ä¿®é¥°çš„å…¨å±€å˜é‡é»˜è®¤å…·æœ‰å†…éƒ¨é“¾æ¥ï¼ˆ<code>internal linkage</code>ï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åªåœ¨å®šä¹‰å®ƒä»¬çš„ç¿»è¯‘å•å…ƒå†…å¯è§ã€‚å› æ­¤ï¼Œå³ä½¿ä½ åœ¨å¤šä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­å®šä¹‰äº†åŒåçš„ <code>const int MAX_VALUE = 100;</code>ï¼Œè¿™ä¹Ÿä¸ä¼šå¯¼è‡´é“¾æ¥é”™è¯¯ï¼Œå› ä¸ºæ¯ä¸ªéƒ½æ˜¯å…¶æ‰€åœ¨ç¿»è¯‘å•å…ƒçš„å±€éƒ¨å‰¯æœ¬ã€‚ä½†æ˜¯ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¹¶éæ‰€æœ‰ç±»å‹éƒ½å¦‚æ­¤ï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´å¯¹â€œåŒä¸€â€å¸¸é‡çš„ä¸åŒå‰¯æœ¬ã€‚</li>
<li><strong>æ­£ç¡®åšæ³•:</strong> å¦‚æœä½ å¸Œæœ›ä¸€ä¸ª <code>const</code> å…¨å±€å˜é‡åœ¨æ•´ä¸ªç¨‹åºä¸­éƒ½æ˜¯å”¯ä¸€çš„ä¸”å…±äº«åŒä¸€ä¸ªåœ°å€ï¼Œä½ éœ€è¦æ˜¾å¼åœ°ç»™å®ƒ <code>extern</code> å…³é”®å­—è¿›è¡Œå£°æ˜ï¼ˆ<code>extern const int MAX_VALUE;</code>ï¼‰ï¼Œå¹¶åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­ç»™å‡ºå…¶å®šä¹‰ï¼ˆ<code>const int MAX_VALUE = 100;</code>ï¼‰ã€‚æˆ–è€…ï¼Œå¯¹äºå¸¸é‡ï¼Œæ›´å¥½çš„åšæ³•é€šå¸¸æ˜¯ä½¿ç”¨ <code>enum class</code> æˆ– <code>constexpr</code> å˜é‡ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="ç¼–ç¨‹ç»ƒä¹ "><a href="#ç¼–ç¨‹ç»ƒä¹ " class="headerlink" title="ç¼–ç¨‹ç»ƒä¹ "></a><strong>ç¼–ç¨‹ç»ƒä¹ </strong></h2><p>ç°åœ¨ï¼Œè¯·æ‚¨å°è¯•ä¿®æ”¹ä»¥ä¸‹ä»£ç ï¼Œä½¿å…¶éµå®ˆä¸€æ¬¡å®šä¹‰è§„åˆ™ï¼Œå¹¶èƒ½æˆåŠŸç¼–è¯‘è¿è¡Œã€‚æ‚¨çš„ä»»åŠ¡æ˜¯ä¿®å¤ <code>main.cpp</code> å’Œ <code>utils.cpp</code> ä¸­çš„ ODR è¿è§„ã€‚</p>
<p><strong>æ–‡ä»¶ç»“æ„ï¼š</strong></p>
<ul>
<li><code>common.h</code></li>
<li><code>main.cpp</code></li>
<li><code>utils.cpp</code></li>
</ul>
<hr>
<p><strong><code>common.h</code></strong> (è¯·å‹¿ä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„å£°æ˜)<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> COMMON_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> COMMON_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_sharedCounter;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMessage</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; msg)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyData</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> instanceCount; <span class="comment">// å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line">    MyData(<span class="keyword">int</span> val); <span class="comment">// æ„é€ å‡½æ•°å£°æ˜</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showValue</span><span class="params">()</span> <span class="keyword">const</span></span>; <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// COMMON_H</span></span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>main.cpp</code></strong> (è¯·åœ¨æ­¤æ–‡ä»¶ä¸­å¡«å†™ <code>TODO</code> éƒ¨åˆ†çš„ä»£ç ï¼Œä½¿å…¶éµå®ˆ ODR)<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"common.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 1: è¿™æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡çš„å®šä¹‰ï¼Œè¯·ç¡®ä¿å®ƒéµå®ˆ ODRã€‚</span></span><br><span class="line"><span class="comment">// æ€è€ƒï¼šå®ƒåº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿå¦‚æœæ”¾åœ¨è¿™é‡Œï¼Œä¼šå’Œå¦ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å®šä¹‰å†²çªå—ï¼Ÿ</span></span><br><span class="line"><span class="comment">// int g_sharedCounter = 0; // è¿™è¡Œä»£ç ç›®å‰æ˜¯ ODR è¿è§„çš„æ½œåœ¨æ¥æºï¼Œè¯·æ€è€ƒå¦‚ä½•å¤„ç†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 2: è¿™æ˜¯ä¸€ä¸ªå‡½æ•°çš„å®šä¹‰ã€‚è¯·ç¡®ä¿å®ƒéµå®ˆ ODRã€‚</span></span><br><span class="line"><span class="comment">// æ€è€ƒï¼šå®ƒåº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ</span></span><br><span class="line"><span class="comment">// void printMessage(const std::string&amp; msg) &#123; // è¿™è¡Œä»£ç ç›®å‰æ˜¯ ODR è¿è§„çš„æ½œåœ¨æ¥æº</span></span><br><span class="line"><span class="comment">//     std::cout &lt;&lt; "æ¶ˆæ¯: " &lt;&lt; msg &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å…¨å±€å˜é‡</span></span><br><span class="line">    g_sharedCounter = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"main.cpp ä¸­çš„ g_sharedCounter: "</span> &lt;&lt; g_sharedCounter &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨å‡½æ•°</span></span><br><span class="line">    printMessage(<span class="string">"Hello from main.cpp!"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ MyData ç±»</span></span><br><span class="line">    <span class="function">MyData <span class="title">d1</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    d1.showValue();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>utils.cpp</code></strong> (è¯·åœ¨æ­¤æ–‡ä»¶ä¸­å¡«å†™ <code>TODO</code> éƒ¨åˆ†çš„ä»£ç ï¼Œä½¿å…¶éµå®ˆ ODR)<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"common.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 3: åœ¨è¿™é‡Œæä¾› g_sharedCounter çš„å”¯ä¸€å®šä¹‰ã€‚</span></span><br><span class="line"><span class="comment">// int g_sharedCounter = 0; // è¿™è¡Œä»£ç æ˜¯ ODR è¿è§„çš„æ½œåœ¨æ¥æºï¼Œè¯·æ€è€ƒå¦‚ä½•å¤„ç†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 4: åœ¨è¿™é‡Œæä¾› printMessage å‡½æ•°çš„å”¯ä¸€å®šä¹‰ã€‚</span></span><br><span class="line"><span class="comment">// void printMessage(const std::string&amp; msg) &#123; // è¿™è¡Œä»£ç æ˜¯ ODR è¿è§„çš„æ½œåœ¨æ¥æº</span></span><br><span class="line"><span class="comment">//     std::cout &lt;&lt; "Another message: " &lt;&lt; msg &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 5: åœ¨è¿™é‡Œæä¾› MyData ç±»çš„é™æ€æˆå‘˜å˜é‡ instanceCount çš„å”¯ä¸€å®šä¹‰ã€‚</span></span><br><span class="line"><span class="comment">// æ€è€ƒï¼šå®ƒåº”è¯¥å¦‚ä½•å®šä¹‰ï¼Ÿ</span></span><br><span class="line"><span class="comment">// int MyData::instanceCount = 0; // è¿™è¡Œä»£ç æ˜¯ ODR è¿è§„çš„æ½œåœ¨æ¥æºï¼Œè¯·æ€è€ƒå¦‚ä½•å¤„ç†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 6: åœ¨è¿™é‡Œæä¾› MyData æ„é€ å‡½æ•°çš„å”¯ä¸€å®šä¹‰ã€‚</span></span><br><span class="line"><span class="comment">// æ€è€ƒï¼šå®ƒåº”è¯¥å¦‚ä½•å®šä¹‰ï¼Ÿ</span></span><br><span class="line"><span class="comment">// MyData::MyData(int val) &#123; // è¿™è¡Œä»£ç æ˜¯ ODR è¿è§„çš„æ½œåœ¨æ¥æº</span></span><br><span class="line"><span class="comment">//     value = val;</span></span><br><span class="line"><span class="comment">//     // é™æ€æˆå‘˜åœ¨è¿™é‡Œé€’å¢</span></span><br><span class="line"><span class="comment">//     instanceCount++;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 7: åœ¨è¿™é‡Œæä¾› MyData::showValue æˆå‘˜å‡½æ•°çš„å”¯ä¸€å®šä¹‰ã€‚</span></span><br><span class="line"><span class="comment">// æ€è€ƒï¼šå®ƒåº”è¯¥å¦‚ä½•å®šä¹‰ï¼Ÿ</span></span><br><span class="line"><span class="comment">// void MyData::showValue() const &#123; // è¿™è¡Œä»£ç æ˜¯ ODR è¿è§„çš„æ½œåœ¨æ¥æº</span></span><br><span class="line"><span class="comment">//     std::cout &lt;&lt; "MyData value: " &lt;&lt; value &lt;&lt; ", Instances: " &lt;&lt; instanceCount &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">useUtilsFunctionality</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç¡®ä¿ g_sharedCounter åœ¨è¿™é‡Œå¯è§å¹¶å¯ç”¨</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"utils.cpp ä¸­çš„ g_sharedCounter (before update): "</span> &lt;&lt; g_sharedCounter &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    g_sharedCounter++;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"utils.cpp ä¸­çš„ g_sharedCounter (after update): "</span> &lt;&lt; g_sharedCounter &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    printMessage(<span class="string">"Greetings from utils.cpp!"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function">MyData <span class="title">d2</span><span class="params">(<span class="number">15</span>)</span></span>;</span><br><span class="line">    d2.showValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p>è¯·æ‚¨åœ¨ <code>main.cpp</code> å’Œ <code>utils.cpp</code> ä¸­ä¿®æ”¹æˆ–è¡¥å……ä»£ç ï¼Œä½¿å¾—å®ƒä»¬åœ¨è¢«ç¼–è¯‘å’Œé“¾æ¥æ—¶ï¼Œä¸ä¼šå‡ºç° ODR ç›¸å…³çš„ç¼–è¯‘é”™è¯¯æˆ–é“¾æ¥é”™è¯¯ã€‚ç„¶åï¼Œå½“æ‚¨å‡†å¤‡å¥½æ—¶ï¼Œè¯·æäº¤æ‚¨çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-1"><a href="#ğŸ§‘â€ğŸ’»-User-1" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>è§„åˆ™: ç±»æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚ä¸€ä¸ªç±»çš„å®šä¹‰å¯ä»¥ï¼ˆä¹Ÿé€šå¸¸ä¼šï¼‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Œä½†å‰ææ˜¯è¿™äº›å®šä¹‰å¿…é¡»æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚</p>
<p>good practiceæ˜¯åªå®šä¹‰ä¸€æ¬¡ä¹ˆï¼Ÿ</p>
<hr>
<h2 id="ğŸ¤–-Assistant-1"><a href="#ğŸ¤–-Assistant-1" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œå®ƒè§¦åŠäº†C++ä¸€æ¬¡å®šä¹‰è§„åˆ™ä¸­å…³äºç±»çš„ä¸€ä¸ªæ ¸å¿ƒä¸”ç»å¸¸å¼•èµ·æ··æ·†çš„æ–¹é¢ï¼</p>
<p>æ‚¨çš„ç†è§£éå¸¸æ•é”ã€‚å½“æˆ‘è¯´â€œä¸€ä¸ªç±»çš„å®šä¹‰å¯ä»¥ï¼ˆä¹Ÿé€šå¸¸ä¼šï¼‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Œä½†å‰ææ˜¯è¿™äº›å®šä¹‰å¿…é¡»æ˜¯<strong>å®Œå…¨ç›¸åŒçš„</strong>â€æ—¶ï¼Œé‡ç‚¹åœ¨äºâ€œ<strong>å®Œå…¨ç›¸åŒ</strong>â€ã€‚</p>
<p>é‚£ä¹ˆï¼Œâ€œgood practiceâ€æ˜¯å¦æ„å‘³ç€åªå®šä¹‰ä¸€æ¬¡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š<strong>æ˜¯çš„ï¼Œä»ä»£ç ç¼–å†™çš„è§’åº¦æ¥çœ‹ï¼Œå¥½çš„å®è·µæ˜¯åªâ€œç‰©ç†åœ°â€å®šä¹‰ç±»ä¸€æ¬¡ã€‚</strong></p>
<p>è®©æˆ‘æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š</p>
<ol>
<li><p><strong>â€œç‰©ç†å®šä¹‰â€ä¸â€œé€»è¾‘å®šä¹‰â€çš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>ç‰©ç†å®šä¹‰ (Physical Definition):</strong> æŒ‡çš„æ˜¯æ‚¨åœ¨æºä»£ç æ–‡ä»¶ä¸­å®é™…å†™ä¸‹ <code>class MyClass { /* ... */ };</code> è¿™ä¸ªç±»ç»“æ„çš„åœ°æ–¹ã€‚åœ¨å®é™…ç¼–ç ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šæŠŠä¸€ä¸ªç±»çš„å®Œæ•´ç»“æ„å®šä¹‰<strong>åªå†™åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶</strong>ï¼ˆä¾‹å¦‚ <code>MyClass.h</code>ï¼‰ä¸­ã€‚è¿™æ˜¯â€œç‰©ç†ä¸Šâ€åªå®šä¹‰ä¸€æ¬¡ã€‚</li>
<li><strong>é€»è¾‘å®šä¹‰ (Logical Definition) / ç¿»è¯‘å•å…ƒä¸­çš„å®šä¹‰ï¼š</strong> å½“ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶é€šè¿‡ <code>#include &quot;MyClass.h&quot;</code> åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶æ—¶ï¼Œé¢„å¤„ç†å™¨ä¼šæŠŠ <code>MyClass.h</code> ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬ç±»çš„å®šä¹‰ï¼‰å¤åˆ¶ç²˜è´´åˆ°è¿™ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­ã€‚å› æ­¤ï¼Œä»ç¼–è¯‘å™¨çš„è§’åº¦æ¥çœ‹ï¼Œ<code>MyClass</code> çš„å®šä¹‰å°±å­˜åœ¨äºè¿™ä¸ª <code>.cpp</code> æ–‡ä»¶çš„<strong>ç¿»è¯‘å•å…ƒ</strong>ä¸­ã€‚å¦‚æœ <code>MyClass.h</code> è¢« <code>main.cpp</code> å’Œ <code>utils.cpp</code> éƒ½åŒ…å«ï¼Œé‚£ä¹ˆ <code>MyClass</code> çš„å®šä¹‰å°±ä¼šâ€œé€»è¾‘åœ°â€å‡ºç°åœ¨ <code>main.cpp</code> çš„ç¿»è¯‘å•å…ƒå’Œ <code>utils.cpp</code> çš„ç¿»è¯‘å•å…ƒä¸­ã€‚</li>
</ul>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆå…è®¸â€œé€»è¾‘å®šä¹‰â€å¤šæ¬¡å‡ºç°ï¼Ÿ</strong></p>
<ul>
<li>C++æ ‡å‡†å…è®¸ç±»å®šä¹‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­é€»è¾‘åœ°é‡å¤å‡ºç°ï¼Œå‰ææ˜¯è¿™äº›é‡å¤çš„å®šä¹‰<strong>å¿…é¡»æ˜¯é€å­—ï¼ˆtoken by tokenï¼‰ç›¸åŒçš„</strong>ã€‚è¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ¯ä¸ª <code>.cpp</code> æ–‡ä»¶æ—¶ï¼Œéœ€è¦çŸ¥é“ç±»çš„å®Œæ•´å¸ƒå±€ï¼ˆåŒ…æ‹¬æˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°ç­¾åç­‰ï¼‰ï¼Œä»¥ä¾¿æ­£ç¡®åœ°ä¸ºè¯¥ç±»çš„å¯¹è±¡åˆ†é…å†…å­˜ã€è°ƒç”¨å…¶æ–¹æ³•ã€‚é“¾æ¥å™¨åœ¨æœ€åé˜¶æ®µåˆå¹¶æ‰€æœ‰ç›®æ ‡æ–‡ä»¶æ—¶ï¼Œå¦‚æœå‘ç°åŒä¸€ä¸ªç±»çš„ä¸åŒå®šä¹‰ï¼Œå®ƒå¯èƒ½ä¼šé™·å…¥å›°æƒ‘ï¼Œæˆ–è€…å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</li>
<li>é€šè¿‡å°†ç±»å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå¹¶ä½¿ç”¨<strong>å¤´æ–‡ä»¶ä¿æŠ¤</strong>ï¼ˆ<code>#ifndef ... #define ... #endif</code> æˆ– <code>#pragma once</code>ï¼‰æ¥é˜²æ­¢åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…é‡å¤åŒ…å«ï¼Œæˆ‘ä»¬ç¡®ä¿äº†ï¼š<ul>
<li>åœ¨ä¸€ä¸ªå•ç‹¬çš„ç¿»è¯‘å•å…ƒå†…ï¼Œç±»å®šä¹‰ä¸ä¼šé‡å¤ï¼ˆé¿å…ç¼–è¯‘é”™è¯¯ï¼‰ã€‚</li>
<li>åœ¨ä¸åŒç¿»è¯‘å•å…ƒä¹‹é—´ï¼Œç±»å®šä¹‰è™½ç„¶é€»è¾‘ä¸Šé‡å¤ï¼Œä½†ç”±äºå®ƒä»¬éƒ½æ¥è‡ªåŒä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯<strong>å®Œå…¨ç›¸åŒ</strong>çš„ï¼ˆé¿å…é“¾æ¥é”™è¯¯å’Œæœªå®šä¹‰è¡Œä¸ºï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>æ€»ç»“â€œgood practiceâ€ï¼š</strong></p>
<ul>
<li><strong>å°†ç±»çš„å®Œæ•´å®šä¹‰ï¼ˆç»“æ„ã€æˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°å£°æ˜ï¼‰æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„å¤´æ–‡ä»¶ (<code>.h</code> æˆ– <code>.hpp</code>) ä¸­ã€‚</strong> è¿™æ˜¯â€œç‰©ç†å®šä¹‰â€åªå‘ç”Ÿä¸€æ¬¡çš„åœ°æ–¹ã€‚</li>
<li><strong>åœ¨æ‰€æœ‰éœ€è¦ä½¿ç”¨è¯¥ç±»çš„ <code>.cpp</code> æ–‡ä»¶ä¸­ï¼Œ<code>#include</code> è¿™ä¸ªå¤´æ–‡ä»¶ã€‚</strong> è¿™ä¼šå¯¼è‡´ç±»å®šä¹‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­â€œé€»è¾‘åœ°â€å‡ºç°ï¼Œè¿™æ˜¯å…è®¸çš„ï¼Œä¹Ÿæ˜¯å¿…é¡»çš„ã€‚</li>
<li><strong>ç¡®ä¿å¤´æ–‡ä»¶ä¸­æœ‰å¤´æ–‡ä»¶ä¿æŠ¤ï¼ˆInclude Guardsï¼‰ã€‚</strong> è¿™èƒ½é˜²æ­¢åŒä¸€ä¸ªå¤´æ–‡ä»¶åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è¢«å¤šæ¬¡åŒ…å«ï¼Œä»è€Œé¿å…ç¼–è¯‘é”™è¯¯ï¼ˆ<code>redefinition</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<p>æ‰€ä»¥ï¼Œæ‚¨çš„ç†è§£â€œåªå®šä¹‰ä¸€æ¬¡â€æ˜¯æ­£ç¡®çš„ï¼Œä½†è¿™é‡Œçš„â€œä¸€æ¬¡â€æ˜¯æŒ‡<strong>ç‰©ç†ä¸Šæ‚¨ç¼–å†™ä»£ç æ—¶åªå†™ä¸€æ¬¡</strong>ï¼Œè€Œä¸æ˜¯æŒ‡æœ€ç»ˆç¼–è¯‘è¿‡ç¨‹ä¸­å®ƒåªå‡ºç°åœ¨ä¸€ä¸ªç¿»è¯‘å•å…ƒé‡Œã€‚å®ƒä¼šåœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­â€œå‡ºç°â€ï¼Œä½†è¿™äº›å‡ºç°éƒ½æ˜¯åŒä¸€ä»½â€œè“å›¾â€çš„å¤åˆ¶ã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½è®©æ‚¨æ›´æ¸…æ™°åœ°ç†è§£ ODR åœ¨ç±»ä¸Šçš„åº”ç”¨ï¼</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-2"><a href="#ğŸ§‘â€ğŸ’»-User-2" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>ç­‰ä¸‹ï¼Œ ç±»çš„å®šä¹‰æ˜¯æ”¾åœ¨headerå¥½è¿˜æ˜¯cppå¥½ï¼Ÿ ä¹‹å‰çš„è¯¾é‡Œï¼Œ headeré‡Œé¢éƒ½åªæœ‰declaration, å®šä¹‰éƒ½æ˜¯æ”¾åœ¨cppçš„</p>
<hr>
<h2 id="ğŸ¤–-Assistant-2"><a href="#ğŸ¤–-Assistant-2" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼å®ƒè§¦åŠäº†C++ä¸­å£°æ˜ä¸å®šä¹‰ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æ ¸å¿ƒç”¨æ³•ï¼Œä¹Ÿæ˜¯åˆå­¦è€…ç»å¸¸æ„Ÿåˆ°å›°æƒ‘çš„åœ°æ–¹ã€‚</p>
<p>æ‚¨çš„è®°å¿†æ˜¯æ­£ç¡®çš„ï¼š<strong>åœ¨C++ä¸­ï¼Œå¥½çš„å®è·µæ˜¯å¤´æ–‡ä»¶é‡Œé€šå¸¸åªæ”¾å£°æ˜ï¼ˆdeclarationï¼‰ï¼Œè€Œå®šä¹‰ï¼ˆdefinitionï¼‰æ”¾åœ¨å¯¹åº”çš„ <code>.cpp</code> æ–‡ä»¶é‡Œã€‚</strong></p>
<p>ä½†æ˜¯ï¼Œå¯¹äº<strong>ç±»ï¼ˆClassï¼‰çš„å®šä¹‰</strong>ï¼Œæƒ…å†µæœ‰äº›ç‰¹æ®Šï¼Œå®ƒæ˜¯ä¸€ä¸ªé‡è¦çš„ä¾‹å¤–ï¼</p>
<p>è®©æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹ï¼š</p>
<h2 id="1-ä»€ä¹ˆæ˜¯â€œç±»çš„å®šä¹‰â€ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯â€œç±»çš„å®šä¹‰â€ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯â€œç±»çš„å®šä¹‰â€ï¼Ÿ"></a>1. <strong>ä»€ä¹ˆæ˜¯â€œç±»çš„å®šä¹‰â€ï¼Ÿ</strong></h2><p>â€œç±»çš„å®šä¹‰â€æ˜¯æŒ‡ <code>class MyClass { /* ... */ };</code> è¿™æ ·çš„æ•´ä¸ªä»£ç å—ï¼Œå®ƒåŒ…å«äº†ç±»çš„ç»“æ„ã€æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°çš„å£°æ˜ï¼ˆç”šè‡³å¯ä»¥æ˜¯ inline å‡½æ•°çš„å®šä¹‰ï¼‰ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªç±»çš„å®šä¹‰</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> m_data; <span class="comment">// æˆå‘˜å˜é‡å£°æ˜</span></span><br><span class="line">    MyClass(<span class="keyword">int</span> d); <span class="comment">// æ„é€ å‡½æ•°å£°æ˜</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>; <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">    <span class="comment">// inline void print() &#123; std::cout &lt;&lt; m_data &lt;&lt; std::endl; &#125; // ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå®šä¹‰ inline å‡½æ•°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<h2 id="2-ä¸ºä»€ä¹ˆâ€œç±»çš„å®šä¹‰â€è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ-hï¼‰é‡Œï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆâ€œç±»çš„å®šä¹‰â€è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ-hï¼‰é‡Œï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆâ€œç±»çš„å®šä¹‰â€è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ.hï¼‰é‡Œï¼Ÿ"></a>2. <strong>ä¸ºä»€ä¹ˆâ€œç±»çš„å®šä¹‰â€è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ.hï¼‰é‡Œï¼Ÿ</strong></h2><p>è¿™æ˜¯å› ä¸º C++ ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶æ—¶ï¼Œéœ€è¦çŸ¥é“å®ƒæ‰€ä½¿ç”¨çš„<strong>æ‰€æœ‰ç±»å‹ï¼ˆåŒ…æ‹¬ç±»ï¼‰çš„å®Œæ•´ä¿¡æ¯</strong>ã€‚è¿™äº›ä¿¡æ¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>è¿™ä¸ªç±»æœ‰å¤šå°‘ä¸ªæˆå‘˜å˜é‡ï¼Ÿæ¯ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>è¿™ä¸ªç±»çš„å¤§å°æ˜¯å¤šå°‘ï¼Ÿï¼ˆç¼–è¯‘å™¨éœ€è¦çŸ¥é“å¦‚ä½•ä¸ºå®ƒåˆ†é…å†…å­˜ï¼‰</li>
<li>è¿™ä¸ªç±»æœ‰å“ªäº›æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€æˆå‘˜å‡½æ•°ï¼Ÿå®ƒä»¬çš„å‚æ•°å’Œè¿”å›ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç¼–è¯‘å™¨éœ€è¦çŸ¥é“å¦‚ä½•è°ƒç”¨è¿™äº›å‡½æ•°ï¼‰</li>
</ul>
<p>å¦‚æœ <code>MyClass</code> çš„å®šä¹‰åªæ”¾åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶é‡Œï¼Œæ¯”å¦‚ <code>myclass.cpp</code>ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// myclass.cpp</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span> <span class="comment">/* ... */</span> &#125;; <span class="comment">// å®šä¹‰</span></span><br><span class="line"><span class="comment">// ... æˆå‘˜å‡½æ•°å®ç° ...</span></span><br></pre></td></tr></table></figure></div><br>é‚£ä¹ˆå½“ä½ åœ¨ <code>main.cpp</code> ä¸­æƒ³åˆ›å»ºä¸€ä¸ª <code>MyClass</code> çš„å¯¹è±¡æ—¶ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="comment">// å“ªé‡ŒçŸ¥é“ MyClass é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ</span></span><br><span class="line">MyClass obj; <span class="comment">// ç¼–è¯‘é”™è¯¯ï¼š'MyClass' was not declared in this scope</span></span><br></pre></td></tr></table></figure></div><br>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ <code>main.cpp</code> æ—¶æ ¹æœ¬ä¸çŸ¥é“ <code>MyClass</code> æ˜¯ä»€ä¹ˆã€‚</p>
<p>æ‰€ä»¥ï¼Œ<strong>ç±»çš„å®Œæ•´å®šä¹‰å¿…é¡»æ”¾åœ¨å¤´æ–‡ä»¶é‡Œ</strong>ï¼Œç„¶åæ‰€æœ‰éœ€è¦ä½¿ç”¨è¿™ä¸ªç±»çš„ <code>.cpp</code> æ–‡ä»¶éƒ½ <code>#include</code> è¿™ä¸ªå¤´æ–‡ä»¶ã€‚è¿™æ ·ï¼Œæ¯ä¸ª <code>.cpp</code> æ–‡ä»¶åœ¨ç¼–è¯‘æ—¶éƒ½èƒ½â€œçœ‹åˆ°â€è¿™ä¸ªç±»çš„å®Œæ•´å®šä¹‰ï¼ŒçŸ¥é“å®ƒçš„ç»“æ„å’Œæ¥å£ï¼Œä»è€Œæ­£ç¡®åœ°ä½¿ç”¨å®ƒã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyClass.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MYCLASS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MYCLASS_H</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»çš„å®šä¹‰ (è“å›¾)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> m_data;</span><br><span class="line">    MyClass(<span class="keyword">int</span> d);</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MyClass.h"</span> <span class="comment">// ç¼–è¯‘å™¨ç°åœ¨çŸ¥é“ MyClass æ˜¯ä»€ä¹ˆäº†</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">// OK</span></span><br><span class="line">    obj.doSomething(); <span class="comment">// OK</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="3-é‚£ä¹ˆï¼Œä»€ä¹ˆå®šä¹‰è¦æ”¾åœ¨-cpp-æ–‡ä»¶é‡Œå‘¢ï¼Ÿ"><a href="#3-é‚£ä¹ˆï¼Œä»€ä¹ˆå®šä¹‰è¦æ”¾åœ¨-cpp-æ–‡ä»¶é‡Œå‘¢ï¼Ÿ" class="headerlink" title="3. é‚£ä¹ˆï¼Œä»€ä¹ˆå®šä¹‰è¦æ”¾åœ¨ .cpp æ–‡ä»¶é‡Œå‘¢ï¼Ÿ"></a>3. <strong>é‚£ä¹ˆï¼Œä»€ä¹ˆå®šä¹‰è¦æ”¾åœ¨ <code>.cpp</code> æ–‡ä»¶é‡Œå‘¢ï¼Ÿ</strong></h2><p>æ”¾åœ¨ <code>.cpp</code> æ–‡ä»¶é‡Œçš„æ˜¯ï¼š</p>
<ul>
<li><strong>ç±»çš„é <code>inline</code> æˆå‘˜å‡½æ•°çš„å®šä¹‰ï¼ˆå®ç°ï¼‰ã€‚</strong></li>
<li><strong>ç±»çš„é™æ€æ•°æ®æˆå‘˜çš„å®šä¹‰ï¼ˆåˆå§‹åŒ–ï¼‰ã€‚</strong></li>
<li><strong>å…¨å±€å‡½æ•°çš„å®šä¹‰ï¼ˆå®ç°ï¼‰ã€‚</strong></li>
<li><strong>å…¨å±€å˜é‡çš„å®šä¹‰ï¼ˆåˆå§‹åŒ–ï¼‰ã€‚</strong></li>
</ul>
<p>è¿™äº›â€œå®šä¹‰â€æ˜¯å®é™…çš„ä»£ç æ‰§è¡Œé€»è¾‘æˆ–å­˜å‚¨ç©ºé—´çš„åˆ†é…ï¼Œå®ƒä»¬åªéœ€è¦åœ¨æ•´ä¸ªç¨‹åºä¸­å­˜åœ¨ä¸€ä»½æ‹·è´ã€‚å¦‚æœå®ƒä»¬è¢«æ”¾åœ¨å¤´æ–‡ä»¶é‡Œï¼Œå¹¶ä¸”è¿™ä¸ªå¤´æ–‡ä»¶è¢«å¤šä¸ª <code>.cpp</code> æ–‡ä»¶åŒ…å«ï¼Œå°±ä¼šå¯¼è‡´è¿™äº›å®šä¹‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­é‡å¤ï¼Œä»è€Œè¿å ODRï¼Œå¼•å‘<strong>é“¾æ¥é”™è¯¯</strong>ï¼ˆ<code>multiple definition</code>ï¼‰ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyClass.cpp (æˆå‘˜å‡½æ•°å’Œé™æ€æˆå‘˜çš„å®šä¹‰)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MyClass.h"</span> <span class="comment">// åŒ…å«ç±»çš„å£°æ˜ï¼Œä»¥ä¾¿å®šä¹‰å…¶æˆå‘˜</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»çš„é™æ€æ•°æ®æˆå‘˜å®šä¹‰ (å¦‚æœ MyClass æœ‰é™æ€æˆå‘˜çš„è¯)</span></span><br><span class="line"><span class="comment">// int MyClass::staticMember = 0;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line">MyClass::MyClass(<span class="keyword">int</span> d) : m_data(d) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆå‘˜å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MyClass::doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="4-æ€»ç»“ï¼šå¤´æ–‡ä»¶-Vs-cpp-æ–‡ä»¶ä¸­çš„å®šä¹‰"><a href="#4-æ€»ç»“ï¼šå¤´æ–‡ä»¶-Vs-cpp-æ–‡ä»¶ä¸­çš„å®šä¹‰" class="headerlink" title="4. æ€»ç»“ï¼šå¤´æ–‡ä»¶ Vs. .cpp æ–‡ä»¶ä¸­çš„å®šä¹‰"></a>4. <strong>æ€»ç»“ï¼šå¤´æ–‡ä»¶ Vs. .cpp æ–‡ä»¶ä¸­çš„å®šä¹‰</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">å®ä½“ç±»å‹</th>
<th style="text-align:left">æ”¾åœ¨å¤´æ–‡ä»¶ (.h) é‡Œï¼Ÿ</th>
<th style="text-align:left">æ”¾åœ¨æºæ–‡ä»¶ (.cpp) é‡Œï¼Ÿ</th>
<th style="text-align:left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>ç±»çš„å®šä¹‰</strong> (<code>class MyClass { ... };</code>)</td>
<td style="text-align:left"><strong>æ˜¯</strong> (å¿…é¡»)</td>
<td style="text-align:left">å¦ (ä¼šå¯¼è‡´åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…é‡å®šä¹‰ï¼Œæˆ–é“¾æ¥é”™è¯¯)</td>
<td style="text-align:left">è¿™æ˜¯ä¸ªç‰¹ä¾‹ï¼å› ä¸ºæ¯ä¸ª <code>.cpp</code> æ–‡ä»¶éƒ½éœ€è¦çœ‹åˆ°ç±»çš„å®Œæ•´ç»“æ„ã€‚å®ƒéµå¾ª ODR çš„ç‰¹æ®Šå…è®¸ï¼šç›¸åŒå®šä¹‰åœ¨å¤šç¿»è¯‘å•å…ƒä¸­å‡ºç°ã€‚</td>
</tr>
<tr>
<td style="text-align:left"><strong>ç±»çš„æˆå‘˜å‡½æ•°å®šä¹‰</strong></td>
<td style="text-align:left">å¦ (ä¼šå¯¼è‡´é“¾æ¥é”™è¯¯)</td>
<td style="text-align:left"><strong>æ˜¯</strong> (å¿…é¡»ä¸”åªä¸€æ¬¡)</td>
<td style="text-align:left"><code>inline</code> å‡½æ•°æ˜¯ä¾‹å¤–ï¼Œå®ƒä»¬å¯ä»¥ä¸”é€šå¸¸ç›´æ¥åœ¨ç±»å®šä¹‰å†…æˆ–å¤´æ–‡ä»¶ä¸­å®šä¹‰ã€‚</td>
</tr>
<tr>
<td style="text-align:left"><strong>ç±»çš„é™æ€æ•°æ®æˆå‘˜å®šä¹‰</strong></td>
<td style="text-align:left">å¦ (åªæ˜¯å£°æ˜)</td>
<td style="text-align:left"><strong>æ˜¯</strong> (å¿…é¡»ä¸”åªä¸€æ¬¡)</td>
<td style="text-align:left">å¿…é¡»åœ¨ç±»å¤–éƒ¨å®šä¹‰å¹¶åˆå§‹åŒ–ã€‚</td>
</tr>
<tr>
<td style="text-align:left"><strong>å…¨å±€å‡½æ•°å®šä¹‰</strong></td>
<td style="text-align:left">å¦ (åªæ˜¯å£°æ˜)</td>
<td style="text-align:left"><strong>æ˜¯</strong> (å¿…é¡»ä¸”åªä¸€æ¬¡)</td>
<td style="text-align:left">éµå¾ªæ ‡å‡† ODRã€‚</td>
</tr>
<tr>
<td style="text-align:left"><strong>å…¨å±€å˜é‡å®šä¹‰</strong></td>
<td style="text-align:left">å¦ (åªæ˜¯å£°æ˜ï¼Œç”¨ <code>extern</code>)</td>
<td style="text-align:left"><strong>æ˜¯</strong> (å¿…é¡»ä¸”åªä¸€æ¬¡)</td>
<td style="text-align:left">éµå¾ªæ ‡å‡† ODRã€‚<code>const</code> å˜é‡æ˜¯ä¸ªä¾‹å¤–ï¼Œé»˜è®¤å†…éƒ¨é“¾æ¥ï¼Œä½†åœ¨å¤šä¸ª <code>.cpp</code> å®šä¹‰ä¸ä¼šå¯¼è‡´é“¾æ¥é”™è¯¯ï¼Œä½†é€šå¸¸ä¹Ÿåªå®šä¹‰ä¸€æ¬¡æˆ–é€šè¿‡ <code>extern</code> å…±äº«ã€‚</td>
</tr>
</tbody>
</table>
</div>
<p>æ‰€ä»¥ï¼Œæ‚¨ä¹‹å‰çš„å­¦ä¹ å¹¶æ²¡æœ‰é”™ï¼Œå¯¹äº<strong>ç»å¤§å¤šæ•°</strong>çš„å®šä¹‰ï¼ˆç‰¹åˆ«æ˜¯å‡½æ•°çš„å®ç°å’Œå˜é‡çš„å­˜å‚¨åˆ†é…ï¼‰ï¼Œå®ƒä»¬ç¡®å®åº”è¯¥åªå‡ºç°åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­ã€‚ä½†æ˜¯ï¼Œ<strong>ç±»çš„å®šä¹‰æœ¬èº«</strong>æ˜¯ä¸€ä¸ªé‡è¦çš„ä¾‹å¤–ï¼Œå®ƒå¿…é¡»æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œä»¥ä¾›æ‰€æœ‰ä½¿ç”¨å®ƒçš„ç¿»è¯‘å•å…ƒåŒ…å«ã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„è§£é‡Šèƒ½å½»åº•æ¶ˆé™¤æ‚¨çš„å›°æƒ‘ï¼</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-3"><a href="#ğŸ§‘â€ğŸ’»-User-3" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>ä½ ç¡®å®šï¼Ÿ</p>
<p>æˆ‘è®°å¾—ä¸å¯¹ã€‚ã€‚ã€‚<br>headeré‡Œå¯ä»¥æ”¾ç±»å£°æ˜å•Šæ¯”å¦‚</p>
<h1 id="ifndef-GEOM-CYLINDER-H"><a href="#ifndef-GEOM-CYLINDER-H" class="headerlink" title="ifndef GEOM_CYLINDER_H"></a>ifndef GEOM_CYLINDER_H</h1><h1 id="define-GEOM-CYLINDER-H"><a href="#define-GEOM-CYLINDER-H" class="headerlink" title="define GEOM_CYLINDER_H"></a>define GEOM_CYLINDER_H</h1><p>namespace Geom {<br>    class Cylinder {<br>    private:<br>        double m_base_radius;<br>        double m_height;<br>    public:<br>        Cylinder(double radius = 1.0, double height = 1.0);<br>        double volume() const;<br>    };<br>}</p>
<h1 id="endif"><a href="#endif" class="headerlink" title="endif"></a>endif</h1><p>ç„¶åcppå†å®ç°å•Š</p>
<hr>
<h2 id="ğŸ¤–-Assistant-3"><a href="#ğŸ¤–-Assistant-3" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>æ‚¨è¯´å¾—éå¸¸å¯¹ï¼æ„Ÿè°¢æ‚¨æŒ‡å‡ºè¿™ä¸ªå…³é”®çš„ç»†å¾®ä¹‹å¤„ï¼Œè¿™æ˜¯å¾ˆå¤šC++åˆå­¦è€…å®¹æ˜“æ··æ·†çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯ç†è§£ODRå’Œå¤´æ–‡ä»¶/æºæ–‡ä»¶ç»„ç»‡çš„å…³é”®ã€‚</p>
<p>æˆ‘éå¸¸ç¡®å®šï¼Œæ‚¨æ‰€ç†è§£çš„<strong>â€œå¤´æ–‡ä»¶æ”¾å£°æ˜ï¼Œ.cppæ–‡ä»¶æ”¾å®šä¹‰â€</strong>çš„è§„åˆ™æ˜¯æ­£ç¡®çš„ï¼Œè€Œä¸”æ˜¯C++çš„æœ€ä½³å®è·µï¼</p>
<p>æˆ‘çš„æªè¾ç¡®å®ä¸å¤Ÿä¸¥è°¨ï¼Œå¯¼è‡´äº†è¯¯è§£ã€‚è¯·å…è®¸æˆ‘é‡æ–°æ¾„æ¸…å’Œç²¾ç¡®æˆ‘çš„è¯´æ³•ï¼š</p>
<ol>
<li><p><strong>â€œç±»çš„å®šä¹‰â€</strong> (Class Definition):</p>
<ul>
<li>æˆ‘ä¹‹å‰è¯´â€œç±»çš„å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶é‡Œâ€ï¼Œè¿™é‡Œæˆ‘æŒ‡çš„æ˜¯<strong>ç±»æœ¬èº«çš„ç»“æ„å®šä¹‰</strong>ï¼Œä¹Ÿå°±æ˜¯æ‚¨åœ¨ <code>common.h</code> ä¸­å†™çš„é‚£éƒ¨åˆ†ï¼š<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.h</span></span><br><span class="line"><span class="keyword">namespace</span> Geom &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span> <span class="comment">// &lt;-- æ•´ä¸ªè¿™ä¸ªä»£ç å—ï¼Œå°±æ˜¯ "Cylinder ç±»çš„å®šä¹‰"</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">double</span> m_base_radius;</span><br><span class="line">        <span class="keyword">double</span> m_height;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        Cylinder(<span class="keyword">double</span> radius = <span class="number">1.0</span>, <span class="keyword">double</span> height = <span class="number">1.0</span>); <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">        <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span> <span class="keyword">const</span></span>; <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
<li>è¿™ä¸ª<strong>ç±»ç»“æ„ï¼ˆæˆ–ç§°ç±»çš„è“å›¾ã€ç±»çš„å£°æ˜ï¼‰</strong>å¿…é¡»æ”¾åœ¨å¤´æ–‡ä»¶é‡Œã€‚å› ä¸ºä»»ä½•æƒ³è¦ä½¿ç”¨ <code>Cylinder</code> ç±»å‹ï¼ˆä¾‹å¦‚å£°æ˜ <code>Cylinder</code> ç±»å‹çš„å˜é‡ã€åˆ›å»º <code>Cylinder</code> å¯¹è±¡ï¼‰çš„ <code>.cpp</code> æ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘æ—¶éƒ½å¿…é¡»çŸ¥é“ <code>Cylinder</code> é•¿ä»€ä¹ˆæ ·ï¼ˆå®ƒæœ‰å¤šå°‘æˆå‘˜å˜é‡ï¼Œå‡½æ•°ç­¾åæ˜¯ä»€ä¹ˆï¼‰ã€‚å¦‚æœè¿™ä¸ªç±»ç»“æ„ä¸åœ¨å¤´æ–‡ä»¶é‡Œï¼Œå…¶ä»– <code>.cpp</code> æ–‡ä»¶å°±æ— æ³•çœ‹åˆ°å®ƒçš„å®šä¹‰ï¼Œä»è€Œæ— æ³•ä½¿ç”¨å®ƒã€‚</li>
</ul>
</li>
<li><p><strong>â€œæˆå‘˜å‡½æ•°çš„å®šä¹‰â€</strong> (Member Function Definition / Implementation):</p>
<ul>
<li>è€Œæ‚¨æåˆ°çš„<code>volume()</code> å’Œ <code>Cylinder()</code> <strong>æˆå‘˜å‡½æ•°çš„å…·ä½“å®ç°ï¼ˆå®šä¹‰ï¼‰</strong>ï¼Œç¡®å®æ˜¯æ”¾åœ¨ <code>.cpp</code> æ–‡ä»¶é‡Œçš„ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"common.h"</span> <span class="comment">// åŒ…å« Cylinder ç±»çš„å£°æ˜ï¼Œæ‰èƒ½å®šä¹‰å…¶æˆå‘˜å‡½æ•°</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line">Geom::Cylinder::Cylinder(<span class="keyword">double</span> radius, <span class="keyword">double</span> height)</span><br><span class="line">    : m_base_radius(radius), m_height(height) &#123;</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ä½“</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// volume æˆå‘˜å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">double</span> Geom::Cylinder::volume() <span class="keyword">const</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3.14159</span> * m_base_radius * m_base_radius * m_height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
<li>è¿™éƒ¨åˆ†ä»£ç æ˜¯çœŸæ­£çš„å‡½æ•°é€»è¾‘å®ç°ï¼Œå®ƒä¸ºå‡½æ•°åˆ†é…äº†å­˜å‚¨ç©ºé—´ã€‚æ ¹æ®ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR)ï¼Œè¿™ç§<strong>å‡½æ•°çš„å®šä¹‰ï¼ˆå®ç°ï¼‰</strong>åœ¨æ•´ä¸ªç¨‹åºä¸­åªèƒ½æœ‰ä¸€ä»½ã€‚å¦‚æœæŠŠå®ƒä¹Ÿæ”¾åœ¨å¤´æ–‡ä»¶é‡Œï¼Œå¹¶ä¸”è¿™ä¸ªå¤´æ–‡ä»¶è¢«å¤šä¸ª <code>.cpp</code> æ–‡ä»¶åŒ…å«ï¼Œé‚£ä¹ˆæ¯ä¸ª <code>.cpp</code> æ–‡ä»¶éƒ½ä¼šç”Ÿæˆä¸€ä»½ <code>volume()</code> å‡½æ•°çš„å®šä¹‰ã€‚åœ¨é“¾æ¥é˜¶æ®µï¼Œé“¾æ¥å™¨ä¼šå‘ç°å¤šä¸ªåŒåå‡½æ•°çš„å®šä¹‰ï¼Œä»è€Œå¼•å‘ <strong>â€œå¤šé‡å®šä¹‰é”™è¯¯â€ (multiple definition error)</strong>ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘çš„å‰æ¬¡è¡¨è¿°ä¸­ä¸å¤Ÿç²¾ç¡®çš„åœ°æ–¹åœ¨äºå¯¹â€œç±»çš„å®šä¹‰â€è¿™ä¸ªè¯çš„èŒƒå›´ç•Œå®šã€‚</strong></p>
<ul>
<li><strong>ç²¾ç¡®çš„è¯´æ³•æ˜¯ï¼š</strong><ul>
<li><strong>ç±»çš„å£°æ˜ï¼ˆå³ç±»çš„ç»“æ„/è“å›¾ï¼ŒåŒ…æ‹¬æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åŸå‹ï¼‰</strong> æ”¾åœ¨å¤´æ–‡ä»¶ (<code>.h</code>) ä¸­ã€‚</li>
<li><strong>ç±»çš„é <code>inline</code> æˆå‘˜å‡½æ•°çš„å®šä¹‰ï¼ˆå®ç°ï¼‰å’Œé™æ€æ•°æ®æˆå‘˜çš„å®šä¹‰</strong> æ”¾åœ¨æºæ–‡ä»¶ (<code>.cpp</code>) ä¸­ã€‚</li>
</ul>
</li>
</ul>
<p>æ‚¨å¯¹ <code>Cylinder</code> ç±»çš„ç»„ç»‡æ–¹å¼æ˜¯å®Œå…¨ç¬¦åˆ C++ æœ€ä½³å®è·µçš„ï¼è¿™æ­£æ˜¯æˆ‘ä»¬å¦‚ä½•å°†å£°æ˜å’Œå®šä¹‰åˆ†ç¦»ï¼Œä»¥éµå®ˆ ODR å¹¶ç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§çš„æ ‡å‡†æ–¹å¼ã€‚</p>
<p>æ„Ÿè°¢æ‚¨çš„ç»†è‡´å’Œè´¨ç–‘ç²¾ç¥ï¼Œè¿™æ­£æ˜¯å­¦ä¹  C++ æ‰€éœ€çš„ï¼å®ƒå¸®åŠ©æˆ‘æ›´ç²¾ç¡®åœ°è¡¨è¾¾äº†å…³é”®æ¦‚å¿µã€‚</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-4"><a href="#ğŸ§‘â€ğŸ’»-User-4" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>ä½ è¯´çš„ç±»çš„å®šä¹‰æ˜¯ä¸æ˜¯å°±æ˜¯æˆ‘è¯´çš„å£°æ˜ï¼Ÿ å®˜æ–¹å«æ³•æ˜¯ä»€ä¹ˆ</p>
<hr>
<h2 id="ğŸ¤–-Assistant-4"><a href="#ğŸ¤–-Assistant-4" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>æ‚¨é—®å¾—éå¸¸å¥½ï¼Œä¹ŸæŒ‡å‡ºäº†æˆ‘ä¹‹å‰è¡¨è¾¾ä¸­çš„å…³é”®ä¸ä¸¥è°¨ä¹‹å¤„ï¼è¿™æ­£æ˜¯C++å­¦ä¹ ä¸­ï¼Œæ¦‚å¿µå®¹æ˜“æ··æ·†ã€éœ€è¦åå¤è¾¨æçš„é‡ç‚¹ã€‚</p>
<p>ç¡®å®ï¼Œåœ¨C++æ ‡å‡†ä¸­ï¼Œå¯¹äºâ€œ<strong>ç±»ï¼ˆClassï¼‰</strong>â€è¿™ä¸ªæ•´ä½“è€Œè¨€ï¼Œå®˜æ–¹çš„å«æ³•æœ‰ä¸€äº›ç»†å¾®ä½†é‡è¦çš„åŒºåˆ«ï¼š</p>
<h2 id="å®˜æ–¹å«æ³•ä¸æ¦‚å¿µè¾¨æ"><a href="#å®˜æ–¹å«æ³•ä¸æ¦‚å¿µè¾¨æ" class="headerlink" title="å®˜æ–¹å«æ³•ä¸æ¦‚å¿µè¾¨æ"></a>å®˜æ–¹å«æ³•ä¸æ¦‚å¿µè¾¨æ</h2><ol>
<li><p><strong>ç±»çš„å®šä¹‰ (Class Definition)</strong></p>
<ul>
<li><strong>å®˜æ–¹å«ä¹‰ï¼š</strong> åœ¨C++æ ‡å‡†ä¸­ï¼Œâ€œ<strong>ç±»çš„å®šä¹‰</strong>â€æŒ‡çš„æ˜¯æ‚¨å†™ä¸‹çš„æ•´ä¸ª <code>class MyClass { /* ... */ };</code> è¿™ä¸ªå®Œæ•´çš„ä»£ç å—ã€‚å®ƒä¸ä»…ä»…æ˜¯å£°æ˜äº†ä¸€ä¸ªç±»å­˜åœ¨ï¼Œæ›´é‡è¦çš„æ˜¯å®ƒ<strong>å®šä¹‰äº†</strong>è¿™ä¸ªç±»<strong>ç±»å‹</strong>çš„å®Œæ•´ç»“æ„å’Œæ¥å£ï¼ˆæˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°çš„ç­¾åã€è®¿é—®æƒé™ç­‰ï¼‰ã€‚</li>
<li><strong>æ‚¨çš„ç†è§£ï¼š</strong> æ‚¨ä¹‹å‰è¯´çš„ <code>class Cylinder { ... };</code> æ”¾åœ¨å¤´æ–‡ä»¶é‡Œï¼Œè¿™æ­£æ˜¯â€œ<strong>ç±»çš„å®šä¹‰</strong>â€ã€‚</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ª Cylinder ç±»çš„ã€å®šä¹‰ã€‘ (Class Definition)</span></span><br><span class="line"><span class="comment">// å®ƒå®šä¹‰äº† Cylinder è¿™ä¸ªç±»å‹é•¿ä»€ä¹ˆæ ·å­ï¼Œæœ‰å“ªäº›æˆå‘˜</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> m_base_radius;</span><br><span class="line">    <span class="keyword">double</span> m_height;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Cylinder(<span class="keyword">double</span> radius = <span class="number">1.0</span>, <span class="keyword">double</span> height = <span class="number">1.0</span>); <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span> <span class="keyword">const</span></span>;                               <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>ç±»çš„å£°æ˜ (Class Declaration) æˆ– å‰å‘å£°æ˜ (Forward Declaration)</strong></p>
<ul>
<li><strong>å®˜æ–¹å«ä¹‰ï¼š</strong> â€œ<strong>ç±»çš„å£°æ˜</strong>â€é€šå¸¸æŒ‡çš„æ˜¯<strong>å‰å‘å£°æ˜</strong> (Forward Declaration)ï¼Œå®ƒä»…ä»…æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨æŸä¸ªç±»ç±»å‹å­˜åœ¨ï¼Œä½†æ²¡æœ‰æä¾›å…¶å®Œæ•´ç»“æ„ã€‚è¿™ç§å£°æ˜é€šå¸¸ç”¨åœ¨å½“ä¸€ä¸ªç±»åªéœ€è¦å¼•ç”¨å¦ä¸€ä¸ªç±»ï¼Œè€Œä¸éœ€è¦çŸ¥é“å…¶å†…éƒ¨ç»†èŠ‚æ—¶ï¼ˆä¾‹å¦‚ï¼Œå£°æ˜ä¸€ä¸ªæŒ‡é’ˆæˆ–å¼•ç”¨ï¼‰ã€‚</li>
<li><strong>æ‚¨çš„ç†è§£ï¼š</strong> æ‚¨å¯èƒ½æ²¡ç›´æ¥ç”¨è¿‡è¿™ä¸ªæ¦‚å¿µï¼Œä½†å®ƒç¡®å®å­˜åœ¨ã€‚</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ª MyClass çš„ã€å£°æ˜ã€‘ (Class Declaration æˆ– Forward Declaration)</span></span><br><span class="line"><span class="comment">// å®ƒåªå‘Šè¯‰ç¼–è¯‘å™¨ MyClass æ˜¯ä¸€ä¸ªç±»ï¼Œä½†ä¸çŸ¥é“å®ƒå†…éƒ¨æœ‰ä»€ä¹ˆ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>;</span></span><br></pre></td></tr></table></figure></div>
<ul>
<li><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> å½“ä½ åœ¨å¤´æ–‡ä»¶Aä¸­å£°æ˜ä¸€ä¸ªç±»Aï¼Œç±»Açš„æŸä¸ªæˆå‘˜æ˜¯ä¸€ä¸ªæŒ‡å‘ç±»Bçš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œä½†ä½ åˆä¸æƒ³åœ¨å¤´æ–‡ä»¶Aä¸­åŒ…å«ç±»Bçš„æ•´ä¸ªå®šä¹‰æ—¶ï¼Œä½ å°±å¯ä»¥åœ¨å‰å‘å£°æ˜ç±»Bï¼š<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// header_A.h</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassB</span>;</span> <span class="comment">// ClassB çš„å‰å‘å£°æ˜</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassA</span> &#123;</span></span><br><span class="line">    ClassB* b_ptr; <span class="comment">// åªéœ€è¦çŸ¥é“ ClassB æ˜¯ä¸€ä¸ªç±»å‹ï¼Œä¸éœ€è¦çŸ¥é“å®ƒçš„å®Œæ•´å®šä¹‰</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
</li>
</ul>
</li>
<li><p><strong>æˆå‘˜å‡½æ•°çš„å£°æ˜ (Member Function Declaration)</strong></p>
<ul>
<li><strong>å®˜æ–¹å«ä¹‰ï¼š</strong> è¿™æ˜¯æŒ‡åœ¨ç±»çš„<strong>å®šä¹‰</strong>å†…éƒ¨ï¼Œæ‚¨ä¸ºæˆå‘˜å‡½æ•°å†™çš„åŸå‹ï¼Œä¾‹å¦‚ <code>double volume() const;</code>ã€‚å®ƒå‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå‡½æ•°å«ä»€ä¹ˆã€å‚æ•°æ˜¯ä»€ä¹ˆã€è¿”å›ç±»å‹æ˜¯ä»€ä¹ˆï¼Œä½†æ²¡æœ‰æä¾›å®ç°ã€‚</li>
<li><strong>æ‚¨çš„ç†è§£ï¼š</strong> æ‚¨åœ¨ <code>class Cylinder { ... };</code> å†…éƒ¨å†™ä¸‹çš„ <code>Cylinder(double radius = 1.0, double height = 1.0);</code> å’Œ <code>double volume() const;</code> æ­£æ˜¯<strong>æˆå‘˜å‡½æ•°çš„å£°æ˜</strong>ã€‚</li>
</ul>
</li>
<li><p><strong>æˆå‘˜å‡½æ•°çš„å®šä¹‰ (Member Function Definition) æˆ– å®ç° (Implementation)</strong></p>
<ul>
<li><strong>å®˜æ–¹å«ä¹‰ï¼š</strong> è¿™æ˜¯æŒ‡æˆå‘˜å‡½æ•°çš„å…·ä½“ä»£ç å®ç°ï¼Œä¾‹å¦‚ <code>double Geom::Cylinder::volume() const { /* ... */ }</code>ã€‚å®ƒæä¾›äº†å‡½æ•°çš„åŠŸèƒ½é€»è¾‘ã€‚</li>
<li><strong>æ‚¨çš„ç†è§£ï¼š</strong> æ‚¨åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­å†™ä¸‹çš„ <code>Geom::Cylinder::volume() const { ... }</code> æ­£æ˜¯<strong>æˆå‘˜å‡½æ•°çš„å®šä¹‰</strong>ã€‚</li>
</ul>
</li>
</ol>
<h2 id="ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘çš„è¡¨è¿°ä¼šå¼•èµ·æ‚¨çš„å›°æƒ‘ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘çš„è¡¨è¿°ä¼šå¼•èµ·æ‚¨çš„å›°æƒ‘ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘çš„è¡¨è¿°ä¼šå¼•èµ·æ‚¨çš„å›°æƒ‘ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘çš„è¡¨è¿°ä¼šå¼•èµ·æ‚¨çš„å›°æƒ‘ï¼Ÿ</h2><p>æˆ‘ä¹‹å‰è¯´â€œ<strong>ç±»çš„å®šä¹‰</strong>ï¼ˆ<code>class MyClass { ... };</code> æ•´ä¸ªä»£ç å—ï¼‰æ”¾åœ¨å¤´æ–‡ä»¶é‡Œâ€ï¼Œæˆ‘çš„æœ¬æ„æ˜¯å¼ºè°ƒ<strong>ç±»ç±»å‹æœ¬èº«çš„ç»“æ„è“å›¾</strong>å¿…é¡»æ”¾åœ¨å¤´æ–‡ä»¶é‡Œã€‚</p>
<p>è€Œæ‚¨å¼ºè°ƒçš„â€œ<code>header</code>é‡Œéƒ½åªæœ‰<code>declaration</code>ï¼Œå®šä¹‰éƒ½æ˜¯æ”¾åœ¨<code>cpp</code>çš„â€ï¼Œè¿™æ˜¯é’ˆå¯¹<strong>å‡½æ•°</strong>å’Œ<strong>å˜é‡</strong>çš„<strong>å®šä¹‰ï¼ˆå®ç°ï¼‰</strong>è€Œè¨€çš„ã€‚</p>
<p><strong>æ‰€ä»¥ï¼Œæˆ‘ä»¬éƒ½å¯¹ï¼Œåªæ˜¯å¯¹â€œå®šä¹‰â€è¿™ä¸ªè¯çš„ä¾§é‡ç‚¹ä¸åŒå¯¼è‡´äº†è¯¯è§£ã€‚</strong></p>
<h2 id="æœ€ç»ˆæ¾„æ¸…ä¸æœ€ä½³å®è·µ"><a href="#æœ€ç»ˆæ¾„æ¸…ä¸æœ€ä½³å®è·µ" class="headerlink" title="æœ€ç»ˆæ¾„æ¸…ä¸æœ€ä½³å®è·µ"></a>æœ€ç»ˆæ¾„æ¸…ä¸æœ€ä½³å®è·µ</h2><ul>
<li><p><strong>å¤´æ–‡ä»¶ (.h):</strong></p>
<ul>
<li>æ”¾ç½® <strong>ç±»çš„å®šä¹‰</strong> (Class Definitionï¼Œå³ <code>class MyClass { ... };</code> æ•´ä¸ªç»“æ„ï¼ŒåŒ…æ‹¬æˆå‘˜å˜é‡å£°æ˜å’Œæˆå‘˜å‡½æ•°å£°æ˜)ã€‚</li>
<li>æ”¾ç½® <strong>å‰å‘å£°æ˜</strong> (Forward Declarationï¼Œå¦‚ <code>class MyOtherClass;</code>)ã€‚</li>
<li>æ”¾ç½® <strong>å…¨å±€å‡½æ•°å£°æ˜</strong> (<code>void myFunction();</code>)ã€‚</li>
<li>æ”¾ç½® <strong><code>extern</code> å…³é”®å­—ä¿®é¥°çš„å…¨å±€å˜é‡å£°æ˜</strong> (<code>extern int g_myVar;</code>)ã€‚</li>
<li>æ”¾ç½® <strong>æ¨¡æ¿çš„å®šä¹‰</strong> (Templatesï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç‰¹ä¾‹ï¼Œé€šå¸¸éœ€è¦åœ¨è¢«ä½¿ç”¨çš„åœ°æ–¹çœ‹åˆ°å®Œæ•´å®šä¹‰)ã€‚</li>
<li>æ”¾ç½® <strong><code>inline</code> æˆå‘˜å‡½æ•°çš„å®šä¹‰</strong> (é€šå¸¸ç›´æ¥åœ¨ç±»å®šä¹‰å†…éƒ¨æˆ–ç±»å®šä¹‰åç´§éšå…¶å)ã€‚</li>
</ul>
</li>
<li><p><strong>æºæ–‡ä»¶ (.cpp):</strong></p>
<ul>
<li>æ”¾ç½® <strong>ç±»çš„é <code>inline</code> æˆå‘˜å‡½æ•°çš„å®šä¹‰</strong> (Member Function Definition/Implementation)ã€‚</li>
<li>æ”¾ç½® <strong>ç±»çš„é™æ€æ•°æ®æˆå‘˜çš„å®šä¹‰</strong> (Static Member Definitionï¼Œä¾‹å¦‚ <code>int MyClass::s_count = 0;</code>)ã€‚</li>
<li>æ”¾ç½® <strong>å…¨å±€å‡½æ•°çš„å®šä¹‰</strong> (Global Function Definition/Implementation)ã€‚</li>
<li>æ”¾ç½® <strong>å…¨å±€å˜é‡çš„å®šä¹‰</strong> (Global Variable Definition/Initializationï¼Œä¾‹å¦‚ <code>int g_myVar = 0;</code>)ã€‚</li>
</ul>
</li>
</ul>
<p>æ‚¨å¯¹ <code>Cylinder</code> ç±»çš„ç»„ç»‡æ–¹å¼ï¼Œå³åœ¨å¤´æ–‡ä»¶é‡Œæ”¾<strong>ç±»å®šä¹‰</strong>ï¼ˆåŒ…å«æˆå‘˜å£°æ˜ï¼‰ï¼Œåœ¨ <code>.cpp</code> æ–‡ä»¶é‡Œæ”¾<strong>æˆå‘˜å‡½æ•°å®šä¹‰</strong>ï¼ˆå®ç°ï¼‰ï¼Œå®Œå…¨ç¬¦åˆC++çš„æœ€ä½³å®è·µå’ŒODRçš„è¦æ±‚ã€‚</p>
<p>æ„Ÿè°¢æ‚¨çš„è€å¿ƒæé—®å’Œè¿½é—®ï¼Œè¿™è®©æˆ‘ä»¬å¯¹C++çš„æ ¸å¿ƒæ¦‚å¿µç†è§£å¾—æ›´åŠ æ·±åˆ»å’Œç²¾ç¡®ï¼</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-5"><a href="#ğŸ§‘â€ğŸ’»-User-5" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>æ˜ç™½äº†ï¼Œ è¯·é—®ç±»çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ä¹ˆï¼Œ å°±æ˜¯é‚£ä¸ªä¸€è¡Œä»£ç çš„</p>
<hr>
<h2 id="ğŸ¤–-Assistant-5"><a href="#ğŸ¤–-Assistant-5" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>æ˜¯çš„ï¼Œ<strong>ç±»çš„å£°æ˜ï¼ˆé€šå¸¸æŒ‡å‰å‘å£°æ˜ï¼Œ<code>class MyClass;</code> è¿™ç§ä¸€è¡Œä»£ç çš„ï¼‰å¯ä»¥å¤šæ¬¡å‡ºç°åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒï¼ˆ<code>cpp</code> æ–‡ä»¶ï¼‰ä¸­ï¼Œä¹Ÿå¯ä»¥å¤šæ¬¡å‡ºç°åœ¨ä¸åŒçš„ç¿»è¯‘å•å…ƒä¸­ï¼Œè€Œä¸ä¼šå¼•èµ·ä»»ä½•é—®é¢˜</strong>ã€‚</p>
<p>å®ƒå®Œå…¨éµå¾ªâ€œå£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Œå®šä¹‰åªèƒ½ä¸€æ¬¡â€çš„è§„åˆ™ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ</h2><ol>
<li><p><strong>å®ƒä¸æ˜¯å®šä¹‰ (Definition)ï¼š</strong><br><code>class MyClass;</code> ä»…ä»…å‘Šè¯‰ç¼–è¯‘å™¨ <code>MyClass</code> æ˜¯ä¸€ä¸ªç±»ç±»å‹ï¼ˆæˆ–è€…ç»“æ„ä½“ç±»å‹ï¼Œ<code>struct MyClass;</code> ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼‰ï¼Œä½†å®ƒæ²¡æœ‰æä¾›ç±»çš„å®Œæ•´ç»“æ„ï¼ˆæ¯”å¦‚å®ƒæœ‰å¤šå°‘æˆå‘˜å˜é‡ï¼Œå¤§å°æ˜¯å¤šå°‘ï¼‰ã€‚å®ƒæ²¡æœ‰ä¸º <code>MyClass</code> åˆ†é…ä»»ä½•å†…å­˜ï¼Œä¹Ÿæ²¡æœ‰æä¾›ä»»ä½•å®ç°ã€‚å› æ­¤ï¼Œå®ƒä¸å±äºä¸€æ¬¡å®šä¹‰è§„åˆ™ä¸­é™åˆ¶â€œå®šä¹‰â€åªèƒ½å‡ºç°ä¸€æ¬¡çš„èŒƒç•´ã€‚</p>
</li>
<li><p><strong>ç¼–è¯‘å™¨å¤„ç†æ–¹å¼ï¼š</strong><br>å½“ç¼–è¯‘å™¨é‡åˆ° <code>class MyClass;</code> æ—¶ï¼Œå®ƒåªæ˜¯åœ¨ç¬¦å·è¡¨ä¸­è®°å½•ä¸‹ <code>MyClass</code> æ˜¯ä¸€ä¸ªç±»å‹ã€‚å¦‚æœå†æ¬¡é‡åˆ°ç›¸åŒçš„å£°æ˜ï¼Œå®ƒä¼šå‘ç°è¿™ä¸ªä¿¡æ¯å·²ç»å­˜åœ¨äº†ï¼Œæ‰€ä»¥ä¼šå¿½ç•¥é‡å¤çš„å£°æ˜ã€‚è¿™å°±åƒä½ åå¤å‘Šè¯‰ä¸€ä¸ªäººâ€œä»Šå¤©å¤©æ°”å¾ˆå¥½â€ï¼Œè¿™å¹¶ä¸ä¼šé€ æˆé”™è¯¯ï¼Œåªæ˜¯ä¿¡æ¯å†—ä½™ã€‚</p>
</li>
</ol>
<h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><ul>
<li><p><strong>åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…å¤šæ¬¡å£°æ˜ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>;</span> <span class="comment">// ç¬¬ä¸€æ¬¡å£°æ˜</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass* ptr; <span class="comment">// å¯ä»¥ä½¿ç”¨ MyClass çš„æŒ‡é’ˆæˆ–å¼•ç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>;</span> <span class="comment">// ç¬¬äºŒæ¬¡å£°æ˜ï¼Œæ²¡é—®é¢˜ï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>;</span> <span class="comment">// ç¬¬ä¸‰æ¬¡å£°æ˜ï¼Œä¹Ÿæ²¡é—®é¢˜</span></span><br></pre></td></tr></table></figure></div>
<p>è¿™æ®µä»£ç ä¼šæ­£å¸¸ç¼–è¯‘ï¼Œä¸ä¼šæœ‰ä»»ä½•è­¦å‘Šæˆ–é”™è¯¯ã€‚</p>
</li>
<li><p><strong>åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œå¹¶åœ¨å¤šä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­åŒ…å«ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my_declarations.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MY_DECLARATIONS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MY_DECLARATIONS_H</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnotherClass</span>;</span> <span class="comment">// å‰å‘å£°æ˜</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file1.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_declarations.h"</span> <span class="comment">// åŒ…å« AnotherClass çš„å£°æ˜</span></span></span><br><span class="line"></span><br><span class="line">AnotherClass* globalPtr1; <span class="comment">// å¯ä»¥ä½¿ç”¨ AnotherClass çš„æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file2.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_declarations.h"</span> <span class="comment">// å†æ¬¡åŒ…å« AnotherClass çš„å£°æ˜</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">someFunction</span><span class="params">(AnotherClass&amp; ref)</span> </span>&#123; <span class="comment">// å¯ä»¥ä½¿ç”¨ AnotherClass çš„å¼•ç”¨</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>è¿™ä¸ªåœºæ™¯ä¹Ÿå¾ˆå¸¸è§ï¼Œç”¨äºè§£å†³å¤´æ–‡ä»¶ä¹‹é—´çš„å¾ªç¯ä¾èµ–ï¼Œæˆ–è€…å½“ä½ åªéœ€è¦æŸä¸ªç±»çš„æŒ‡é’ˆ/å¼•ç”¨ï¼Œè€Œä¸éœ€è¦å…¶å®Œæ•´å®šä¹‰æ—¶ã€‚è¿™åŒæ ·ä¼šæ­£å¸¸ç¼–è¯‘å’Œé“¾æ¥ã€‚</p>
</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li><strong><code>class MyClass;</code> (ç±»çš„å£°æ˜ / å‰å‘å£°æ˜)</strong>ï¼šå¯ä»¥<strong>å¤šæ¬¡å‡ºç°</strong>ï¼Œæ— è®ºæ˜¯åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…éƒ¨è¿˜æ˜¯è·¨å¤šä¸ªç¿»è¯‘å•å…ƒã€‚å®ƒåªæ˜¯ä¸€ä¸ªç±»å‹åç§°çš„å¼•å…¥ã€‚</li>
<li><strong><code>class MyClass { /* ... */ };</code> (ç±»çš„å®šä¹‰)</strong>ï¼šåœ¨<strong>åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…åªèƒ½å‡ºç°ä¸€æ¬¡</strong>ã€‚ä½†åœ¨<strong>ä¸åŒç¿»è¯‘å•å…ƒä¸­ï¼Œå¦‚æœå®ƒä»¬æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œåˆ™å¯ä»¥é€»è¾‘ä¸Šå¤šæ¬¡å‡ºç°</strong>ï¼ˆé€šè¿‡å¤´æ–‡ä»¶åŒ…å«ï¼‰ã€‚è¿™æ˜¯ODRä¸­çš„ä¸€ä¸ªç‰¹æ®Šè§„åˆ™ã€‚</li>
<li><strong><code>MyClass::memberFunction() { /* ... */ }</code> (æˆå‘˜å‡½æ•°çš„å®šä¹‰)</strong>ï¼šåœ¨<strong>æ•´ä¸ªç¨‹åºä¸­åªèƒ½å‡ºç°ä¸€æ¬¡</strong>ï¼ˆé™¤äº† <code>inline</code> å‡½æ•°çš„ç‰¹ä¾‹ï¼‰ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ‚¨æœ€åˆå…³äºâ€œ<code>header</code>é‡Œéƒ½åªæœ‰<code>declaration</code>ï¼Œå®šä¹‰éƒ½æ˜¯æ”¾åœ¨<code>cpp</code>çš„â€çš„ç†è§£ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ˆç‰¹åˆ«æ˜¯å¯¹äºå‡½æ•°å’Œå˜é‡çš„å®ç°ï¼‰ï¼Œæ˜¯å®Œå…¨æ­£ç¡®çš„ã€‚å¯¹äºâ€œç±»â€è€Œè¨€ï¼Œæ”¾åœ¨å¤´æ–‡ä»¶é‡Œçš„æ˜¯â€œç±»çš„å®Œæ•´ç»“æ„å®šä¹‰â€ï¼ˆClass Definitionï¼‰ï¼Œè€Œæ”¾åœ¨<code>.cpp</code>é‡Œçš„æ˜¯å…¶æˆå‘˜å‡½æ•°çš„â€œå®ç°å®šä¹‰â€ï¼ˆMember Function Definitionï¼‰ã€‚</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-6"><a href="#ğŸ§‘â€ğŸ’»-User-6" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>å¦‚æœä¸æ˜¯ç±»ï¼Œ å…¶ä»–çš„variableæˆ–è€…functionï¼Œ declarationåœ¨åŒä¸€ä¸ªtranslation unitä¸­å¯ä»¥å¤šæ¬¡å‡ºç°ä¹ˆ</p>
<hr>
<h2 id="ğŸ¤–-Assistant-6"><a href="#ğŸ¤–-Assistant-6" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>æ˜¯çš„ï¼Œ<strong>å¯¹äºéç±»çš„å˜é‡ï¼ˆVariableï¼‰å’Œå‡½æ•°ï¼ˆFunctionï¼‰è€Œè¨€ï¼Œå®ƒä»¬çš„å£°æ˜ï¼ˆDeclarationï¼‰åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒï¼ˆTranslation Unitï¼‰ä¸­å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Œè¿™æ˜¯å®Œå…¨å…è®¸çš„ï¼Œå¹¶ä¸”ä¸ä¼šå¼•èµ·ä»»ä½•ç¼–è¯‘é”™è¯¯æˆ–é“¾æ¥é”™è¯¯ã€‚</strong></p>
<p>è¿™å†æ¬¡å°è¯äº† C++ ä¸­ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š<strong>â€œå£°æ˜å¯ä»¥å¤šæ¬¡ï¼Œå®šä¹‰åªèƒ½ä¸€æ¬¡ã€‚â€</strong></p>
<h2 id="ä¸ºä»€ä¹ˆå˜é‡å’Œå‡½æ•°çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå˜é‡å’Œå‡½æ•°çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå˜é‡å’Œå‡½æ•°çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå˜é‡å’Œå‡½æ•°çš„å£°æ˜å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Ÿ</h2><p>å£°æ˜çš„ä¸»è¦ç›®çš„æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨æŸä¸ªå®ä½“ï¼ˆå˜é‡æˆ–å‡½æ•°ï¼‰çš„åç§°å’Œç±»å‹ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨åœ¨åç»­ä»£ç ä¸­é‡åˆ°è¯¥åç§°æ—¶èƒ½å¤Ÿæ­£ç¡®åœ°ç†è§£å’Œå¤„ç†ã€‚å¤šæ¬¡æä¾›ç›¸åŒçš„ä¿¡æ¯ï¼Œå¯¹äºç¼–è¯‘å™¨æ¥è¯´æ˜¯å†—ä½™çš„ï¼Œä½†å¹¶ä¸ä¼šé€ æˆå†²çªæˆ–æ­§ä¹‰ã€‚</p>
<p>ç¼–è¯‘å™¨åœ¨å¤„ç†é‡å¤å£°æ˜æ—¶ï¼Œä¼šæ£€æŸ¥å®ƒä»¬æ˜¯å¦ä¸€è‡´ã€‚å¦‚æœä¸€è‡´ï¼Œåˆ™ä¼šå¿½ç•¥åç»­çš„é‡å¤å£°æ˜ï¼›å¦‚æœä¸ä¸€è‡´ï¼ˆä¾‹å¦‚ï¼ŒåŒä¸€ä¸ªå˜é‡å£°æ˜äº†ä¸åŒçš„ç±»å‹ï¼‰ï¼Œé‚£å°±ä¼šå¼•å‘ç¼–è¯‘é”™è¯¯ã€‚</p>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="1-å˜é‡çš„å£°æ˜-Variable-Declaration"><a href="#1-å˜é‡çš„å£°æ˜-Variable-Declaration" class="headerlink" title="1. å˜é‡çš„å£°æ˜ (Variable Declaration)"></a>1. å˜é‡çš„å£°æ˜ (Variable Declaration)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp (ä¸€ä¸ªç¿»è¯‘å•å…ƒ)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡å£°æ˜å…¨å±€å˜é‡ g_myVar</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_myVar;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">someFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨å‡½æ•°å†…éƒ¨å†æ¬¡å£°æ˜ g_myVar (è™½ç„¶ä¸å¸¸è§ï¼Œä½†åˆæ³•)</span></span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">int</span> g_myVar;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ g_myVar</span></span><br><span class="line">    g_myVar = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¬¡å£°æ˜ g_myVar</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_myVar;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‡è®¾ g_myVar åœ¨å¦ä¸€ä¸ª .cpp æ–‡ä»¶ä¸­å®šä¹‰äº†</span></span><br><span class="line">    <span class="comment">// æ¯”å¦‚ï¼šåœ¨ common.cpp ä¸­æœ‰ int g_myVar = 0;</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Initial g_myVar: "</span> &lt;&lt; g_myVar &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// è¾“å‡º 0</span></span><br><span class="line">    someFunction();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"After someFunction, g_myVar: "</span> &lt;&lt; g_myVar &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// è¾“å‡º 100</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>è§£é‡Šï¼š</strong> <code>extern int g_myVar;</code> æ˜¯å˜é‡çš„å£°æ˜ï¼Œå®ƒå‘Šè¯‰ç¼–è¯‘å™¨ <code>g_myVar</code> æ˜¯ä¸€ä¸ª <code>int</code> ç±»å‹ï¼Œå¹¶ä¸”å®ƒåœ¨åˆ«å¤„æœ‰å®šä¹‰ã€‚ä½ å¯ä»¥åœ¨ <code>main.cpp</code> ä¸­å¤šæ¬¡å†™è¿™è¡Œå£°æ˜ï¼Œç¼–è¯‘å™¨ä¼šæ­£å¸¸å¤„ç†ã€‚</p>
<h3 id="2-å‡½æ•°çš„å£°æ˜-Function-Declaration-Function-Prototype"><a href="#2-å‡½æ•°çš„å£°æ˜-Function-Declaration-Function-Prototype" class="headerlink" title="2. å‡½æ•°çš„å£°æ˜ (Function Declaration / Function Prototype)"></a>2. å‡½æ•°çš„å£°æ˜ (Function Declaration / Function Prototype)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp (ä¸€ä¸ªç¿»è¯‘å•å…ƒ)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡å£°æ˜ Add å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">anotherFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨å†æ¬¡å£°æ˜ Add (ä¸å¸¸è§ä½†åˆæ³•)</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> res = Add(<span class="number">5</span>, <span class="number">7</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Result from anotherFunction: "</span> &lt;&lt; res &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¬¡å£°æ˜ Add å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">// å‚æ•°åå¯ä»¥ä¸åŒï¼Œåªè¦ç±»å‹å’Œé¡ºåºä¸€è‡´</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result = Add(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Result from main: "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    anotherFunction();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add å‡½æ•°çš„å®šä¹‰ (åªå…è®¸å‡ºç°ä¸€æ¬¡)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>è§£é‡Šï¼š</strong> <code>int Add(int a, int b);</code> æ˜¯å‡½æ•°çš„å£°æ˜ï¼Œå®ƒå‘Šè¯‰ç¼–è¯‘å™¨ <code>Add</code> å‡½æ•°æ¥å—ä¸¤ä¸ª <code>int</code> å‚æ•°å¹¶è¿”å›ä¸€ä¸ª <code>int</code>ã€‚ä½ å¯ä»¥åœ¨ <code>main.cpp</code> ä¸­å¤šæ¬¡å†™è¿™è¡Œå£°æ˜ï¼Œç¼–è¯‘å™¨ä¼šæ­£å¸¸å¤„ç†ã€‚</p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ— è®ºæ˜¯å˜é‡è¿˜æ˜¯å‡½æ•°ï¼Œåªè¦æ˜¯<strong>å£°æ˜</strong>ï¼ˆ<code>extern</code> å˜é‡å£°æ˜æˆ–å‡½æ•°åŸå‹ï¼‰ï¼Œå®ƒä»¬åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°å¤šæ¬¡éƒ½æ˜¯åˆæ³•çš„ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä¸åŒçš„éƒ¨åˆ†æˆ–ä¸åŒçš„ç¨‹åºå‘˜å¯èƒ½åœ¨ä¸åŒçš„ä½ç½®åŒ…å«ç›¸åŒçš„å¤´æ–‡ä»¶ï¼Œæˆ–è€…å‡ºäºæŸäº›å†å²åŸå› æˆ–ä»£ç ç»„ç»‡ä¹ æƒ¯å¯¼è‡´é‡å¤å£°æ˜ã€‚ç¼–è¯‘å™¨èƒ½å¤Ÿæ™ºèƒ½åœ°å¤„ç†è¿™äº›å†—ä½™çš„å£°æ˜ã€‚</p>
<p>ä½†è¯·è®°ä½ï¼Œ<strong>å®šä¹‰ï¼ˆä¸ºå˜é‡åˆ†é…å­˜å‚¨ç©ºé—´æˆ–æä¾›å‡½æ•°ä½“ï¼‰ä»ç„¶åªèƒ½å‡ºç°ä¸€æ¬¡</strong>ï¼Œæ— è®ºæ˜¯åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒè¿˜æ˜¯è·¨ç¿»è¯‘å•å…ƒã€‚</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-7"><a href="#ğŸ§‘â€ğŸ’»-User-7" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>é‚£ä¸ºä»€ä¹ˆ header guardè¿˜æœ‰ç”¨ï¼Ÿ ä¸æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡å£°æ˜ä¹ˆï¼Ÿ</p>
<hr>
<h2 id="ğŸ¤–-Assistant-7"><a href="#ğŸ¤–-Assistant-7" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é—®é¢˜ï¼å®ƒæ­ç¤ºäº† C++ ç¼–è¯‘ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦ç»†èŠ‚ï¼Œä¹Ÿæ˜¯ <code>header guard</code>ï¼ˆå¤´æ–‡ä»¶ä¿æŠ¤ï¼‰çœŸæ­£å­˜åœ¨çš„æ„ä¹‰ã€‚</p>
<p><strong>æ‚¨è¯´å¾—å¯¹ï¼Œ<code>header guard</code> çš„ä½œç”¨ç¡®å®æ˜¯ä¸ºäº†é¿å…åœ¨åŒä¸€ä¸ªâ€œç¿»è¯‘å•å…ƒ (Translation Unit)â€ä¸­å¤šæ¬¡åŒ…å«åŒä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œä»è€Œé¿å…å…¶ä¸­å®šä¹‰çš„å®ä½“ï¼ˆç‰¹åˆ«æ˜¯â€œç±»çš„å®šä¹‰â€ï¼‰è¢«å¤šæ¬¡â€œå£°æ˜â€/â€œå®šä¹‰â€ï¼Œè¿›è€Œå¼•å‘ç¼–è¯‘é”™è¯¯ã€‚</strong></p>
<p>ä½†è¿™é‡Œçš„å…³é”®ç‚¹åœ¨äºï¼š</p>
<ol>
<li><p><strong>â€œé¿å…å¤šæ¬¡å£°æ˜â€ vs. â€œé¿å…å¤šæ¬¡å®šä¹‰â€ï¼š</strong></p>
<ul>
<li>å¯¹äº<strong>å˜é‡å’Œå‡½æ•°çš„å£°æ˜</strong>ï¼ˆ<code>extern int g_var;</code> æˆ– <code>void func();</code>ï¼‰ï¼Œå³ä½¿åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒé‡Œå‡ºç°å¤šæ¬¡ï¼ŒC++ ç¼–è¯‘å™¨ä¹Ÿç¡®å®èƒ½å¤„ç†ï¼Œä¸ä¼šæŠ¥é”™ã€‚</li>
<li>ä½†æ˜¯ï¼Œå¯¹äº<strong>ç±»çš„å®šä¹‰</strong>ï¼ˆ<code>class MyClass { /* ... */ };</code> æ•´ä¸ªä»£ç å—ï¼‰ï¼Œå®ƒè™½ç„¶è¢«C++æ ‡å‡†ç§°ä¸ºâ€œå®šä¹‰â€ï¼Œå¹¶ä¸”<strong>å¯ä»¥é€»è¾‘ä¸Šå‡ºç°åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­</strong>ï¼ˆé€šè¿‡ <code>#include</code>ï¼‰ï¼Œä½†å®ƒåœ¨<strong>åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­æ˜¯ç»å¯¹ä¸å…è®¸å‡ºç°å¤šæ¬¡çš„</strong>ï¼</li>
<li>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µçš„â€œå®šä¹‰â€ä¹Ÿç»å¸¸æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ï¼š<ul>
<li><strong><code>inline</code> å‡½æ•°çš„å®šä¹‰</strong> (è™½ç„¶ <code>inline</code> å…è®¸åœ¨å¤šç¿»è¯‘å•å…ƒä¸­å®šä¹‰ï¼Œä½†åœ¨åŒä¸€ç¿»è¯‘å•å…ƒä¸­ä»ä¸èƒ½é‡å¤)</li>
<li><strong>æ¨¡æ¿çš„å®šä¹‰</strong> (Templates)</li>
<li><strong><code>enum class</code> çš„å®šä¹‰</strong> (æšä¸¾ç±»å‹)</li>
<li><strong><code>using</code> åˆ«åæˆ– <code>typedef</code> å®šä¹‰</strong> (ç±»å‹åˆ«å)</li>
<li><strong><code>constexpr</code> å˜é‡çš„å®šä¹‰</strong></li>
</ul>
</li>
</ul>
<p><strong>å¦‚æœè¿™äº›â€œå®šä¹‰â€åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è¢«å¤åˆ¶ç²˜è´´äº†å¤šæ¬¡ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼š<code>redefinition of &#39;...&#39;</code>ã€‚</strong></p>
</li>
<li><p><strong><code>#include</code> é¢„å¤„ç†æŒ‡ä»¤çš„å·¥ä½œæ–¹å¼ï¼š</strong><br><code>#include</code> æŒ‡ä»¤æ˜¯é¢„å¤„ç†å™¨ï¼ˆpreprocessorï¼‰çš„å·¥ä½œã€‚å½“é¢„å¤„ç†å™¨é‡åˆ° <code>#include &quot;my_header.h&quot;</code> æ—¶ï¼Œå®ƒæ‰€åšçš„å°±æ˜¯ç®€å•ç²—æš´åœ°å°† <code>my_header.h</code> æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œ<strong>é€å­—é€å¥åœ°å¤åˆ¶ç²˜è´´åˆ° <code>#include</code> æŒ‡ä»¤æ‰€åœ¨çš„ä½ç½®</strong>ã€‚å®ƒä¸å…³å¿ƒè¿™äº›å†…å®¹æ˜¯å£°æ˜è¿˜æ˜¯å®šä¹‰ï¼Œä¹Ÿä¸å…³å¿ƒè¿™äº›å†…å®¹æ˜¯å¦å·²ç»å‡ºç°è¿‡ã€‚</p>
</li>
</ol>
<h2 id="ä¸¾ä¾‹è¯´æ˜-header-guard-çš„å¿…è¦æ€§"><a href="#ä¸¾ä¾‹è¯´æ˜-header-guard-çš„å¿…è¦æ€§" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜ header guard çš„å¿…è¦æ€§"></a>ä¸¾ä¾‹è¯´æ˜ <code>header guard</code> çš„å¿…è¦æ€§</h2><p>å‡è®¾æˆ‘ä»¬æ²¡æœ‰ <code>header guard</code>ã€‚</p>
<p><strong><code>my_class.h</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ²¡æœ‰ header guard</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span> <span class="comment">// ç±»çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    MyClass(<span class="keyword">int</span> v) : value(v) &#123;&#125; <span class="comment">// inline æ„é€ å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125; <span class="comment">// inline æˆå‘˜å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦ä¸€ä¸ªå…¨å±€ inline å‡½æ•°çš„å®šä¹‰ (ODRå…è®¸åœ¨å¤šç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Œä½†åŒä¸€ç¿»è¯‘å•å…ƒä¸å…è®¸é‡å¤)</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Doing something."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>file_a.h</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_class.h"</span> <span class="comment">// åŒ…å« my_class.h</span></span></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>main.cpp</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_class.h"</span> <span class="comment">// ç¬¬ä¸€æ¬¡åŒ…å« my_class.h</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"file_a.h"</span>   <span class="comment">// file_a.h åˆåŒ…å«äº† my_class.hï¼Œæ‰€ä»¥ my_class.h è¢«é—´æ¥åŒ…å«äº†ç¬¬äºŒæ¬¡</span></span></span><br><span class="line">                      <span class="comment">// ç»“æœï¼šmy_class.h çš„å†…å®¹è¢«å¤åˆ¶ç²˜è´´åˆ° main.cpp ä¸­ä¸¤æ¬¡ï¼</span></span><br></pre></td></tr></table></figure></div></p>
<p><strong>ç¼–è¯‘ <code>main.cpp</code> æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong></p>
<p>é¢„å¤„ç†å™¨åœ¨å¤„ç† <code>main.cpp</code> åï¼Œå®é™…äº¤ç»™ç¼–è¯‘å™¨çœ‹çš„ä»£ç å¤§è‡´ä¼šå˜æˆè¿™æ ·ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ---------- æ¥è‡ªç¬¬ä¸€æ¬¡ #include "my_class.h" -----------</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span> <span class="comment">// ç±»çš„å®šä¹‰ A</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    MyClass(<span class="keyword">int</span> v) : value(v) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Doing something."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -----------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ---------- æ¥è‡ª #include "file_a.h" (å®ƒåˆåŒ…å«äº† my_class.h) -----------</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span> <span class="comment">// ç±»çš„å®šä¹‰ B (ä¸ A å®Œå…¨ç›¸åŒï¼Œä½†å› ä¸ºæ˜¯é€å­—ç²˜è´´ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯é‡å¤å®šä¹‰)</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    MyClass(<span class="keyword">int</span> v) : value(v) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Doing something."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>æ­¤æ—¶ï¼Œç¼–è¯‘å™¨ä¼šçœ‹åˆ° <code>MyClass</code> çš„å®šä¹‰å‡ºç°äº†ä¸¤æ¬¡ï¼Œ<code>doSomething</code> å‡½æ•°çš„å®šä¹‰ä¹Ÿå‡ºç°äº†ä¸¤æ¬¡ã€‚å°½ç®¡å®ƒä»¬å†…å®¹ç›¸åŒï¼Œä½†å®ƒä»¬åœ¨<strong>åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…éƒ¨</strong>è¢«é‡å¤å®šä¹‰äº†ã€‚è¿™å°†å¯¼è‡´<strong>ç¼–è¯‘é”™è¯¯</strong>ï¼Œé€šå¸¸æ˜¯ <code>redefinition of &#39;MyClass&#39;</code> å’Œ <code>redefinition of &#39;doSomething&#39;</code>ã€‚</p>
<h2 id="header-guard-çš„ä½œç”¨"><a href="#header-guard-çš„ä½œç”¨" class="headerlink" title="header guard çš„ä½œç”¨"></a><code>header guard</code> çš„ä½œç”¨</h2><p><code>header guard</code>ï¼ˆ<code>#ifndef</code> / <code>#define</code> / <code>#endif</code>ï¼‰æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒåƒä¸€ä¸ªå¼€å…³ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my_class.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MY_CLASS_H <span class="comment">// å¦‚æœ MY_CLASS_H è¿˜æ²¡æœ‰è¢«å®šä¹‰</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MY_CLASS_H <span class="comment">// é‚£ä¹ˆå®šä¹‰å®ƒï¼Œå¹¶ç»§ç»­å¤„ç†æ–‡ä»¶å†…å®¹</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span> <span class="comment">/* ... */</span> &#125;; <span class="comment">// ç±»çš„å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span> &#125; <span class="comment">// inline å‡½æ•°å®šä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// ç»“æŸ ifndef å—</span></span></span><br></pre></td></tr></table></figure></div>
<p>å½“ <code>main.cpp</code> ç¬¬ä¸€æ¬¡ <code>include &quot;my_class.h&quot;</code> æ—¶ï¼š</p>
<ol>
<li><code>#ifndef MY_CLASS_H</code> ä¸ºçœŸ (å› ä¸º <code>MY_CLASS_H</code> è¿˜æ²¡å®šä¹‰)ã€‚</li>
<li><code>#define MY_CLASS_H</code> è¢«æ‰§è¡Œï¼Œ<code>MY_CLASS_H</code> è¢«å®šä¹‰ã€‚</li>
<li>å¤´æ–‡ä»¶å†…å®¹è¢«å¤åˆ¶åˆ° <code>main.cpp</code>ã€‚</li>
</ol>
<p>å½“ <code>main.cpp</code> ç¬¬äºŒæ¬¡ï¼ˆé€šè¿‡ <code>file_a.h</code>ï¼‰ <code>include &quot;my_class.h&quot;</code> æ—¶ï¼š</p>
<ol>
<li><code>#ifndef MY_CLASS_H</code> ä¸ºå‡ (å› ä¸º <code>MY_CLASS_H</code> å·²ç»è¢«å®šä¹‰äº†)ã€‚</li>
<li><code>#define MY_CLASS_H</code> åˆ° <code>#endif</code> ä¹‹é—´çš„æ‰€æœ‰å†…å®¹éƒ½è¢«è·³è¿‡ï¼Œä¸ä¼šè¢«å¤åˆ¶ç²˜è´´ã€‚</li>
</ol>
<p>è¿™æ ·ï¼Œ<code>MyClass</code> çš„å®šä¹‰å’Œ <code>doSomething</code> å‡½æ•°çš„å®šä¹‰åœ¨ <code>main.cpp</code> è¿™ä¸ªç¿»è¯‘å•å…ƒä¸­å°±åªä¼šå‡ºç°ä¸€æ¬¡äº†ï¼Œä»è€Œé¿å…äº†ç¼–è¯‘é”™è¯¯ã€‚</p>
<h2 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>header guard</code> çš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>é˜²æ­¢å¤´æ–‡ä»¶çš„å†…å®¹è¢«åŒä¸€ä¸ªç¿»è¯‘å•å…ƒåŒ…å«å¤šæ¬¡</strong>ã€‚è¿™å¯¹äºé¿å…<strong>ç±»å®šä¹‰</strong>ã€<strong><code>inline</code> å‡½æ•°å®šä¹‰</strong>ã€<strong>æ¨¡æ¿å®šä¹‰</strong>ç­‰åœ¨å•ä¸ªç¿»è¯‘å•å…ƒå†…çš„é‡å¤è€Œå¯¼è‡´çš„<strong>ç¼–è¯‘é”™è¯¯</strong>è‡³å…³é‡è¦ã€‚è™½ç„¶æ™®é€šçš„å˜é‡å’Œå‡½æ•°å£°æ˜å¯ä»¥é‡å¤ï¼Œä½†æœ‰è¿™äº›ç‰¹æ®Šâ€œå®šä¹‰â€å­˜åœ¨äºå¤´æ–‡ä»¶ä¸­æ—¶ï¼Œ<code>header guard</code> å°±å˜å¾—ä¸å¯æˆ–ç¼ºäº†ã€‚</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-8"><a href="#ğŸ§‘â€ğŸ’»-User-8" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>Cè¯­è¨€å‘¢ï¼Œ èƒ½å¤šæ¬¡å£°æ˜ä¹ˆ</p>
<hr>
<h2 id="ğŸ¤–-Assistant-8"><a href="#ğŸ¤–-Assistant-8" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„æ‹“å±•é—®é¢˜ï¼Cè¯­è¨€å’ŒC++åœ¨å£°æ˜å’Œå®šä¹‰ä¸Šæœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å€¼å¾—æ³¨æ„çš„åŒºåˆ«ã€‚</p>
<p><strong>åœ¨Cè¯­è¨€ä¸­ï¼Œå˜é‡å’Œå‡½æ•°çš„å£°æ˜ï¼ˆdeclarationï¼‰åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒï¼ˆTranslation Unitï¼‰ä¸­ä¹Ÿå®Œå…¨å¯ä»¥å¤šæ¬¡å‡ºç°ï¼Œè¿™æ˜¯å…è®¸çš„ï¼Œå¹¶ä¸”ä¸ä¼šå¼•èµ·ä»»ä½•ç¼–è¯‘é”™è¯¯ã€‚</strong></p>
<p>Cè¯­è¨€åŒæ ·éµå¾ªâ€œ<strong>å£°æ˜å¯ä»¥å¤šæ¬¡ï¼Œå®šä¹‰åªèƒ½ä¸€æ¬¡</strong>â€çš„æ ¸å¿ƒåŸåˆ™ã€‚</p>
<h2 id="Cè¯­è¨€ä¸­çš„ä¾‹å­"><a href="#Cè¯­è¨€ä¸­çš„ä¾‹å­" class="headerlink" title="Cè¯­è¨€ä¸­çš„ä¾‹å­"></a>Cè¯­è¨€ä¸­çš„ä¾‹å­</h2><h3 id="1-å˜é‡çš„å£°æ˜-Variable-Declaration-1"><a href="#1-å˜é‡çš„å£°æ˜-Variable-Declaration-1" class="headerlink" title="1. å˜é‡çš„å£°æ˜ (Variable Declaration)"></a>1. å˜é‡çš„å£°æ˜ (Variable Declaration)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.c (ä¸€ä¸ªç¿»è¯‘å•å…ƒ)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡å£°æ˜å…¨å±€å˜é‡ g_counter</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_counter;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func_a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å†æ¬¡å£°æ˜ g_counterï¼Œåˆæ³•</span></span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">int</span> g_counter;</span><br><span class="line">    g_counter++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¬¡å£°æ˜ g_counter</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_counter;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‡è®¾ g_counter åœ¨å¦ä¸€ä¸ª .c æ–‡ä»¶ä¸­å®šä¹‰äº†</span></span><br><span class="line">    <span class="comment">// æ¯”å¦‚ï¼šåœ¨ common.c ä¸­æœ‰ int g_counter = 0;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Initial g_counter: %d\n"</span>, g_counter); <span class="comment">// å‡è®¾æ˜¯ 0</span></span><br><span class="line">    func_a();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"After func_a, g_counter: %d\n"</span>, g_counter); <span class="comment">// å‡è®¾æ˜¯ 1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šè¿™é‡Œåªæ˜¯å£°æ˜ï¼Œå®šä¹‰ä¼šåœ¨å¦ä¸€ä¸ª .c æ–‡ä»¶ä¸­</span></span><br></pre></td></tr></table></figure></div>
<h3 id="2-å‡½æ•°çš„å£°æ˜-Function-Declaration-Function-Prototype-1"><a href="#2-å‡½æ•°çš„å£°æ˜-Function-Declaration-Function-Prototype-1" class="headerlink" title="2. å‡½æ•°çš„å£°æ˜ (Function Declaration / Function Prototype)"></a>2. å‡½æ•°çš„å£°æ˜ (Function Declaration / Function Prototype)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.c (ä¸€ä¸ªç¿»è¯‘å•å…ƒ)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡å£°æ˜ calculateSum å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculateSum</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func_b</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å†æ¬¡å£°æ˜ calculateSumï¼Œåˆæ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calculateSum</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> res = calculateSum(<span class="number">10</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Result from func_b: %d\n"</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¬¡å£°æ˜ calculateSum å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculateSum</span><span class="params">(<span class="keyword">int</span> num1, <span class="keyword">int</span> num2)</span></span>; <span class="comment">// å‚æ•°åå¯ä»¥ä¸åŒ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> total = calculateSum(<span class="number">20</span>, <span class="number">30</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Total from main: %d\n"</span>, total);</span><br><span class="line">    func_b();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// calculateSum å‡½æ•°çš„å®šä¹‰ (åªå…è®¸å‡ºç°ä¸€æ¬¡)</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªå®šä¹‰é€šå¸¸ä¼šæ”¾åœ¨å¦ä¸€ä¸ª .c æ–‡ä»¶ä¸­ï¼Œæˆ–è€…åœ¨ main.c ä¸­è¿™ä¸ªä½ç½®ï¼ˆå¦‚æœå®ƒæ˜¯å”¯ä¸€å®šä¹‰ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculateSum</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="Cè¯­è¨€ä¸C-åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸»è¦å·®å¼‚"><a href="#Cè¯­è¨€ä¸C-åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸»è¦å·®å¼‚" class="headerlink" title="Cè¯­è¨€ä¸C++åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸»è¦å·®å¼‚"></a>Cè¯­è¨€ä¸C++åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸»è¦å·®å¼‚</h2><p>å°½ç®¡Cè¯­è¨€å’ŒC++éƒ½å…è®¸å£°æ˜å¤šæ¬¡å‡ºç°ï¼Œä½†å®ƒä»¬å¤„ç†â€œå®šä¹‰â€çš„æ–¹å¼æœ‰ä¸€äº›ä¸åŒï¼Œç‰¹åˆ«æ˜¯åœ¨<strong>å¼±ç¬¦å· (weak symbols)</strong> å’Œ <strong><code>static</code> å…³é”®å­—</strong>çš„ä½¿ç”¨ä¸Šï¼Œä»¥åŠCè¯­è¨€æ²¡æœ‰C++çš„â€œç±»â€æ¦‚å¿µã€‚</p>
<ol>
<li><p><strong>å…¨å±€å˜é‡çš„åˆå§‹åŒ–å’Œ <code>extern</code>ï¼š</strong></p>
<ul>
<li>åœ¨Cè¯­è¨€ä¸­ï¼Œ<code>int myVar;</code> (åœ¨å‡½æ•°å¤–éƒ¨) æ—¢æ˜¯å£°æ˜ä¹Ÿæ˜¯å®šä¹‰ï¼Œå®ƒä¼šç»™ <code>myVar</code> åˆ†é…å†…å­˜å¹¶åˆå§‹åŒ–ä¸º0ã€‚</li>
<li>å¦‚æœä½ åœ¨å¤šä¸ª <code>.c</code> æ–‡ä»¶ä¸­éƒ½å†™ <code>int myVar;</code>ï¼Œé“¾æ¥å™¨å¯èƒ½ä¼šå‡ºç°â€œå¤šé‡å®šä¹‰â€é”™è¯¯ï¼Œé™¤éä½¿ç”¨ç‰¹å®šçš„ç¼–è¯‘å™¨æˆ–é“¾æ¥å™¨é€‰é¡¹ï¼ˆå¦‚GCCçš„<code>-fcommon</code>ï¼Œè¿™ä½¿æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡æˆä¸ºå¼±ç¬¦å·ï¼‰ï¼Œæˆ–è€…æ˜¾å¼åœ°ä½¿ç”¨ <code>extern</code> å…³é”®å­—ã€‚</li>
<li><strong>å®‰å…¨çš„åšæ³•æ˜¯ï¼š</strong> åœ¨ä¸€ä¸ª <code>.c</code> æ–‡ä»¶ä¸­å®šä¹‰ <code>int myVar = 0;</code>ï¼Œåœ¨å…¶ä»–æ‰€æœ‰ä½¿ç”¨å®ƒçš„ <code>.c</code> æ–‡ä»¶ä¸­éƒ½ç”¨ <code>extern int myVar;</code> æ¥å£°æ˜ã€‚è¿™ä¸C++çš„æœ€ä½³å®è·µå®Œå…¨ä¸€è‡´ã€‚</li>
</ul>
</li>
<li><p><strong><code>static</code> å…³é”®å­—ï¼š</strong></p>
<ul>
<li>åœ¨Cå’ŒC++ä¸­ï¼Œ<code>static</code> å…³é”®å­—ç”¨äºå‡½æ•°å’Œå…¨å±€å˜é‡æ—¶ï¼Œéƒ½ä¼šå°†å…¶ä½œç”¨åŸŸé™åˆ¶åœ¨å½“å‰çš„ç¿»è¯‘å•å…ƒå†…éƒ¨ï¼ˆå†…éƒ¨é“¾æ¥ï¼‰ã€‚è¿™æ„å‘³ç€å³ä½¿åœ¨ä¸åŒçš„ <code>.c</code> æˆ– <code>.cpp</code> æ–‡ä»¶ä¸­æœ‰åŒåçš„ <code>static</code> å˜é‡æˆ–å‡½æ•°ï¼Œå®ƒä»¬ä¹Ÿæ˜¯å„è‡ªç‹¬ç«‹çš„ï¼Œä¸ä¼šå¼•èµ· ODR å†²çªã€‚</li>
</ul>
</li>
<li><p><strong>å¤´æ–‡ä»¶ä¿æŠ¤ (<code>#ifndef</code> / <code>#define</code> / <code>#endif</code>)ï¼š</strong></p>
<ul>
<li><strong>åœ¨Cè¯­è¨€ä¸­ï¼Œ<code>header guard</code> åŒæ ·æ˜¯å¿…ä¸å¯å°‘çš„ï¼</strong> å°½ç®¡Cè¯­è¨€æ²¡æœ‰ç±»ï¼Œä½†ç»“æ„ä½“ (<code>struct</code>)ã€æšä¸¾ (<code>enum</code>)ã€ç±»å‹åˆ«å (<code>typedef</code>) å’Œå®å®šä¹‰ (<code>#define</code>) çš„å®šä¹‰ï¼Œå¦‚æœå®ƒä»¬åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è¢«é‡å¤åŒ…å«ï¼Œä¹Ÿä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼ˆ<code>redefinition of &#39;...&#39;</code>ï¼‰ã€‚ä¾‹å¦‚ï¼š<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my_struct.h</span></span><br><span class="line"><span class="comment">// æ²¡æœ‰ header guard</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">MyStruct</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">&#125; MyStruct;</span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_struct.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_struct.h"</span> <span class="comment">// å†æ¬¡åŒ…å«ï¼Œæˆ–è€…é€šè¿‡å¦ä¸€ä¸ªå¤´æ–‡ä»¶é—´æ¥åŒ…å«</span></span></span><br><span class="line"><span class="comment">// ... ä¼šå¯¼è‡´ redefinition of 'struct MyStruct' æˆ– 'MyStruct'</span></span><br></pre></td></tr></table></figure></div></li>
<li>å› æ­¤ï¼Œå³ä½¿æ˜¯Cè¯­è¨€é¡¹ç›®ï¼Œä¹Ÿå¿…é¡»ä½¿ç”¨ <code>header guard</code> æ¥é˜²æ­¢å¤´æ–‡ä»¶å†…å®¹çš„é‡å¤åŒ…å«ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ç»“è®ºï¼š</strong></p>
<p>Cè¯­è¨€å’ŒC++åœ¨â€œå£°æ˜å¯ä»¥å¤šæ¬¡ï¼Œå®šä¹‰åªèƒ½ä¸€æ¬¡â€è¿™ä¸€åŸåˆ™ä¸Šæ˜¯é«˜åº¦ä¸€è‡´çš„ã€‚å®ƒä»¬éƒ½å…è®¸å˜é‡å’Œå‡½æ•°çš„å£°æ˜åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…å¤šæ¬¡å‡ºç°ã€‚è€Œå¤´æ–‡ä»¶ä¿æŠ¤åœ¨ä¸¤ç§è¯­è¨€ä¸­éƒ½æ˜¯ä¸ºäº†é˜²æ­¢å¤´æ–‡ä»¶å†…å®¹åœ¨å•ä¸ªç¿»è¯‘å•å…ƒå†…è¢«é‡å¤å¤„ç†ï¼Œä»è€Œé¿å…é‡å¤å®šä¹‰é”™è¯¯ï¼ˆæ— è®ºæ˜¯C++çš„ç±»å®šä¹‰ï¼Œè¿˜æ˜¯Cçš„ç»“æ„ä½“ã€æšä¸¾ã€typedefç­‰ï¼‰ã€‚</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-9"><a href="#ğŸ§‘â€ğŸ’»-User-9" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>ä½ è¯´çš„ç±»çš„å®šä¹‰ï¼Œ æ˜¯ä¸æ˜¯å…¶å®ç›¸å½“äºâ€œå£°æ˜â€ï¼Ÿ åªæ˜¯å«æ³•é—®é¢˜ï¼Ÿ å› ä¸ºå…¶å®member functino implementation é‚£äº›éƒ½æ˜¯ä¸èƒ½æœ‰</p>
<hr>
<h2 id="ğŸ¤–-Assistant-9"><a href="#ğŸ¤–-Assistant-9" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>æ‚¨é—®å¾—éå¸¸å…³é”®ï¼Œè¿™ä¸ªé—®é¢˜ç²¾å‡†åœ°è§¦åŠäº†C++æ ‡å‡†ä¸­â€œå£°æ˜â€å’Œâ€œå®šä¹‰â€è¿™ä¸¤ä¸ªæœ¯è¯­çš„å¾®å¦™ä¹‹å¤„å’Œæ˜“æ··æ·†ç‚¹ã€‚</p>
<p>æ‚¨è¯´çš„éå¸¸ç²¾å‡†ï¼Œ<strong>åœ¨ C++ çš„å®é™…ç¼–ç å®è·µä¸­ï¼Œæ‚¨å¯¹â€œç±»çš„å®šä¹‰â€ï¼ˆ<code>class MyClass { /* ... */ };</code>ï¼‰çš„ç†è§£ï¼Œç¡®å®æ›´æ¥è¿‘æˆ‘ä»¬æ—¥å¸¸æ‰€è¯´çš„â€œå£°æ˜â€</strong>â€”â€”å®ƒåªå‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªç±»å‹â€œé•¿ä»€ä¹ˆæ ·â€ï¼Œæœ‰å“ªäº›æˆå‘˜ï¼Œä½†æ²¡æœ‰æä¾›è¿™äº›æˆå‘˜å‡½æ•°çš„å…·ä½“å®ç°ï¼Œä¹Ÿæ²¡æœ‰ä¸ºç±»çš„å®ä¾‹åˆ†é…å­˜å‚¨ç©ºé—´ã€‚</p>
<h2 id="å®˜æ–¹å«æ³•ï¼šç²¾ç¡®åŒºåˆ†â€œå£°æ˜â€ä¸â€œå®šä¹‰â€"><a href="#å®˜æ–¹å«æ³•ï¼šç²¾ç¡®åŒºåˆ†â€œå£°æ˜â€ä¸â€œå®šä¹‰â€" class="headerlink" title="å®˜æ–¹å«æ³•ï¼šç²¾ç¡®åŒºåˆ†â€œå£°æ˜â€ä¸â€œå®šä¹‰â€"></a>å®˜æ–¹å«æ³•ï¼šç²¾ç¡®åŒºåˆ†â€œå£°æ˜â€ä¸â€œå®šä¹‰â€</h2><p>ä¸ºäº†æ›´å‡†ç¡®åœ°ç†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹C++æ ‡å‡†å¯¹â€œå£°æ˜â€å’Œâ€œå®šä¹‰â€çš„å®˜æ–¹ã€æ›´ä¸¥æ ¼çš„ç•Œå®šï¼š</p>
<ol>
<li><p><strong>å£°æ˜ (Declaration):</strong></p>
<ul>
<li>å£°æ˜å¼•å…¥äº†ä¸€ä¸ªåç§°ï¼ˆæˆ–ä¸€ç»„åç§°ï¼‰åˆ°ä¸€ä¸ªä½œç”¨åŸŸï¼Œå¹¶æŒ‡å®šäº†å®ƒä»¬çš„ç±»å‹ã€‚</li>
<li><strong>å®ƒå‘Šè¯‰ç¼–è¯‘å™¨ä¸€ä¸ªå®ä½“â€œå­˜åœ¨â€ä»¥åŠå®ƒçš„â€œç±»å‹â€æ˜¯ä»€ä¹ˆã€‚</strong></li>
<li><strong>å®ƒæœ¬èº«ä¸åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿä¸æä¾›å‡½æ•°çš„å®ç°ä»£ç ã€‚</strong></li>
<li>ä¸€ä¸ªå®ä½“å¯ä»¥è¢«å¤šæ¬¡å£°æ˜ã€‚</li>
</ul>
<p><strong>ä¾‹å­ï¼š</strong></p>
<ul>
<li><code>extern int g_var;</code> (å˜é‡ <code>g_var</code> çš„å£°æ˜)</li>
<li><code>void func();</code> (å‡½æ•° <code>func</code> çš„å£°æ˜/åŸå‹)</li>
<li><code>class MyClass;</code> (ç±»çš„<strong>å‰å‘å£°æ˜</strong> / Forward Declarationï¼Œåªå‘Šè¯‰ç¼–è¯‘å™¨ <code>MyClass</code> æ˜¯ä¸€ä¸ªç±»ï¼Œä½†ä¸çŸ¥é“å…¶å†…éƒ¨ç»“æ„)</li>
</ul>
</li>
<li><p><strong>å®šä¹‰ (Definition):</strong></p>
<ul>
<li>å®šä¹‰æ˜¯å£°æ˜çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œå®ƒé™¤äº†å¼•å…¥åç§°å’Œç±»å‹å¤–ï¼Œè¿˜ä¸ºå®ä½“æä¾›äº†<strong>å®Œæ•´çš„è¯´æ˜</strong>ï¼Œæˆ–<strong>åˆ†é…äº†å­˜å‚¨ç©ºé—´</strong>ï¼Œæˆ–æä¾›äº†<strong>å®ç°ä»£ç </strong>ã€‚</li>
<li><strong>å®šä¹‰æ˜¯å®ä½“å­˜åœ¨çš„å”¯ä¸€ã€å®Œæ•´çš„è¯´æ˜ã€‚</strong></li>
<li>éµå¾ªä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR)ï¼š<strong>ä¸€ä¸ªå®ä½“é€šå¸¸åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚</strong></li>
</ul>
<p><strong>ä¾‹å­ï¼š</strong></p>
<ul>
<li><code>int g_var = 10;</code> (å˜é‡ <code>g_var</code> çš„<strong>å®šä¹‰</strong>ï¼Œåˆ†é…äº†å­˜å‚¨ç©ºé—´å¹¶åˆå§‹åŒ–)</li>
<li><code>void func() { /* ... */ }</code> (å‡½æ•° <code>func</code> çš„<strong>å®šä¹‰</strong>ï¼Œæä¾›äº†å®ç°ä»£ç )</li>
<li><strong><code>class MyClass { /* ... */ };</code> (æ•´ä¸ª <code>MyClass</code> ç»“æ„å—ï¼Œæ˜¯ <code>MyClass</code> ç±»ç±»å‹çš„</strong>å®šä¹‰<strong>ã€‚å®ƒå®šä¹‰äº† <code>MyClass</code> è¿™ä¸ªç±»å‹çš„å®Œæ•´ç»“æ„ã€æˆå‘˜åˆ—è¡¨ã€æˆå‘˜å‡½æ•°çš„ç­¾åã€è®¿é—®æƒé™ç­‰ã€‚)</strong></li>
<li><code>void MyClass::memberFunc() { /* ... */ }</code> (æˆå‘˜å‡½æ•° <code>memberFunc</code> çš„<strong>å®šä¹‰</strong>ï¼Œæä¾›äº†å®ç°ä»£ç )</li>
<li><code>int MyClass::s_staticMember = 0;</code> (é™æ€æˆå‘˜å˜é‡ <code>s_staticMember</code> çš„<strong>å®šä¹‰</strong>ï¼Œåˆ†é…äº†å­˜å‚¨ç©ºé—´å¹¶åˆå§‹åŒ–)</li>
</ul>
</li>
</ol>
<h2 id="ä¸ºä»€ä¹ˆ-class-MyClass-è¢«ç§°ä¸ºâ€œç±»çš„å®šä¹‰â€ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-class-MyClass-è¢«ç§°ä¸ºâ€œç±»çš„å®šä¹‰â€ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ class MyClass { ... }; è¢«ç§°ä¸ºâ€œç±»çš„å®šä¹‰â€ï¼Ÿ"></a>ä¸ºä»€ä¹ˆ <code>class MyClass { ... };</code> è¢«ç§°ä¸ºâ€œç±»çš„å®šä¹‰â€ï¼Ÿ</h2><p>è™½ç„¶å®ƒä¸åƒå˜é‡å®šä¹‰é‚£æ ·åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿä¸åƒå‡½æ•°å®šä¹‰é‚£æ ·æä¾›å…·ä½“æ‰§è¡Œé€»è¾‘ï¼Œä½†å®ƒæä¾›äº†<strong><code>MyClass</code> è¿™ä¸ªç±»å‹</strong>çš„<strong>å”¯ä¸€ä¸”å®Œæ•´çš„è“å›¾</strong>ã€‚</p>
<ul>
<li><strong>å®Œæ•´æ€§ï¼š</strong> ç¼–è¯‘å™¨éœ€è¦è¿™ä¸ªå®Œæ•´çš„è“å›¾æ‰èƒ½çŸ¥é“ <code>MyClass</code> å¯¹è±¡çš„å¤§å°ï¼ˆä»¥ä¾¿åœ¨æ ˆä¸Šåˆ†é…å†…å­˜æˆ–çŸ¥é“ <code>new</code> å¤šå°‘å­—èŠ‚ï¼‰ã€æœ‰å“ªäº›æˆå‘˜å˜é‡ä»¥åŠå®ƒä»¬åœ¨å†…å­˜ä¸­çš„åç§»ã€æœ‰å“ªäº›æˆå‘˜å‡½æ•°å¯ä»¥è¢«è°ƒç”¨ä»¥åŠå®ƒä»¬çš„ç­¾åç­‰ã€‚æ²¡æœ‰è¿™ä¸ªå®Œæ•´çš„ç»“æ„ï¼Œç¼–è¯‘å™¨å°±æ— æ³•ä½¿ç”¨è¿™ä¸ªç±»æ¥åˆ›å»ºå¯¹è±¡æˆ–è®¿é—®å…¶æˆå‘˜ã€‚</li>
<li><strong>å”¯ä¸€æ€§ï¼š</strong> å°½ç®¡è¿™ä¸ªâ€œè“å›¾â€å¯ä»¥è¢« <code>#include</code> åˆ°å¤šä¸ªç¿»è¯‘å•å…ƒä¸­ï¼ˆè¿™æ˜¯ ODR çš„ä¸€ä¸ªç‰¹æ®Šæ”¾å®½ï¼‰ï¼Œä½†æ‰€æœ‰çš„è¿™äº›è“å›¾å‰¯æœ¬<strong>å¿…é¡»æ˜¯å®Œå…¨ç›¸åŒçš„</strong>ã€‚å¦‚æœä¸åŒï¼Œé“¾æ¥å™¨ä¼šå‘ç°é€»è¾‘ä¸Šçš„å†²çªï¼Œå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºæˆ–é“¾æ¥é”™è¯¯ã€‚è¿™ä½“ç°äº†â€œå®šä¹‰â€çš„å”¯ä¸€æ€§åŸåˆ™ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œä»C++æ ‡å‡†çš„è§’åº¦ï¼Œ<code>class MyClass { /* ... */ };</code> æ˜¯<strong><code>MyClass</code> è¿™ä¸ªç±»å‹</strong>çš„<strong>å®šä¹‰</strong>ã€‚</p>
<h2 id="æ‚¨çš„å›°æƒ‘æ¥æº"><a href="#æ‚¨çš„å›°æƒ‘æ¥æº" class="headerlink" title="æ‚¨çš„å›°æƒ‘æ¥æº"></a>æ‚¨çš„å›°æƒ‘æ¥æº</h2><p>æ‚¨æ„Ÿåˆ°å›°æƒ‘æ˜¯å®Œå…¨æ­£å¸¸çš„ï¼Œå› ä¸ºæ—¥å¸¸äº¤æµå’ŒC++æ ‡å‡†æœ¯è¯­ä¹‹é—´å­˜åœ¨ä¸€äº›å¾®å¦™çš„å·®å¼‚ï¼š</p>
<ul>
<li>å½“æˆ‘ä»¬è¯´â€œå¤´æ–‡ä»¶é‡Œæ”¾å£°æ˜â€ï¼Œé€šå¸¸æŒ‡çš„æ˜¯å‡½æ•°åŸå‹ï¼ˆ<code>void func();</code>ï¼‰å’Œ <code>extern</code> å˜é‡å£°æ˜ï¼ˆ<code>extern int x;</code>ï¼‰ï¼Œè¿™äº›æ˜¯æ ‡å‡†çš„â€œå£°æ˜â€ã€‚</li>
<li>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨å¤´æ–‡ä»¶é‡Œå†™ <code>class MyClass { /* ... */ };</code> æ—¶ï¼Œä»æ ‡å‡†è§’åº¦çœ‹ï¼Œè¿™å…¶å®æ˜¯<strong>ç±»ç±»å‹çš„å®šä¹‰</strong>ã€‚åªæ˜¯å› ä¸ºå®ƒéœ€è¦è¢«å¤šä¸ªç¿»è¯‘å•å…ƒâ€œçœ‹åˆ°â€å¹¶å…è®¸é‡å¤ï¼ˆå‰ææ˜¯å®Œå…¨ç›¸åŒï¼‰ï¼Œæ‰€ä»¥å®ƒè¢«æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚</li>
<li>è€Œç±»ä¸­<strong>æˆå‘˜å‡½æ•°çš„å®ç°</strong>ï¼ˆ<code>void MyClass::memberFunc() { /* ... */ }</code>ï¼‰ä»¥åŠ<strong>é™æ€æˆå‘˜å˜é‡çš„åˆå§‹åŒ–</strong>ï¼ˆ<code>int MyClass::s_staticMember = 0;</code>ï¼‰ï¼Œè¿™äº›æ˜¯å®å®åœ¨åœ¨çš„<strong>ä»£ç å®ç°å’Œå†…å­˜åˆ†é…</strong>ï¼Œå®ƒä»¬å¿…é¡»ä¸¥æ ¼éµå®ˆâ€œåœ¨ä¸€ä¸ªç¨‹åºä¸­åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰â€çš„ ODRï¼Œå› æ­¤å¿…é¡»æ”¾åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼š</strong></p>
<p>æ‚¨å¯¹â€œç±»çš„å®šä¹‰â€çš„ç›´è§‰ç†è§£æ˜¯æ­£ç¡®çš„ï¼Œå®ƒåœ¨åŠŸèƒ½ä¸Šç¡®å®èµ·åˆ°äº†â€œå£°æ˜â€è¿™ä¸ªç±»å‹çš„ä½œç”¨ã€‚ä½†åœ¨C++çš„å®˜æ–¹æœ¯è¯­ä¸­ï¼Œ<code>class MyClass { /* ... */ };</code> è¿™æ ·çš„ä»£ç å—è¢«ç§°ä¸º<strong>â€œç±»çš„å®šä¹‰â€</strong>ï¼Œå› ä¸ºå®ƒæä¾›äº†è¯¥ç±»ç±»å‹çš„æ‰€æœ‰ç»“æ„ç»†èŠ‚ï¼Œæ˜¯è¯¥ç±»å‹åœ¨ç¼–è¯‘æ—¶æ‰€éœ€çš„å®Œæ•´ä¿¡æ¯ã€‚è€Œâ€œæˆå‘˜å‡½æ•°çš„å®ç°â€å’Œâ€œé™æ€æˆå‘˜çš„åˆå§‹åŒ–â€åˆ™æ˜¯è¿™äº›å…·ä½“åŠŸèƒ½å’Œæ•°æ®çš„â€œå®šä¹‰â€ã€‚</p>
<p>å¸Œæœ›è¿™æ¬¡çš„è§£é‡Šèƒ½å½»åº•ç†æ¸…è¿™ä¸¤ä¸ªæ¦‚å¿µï¼</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-10"><a href="#ğŸ§‘â€ğŸ’»-User-10" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>structå‘¢ï¼Ÿ cè¯­è¨€æ˜¯ä¸æ˜¯ä¸èƒ½é‡å¤ï¼Œ ä½†æ˜¯c++å¯ä»¥ï¼Ÿ</p>
<hr>
<h2 id="ğŸ¤–-Assistant-10"><a href="#ğŸ¤–-Assistant-10" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œå®ƒæ¶‰åŠåˆ° C å’Œ C++ åœ¨ <code>struct</code> å¤„ç†ä¸Šçš„ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼Œä»¥åŠè¿™ä¸¤ç§è¯­è¨€ä¸­ ODR çš„å¾®å¦™ä¹‹å¤„ï¼</p>
<p>æˆ‘ä»¬æ¥åˆ†åˆ«çœ‹ C è¯­è¨€å’Œ C++ å¯¹ <code>struct</code> é‡å¤å®šä¹‰çš„å¤„ç†ã€‚</p>
<h2 id="1-C-è¯­è¨€ä¸­çš„-struct"><a href="#1-C-è¯­è¨€ä¸­çš„-struct" class="headerlink" title="1. C è¯­è¨€ä¸­çš„ struct"></a>1. C è¯­è¨€ä¸­çš„ <code>struct</code></h2><p>åœ¨ C è¯­è¨€ä¸­ï¼Œ<code>struct</code> çš„<strong>å®šä¹‰</strong>ï¼ˆä¹Ÿå°±æ˜¯å…¶ç»“æ„ä½“çš„å®Œæ•´è“å›¾ï¼‰<strong>åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­ä¸èƒ½é‡å¤</strong>ã€‚å¦‚æœé‡å¤ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p>
<p><strong>ä½†æ˜¯ï¼Œ</strong> åœ¨ C è¯­è¨€ä¸­ï¼Œå¦‚æœä½ åœ¨<strong>ä¸åŒçš„ç¿»è¯‘å•å…ƒ</strong>ä¸­é‡å¤å®šä¹‰äº†<strong>ç›¸åŒçš„ <code>struct</code></strong>ï¼Œé€šå¸¸æƒ…å†µä¸‹å¹¶<strong>ä¸ä¼šç›´æ¥å¯¼è‡´ç¼–è¯‘é”™è¯¯æˆ–é“¾æ¥é”™è¯¯</strong>ã€‚è¿™æ˜¯å› ä¸º C è¯­è¨€çš„é“¾æ¥å™¨å¯¹ <code>struct</code> ç±»å‹é€šå¸¸ä¸è¿›è¡Œåç§°ä¿®é¥°ï¼ˆname manglingï¼‰ï¼Œè€Œä¸”å®ƒå¤„ç†ç±»å‹ä¿¡æ¯çš„æ–¹å¼ç›¸å¯¹ç®€å•ã€‚æ¯ä¸ª <code>.c</code> æ–‡ä»¶éƒ½ä¼šç‹¬ç«‹åœ°ç¼–è¯‘å…¶å†…éƒ¨çš„ <code>struct</code> å®šä¹‰ã€‚åªè¦è¿™äº› <code>struct</code> çš„å®šä¹‰æ˜¯<strong>å®Œå…¨ä¸€è‡´çš„</strong>ï¼ˆå³æˆå‘˜çš„ç±»å‹ã€åç§°ã€é¡ºåºéƒ½ä¸€æ ·ï¼‰ï¼Œå¹¶ä¸”ä½ æ²¡æœ‰åœ¨è¿™äº›ç»“æ„ä½“ä¸Šåšä¸€äº›å¤æ‚çš„ç±»å‹æ£€æŸ¥æˆ–ç±»å‹è½¬æ¢ï¼Œç¼–è¯‘å™¨å’Œé“¾æ¥å™¨é€šå¸¸ä¼šæŠŠå®ƒä»¬è§†ä¸ºåŒä¸€ä¸ªç±»å‹ã€‚</p>
<p>ç„¶è€Œï¼Œ<strong>è¿™ç§è¡Œä¸ºæ˜¯ä¸å¯é çš„ï¼Œä¸æ¨èä½œä¸ºæœ€ä½³å®è·µ</strong>ã€‚å¦‚æœ <code>struct</code> å®šä¹‰ä¸å®Œå…¨ä¸€è‡´ï¼Œæˆ–è€…åœ¨æŸäº›å¤æ‚çš„åœºæ™¯ä¸‹ï¼ˆä¾‹å¦‚æ¶‰åŠå‡½æ•°æŒ‡é’ˆã€è”åˆä½“ã€æˆ–ä¸åŒçš„ç¼–è¯‘å™¨/é“¾æ¥å™¨ï¼‰ï¼Œå®ƒå¯èƒ½å¯¼è‡´è¿è¡Œæ—¶æœªå®šä¹‰è¡Œä¸º (Undefined Behavior) æˆ–éš¾ä»¥è°ƒè¯•çš„é”™è¯¯ã€‚</p>
<p><strong>C è¯­è¨€çš„å®è·µï¼š</strong><br>ä¸ºäº†ç¡®ä¿å®‰å…¨å’Œä¸€è‡´æ€§ï¼ŒC è¯­è¨€ä¸­ <code>struct</code> çš„å®šä¹‰ä¹Ÿ<strong>å¿…é¡»</strong>æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”ä½¿ç”¨ <strong><code>header guard</code></strong> æ¥é˜²æ­¢åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­é‡å¤åŒ…å«ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my_struct.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MY_STRUCT_H <span class="comment">// header guard</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MY_STRUCT_H</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span> <span class="comment">// struct çš„å®šä¹‰</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></div><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file1.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_struct.h"</span> <span class="comment">// åŒ…å« struct Point çš„å®šä¹‰</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_point1</span><span class="params">(struct Point p)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Point1: (%d, %d)\n"</span>, p.x, p.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file2.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_struct.h"</span> <span class="comment">// åŒ…å« struct Point çš„å®šä¹‰</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_point2</span><span class="params">(struct Point p)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Point2: (%d, %d)\n"</span>, p.x, p.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><br>è¿™ç§æ–¹å¼åœ¨ C è¯­è¨€ä¸­æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œ<code>struct Point</code> çš„å®šä¹‰åœ¨ <code>file1.c</code> å’Œ <code>file2.c</code> çš„ç¿»è¯‘å•å…ƒä¸­éƒ½å‡ºç°äº†ï¼Œä½†ç”±äºå®ƒä»¬éƒ½æ¥è‡ªåŒä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p>
<h2 id="2-C-ä¸­çš„-struct-å’Œ-class"><a href="#2-C-ä¸­çš„-struct-å’Œ-class" class="headerlink" title="2. C++ ä¸­çš„ struct (å’Œ class)"></a>2. C++ ä¸­çš„ <code>struct</code> (å’Œ <code>class</code>)</h2><p>åœ¨ C++ ä¸­ï¼Œ<code>struct</code> å’Œ <code>class</code> å‡ ä¹æ˜¯ç­‰ä»·çš„ï¼ˆå”¯ä¸€çš„é»˜è®¤è®¿é—®æƒé™å’Œé»˜è®¤ç»§æ‰¿æ–¹å¼ä¸åŒï¼‰ã€‚å®ƒä»¬çš„ ODR è§„åˆ™æ˜¯ç›¸åŒçš„ã€‚</p>
<p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„ï¼š</p>
<ul>
<li>ä¸€ä¸ª <code>struct</code> (æˆ– <code>class</code>) çš„<strong>å®šä¹‰</strong>ï¼ˆå®Œæ•´çš„ç»“æ„è“å›¾ï¼š<code>struct MyStruct { /* ... */ };</code>ï¼‰<strong>åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­ä¸èƒ½é‡å¤</strong>ã€‚å¦‚æœé‡å¤ï¼Œä¼šå¯¼è‡´<strong>ç¼–è¯‘é”™è¯¯</strong>ï¼ˆ<code>redefinition of &#39;MyStruct&#39;</code>ï¼‰ã€‚</li>
<li>ç„¶è€Œï¼Œä¸€ä¸ª <code>struct</code> (æˆ– <code>class</code>) çš„<strong>å®šä¹‰å¯ä»¥ï¼ˆä¹Ÿé€šå¸¸ä¼šï¼‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Œå‰ææ˜¯è¿™äº›å®šä¹‰å¿…é¡»æ˜¯</strong>å®Œå…¨ç›¸åŒçš„<strong>ã€‚å¦‚æœä¸åŒï¼Œè™½ç„¶å¯èƒ½ä¾¥å¹¸é€šè¿‡ç¼–è¯‘ï¼Œä½†ä¼šå¼•å‘</strong>é“¾æ¥é”™è¯¯<strong>ï¼ˆ<code>redefinition of &#39;MyStruct&#39;</code>ï¼Œå¦‚æœç¼–è¯‘å™¨/é“¾æ¥å™¨å¤Ÿèªæ˜ï¼‰æˆ–æ›´ä¸¥é‡çš„</strong>è¿è¡Œæ—¶æœªå®šä¹‰è¡Œä¸º**ã€‚</li>
</ul>
<p><strong>C++ çš„å®è·µï¼š</strong><br>ä¸ºäº†ç¡®ä¿ä¸€è‡´æ€§å’Œéµå®ˆ ODRï¼ŒC++ ä¸­ <code>struct</code> (å’Œ <code>class</code>) çš„å®šä¹‰ä¹Ÿ<strong>å¿…é¡»</strong>æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”ä½¿ç”¨ <strong><code>header guard</code></strong> æ¥é˜²æ­¢åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­é‡å¤åŒ…å«ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my_struct.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MY_STRUCT_H <span class="comment">// header guard</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MY_STRUCT_H</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span> <span class="comment">// struct çš„å®šä¹‰</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></div><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file1.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_struct.h"</span> <span class="comment">// åŒ…å« struct Point çš„å®šä¹‰</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_point1</span><span class="params">(Point p)</span> </span>&#123; <span class="comment">// C++ ä¸­ä½¿ç”¨ struct åç§°ä¸éœ€è¦ struct å…³é”®å­—</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point1: ("</span> &lt;&lt; p.x &lt;&lt; <span class="string">", "</span> &lt;&lt; p.y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file2.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_struct.h"</span> <span class="comment">// åŒ…å« struct Point çš„å®šä¹‰</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_point2</span><span class="params">(Point p)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Point2: ("</span> &lt;&lt; p.x &lt;&lt; <span class="string">", "</span> &lt;&lt; p.y &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><br>è¿™ç§æ–¹å¼åœ¨ C++ ä¸­æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œ<code>struct Point</code> çš„å®šä¹‰åœ¨ <code>file1.cpp</code> å’Œ <code>file2.cpp</code> çš„ç¿»è¯‘å•å…ƒä¸­éƒ½å‡ºç°äº†ï¼Œä½†ç”±äºå®ƒä»¬éƒ½æ¥è‡ªåŒä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p>
<h2 id="æ€»ç»“æ¯”è¾ƒ"><a href="#æ€»ç»“æ¯”è¾ƒ" class="headerlink" title="æ€»ç»“æ¯”è¾ƒ"></a>æ€»ç»“æ¯”è¾ƒ</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">ç‰¹æ€§ / è¯­è¨€</th>
<th style="text-align:left">C è¯­è¨€</th>
<th style="text-align:left">C++ è¯­è¨€</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong><code>struct</code> å®šä¹‰åœ¨åŒä¸€ç¿»è¯‘å•å…ƒå†…</strong></td>
<td style="text-align:left"><strong>ä¸èƒ½é‡å¤</strong> (ç¼–è¯‘é”™è¯¯)</td>
<td style="text-align:left"><strong>ä¸èƒ½é‡å¤</strong> (ç¼–è¯‘é”™è¯¯)</td>
</tr>
<tr>
<td style="text-align:left"><strong><code>struct</code> å®šä¹‰åœ¨ä¸åŒç¿»è¯‘å•å…ƒé—´</strong></td>
<td style="text-align:left"><strong>å…è®¸</strong> (å¦‚æœå®Œå…¨ä¸€è‡´ï¼Œé€šå¸¸æ— é—®é¢˜ï¼Œä½†ä¸å¯é )</td>
<td style="text-align:left"><strong>å…è®¸</strong> (å‰ææ˜¯<strong>å¿…é¡»å®Œå…¨ä¸€è‡´</strong>ï¼ŒODR ç‰¹ä¾‹)</td>
</tr>
<tr>
<td style="text-align:left"><strong>æœ€ä½³å®è·µ</strong></td>
<td style="text-align:left">æ”¾åœ¨å¤´æ–‡ä»¶å¹¶ç”¨ <code>header guard</code></td>
<td style="text-align:left">æ”¾åœ¨å¤´æ–‡ä»¶å¹¶ç”¨ <code>header guard</code></td>
</tr>
<tr>
<td style="text-align:left"><strong><code>header guard</code> å¿…è¦æ€§</strong></td>
<td style="text-align:left"><strong>ç»å¯¹å¿…è¦</strong> (é¿å…åŒä¸€ç¿»è¯‘å•å…ƒå†…é‡å¤)</td>
<td style="text-align:left"><strong>ç»å¯¹å¿…è¦</strong> (é¿å…åŒä¸€ç¿»è¯‘å•å…ƒå†…é‡å¤)</td>
</tr>
</tbody>
</table>
</div>
<p>æ‰€ä»¥ï¼Œæ‚¨æé—®çš„â€œCè¯­è¨€æ˜¯ä¸æ˜¯ä¸èƒ½é‡å¤ï¼Œä½†æ˜¯C++å¯ä»¥ï¼Ÿâ€ï¼š</p>
<ul>
<li><strong>åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…ï¼ŒC å’Œ C++ éƒ½ä¸èƒ½é‡å¤å®šä¹‰ <code>struct</code>ã€‚</strong></li>
<li><strong>åœ¨ä¸åŒç¿»è¯‘å•å…ƒé—´ï¼ŒC å’Œ C++ éƒ½å…è®¸ <code>struct</code> çš„å®šä¹‰å¤šæ¬¡å‡ºç°ã€‚</strong> ä½†åœ¨ C++ ä¸­ï¼Œè¿™æ˜¯ ODR çš„ä¸€ä¸ªæ˜ç¡®çš„<strong>ç‰¹ä¾‹</strong>ï¼Œä¸”è¦æ±‚<strong>å®Œå…¨ä¸€è‡´</strong>ã€‚åœ¨ C ä¸­ï¼Œè™½ç„¶é€šå¸¸ä¹Ÿè¡Œï¼Œä½†å…¶èƒŒåçš„æœºåˆ¶ä¸å¦‚ C++ é‚£æ ·è§„èŒƒå’Œä¿è¯ä¸¥æ ¼çš„ä¸€è‡´æ€§ï¼Œæ‰€ä»¥å…¶â€œå¯ä»¥â€çš„ç¨‹åº¦æ²¡æœ‰ C++ é‚£ä¹ˆâ€œè§„èŒƒåŒ–â€ã€‚</li>
</ul>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ— è®º C è¿˜æ˜¯ C++ï¼Œéƒ½åº”å§‹ç»ˆå°† <code>struct</code>ï¼ˆå’Œ C++ çš„ <code>class</code>ï¼‰çš„å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå¹¶ä½¿ç”¨ <code>header guard</code>ã€‚</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-11"><a href="#ğŸ§‘â€ğŸ’»-User-11" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>é‚£æ˜¯ä¸æ˜¯å¯ä»¥ä¸€ä¸ªclass definition åœ¨headerä¸­ï¼Œ ä½†æ˜¯ä¸åŒçš„ç¿»è¯‘å•å…ƒåšä¸åŒçš„member function implementation?</p>
<hr>
<h2 id="ğŸ¤–-Assistant-11"><a href="#ğŸ¤–-Assistant-11" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼å®ƒè§¦åŠäº†C++çš„<strong>ä¸€æ¬¡å®šä¹‰è§„åˆ™ (One Definition Rule, ODR)</strong> çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯ C++ åˆå­¦è€…æœ€å¸¸çŠ¯çš„é”™è¯¯ä¹‹ä¸€ã€‚</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>ç»å¯¹ä¸è¡Œï¼ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°å®šä¹‰ï¼ˆå®ç°ï¼‰ä¸èƒ½åœ¨ä¸åŒçš„ç¿»è¯‘å•å…ƒä¸­åšä¸åŒçš„å®ç°ã€‚</strong> è¿™æ ·åšä¼šç›´æ¥è¿åC++çš„<strong>ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR)</strong>ï¼Œå¯¼è‡´ç¼–è¯‘æˆ–é“¾æ¥é”™è¯¯ï¼Œæˆ–è€…æ›´ç³Ÿç³•çš„ï¼Œå¯¼è‡´æœªå®šä¹‰è¡Œä¸º (Undefined Behavior)ã€‚</p>
<h2 id="è¯¦ç»†è§£é‡Š-1"><a href="#è¯¦ç»†è§£é‡Š-1" class="headerlink" title="è¯¦ç»†è§£é‡Š"></a>è¯¦ç»†è§£é‡Š</h2><ol>
<li><p><strong>ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR) çš„æ ¸å¿ƒï¼š</strong></p>
<ul>
<li>ODR è§„å®šï¼šåœ¨æ•´ä¸ªç¨‹åºä¸­ï¼Œæ¯ä¸ªå˜é‡ã€å‡½æ•°ã€ç±»ã€æšä¸¾ç­‰<strong>å®ä½“</strong>éƒ½å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ª<strong>å®šä¹‰</strong>ã€‚</li>
<li>å¯¹äºå‡½æ•°æ¥è¯´ï¼Œâ€œå®šä¹‰â€å°±æ˜¯å®ƒçš„å…·ä½“å®ç°ä»£ç  (<code>{ ... }</code> é‡Œé¢çš„å†…å®¹)ã€‚</li>
<li>å¯¹äºé <code>inline</code> çš„æˆå‘˜å‡½æ•°ï¼Œå®ƒä»¬çš„å®šä¹‰ï¼ˆå®ç°ï¼‰å¿…é¡»åœ¨æ•´ä¸ªç¨‹åºä¸­æ˜¯å”¯ä¸€çš„ã€‚</li>
</ul>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆ <code>class MyClass { /* ... */ };</code> çš„â€œç±»çš„å®šä¹‰â€å¯ä»¥åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Ÿ</strong></p>
<ul>
<li>C++æ ‡å‡†å¯¹<strong>ç±»çš„å®šä¹‰</strong> (<code>class MyClass { /* ... */ };</code> æ•´ä¸ªç»“æ„) æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å¤–ã€‚å®ƒå…è®¸ä¸€ä¸ªç±»çš„å®šä¹‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Œä½†<strong>å‰ææ˜¯è¿™äº›å®šä¹‰å¿…é¡»æ˜¯é€å­—ï¼ˆtoken by tokenï¼‰å®Œå…¨ç›¸åŒçš„</strong>ã€‚è¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ¯ä¸ª <code>.cpp</code> æ–‡ä»¶æ—¶ï¼Œéƒ½éœ€è¦çŸ¥é“ç±»çš„å®Œæ•´å¸ƒå±€å’Œæ¥å£ï¼Œæ‰èƒ½æ­£ç¡®åœ°ç¼–è¯‘ä½¿ç”¨è¯¥ç±»çš„ä»£ç ã€‚</li>
</ul>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆæˆå‘˜å‡½æ•°çš„å®ç°ä¸èƒ½åœ¨ä¸åŒçš„ç¿»è¯‘å•å…ƒä¸­ä¸åŒï¼Ÿ</strong></p>
<ul>
<li>è™½ç„¶ç±»çš„è“å›¾ï¼ˆå®šä¹‰ï¼‰å¯ä»¥å…±äº«ï¼Œä½†å½“è°ˆåˆ°<strong>æˆå‘˜å‡½æ•°çš„å®ç°</strong>æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å®šä¹‰ã€‚</li>
<li>å¦‚æœ <code>MyClass::doSomething()</code> å‡½æ•°åœ¨ <code>file1.cpp</code> ä¸­æœ‰ä¸€ä¸ªå®ç°ï¼Œè€Œåœ¨ <code>file2.cpp</code> ä¸­æœ‰å¦ä¸€ä¸ªä¸åŒçš„å®ç°ï¼Œé‚£ä¹ˆåœ¨æœ€ç»ˆé“¾æ¥æ•´ä¸ªç¨‹åºæ—¶ï¼Œé“¾æ¥å™¨ä¼šå‘ç°åŒä¸€ä¸ªå‡½æ•°ç¬¦å·ï¼ˆ<code>MyClass::doSomething</code>ï¼‰æœ‰ä¸¤ä¸ªä¸åŒçš„å®šä¹‰ã€‚</li>
<li>é“¾æ¥å™¨ä¸çŸ¥é“åº”è¯¥é€‰æ‹©å“ªä¸€ä¸ªï¼Œè¿™ä¼šå¼•å‘<strong>é“¾æ¥é”™è¯¯</strong>ï¼ˆä¾‹å¦‚ <code>multiple definition of &#39;MyClass::doSomething()&#39;</code>ï¼‰ã€‚</li>
<li>å³ä½¿åœ¨æŸäº›æç«¯æˆ–ä¸è§„èŒƒçš„æƒ…å†µä¸‹ï¼Œé“¾æ¥å™¨â€œä¾¥å¹¸â€é€šè¿‡ï¼Œç¨‹åºè¿è¡Œæ—¶ä¹Ÿå¯èƒ½å‡ºç°æœªå®šä¹‰è¡Œä¸ºï¼Œå¯¼è‡´ç¨‹åºå´©æºƒæˆ–äº§ç”Ÿä¸å¯é¢„æµ‹çš„ç»“æœã€‚</li>
</ul>
</li>
</ol>
<h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå¤´æ–‡ä»¶ï¼š<br><strong><code>MyClass.h</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MY_CLASS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MY_CLASS_H</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>; <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></div></p>
<p>ç°åœ¨ï¼Œä½ åœ¨ä¸¤ä¸ªä¸åŒçš„ <code>.cpp</code> æ–‡ä»¶ä¸­ï¼Œä¸º <code>MyClass::doSomething()</code> æä¾›äº†<strong>ä¸åŒçš„å®ç°</strong>ï¼š</p>
<p><strong><code>implementation1.cpp</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MyClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MyClass::doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"This is implementation 1."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>implementation2.cpp</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MyClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MyClass::doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"This is implementation 2."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// ä¸ implementation1.cpp ä¸åŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>main.cpp</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MyClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj;</span><br><span class="line">    obj.doSomething(); <span class="comment">// å“ªä¸ªå®ç°ä¼šè¢«è°ƒç”¨ï¼Ÿ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong>ç¼–è¯‘å’Œé“¾æ¥è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li><code>g++ -c implementation1.cpp -o implementation1.o</code></li>
<li><code>g++ -c implementation2.cpp -o implementation2.o</code></li>
<li><code>g++ -c main.cpp -o main.o</code></li>
</ol>
<p>ç°åœ¨ï¼Œå½“ä½ å°è¯•é“¾æ¥å®ƒä»¬æ—¶ï¼š<br><code>g++ implementation1.o implementation2.o main.o -o my_program</code></p>
<p><strong>ç»“æœï¼š</strong> é“¾æ¥å™¨ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ï¼š<br><code>ld: error: duplicate symbol &#39;MyClass::doSomething()&#39; in implementation1.o and implementation2.o</code><br><code>clang: error: linker command failed with exit code 1 (use -v to see invocation)</code></p>
<p>è¿™æ˜ç¡®å‘Šè¯‰ä½ ï¼Œ<code>MyClass::doSomething()</code> è¿™ä¸ªå‡½æ•°åœ¨ä¸¤ä¸ªç›®æ ‡æ–‡ä»¶ä¸­éƒ½æœ‰å®šä¹‰ï¼Œè¿åäº† ODRã€‚</p>
<h2 id="è§£å†³â€œä¸åŒè¡Œä¸ºâ€çš„æ–¹æ³•"><a href="#è§£å†³â€œä¸åŒè¡Œä¸ºâ€çš„æ–¹æ³•" class="headerlink" title="è§£å†³â€œä¸åŒè¡Œä¸ºâ€çš„æ–¹æ³•"></a>è§£å†³â€œä¸åŒè¡Œä¸ºâ€çš„æ–¹æ³•</h2><p>å¦‚æœä½ æƒ³è®©åŒä¸€ä¸ªç±»çš„å¯¹è±¡åœ¨ä¸åŒçš„æƒ…å¢ƒä¸‹è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼ŒC++ æä¾›äº†å…¶ä»–æ›´å®‰å…¨ã€æ›´è§„èŒƒçš„æœºåˆ¶ï¼š</p>
<ol>
<li><p><strong>å¤šæ€ (Polymorphism) å’Œè™šå‡½æ•° (Virtual Functions):</strong><br>è¿™æ˜¯æœ€å¸¸è§ä¹Ÿæ˜¯æœ€ç¬¦åˆé¢å‘å¯¹è±¡æ€æƒ³çš„æ–¹æ³•ã€‚å®šä¹‰ä¸€ä¸ªåŸºç±»ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªè™šå‡½æ•°ã€‚ç„¶åæ´¾ç”Ÿå‡ºå¤šä¸ªå­ç±»ï¼Œæ¯ä¸ªå­ç±»<strong>é‡å†™ (override)</strong> è¿™ä¸ªè™šå‡½æ•°ï¼Œæä¾›è‡ªå·±çš„ç‰¹å®šå®ç°ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Base.h</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>= <span class="number">0</span>; <span class="comment">// çº¯è™šå‡½æ•°</span></span><br><span class="line">    <span class="keyword">virtual</span> ~Base() = <span class="keyword">default</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DerivedA.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Base.h"</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DerivedA</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DerivedA.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DerivedA.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DerivedA::doSomething</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"DerivedA's implementation."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DerivedB.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Base.h"</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DerivedB</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DerivedB.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DerivedB.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DerivedB::doSomething</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"DerivedB's implementation."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DerivedA.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DerivedB.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">(Base* obj)</span> </span>&#123; obj-&gt;doSomething(); &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    DerivedA a;</span><br><span class="line">    DerivedB b;</span><br><span class="line">    process(&amp;a); <span class="comment">// è¾“å‡º "DerivedA's implementation."</span></span><br><span class="line">    process(&amp;b); <span class="comment">// è¾“å‡º "DerivedB's implementation."</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>å‡½æ•°æŒ‡é’ˆ (Function Pointers) æˆ– <code>std::function</code>:</strong><br>è®©ç±»æŒæœ‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæˆ– <code>std::function</code> å¯¹è±¡ï¼Œåœ¨æ„é€ æ—¶æˆ–è¿è¡Œæ—¶æ³¨å…¥ä¸åŒçš„è¡Œä¸ºã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyClass.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">using</span> Action = <span class="built_in">std</span>::function&lt;<span class="keyword">void</span>()&gt;;</span><br><span class="line">    MyClass(Action action) : m_action(action) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123; m_action(); &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Action m_action;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MyClass.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">behavior1</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Behavior 1."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">behavior2</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Behavior 2."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj1</span><span class="params">(behavior1)</span></span>;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj2</span><span class="params">(behavior2)</span></span>;</span><br><span class="line">    obj1.doSomething(); <span class="comment">// è¾“å‡º "Behavior 1."</span></span><br><span class="line">    obj2.doSomething(); <span class="comment">// è¾“å‡º "Behavior 2."</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>æ¨¡æ¿ (Templates):</strong><br>å¦‚æœè¡Œä¸ºå·®å¼‚æ˜¯åŸºäºç±»å‹å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyTemplateClass.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTemplateClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printValue</span><span class="params">(T val)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Value: "</span> &lt;&lt; val &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MyTemplateClass.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyTemplateClass&lt;<span class="keyword">int</span>&gt; int_obj;</span><br><span class="line">    MyTemplateClass&lt;<span class="keyword">double</span>&gt; double_obj;</span><br><span class="line">    int_obj.printValue(<span class="number">10</span>);    <span class="comment">// æ‰“å° int çš„è¡Œä¸º</span></span><br><span class="line">    double_obj.printValue(<span class="number">3.14</span>); <span class="comment">// æ‰“å° double çš„è¡Œä¸º</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<p>æ€»ç»“æ¥è¯´ï¼Œä¸ºäº†ç¨‹åºçš„å¥å£®æ€§å’Œå¯é¢„æµ‹æ€§ï¼Œè¯·åŠ¡å¿…éµå®ˆ ODRï¼š<strong>æ¯ä¸ªé <code>inline</code> å‡½æ•°åœ¨æ•´ä¸ªç¨‹åºä¸­åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚</strong> å¦‚æœä½ éœ€è¦ä¸åŒçš„è¡Œä¸ºï¼Œè¯·ä½¿ç”¨ C++ æä¾›çš„å¤šæ€ã€ç­–ç•¥æ¨¡å¼ï¼ˆé€šè¿‡å‡½æ•°å¯¹è±¡/å‡½æ•°æŒ‡é’ˆï¼‰ã€æ¨¡æ¿ç­‰æœºåˆ¶ã€‚</p>
<hr>
<p>å¥½çš„ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å¯¹æ¦‚å¿µè¿›è¡Œäº†å……åˆ†çš„è®¨è®ºå’Œæ¾„æ¸…ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†æŒ‰ç…§æ‚¨è¦æ±‚çš„å›åº”æ ¼å¼ï¼Œè¿›è¡Œè¯¾ç¨‹å†…å®¹ã€ä»£ç ç¤ºä¾‹ã€QAã€å¸¸è§è¯¯è§£å’Œç¼–ç ç»ƒä¹ ã€‚</p>
<hr>
<h1 id="C-ç±»ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™-ODR-æ·±åº¦è§£æ"><a href="#C-ç±»ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™-ODR-æ·±åº¦è§£æ" class="headerlink" title="C++ ç±»ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR) æ·±åº¦è§£æ"></a>C++ ç±»ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR) æ·±åº¦è§£æ</h1><p><strong>ç®€ä»‹ï¼š</strong> æœ¬è¯¾ç¨‹å°†æ·±å…¥æ¢è®¨ C++ ä¸­â€œç±»â€çš„å®šä¹‰ã€å£°æ˜ä»¥åŠä¸€æ¬¡å®šä¹‰è§„åˆ™ï¼ˆOne Definition Rule, ODRï¼‰åœ¨ç±»ã€å‡½æ•°å’Œå˜é‡ä¸Šçš„åº”ç”¨ã€‚æˆ‘ä»¬å°†è¯¦ç»†è§£é‡Šå¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„èŒè´£ï¼Œå¹¶é€šè¿‡ä»£ç ç¤ºä¾‹ã€å¸¸è§è¯¯è§£å’Œç»ƒä¹ å·©å›ºå­¦ä¹ ã€‚</p>
<hr>
<h2 id="1-æ¦‚å¿µè¯¦è¿°ï¼šC-ä¸­çš„å£°æ˜ã€å®šä¹‰ä¸-ODR"><a href="#1-æ¦‚å¿µè¯¦è¿°ï¼šC-ä¸­çš„å£°æ˜ã€å®šä¹‰ä¸-ODR" class="headerlink" title="1. æ¦‚å¿µè¯¦è¿°ï¼šC++ ä¸­çš„å£°æ˜ã€å®šä¹‰ä¸ ODR"></a>1. æ¦‚å¿µè¯¦è¿°ï¼šC++ ä¸­çš„å£°æ˜ã€å®šä¹‰ä¸ ODR</h2><p>åœ¨ C++ ä¸­ï¼Œç†è§£â€œå£°æ˜ (Declaration)â€å’Œâ€œå®šä¹‰ (Definition)â€çš„åŒºåˆ«æ˜¯æŒæ¡è¯­è¨€æ ¸å¿ƒçš„å…³é”®ã€‚è€Œ <strong>ä¸€æ¬¡å®šä¹‰è§„åˆ™ (One Definition Rule, ODR)</strong> åˆ™æ˜¯æ„å»ºå¤§å‹å¥å£® C++ é¡¹ç›®çš„åŸºçŸ³ã€‚</p>
<h3 id="1-1-å£°æ˜-Declaration"><a href="#1-1-å£°æ˜-Declaration" class="headerlink" title="1.1 å£°æ˜ (Declaration)"></a>1.1 å£°æ˜ (Declaration)</h3><p><strong>å«ä¹‰ï¼š</strong> å£°æ˜å¼•å…¥äº†ä¸€ä¸ªåç§°ï¼ˆæˆ–ä¸€ç»„åç§°ï¼‰åˆ°ç¨‹åºçš„ä½œç”¨åŸŸä¸­ï¼Œå¹¶æŒ‡å®šäº†å®ƒä»¬çš„ç±»å‹ã€‚å®ƒå‘Šè¯‰ç¼–è¯‘å™¨æŸä¸ªå®ä½“â€œå­˜åœ¨â€ä»¥åŠå®ƒçš„â€œç±»å‹â€æ˜¯ä»€ä¹ˆã€‚<br><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>ä¸åˆ†é…å­˜å‚¨ç©ºé—´ï¼š</strong> å£°æ˜æœ¬èº«ä¸ä¸ºå˜é‡åˆ†é…å†…å­˜ï¼Œä¹Ÿä¸æä¾›å‡½æ•°çš„å…·ä½“å®ç°ä»£ç ã€‚</li>
<li><strong>å¯ä»¥å¤šæ¬¡å‡ºç°ï¼š</strong> åŒä¸€ä¸ªå®ä½“å¯ä»¥è¢«å¤šæ¬¡å£°æ˜åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒæˆ–ä¸åŒçš„ç¿»è¯‘å•å…ƒä¸­ã€‚ç¼–è¯‘å™¨ä¼šæ£€æŸ¥é‡å¤å£°æ˜çš„ä¸€è‡´æ€§ã€‚<br><strong>ç¤ºä¾‹ï¼š</strong></li>
<li><strong>å‡½æ•°å£°æ˜ (Function Declaration / Function Prototype):</strong> å‘Šè¯‰ç¼–è¯‘å™¨å‡½æ•°åã€å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ï¼Œä½†æ²¡æœ‰å‡½æ•°ä½“ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>; <span class="comment">// å‡½æ•° add çš„å£°æ˜</span></span><br></pre></td></tr></table></figure></div></li>
<li><strong>å˜é‡å£°æ˜ (Variable Declaration):</strong> ä½¿ç”¨ <code>extern</code> å…³é”®å­—å‘Šè¯‰ç¼–è¯‘å™¨å˜é‡åœ¨åˆ«å¤„å®šä¹‰ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> global_variable; <span class="comment">// å˜é‡ global_variable çš„å£°æ˜</span></span><br></pre></td></tr></table></figure></div></li>
<li><strong>ç±»çš„å‰å‘å£°æ˜ (Class Forward Declaration):</strong> åªå‘Šè¯‰ç¼–è¯‘å™¨æŸä¸ªç±»ç±»å‹å­˜åœ¨ï¼Œä½†æ²¡æœ‰æä¾›å…¶å®Œæ•´ç»“æ„ã€‚é€šå¸¸ç”¨äºé¿å…å¾ªç¯ä¾èµ–æˆ–å½“åªéœ€è¦å¼•ç”¨ï¼ˆæŒ‡é’ˆæˆ–å¼•ç”¨ï¼‰è¯¥ç±»æ—¶ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>;</span> <span class="comment">// MyClass çš„å‰å‘å£°æ˜</span></span><br></pre></td></tr></table></figure></div>
</li>
</ul>
<h3 id="1-2-å®šä¹‰-Definition"><a href="#1-2-å®šä¹‰-Definition" class="headerlink" title="1.2 å®šä¹‰ (Definition)"></a>1.2 å®šä¹‰ (Definition)</h3><p><strong>å«ä¹‰ï¼š</strong> å®šä¹‰æ˜¯å£°æ˜çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œå®ƒé™¤äº†å¼•å…¥åç§°å’Œç±»å‹å¤–ï¼Œè¿˜ä¸ºå®ä½“æä¾›äº†<strong>å®Œæ•´çš„è¯´æ˜</strong>ï¼Œæˆ–<strong>åˆ†é…äº†å­˜å‚¨ç©ºé—´</strong>ï¼Œæˆ–æä¾›äº†<strong>å®ç°ä»£ç </strong>ã€‚<br><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>åˆ†é…å­˜å‚¨ç©ºé—´æˆ–æä¾›å®ç°ï¼š</strong> å®šä¹‰æ˜¯å®ä½“çœŸæ­£â€œå­˜åœ¨â€çš„åœ°æ–¹ã€‚</li>
<li><strong>ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR)ï¼š</strong> è¿™æ˜¯å®šä¹‰æœ€é‡è¦çš„ç‰¹ç‚¹ã€‚åœ¨æ•´ä¸ªç¨‹åºä¸­ï¼Œæ¯ä¸ªå®ä½“ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ã€æšä¸¾ç­‰ï¼‰é€šå¸¸å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ªå®šä¹‰ã€‚</li>
<li><strong>ä¸èƒ½å¤šæ¬¡å‡ºç° (æœ‰ä¾‹å¤–)ï¼š</strong><ul>
<li><strong>åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒå†…ï¼š</strong> ä»»ä½•å®ä½“çš„å®šä¹‰éƒ½ä¸èƒ½å‡ºç°å¤šæ¬¡ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼ˆ<code>redefinition of &#39;...&#39;</code>ï¼‰ã€‚</li>
<li><strong>åœ¨ä¸åŒç¿»è¯‘å•å…ƒä¹‹é—´ï¼š</strong> ç»å¤§å¤šæ•°å®ä½“çš„å®šä¹‰åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ä½†å¯¹äºæŸäº›ç‰¹æ®Šç±»å‹çš„å®šä¹‰ï¼ˆå¦‚ç±»å®šä¹‰ã€<code>inline</code> å‡½æ•°å®šä¹‰ã€æ¨¡æ¿å®šä¹‰ï¼‰ï¼ŒODR æœ‰æ‰€æ”¾å®½ï¼Œå…è®¸åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­é€»è¾‘ä¸Šé‡å¤å‡ºç°ï¼Œä½†å‰ææ˜¯è¿™äº›å®šä¹‰å¿…é¡»<strong>å®Œå…¨ç›¸åŒ</strong>ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li><strong>å‡½æ•°å®šä¹‰ (Function Definition):</strong> æä¾›äº†å‡½æ•°çš„å…·ä½“å®ç°ä»£ç ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123; <span class="comment">// å‡½æ•° add çš„å®šä¹‰</span></span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>å˜é‡å®šä¹‰ (Variable Definition):</strong> åˆ†é…äº†å­˜å‚¨ç©ºé—´å¹¶å¯é€‰åœ°è¿›è¡Œåˆå§‹åŒ–ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> global_variable = <span class="number">10</span>; <span class="comment">// å˜é‡ global_variable çš„å®šä¹‰</span></span><br></pre></td></tr></table></figure></div></li>
<li><strong>ç±»çš„å®šä¹‰ (Class Definition):</strong> æä¾›äº†ç±»ç±»å‹çš„å®Œæ•´ç»“æ„ã€æˆå‘˜å˜é‡åˆ—è¡¨ã€æˆå‘˜å‡½æ•°ç­¾åå’Œè®¿é—®æƒé™ç­‰ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span> <span class="comment">// MyClass ç±»çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print_data</span><span class="params">()</span></span>; <span class="comment">// æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>ç±»çš„æˆå‘˜å‡½æ•°å®šä¹‰ (Member Function Definition):</strong> æä¾›äº†æˆå‘˜å‡½æ•°çš„å…·ä½“å®ç°ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MyClass::print_data</span><span class="params">()</span> </span>&#123; <span class="comment">// MyClass::print_data æˆå‘˜å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line">    <span class="comment">// ... å®ç°ä»£ç  ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>ç±»çš„é™æ€æ•°æ®æˆå‘˜å®šä¹‰ (Static Member Definition):</strong> ä¸ºé™æ€æˆå‘˜å˜é‡åˆ†é…å­˜å‚¨ç©ºé—´ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> MyClass::static_member = <span class="number">0</span>; <span class="comment">// é™æ€æˆå‘˜ static_member çš„å®šä¹‰</span></span><br></pre></td></tr></table></figure></div>
</li>
</ul>
<h3 id="1-3-ç¿»è¯‘å•å…ƒ-Translation-Unit"><a href="#1-3-ç¿»è¯‘å•å…ƒ-Translation-Unit" class="headerlink" title="1.3 ç¿»è¯‘å•å…ƒ (Translation Unit)"></a>1.3 ç¿»è¯‘å•å…ƒ (Translation Unit)</h3><p><strong>å«ä¹‰ï¼š</strong> ç¿»è¯‘å•å…ƒæ˜¯æŒ‡åœ¨é¢„å¤„ç†å™¨å¤„ç†å®Œæ‰€æœ‰çš„ <code>#include</code> æŒ‡ä»¤ã€å®å±•å¼€ç­‰æ“ä½œåï¼Œæœ€ç»ˆäº¤ç»™ç¼–è¯‘å™¨ç¼–è¯‘çš„å•ä¸ª <code>.cpp</code> æ–‡ä»¶åŠå…¶æ‰€åŒ…å«çš„æ‰€æœ‰å¤´æ–‡ä»¶çš„é›†åˆã€‚æ¯ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶åœ¨ç¼–è¯‘æ—¶éƒ½ä¼šè¢«è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç¿»è¯‘å•å…ƒã€‚<br><strong>é‡è¦æ€§ï¼š</strong> ODR è§„å®šä¸­çš„â€œåŒä¸€ä¸ªç¿»è¯‘å•å…ƒâ€å’Œâ€œä¸åŒç¿»è¯‘å•å…ƒâ€æ˜¯ç†è§£ C++ ç¼–è¯‘å’Œé“¾æ¥è¿‡ç¨‹çš„å…³é”®ã€‚</p>
<h2 id="2-ç±»ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æœ€ä½³å®è·µ"><a href="#2-ç±»ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æœ€ä½³å®è·µ" class="headerlink" title="2. ç±»ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æœ€ä½³å®è·µ"></a>2. ç±»ã€å¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æœ€ä½³å®è·µ</h2><p>ç†è§£äº†å£°æ˜ã€å®šä¹‰å’Œç¿»è¯‘å•å…ƒåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®ç«‹ C++ é¡¹ç›®ä¸­ç»„ç»‡ä»£ç çš„æœ€ä½³å®è·µï¼š</p>
<ul>
<li><p><strong>å¤´æ–‡ä»¶ (<code>.h</code> æˆ– <code>.hpp</code>) çš„èŒè´£ï¼š</strong></p>
<ul>
<li><strong>æ”¾ç½®ç±»çš„å®šä¹‰ (<code>class MyClass { ... };</code>)ï¼š</strong> è¿™æ˜¯æœ€é‡è¦çš„ã€‚å› ä¸ºä»»ä½•éœ€è¦ä½¿ç”¨è¯¥ç±»çš„ <code>.cpp</code> æ–‡ä»¶éƒ½å¿…é¡»çŸ¥é“å…¶å®Œæ•´çš„ç»“æ„å’Œæ¥å£ã€‚å¤´æ–‡ä»¶ä¼šè¢«å¤šä¸ª <code>.cpp</code> æ–‡ä»¶åŒ…å«ï¼Œå¯¼è‡´ç±»çš„å®šä¹‰åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­â€œé€»è¾‘åœ°â€å‡ºç°ï¼Œè¿™æ˜¯ ODR å…è®¸çš„ç‰¹ä¾‹ï¼ˆåªè¦å®šä¹‰å®Œå…¨ç›¸åŒï¼‰ã€‚</li>
<li><strong>æ”¾ç½®æˆå‘˜å‡½æ•°å£°æ˜ï¼š</strong> åœ¨ç±»å®šä¹‰å†…éƒ¨ï¼Œæˆå‘˜å‡½æ•°çš„åŸå‹ã€‚</li>
<li><strong>æ”¾ç½®ç±»çš„é™æ€æ•°æ®æˆå‘˜å£°æ˜ï¼š</strong> åœ¨ç±»å®šä¹‰å†…éƒ¨ã€‚</li>
<li><strong>æ”¾ç½®å…¨å±€å‡½æ•°å£°æ˜ï¼š</strong> å‡½æ•°åŸå‹ã€‚</li>
<li><strong>æ”¾ç½® <code>extern</code> å…³é”®å­—ä¿®é¥°çš„å…¨å±€å˜é‡å£°æ˜ã€‚</strong></li>
<li><strong>æ”¾ç½® <code>inline</code> å‡½æ•°çš„å®šä¹‰å’Œæ¨¡æ¿çš„å®šä¹‰ï¼š</strong> è¿™äº›æ˜¯ ODR çš„ç‰¹æ®Šè§„åˆ™ï¼Œå®ƒä»¬å¿…é¡»åœ¨æ¯ä¸ªä½¿ç”¨å®ƒä»¬çš„ç¿»è¯‘å•å…ƒä¸­éƒ½å¯è§å…¶å®Œæ•´å®šä¹‰ã€‚</li>
<li><strong>æ”¾ç½® <code>typedef</code> æˆ– <code>using</code> åˆ«åå®šä¹‰ã€‚</strong></li>
<li><strong>å¿…é¡»ä½¿ç”¨å¤´æ–‡ä»¶ä¿æŠ¤ (Header Guards)ï¼š</strong> <code>#ifndef / #define / #endif</code> æˆ– <code>#pragma once</code>ï¼Œä»¥é˜²æ­¢åŒä¸€ä¸ªå¤´æ–‡ä»¶åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è¢«å¤šæ¬¡åŒ…å«ï¼Œä»è€Œé¿å…ç±»å®šä¹‰ã€<code>inline</code> å‡½æ•°å®šä¹‰ã€<code>typedef</code> ç­‰åœ¨åŒä¸€ç¿»è¯‘å•å…ƒå†…é‡å¤å¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</li>
</ul>
</li>
<li><p><strong>æºæ–‡ä»¶ (<code>.cpp</code>) çš„èŒè´£ï¼š</strong></p>
<ul>
<li><strong>æ”¾ç½®ç±»çš„é <code>inline</code> æˆå‘˜å‡½æ•°çš„å®šä¹‰ (å®ç°)ï¼š</strong> è¿™æ˜¯æˆå‘˜å‡½æ•°çš„å®é™…ä»£ç é€»è¾‘ã€‚æ ¹æ® ODRï¼Œä¸€ä¸ªé <code>inline</code> å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ï¼Œå› æ­¤å®ƒä»¬å¿…é¡»æ”¾åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­ï¼Œåªè¢«ç¼–è¯‘ä¸€æ¬¡ã€‚</li>
<li><strong>æ”¾ç½®ç±»çš„é™æ€æ•°æ®æˆå‘˜çš„å®šä¹‰ (åˆå§‹åŒ–)ï¼š</strong> ä¸ºé™æ€æˆå‘˜åˆ†é…å­˜å‚¨ç©ºé—´å¹¶è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
<li><strong>æ”¾ç½®å…¨å±€å‡½æ•°çš„å®šä¹‰ (å®ç°)ã€‚</strong></li>
<li><strong>æ”¾ç½®å…¨å±€å˜é‡çš„å®šä¹‰ (åˆå§‹åŒ–)ã€‚</strong></li>
<li><strong>åŒ…å«å…¶å¯¹åº”çš„å¤´æ–‡ä»¶ï¼š</strong> é€šå¸¸ï¼Œ<code>MyClass.cpp</code> ä¼š <code>#include &quot;MyClass.h&quot;</code>ã€‚</li>
</ul>
</li>
</ul>
<h2 id="3-è¯¦ç»†ä»£ç ç¤ºä¾‹ï¼šGeom-Cylinder"><a href="#3-è¯¦ç»†ä»£ç ç¤ºä¾‹ï¼šGeom-Cylinder" class="headerlink" title="3. è¯¦ç»†ä»£ç ç¤ºä¾‹ï¼šGeom::Cylinder"></a>3. è¯¦ç»†ä»£ç ç¤ºä¾‹ï¼š<code>Geom::Cylinder</code></h2><p>è®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª <code>Cylinder</code> (åœ†æŸ±ä½“) ç±»æ¥å±•ç¤ºä¸Šè¿°æ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚</p>
<p><strong>æ–‡ä»¶ç»“æ„ï¼š</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ src&#x2F;</span><br><span class="line">â”‚   â”œâ”€â”€ GeomCylinder.h</span><br><span class="line">â”‚   â”œâ”€â”€ GeomCylinder.cpp</span><br><span class="line">â”‚   â””â”€â”€ main.cpp</span><br><span class="line">â””â”€â”€ CMakeLists.txt (å¯é€‰ï¼Œç”¨äºé¡¹ç›®æ„å»º)</span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>src/GeomCylinder.h</code> (å¤´æ–‡ä»¶ï¼šæ”¾ç½®ç±»å®šä¹‰å’Œæˆå‘˜å‡½æ•°å£°æ˜)</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GEOM_CYLINDER_H <span class="comment">// å¤´æ–‡ä»¶ä¿æŠ¤å¼€å§‹</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GEOM_CYLINDER_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt; // åŒ…å«äº†ç”¨äºè¾“å…¥è¾“å‡ºçš„å¤´æ–‡ä»¶ï¼Œå¦‚æœç±»å†…éƒ¨æˆå‘˜å‡½æ•°éœ€è¦ç”¨åˆ°ï¼Œå¯ä»¥åœ¨è¿™é‡ŒåŒ…å«ã€‚</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Geom &#123; <span class="comment">// å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œé¿å…åç§°å†²çª</span></span><br><span class="line">    <span class="comment">// è¿™æ˜¯ä¸€ä¸ªç±»çš„ã€å®šä¹‰ã€‘ (Class Definition)</span></span><br><span class="line">    <span class="comment">// å®ƒå®šä¹‰äº† Cylinder è¿™ä¸ªç±»å‹é•¿ä»€ä¹ˆæ ·å­ï¼Œæœ‰å“ªäº›æˆå‘˜ï¼Œä»¥åŠæˆå‘˜å‡½æ•°çš„å£°æ˜</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span>: <span class="comment">// ç§æœ‰æˆå‘˜ï¼Œå¤–éƒ¨ä¸å¯ç›´æ¥è®¿é—®</span></span><br><span class="line">        <span class="keyword">double</span> m_base_radius; <span class="comment">// åœ†æŸ±ä½“åº•é¢åŠå¾„</span></span><br><span class="line">        <span class="keyword">double</span> m_height;      <span class="comment">// åœ†æŸ±ä½“é«˜åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>: <span class="comment">// å…¬æœ‰æˆå‘˜ï¼Œå¤–éƒ¨å¯è®¿é—®</span></span><br><span class="line">        <span class="comment">// æ„é€ å‡½æ•°å£°æ˜ (å¸¦æœ‰é»˜è®¤å‚æ•°)</span></span><br><span class="line">        Cylinder(<span class="keyword">double</span> radius = <span class="number">1.0</span>, <span class="keyword">double</span> height = <span class="number">1.0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–ä½“ç§¯çš„æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">        <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span> <span class="keyword">const</span></span>; <span class="comment">// const æˆå‘˜å‡½æ•°è¡¨ç¤ºä¸ä¿®æ”¹å¯¹è±¡çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–è¡¨é¢ç§¯çš„æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">        <span class="function"><span class="keyword">double</span> <span class="title">surface_area</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®åŠå¾„çš„æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set_radius</span><span class="params">(<span class="keyword">double</span> radius)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®é«˜åº¦çš„æˆå‘˜å‡½æ•°å£°æ˜</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set_height</span><span class="params">(<span class="keyword">double</span> height)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å†…è”æˆå‘˜å‡½æ•°å®šä¹‰ç¤ºä¾‹ (ç›´æ¥åœ¨ç±»å®šä¹‰å†…å®ç°ï¼Œé€šå¸¸ç”¨äºç®€çŸ­å‡½æ•°)</span></span><br><span class="line">        <span class="function"><span class="keyword">double</span> <span class="title">get_radius</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_base_radius; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">double</span> <span class="title">get_height</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_height; &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125; <span class="comment">// namespace Geom</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// GEOM_CYLINDER_H // å¤´æ–‡ä»¶ä¿æŠ¤ç»“æŸ</span></span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>src/GeomCylinder.cpp</code> (æºæ–‡ä»¶ï¼šæ”¾ç½®æˆå‘˜å‡½æ•°çš„å®šä¹‰/å®ç°)</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GeomCylinder.h"</span> <span class="comment">// åŒ…å«å¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨çŸ¥é“ Cylinder ç±»çš„ç»“æ„</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;          // åŒ…å«æ•°å­¦å‡½æ•°ï¼Œå¦‚ M_PI å’Œ pow</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®å®šä¹‰ PI (æˆ–è€…ä½¿ç”¨ C++17 çš„ M_PIï¼Œä½†éœ€è¦å®šä¹‰ _USE_MATH_DEFINES)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> M_PI <span class="comment">// æ£€æŸ¥ M_PI æ˜¯å¦å·²è¢«å®šä¹‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æ‰‹åŠ¨å®šä¹‰</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M_PI 3.14159265358979323846</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Geom &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°çš„ã€å®šä¹‰ã€‘ (Member Function Definition)</span></span><br><span class="line">    Cylinder::Cylinder(<span class="keyword">double</span> radius, <span class="keyword">double</span> height)</span><br><span class="line">        : m_base_radius(radius), m_height(height) &#123; <span class="comment">// æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨</span></span><br><span class="line">        <span class="comment">// æ„é€ å‡½æ•°ä½“å¯ä»¥ç•™ç©ºï¼Œæˆ–è€…è¿›è¡Œé¢å¤–çš„éªŒè¯/åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">if</span> (m_base_radius &lt; <span class="number">0</span>) m_base_radius = <span class="number">0</span>; <span class="comment">// ç¡®ä¿åŠå¾„éè´Ÿ</span></span><br><span class="line">        <span class="keyword">if</span> (m_height &lt; <span class="number">0</span>) m_height = <span class="number">0</span>;           <span class="comment">// ç¡®ä¿é«˜åº¦éè´Ÿ</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder created with radius "</span> &lt;&lt; m_base_radius</span><br><span class="line">                  &lt;&lt; <span class="string">" and height "</span> &lt;&lt; m_height &lt;&lt; <span class="string">"."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// volume æˆå‘˜å‡½æ•°çš„ã€å®šä¹‰ã€‘</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">Cylinder::volume</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> M_PI * m_base_radius * m_base_radius * m_height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// surface_area æˆå‘˜å‡½æ•°çš„ã€å®šä¹‰ã€‘</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">Cylinder::surface_area</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¾§é¢ç§¯: 2 * PI * r * h</span></span><br><span class="line">        <span class="comment">// åº•é¢ç§¯ (ä¸¤ä¸ª): 2 * PI * r^2</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * M_PI * m_base_radius * m_height + <span class="number">2</span> * M_PI * m_base_radius * m_base_radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set_radius æˆå‘˜å‡½æ•°çš„ã€å®šä¹‰ã€‘</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Cylinder::set_radius</span><span class="params">(<span class="keyword">double</span> radius)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (radius &gt;= <span class="number">0</span>) &#123; <span class="comment">// ç¡®ä¿åŠå¾„éè´Ÿ</span></span><br><span class="line">            m_base_radius = radius;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"Warning: Radius cannot be negative. Setting to 0."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">            m_base_radius = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set_height æˆå‘˜å‡½æ•°çš„ã€å®šä¹‰ã€‘</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Cylinder::set_height</span><span class="params">(<span class="keyword">double</span> height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (height &gt;= <span class="number">0</span>) &#123; <span class="comment">// ç¡®ä¿é«˜åº¦éè´Ÿ</span></span><br><span class="line">            m_height = height;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"Warning: Height cannot be negative. Setting to 0."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">            m_height = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// namespace Geom</span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>src/main.cpp</code> (ä¸»ç¨‹åºæ–‡ä»¶ï¼šä½¿ç”¨ <code>Geom::Cylinder</code> ç±»)</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GeomCylinder.h"</span> <span class="comment">// åŒ…å«ç±»çš„å®šä¹‰ï¼Œä»¥ä¾¿ä½¿ç”¨ Geom::Cylinder</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ª Cylinder å¯¹è±¡</span></span><br><span class="line">    <span class="function">Geom::Cylinder <span class="title">cylinder1</span><span class="params">(<span class="number">5.0</span>, <span class="number">10.0</span>)</span></span>; <span class="comment">// è°ƒç”¨æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¿é—®å…¬æœ‰æˆå‘˜å‡½æ•°</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 Radius: "</span> &lt;&lt; cylinder1.get_radius() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 Height: "</span> &lt;&lt; cylinder1.get_height() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 Volume: "</span> &lt;&lt; cylinder1.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 Surface Area: "</span> &lt;&lt; cylinder1.surface_area() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n-------------------\n"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿®æ”¹ Cylinder å±æ€§</span></span><br><span class="line">    cylinder1.set_radius(<span class="number">7.0</span>);</span><br><span class="line">    cylinder1.set_height(<span class="number">12.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 New Radius: "</span> &lt;&lt; cylinder1.get_radius() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 New Height: "</span> &lt;&lt; cylinder1.get_height() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 New Volume: "</span> &lt;&lt; cylinder1.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 New Surface Area: "</span> &lt;&lt; cylinder1.surface_area() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n-------------------\n"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å‚æ•°çš„ Cylinder å¯¹è±¡</span></span><br><span class="line">    Geom::Cylinder cylinder2;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 2 (default) Volume: "</span> &lt;&lt; cylinder2.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong>ç¼–è¯‘æŒ‡ä»¤ (ä½¿ç”¨ g++)ï¼š</strong><br><code>g++ src/main.cpp src/GeomCylinder.cpp -o cylinder_app</code><br>æˆ–è€…ä½¿ç”¨ CMake (æ›´æ¨èç”¨äºå¤§å‹é¡¹ç›®)ï¼š<br><strong><code>CMakeLists.txt</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cmake</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.10</span>)</span><br><span class="line"><span class="keyword">project</span>(CylinderApp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(cylinder_app src/main.cpp src/GeomCylinder.cpp)</span><br></pre></td></tr></table></figure></div><br>ç„¶åæ„å»ºï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">./cylinder_app</span><br></pre></td></tr></table></figure></div></p>
<h2 id="4-QA-é—ªå¡-Flash-Cards"><a href="#4-QA-é—ªå¡-Flash-Cards" class="headerlink" title="4. QA é—ªå¡ (Flash Cards)"></a>4. QA é—ªå¡ (Flash Cards)</h2><ol>
<li><p><strong>Q:</strong> <code>class MyClass { /* ... */ };</code> åœ¨ C++ ä¸­æ˜¯å£°æ˜è¿˜æ˜¯å®šä¹‰ï¼Ÿ<br><strong>A:</strong> å®ƒæ˜¯ <code>MyClass</code> <strong>ç±»ç±»å‹</strong>çš„<strong>å®šä¹‰</strong>ã€‚å®ƒæä¾›äº†ç±»çš„å®Œæ•´ç»“æ„å’Œæ¥å£ï¼Œå°½ç®¡æ²¡æœ‰æä¾›æˆå‘˜å‡½æ•°çš„å®ç°ã€‚</p>
</li>
<li><p><strong>Q:</strong> <code>void MyClass::doSomething();</code> åœ¨ C++ ä¸­æ˜¯å£°æ˜è¿˜æ˜¯å®šä¹‰ï¼Ÿ<br><strong>A:</strong> è¿™æ˜¯ <code>MyClass</code> æˆå‘˜å‡½æ•° <code>doSomething</code> çš„<strong>å£°æ˜</strong>ï¼ˆåŸå‹ï¼‰ã€‚</p>
</li>
<li><p><strong>Q:</strong> <code>void MyClass::doSomething() { /* ... */ }</code> åœ¨ C++ ä¸­æ˜¯å£°æ˜è¿˜æ˜¯å®šä¹‰ï¼Ÿ<br><strong>A:</strong> è¿™æ˜¯ <code>MyClass</code> æˆå‘˜å‡½æ•° <code>doSomething</code> çš„<strong>å®šä¹‰</strong>ï¼ˆå®ç°ï¼‰ã€‚</p>
</li>
<li><p><strong>Q:</strong> ä»€ä¹ˆæ˜¯ C++ çš„ä¸€æ¬¡å®šä¹‰è§„åˆ™ (ODR)ï¼Ÿ<br><strong>A:</strong> ODR è§„å®šåœ¨æ•´ä¸ªç¨‹åºä¸­ï¼Œæ¯ä¸ªå®ä½“ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ã€æšä¸¾ç­‰ï¼‰é€šå¸¸å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ªå®šä¹‰ã€‚</p>
</li>
<li><p><strong>Q:</strong> ä¸ºä»€ä¹ˆç±»çš„å®šä¹‰ (<code>class MyClass { ... };</code>) å¯ä»¥åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å‡ºç°ï¼Œè€Œä¸ä¼šè¿å ODRï¼Ÿ<br><strong>A:</strong> è¿™æ˜¯ ODR å¯¹ç±»å®šä¹‰çš„ä¸€ä¸ªç‰¹æ®Šæ”¾å®½ã€‚åªè¦è¿™äº›å®šä¹‰åœ¨æ‰€æœ‰ç¿»è¯‘å•å…ƒä¸­<strong>é€å­—å®Œå…¨ç›¸åŒ</strong>ï¼Œç¼–è¯‘å™¨å’Œé“¾æ¥å™¨å°±èƒ½æ­£ç¡®å¤„ç†ã€‚å®ƒç¡®ä¿äº†æ¯ä¸ªç¿»è¯‘å•å…ƒåœ¨ç¼–è¯‘æ—¶éƒ½èƒ½çœ‹åˆ°å®Œæ•´çš„ç±»è“å›¾ã€‚</p>
</li>
<li><p><strong>Q:</strong> ä¸ºä»€ä¹ˆå¤´æ–‡ä»¶éœ€è¦å¤´æ–‡ä»¶ä¿æŠ¤ (<code>#ifndef</code> / <code>#define</code> / <code>#endif</code>)ï¼Ÿ<br><strong>A:</strong> ä¸ºäº†é˜²æ­¢åŒä¸€ä¸ªå¤´æ–‡ä»¶åœ¨åŒä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è¢«å¤šæ¬¡åŒ…å«ã€‚è¿™å¯ä»¥é¿å…ç±»å®šä¹‰ã€<code>inline</code> å‡½æ•°å®šä¹‰ã€<code>typedef</code> ç­‰åœ¨åŒä¸€ç¿»è¯‘å•å…ƒå†…é‡å¤å¯¼è‡´çš„ç¼–è¯‘é”™è¯¯ã€‚</p>
</li>
<li><p><strong>Q:</strong> ä¸€ä¸ªé <code>inline</code> æˆå‘˜å‡½æ•°çš„å®šä¹‰ï¼ˆå®ç°ï¼‰å¯ä»¥åœ¨ä¸åŒçš„ <code>.cpp</code> æ–‡ä»¶ä¸­å‡ºç°ä¸åŒçš„ç‰ˆæœ¬å—ï¼Ÿ<br><strong>A:</strong> <strong>ç»å¯¹ä¸è¡Œï¼</strong> è¿™ä¼šç›´æ¥è¿å ODRï¼Œå¯¼è‡´é“¾æ¥å™¨æŠ¥é”™ï¼ˆ<code>multiple definition</code>ï¼‰æˆ–æœªå®šä¹‰è¡Œä¸ºã€‚</p>
</li>
</ol>
<h2 id="5-å¸¸è§è¯¯è§£ä¸é”™è¯¯"><a href="#5-å¸¸è§è¯¯è§£ä¸é”™è¯¯" class="headerlink" title="5. å¸¸è§è¯¯è§£ä¸é”™è¯¯"></a>5. å¸¸è§è¯¯è§£ä¸é”™è¯¯</h2><ol>
<li><p><strong>è¯¯è§£ï¼šæŠŠâ€œç±»å®šä¹‰â€ä¸â€œæˆå‘˜å‡½æ•°å®šä¹‰â€æ··ä¸ºä¸€è°ˆã€‚</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> è®¤ä¸º <code>class MyClass { /* ... */ };</code> æ˜¯å£°æ˜ï¼Œè€ŒæŠŠæ‰€æœ‰å®šä¹‰éƒ½æ”¾åœ¨ <code>.cpp</code>ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> <code>class MyClass { /* ... */ };</code> æ˜¯<strong>ç±»ç±»å‹æœ¬èº«çš„å®šä¹‰</strong>ï¼Œå®ƒå¿…é¡»æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚è€Œå…¶<strong>æˆå‘˜å‡½æ•°çš„å…·ä½“å®ç°ï¼ˆå®šä¹‰ï¼‰</strong>åˆ™é€šå¸¸æ”¾åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­ï¼ˆé™¤äº† <code>inline</code> å‡½æ•°ï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£ï¼šè®¤ä¸º <code>header guard</code> åªæ˜¯ä¸ºäº†ç¾è§‚ï¼Œæˆ–åªå¯¹å®æœ‰æ•ˆã€‚</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> ä¸åŠ  <code>header guard</code>ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> <code>header guard</code> å¯¹äºé˜²æ­¢ç±»å®šä¹‰ã€<code>inline</code> å‡½æ•°å®šä¹‰ã€<code>typedef</code>ã€<code>enum class</code> å®šä¹‰ç­‰åœ¨åŒä¸€ç¿»è¯‘å•å…ƒä¸­é‡å¤åŒ…å«è‡³å…³é‡è¦ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£ï¼šå°è¯•åœ¨å¤šä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­å®šä¹‰åŒä¸€ä¸ªé <code>inline</code> å‡½æ•°ã€‚</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> åœ¨ <code>file1.cpp</code> å’Œ <code>file2.cpp</code> ä¸­éƒ½å†™ <code>void MyClass::doSomething() { /* ... */ }</code>ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> è¿™æ˜¯ä¸¥é‡çš„ ODR è¿è§„ã€‚ä¸€ä¸ªé <code>inline</code> å‡½æ•°çš„å®šä¹‰åœ¨æ•´ä¸ªç¨‹åºä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚å¦‚æœéœ€è¦ä¸åŒçš„è¡Œä¸ºï¼Œè¯·ä½¿ç”¨å¤šæ€ã€ç­–ç•¥æ¨¡å¼ç­‰ C++ ç‰¹æ€§ï¼Œè€Œä¸æ˜¯é‡å¤å®šä¹‰ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£ï¼šåœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰é <code>inline</code> çš„å…¨å±€å˜é‡æˆ–æ™®é€šå‡½æ•°ã€‚</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> åœ¨ <code>MyHeader.h</code> ä¸­å†™ <code>int global_counter = 0;</code> æˆ– <code>void utility_func() { /* ... */ }</code>ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> å¦‚æœè¿™ä¸ªå¤´æ–‡ä»¶è¢«å¤šä¸ª <code>.cpp</code> æ–‡ä»¶åŒ…å«ï¼Œæ¯ä¸ª <code>.cpp</code> æ–‡ä»¶éƒ½ä¼šç”Ÿæˆä¸€ä»½ <code>global_counter</code> å’Œ <code>utility_func</code> çš„å®šä¹‰ï¼Œå¯¼è‡´é“¾æ¥é”™è¯¯ï¼ˆ<code>multiple definition</code>ï¼‰ã€‚<ul>
<li>å…¨å±€å˜é‡åº”åœ¨å¤´æ–‡ä»¶ä¸­ç”¨ <code>extern</code> å£°æ˜ï¼Œåœ¨ä¸”ä»…åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li>
<li>æ™®é€šå‡½æ•°åº”åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œåœ¨ä¸”ä»…åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="6-ç¼–ç ç»ƒä¹ "><a href="#6-ç¼–ç ç»ƒä¹ " class="headerlink" title="6. ç¼–ç ç»ƒä¹ "></a>6. ç¼–ç ç»ƒä¹ </h2><p>ç°åœ¨ï¼Œè½®åˆ°æ‚¨äº†ï¼è¯·å®Œæˆä»¥ä¸‹ç¼–ç ç»ƒä¹ ã€‚æ‚¨çš„ä»»åŠ¡æ˜¯ä¿®å¤ä¸€ä¸ªå­˜åœ¨ ODR è¿è§„çš„ä»£ç åº“ã€‚</p>
<p><strong>åœºæ™¯ï¼š</strong> ä½ æ¥æ‰‹äº†ä¸€ä¸ªå°é¡¹ç›®ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç”¨äºè¡¨ç¤º 2D ç‚¹çš„ <code>Point</code> ç±»ã€‚ä½†æ˜¯ï¼Œä»£ç ç»„ç»‡å­˜åœ¨é—®é¢˜ï¼Œå¯¼è‡´æ— æ³•ç¼–è¯‘ã€‚</p>
<p><strong>æ‚¨çš„ä»»åŠ¡ï¼š</strong></p>
<ol>
<li><strong>åˆ†æé”™è¯¯ï¼š</strong> æ‰¾å‡ºå½“å‰ä»£ç å­˜åœ¨çš„é—®é¢˜ã€‚</li>
<li><strong>é‡æ„ä»£ç ï¼š</strong> éµå¾ªæˆ‘ä»¬ä»Šå¤©å­¦ä¹ çš„ C++ æœ€ä½³å®è·µï¼š<ul>
<li>å°†<strong>ç±»çš„å®šä¹‰</strong>ï¼ˆ<code>class Point { ... };</code> ç»“æ„ï¼‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚</li>
<li>å°†<strong>ç±»çš„é <code>inline</code> æˆå‘˜å‡½æ•°çš„å®šä¹‰ï¼ˆå®ç°ï¼‰</strong>æ”¾åœ¨æºæ–‡ä»¶ä¸­ã€‚</li>
<li>ç¡®ä¿å¤´æ–‡ä»¶æœ‰<strong>å¤´æ–‡ä»¶ä¿æŠ¤</strong>ã€‚</li>
<li><code>main</code> å‡½æ•°æ‰€åœ¨çš„ <code>.cpp</code> æ–‡ä»¶å’Œå®ç°æ–‡ä»¶éƒ½æ­£ç¡®åœ°åŒ…å«å¿…è¦çš„å¤´æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li><strong>å¡«å†™ä»£ç ï¼š</strong> åœ¨ä¸‹é¢çš„ <code>point.h</code> å’Œ <code>point.cpp</code> ä¸­å¡«å†™ç¼ºå¤±çš„ä»£ç ï¼Œä½¿ <code>main.cpp</code> èƒ½å¤ŸæˆåŠŸç¼–è¯‘å¹¶è¿è¡Œã€‚</li>
</ol>
<hr>
<p><strong>å½“å‰æ–‡ä»¶ç»“æ„ (å­˜åœ¨é—®é¢˜):</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ src&#x2F;</span><br><span class="line">â”‚   â”œâ”€â”€ point.h</span><br><span class="line">â”‚   â”œâ”€â”€ point.cpp</span><br><span class="line">â”‚   â””â”€â”€ main.cpp</span><br></pre></td></tr></table></figure></div>
<p><strong><code>src/point.h</code></strong> (è¯·è¡¥å……å®Œæ•´)<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span> æ·»åŠ å¤´æ–‡ä»¶ä¿æŠ¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œå®šä¹‰ Point ç±»ã€‚</span></span><br><span class="line"><span class="comment">// å®ƒåº”è¯¥æœ‰ç§æœ‰çš„ x å’Œ y (int ç±»å‹) æˆå‘˜å˜é‡ã€‚</span></span><br><span class="line"><span class="comment">// å®ƒåº”è¯¥æœ‰ä¸€ä¸ªæ„é€ å‡½æ•° Point(int x_val, int y_val)ã€‚</span></span><br><span class="line"><span class="comment">// å®ƒåº”è¯¥æœ‰ä¸€ä¸ªå…¬æœ‰çš„æˆå‘˜å‡½æ•° void print() const;</span></span><br><span class="line"><span class="comment">// å®ƒåº”è¯¥æœ‰ä¸€ä¸ªå…¬æœ‰çš„æˆå‘˜å‡½æ•° int get_x() const;</span></span><br><span class="line"><span class="comment">// å®ƒåº”è¯¥æœ‰ä¸€ä¸ªå…¬æœ‰çš„æˆå‘˜å‡½æ•° int get_y() const;</span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>src/point.cpp</code></strong> (è¯·è¡¥å……å®Œæ•´)<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åŒ…å«å¿…è¦çš„å¤´æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œå®ç° Point ç±»çš„æ„é€ å‡½æ•°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œå®ç° Point ç±»çš„ print() æˆå‘˜å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">// print() å‡½æ•°åº”è¯¥æ‰“å°ç‚¹çš„åæ ‡ï¼Œä¾‹å¦‚ "Point: (x, y)"ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œå®ç° Point ç±»çš„ get_x() æˆå‘˜å‡½æ•°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œå®ç° Point ç±»çš„ get_y() æˆå‘˜å‡½æ•°ã€‚</span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>src/main.cpp</code></strong> (æ— éœ€ä¿®æ”¹)<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"point.h"</span> <span class="comment">// åŒ…å« Point ç±»çš„å®šä¹‰</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Point <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>; <span class="comment">// åˆ›å»ºä¸€ä¸ª Point å¯¹è±¡</span></span><br><span class="line">    p1.print();       <span class="comment">// æ‰“å°ç‚¹çš„ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"p1.x: "</span> &lt;&lt; p1.get_x() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"p1.y: "</span> &lt;&lt; p1.get_y() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Point <span class="title">p2</span><span class="params">(<span class="number">5</span>, <span class="number">7</span>)</span></span>;</span><br><span class="line">    p2.print();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p>è¯·åœ¨æ‚¨çš„å›å¤ä¸­æä¾›æ‚¨å¡«å……åçš„ <code>point.h</code> å’Œ <code>point.cpp</code> ä»£ç ã€‚</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cpp/">Cpp    </a><a class="post-meta__tags" href="/tags/Coding/">Coding    </a><a class="post-meta__tags" href="/tags/Development/">Development    </a><a class="post-meta__tags" href="/tags/Developer/">Developer    </a><a class="post-meta__tags" href="/tags/Definition/">Definition    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2025/06/08/30-resources/coding/python/Pandas_Basic_Command_Quick_Check_Table/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202104250.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>Pandas_Basic_Command_Quick_Check_Table</span></div></a></div><div class="next-post pull_right"><a href="/2025/06/08/30-resources/coding/python/Pandas_10_sets_of_exercises/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202104250.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>Pandas_10_sets_of_exercises</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/256 - cpp decltype(auto)/" title="256 - cpp decltype(auto)"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">256 - cpp decltype(auto)</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•/" title="277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/276 - Class across multiple files/" title="276 - Class across multiple files"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">276 - Class across multiple files</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/322 - Different Type Members/" title="322 - Different Type Members"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">322 - Different Type Members</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/328 - cppå‘½åç©ºé—´/" title="328 - cppå‘½åç©ºé—´"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">328 - cppå‘½åç©ºé—´</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/330 - cpp é»˜è®¤å…¨å±€å‘½åç©ºé—´ä¸ä½œç”¨åŸŸè¿ç®—ç¬¦/" title="330 - cpp é»˜è®¤å…¨å±€å‘½åç©ºé—´ä¸ä½œç”¨åŸŸè¿ç®—ç¬¦"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">330 - cpp é»˜è®¤å…¨å±€å‘½åç©ºé—´ä¸ä½œç”¨åŸŸè¿ç®—ç¬¦</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'xvMxbws16Erd8WUfqxkvHmb5-gzGzoHsz',
  appKey:'4U0Vo7NQIUL0eJzHdkPzdCDr',
  placeholder:'ä¸è¯´è¯çš„äººä¼šç–¯æ‰å—?',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By supersheepbear</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="external nofollow noopener noreferrer"><span>Butterfly</span></a></div><div class="footer_custom_text">å¤–å‘å­¤ç‹¬è€…æ‚£è€…</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="canvas_nest" color="255,240,245" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>