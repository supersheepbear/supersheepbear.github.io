<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>341 - Linkage Cpp | Bear's dream</title><meta name="description" content="341 - Linkage Cpp"><meta name="keywords" content="Cpp,Coding,Learning,Function,Language"><meta name="author" content="supersheepbear"><meta name="copyright" content="supersheepbear"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="p43hXBn3_dLvbyxUzx0eo5eYmj9OVYOV52pdrhBa2sw"><meta name="baidu-site-verification" content="EXLlfLv2pV"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="341 - Linkage Cpp"><meta name="twitter:description" content="341 - Linkage Cpp"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta property="og:type" content="article"><meta property="og:title" content="341 - Linkage Cpp"><meta property="og:url" content="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/341%20-%20Linkage%20Cpp/"><meta property="og:site_name" content="Bear's dream"><meta property="og:description" content="341 - Linkage Cpp"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/341%20-%20Linkage%20Cpp/"><link rel="prev" title="diff between constexpr and define" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/notes/diff%20between%20constexpr%20and%20define/"><link rel="next" title="cpp å…¨å±€å˜é‡å’Œå¸¸é‡" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/notes/cpp%20%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F/"><link rel="stylesheet" href="hfttps://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bear's dream" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Bear's dream</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200520153141.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">178</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">160</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">23</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#341-Linkage-Cpp"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">341 - Linkage Cpp</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#C-åå­—çš„â€œå¯è§åº¦â€ï¼šæ·±å…¥ç†è§£é“¾æ¥å±æ€§ï¼ˆLinkageï¼‰"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">C++ åå­—çš„â€œå¯è§åº¦â€ï¼šæ·±å…¥ç†è§£é“¾æ¥å±æ€§ï¼ˆLinkageï¼‰</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-ä»€ä¹ˆæ˜¯é“¾æ¥å±æ€§ï¼Ÿ"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">1. ä»€ä¹ˆæ˜¯é“¾æ¥å±æ€§ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-æ— é“¾æ¥ï¼ˆNo-Linkageï¼‰"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">2. æ— é“¾æ¥ï¼ˆNo Linkageï¼‰</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-å†…éƒ¨é“¾æ¥ï¼ˆInternal-Linkageï¼‰"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">3. å†…éƒ¨é“¾æ¥ï¼ˆInternal Linkageï¼‰</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-å¤–éƒ¨é“¾æ¥ï¼ˆExternal-Linkageï¼‰"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">4. å¤–éƒ¨é“¾æ¥ï¼ˆExternal Linkageï¼‰</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-QA-é—ªå¡-QA-Flash-Cards"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">5. QA é—ªå¡ (QA Flash Cards)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#6-å¸¸è§è¯¯è§£ä¸é”™è¯¯"><span class="toc_mobile_items-number">1.9.</span> <span class="toc_mobile_items-text">6. å¸¸è§è¯¯è§£ä¸é”™è¯¯</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#6-ç¼–ç¨‹ç»ƒä¹ ï¼šç†è§£é“¾æ¥å±æ€§"><span class="toc_mobile_items-number">1.10.</span> <span class="toc_mobile_items-text">6. ç¼–ç¨‹ç»ƒä¹ ï¼šç†è§£é“¾æ¥å±æ€§</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-1"><span class="toc_mobile_items-number">1.11.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-1"><span class="toc_mobile_items-number">1.12.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å…³äºå…±äº«-const-å€¼ï¼ˆå¸¸é‡ï¼‰çš„æœ€ä½³å®è·µ"><span class="toc_mobile_items-number">1.13.</span> <span class="toc_mobile_items-text">å…³äºå…±äº« const å€¼ï¼ˆå¸¸é‡ï¼‰çš„æœ€ä½³å®è·µ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ"><span class="toc_mobile_items-number">1.14.</span> <span class="toc_mobile_items-text">è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#341-Linkage-Cpp"><span class="toc-number">1.</span> <span class="toc-text">341 - Linkage Cpp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant"><span class="toc-number">1.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-åå­—çš„â€œå¯è§åº¦â€ï¼šæ·±å…¥ç†è§£é“¾æ¥å±æ€§ï¼ˆLinkageï¼‰"><span class="toc-number">1.3.</span> <span class="toc-text">C++ åå­—çš„â€œå¯è§åº¦â€ï¼šæ·±å…¥ç†è§£é“¾æ¥å±æ€§ï¼ˆLinkageï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ä»€ä¹ˆæ˜¯é“¾æ¥å±æ€§ï¼Ÿ"><span class="toc-number">1.4.</span> <span class="toc-text">1. ä»€ä¹ˆæ˜¯é“¾æ¥å±æ€§ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-æ— é“¾æ¥ï¼ˆNo-Linkageï¼‰"><span class="toc-number">1.5.</span> <span class="toc-text">2. æ— é“¾æ¥ï¼ˆNo Linkageï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-å†…éƒ¨é“¾æ¥ï¼ˆInternal-Linkageï¼‰"><span class="toc-number">1.6.</span> <span class="toc-text">3. å†…éƒ¨é“¾æ¥ï¼ˆInternal Linkageï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-å¤–éƒ¨é“¾æ¥ï¼ˆExternal-Linkageï¼‰"><span class="toc-number">1.7.</span> <span class="toc-text">4. å¤–éƒ¨é“¾æ¥ï¼ˆExternal Linkageï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-QA-é—ªå¡-QA-Flash-Cards"><span class="toc-number">1.8.</span> <span class="toc-text">5. QA é—ªå¡ (QA Flash Cards)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-å¸¸è§è¯¯è§£ä¸é”™è¯¯"><span class="toc-number">1.9.</span> <span class="toc-text">6. å¸¸è§è¯¯è§£ä¸é”™è¯¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-ç¼–ç¨‹ç»ƒä¹ ï¼šç†è§£é“¾æ¥å±æ€§"><span class="toc-number">1.10.</span> <span class="toc-text">6. ç¼–ç¨‹ç»ƒä¹ ï¼šç†è§£é“¾æ¥å±æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-1"><span class="toc-number">1.11.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-1"><span class="toc-number">1.12.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å…³äºå…±äº«-const-å€¼ï¼ˆå¸¸é‡ï¼‰çš„æœ€ä½³å®è·µ"><span class="toc-number">1.13.</span> <span class="toc-text">å…³äºå…±äº« const å€¼ï¼ˆå¸¸é‡ï¼‰çš„æœ€ä½³å®è·µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ"><span class="toc-number">1.14.</span> <span class="toc-text">è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)"><div id="post-info"><div id="post-title"><div class="posttitle">341 - Linkage Cpp</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2025-06-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2025-06-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/">10-projects</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/">cplusplus</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/lectures/">lectures</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/2025/06/08/10-projects/cplusplus/lectures/341%20-%20Linkage%20Cpp/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2025/06/08/10-projects/cplusplus/lectures/341%20-%20Linkage%20Cpp/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="341-Linkage-Cpp"><a href="#341-Linkage-Cpp" class="headerlink" title="341 - Linkage Cpp"></a>341 - Linkage Cpp</h1><h2 id="ğŸ§‘â€ğŸ’»-User"><a href="#ğŸ§‘â€ğŸ’»-User" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>In this lecture weâ€™re going to learn about linkage and linkage is a property associated with names inyour C plus plus program.Weâ€™re going to be exploring this in the context of variable names and function names.And this property is going to control how visible the name is across translation units.Okay, so suppose we have a function here and inside our function we have a variable declared.Inside we have the age variable, the value is six.And the job of this function is to print this out.If you look at this age variable here, itâ€™s really only accessible inside this function.You canâ€™t even access it from the outside of this function here.So we say that this variable, the name for the variable here, this age here, it has no linkage.And what we mean by that is that it really isnâ€™t accessible from anywhere in the global scope of thefile where it is or even in other translation units.So it has no linkage.Thatâ€™s what we say here.If we look at another example here, we have a variable.For example, it is declared in some file.This is a constant variable and by default, in your C plus plus program, const variables are goingto have internal linkage.What we mean by that is that they can only be accessed or used in the translation unit where they weredeclared and defined.If you try and set up another variable of the same name in another translation unit, youâ€™re not goingto be picking up the name of this variable here.Youâ€™re going to be setting up a completely different variable and weâ€™re going to see an example of thisonce we hit Visual Studio code in a minute.But note that constant variables like this have internal linkage by default.And what we mean is that they can only be accessed and used from the translation unit where they weredeclared and defined.So this is another kind of linkage we can have in C plus plus.The first one is null linkage.We can also have internal linkage and it is what we just learned about in this slide here.Another kind of linkage we can have is external linkage.And a good example for this is a global variable which is not const.This is going to have external linkage by default.And what we mean by that is that this variable can be accessed and used in different translation unitsthan the one it was declared and used in.So for example, if this was declared in file one, it is possible to access and use this variable ina separate translation unit.And this is really cool and this is what we mean by external linkage functions.Also default to external linkage in C plus plus you can declare the functions in one translation unitsand use them in a separate translation unit.And we have seen that at multiple occasions.So in C plus plus, we have a lot of options for linkage.We can have no linkage.For example, if a variable is local to a function, we can have internal linkage.And what we mean by that is that this name is not going to be usable or accessible from other translationunits.We can have external linkage.And what we mean by that is that the name can be accessible and used in other translation units, separatefrom the translation units where it was declared and defined.We can also have module linkage, but we donâ€™t have enough tools to really understand this.So in this lecture weâ€™re just going to focus on the three options null linkage, internal and externallinkage.Okay, so letâ€™s recap what we just talked about here.Function.Local variables have no linkage, so they canâ€™t really be accessed even from the outside of the function.If you try to do that, youâ€™re going to get a compiler error cause const global variables have internallinkage by default, so they can only be accessed and used from the translation unit where they weredeclared and Non-const global variables have external linkage.By default they can be used in other translation units.And weâ€™re going to see a few examples of this in a minute.Functions have external linkage and they can be used from the translation units different from the onethey were declared in.Now that you have an idea about what linkage is, again, it is a property associated with names, forexample, variable names, function names, and this property is going to control how visible the nameis across different translation units in your C plus plus program.Now that we know this, weâ€™re going to head over to Visual Studio code and play with this a little more.Okay.So here we are in our working folder.The current project is linkage.Weâ€™re going to grab our template files, weâ€™re going to copy them pretty fast and put them in our folderhere.And we are going to open this little guy in Visual Studio code.This is going to give us our main.cpp file.We can clean it up a little bit.And weâ€™re going to close the sidebar here because we donâ€™t need this by now.So the first thing weâ€™re going to look at is no linkage.And the way to set up this example, weâ€™re going to set up a simple function.Weâ€™re going to say some function, and inside the function weâ€™re going to set up a variable, call itage and initialize that with a 34, for example.This could work.And what weâ€™re going to do is print this out.Weâ€™re going to print the age, but weâ€™re also going to print the address of this age variable.So weâ€™re going to say address of age.We can say that in our C plus plus program.You already know this and weâ€™re going to print the address of age here and weâ€™re going to say Stdendl.And I donâ€™t know why we have this problem here.Why do we have this squiggly lines?We donâ€™t have a pair of parentheses here.Thatâ€™s the problem.So we can make this work now.And if weâ€™re trying to compile this program, it is going to compile.But before we do that, weâ€™re going to say some function, weâ€™re going to call it, and it is goingto print what we see here.Letâ€™s do that.Weâ€™re going to build our program with GCC.And youâ€™re going to see that the world is good.Weâ€™re going to bring up a terminal and play with us a little bit.Weâ€™re going to run Rooster and weâ€™re going to see our age to be 34.And the address of this variable in memory is what you see right here.But we can separate these guys by putting a space here so that the output is better.Letâ€™s build again.To make sure this is working, we can clear and run Rooster.Now we have the edge here.And the address of this variable is here.It is ending in DBC.But what I want you to see is that the edge variable here is not accessible anywhere outside this functionhere.So, for example, if you try and come in main here and try to print the edge, for example, weâ€™regoing to say edge here.If you try and access this like this, you want to be using this variable here because it isnâ€™t reallyaccessible from the outside.If youâ€™re trying to compile this program, youâ€™re going to see a compiler error that says that edgehere is not declared or defined anywhere.So youâ€™re going to see edge was not declared in this scope, so the compiler doesnâ€™t know what it is.Even if you try and come to the top here and for example, say int H equals 33, for example, whatyou do here is not assigning a value to this edge variable.You are declaring a completely different variable in the global scope of the main function.So the variable we have inside the function and the variable we have on the outside here are different.Letâ€™s try and compile this and see if it works.Youâ€™re going to see that the world is good, but if we print the edge, weâ€™re going to see 33, whichis not what we have in our function here.Youâ€™re going to see 33.And if we print the address of this, we can do that.We can say edge here.So letâ€™s do that.Weâ€™re going to say H, weâ€™re going to put out to the edge and weâ€™re going to put out the address ofthis little guy.Weâ€™re going to say address of H and weâ€™re going to do the exact same thing we did in our function here.So if we do this, we will be printing the address of the outside variable here.It wonâ€™t be the variable inside our function.So if we do this and say Stdcout.And put a simple separator here so that we can see this fence of the terminal and go down and call somefunction.You can try and guess what weâ€™re going to see.Weâ€™re going to see the age printed out.The first one is going to be 33 here and the address is going to be the address of this variable onthe outside.And after our separator here, weâ€™re going to call the function.Weâ€™re going to print 34 and weâ€™re going to see a different address.And I am going through this trouble to really try and prove that we canâ€™t access this age variable hereoutside this function.So this guy has no linkage.It canâ€™t be accessed outside this function here.This is what we mean by saying that it has no linkage.Letâ€™s go ahead and run this program so that you can see the output so the world is good.We can clear and run Rooster.Weâ€™re going to see first weâ€™re going to see 33.The address is going to be ending in zero 20 and weâ€™re going to see 34 and the address is going to beending in DBC.So they are different variables and the function local variables have no linkage.Thatâ€™s what we mean here.You canâ€™t access them from the outside of the function.Even in the file where the function was declared and defined and you canâ€™t even access them in a separatefile.For example, if we go here and set up some other file, letâ€™s do that.Weâ€™re going to set up some other file dot cpp.If we, for example, set up some function, weâ€™re going to do void.Weâ€™re going to call this do something.If we go in and try and print the age and do something like this, for this to work, we need to includeIostream.Weâ€™re going to include that.If we do this, weâ€™re going to get a compiler error and the compiler is going to complain that it doesnâ€™tknow what age is because the age we have here canâ€™t really be accessed from anywhere other than withinthis curly braces where this variable is used here and declared.So I hope this is really clear.Letâ€™s try and compile and show you this compiler error we expect from this guy here weâ€™re going to build.Where the JCC and weâ€™re going to see that age was not declared in this scope.The error is coming from some other file dot cpp at line four, and thatâ€™s exactly here.So you canâ€™t really do this.Hopefully this drives the point home that function.Local variables have no linkage.Now that we have looked at this, letâ€™s focus on global variables.Weâ€™re going to take out this entire thing here because we donâ€™t need this anymore.Weâ€™re going to build and make sure the program is compiling correctly.You see, the world is good, so we are good.Weâ€™re going to go back in the main CPP file and weâ€™re going to set up a constant variable.We can go down here and actually remove this.Now we have made our point and we donâ€™t want this to confuse us and weâ€™re going to go down and set upa single const variable.Weâ€™re going to say const double and itâ€™s going to be called distance.You can call it whatever you want, and weâ€™re going to put in a variable maybe 45.8.Letâ€™s say this is the distance to go somewhere.Okay?So we have this variable here.If we want to use this variable in this translation unit, we can really use it.We can go down and say Stdcout, weâ€™re going to say distance and weâ€™re going to print the distance ofthis variable here.This is going to be important in a minute, and the address of this guy is going to be address of distance.We can close the left sidebar here and make sure this is saying distance.And weâ€™re going to put our new line character using Endl here.And this is going to work.If we build and run this program, weâ€™re going to run the task to build with GCC.The build is going to be good so we can clear and run Rooster.This is going to print our distance.No problem here.The problem is going to come if we want to use this variable in a separate translation unit.So, for example, if we go in our some other file and try to set up something like this, suppose wewant to access this variable from this file here, we can grab the declaration here and the definitionand use that here.For example, we can say const double distance and not put in a value here and hope that inside herewe have this value we have from the main CPP file and this is going to surprise you.Letâ€™s set up a function that is going to print this variable, but itâ€™s going to be printing what wehave in this other translation unit here.So weâ€™re going to say void and weâ€™re going to call this print distance and weâ€™re going to say stdcoutdistance from other file.I think this is going to be descriptive enough, so weâ€™re going to print the distance, but weâ€™re alsogoing to print the address of the variable here.So address of distance is going to be the address of distance, and weâ€™re going to put our new linecharacter.This is going to work.So this is a function declared in some other file or defined.Thatâ€™s what I should say.So weâ€™re going to come back in main and weâ€™re going to put in a definition for the print distance function.So weâ€™re going to say void print distance.I think it doesnâ€™t take anything.And so weâ€™re going to do this.This is going to do if we go in main and call that function, weâ€™re going to put in a separator.Okay.So letâ€™s try and think about what is going to happen if we run this program.Weâ€™re going to print the distance from the variable we have in Main, and weâ€™re going to also call theprint distance function we have in some other file and hope that itâ€™s going to access the distance variablewe have in main because we think this is a declaration for the variable we have in main.So that should bring that in.But what I want you to see is that constant variables have internal linkage by default.So we canâ€™t really access this variable from any other translation unit.If we try to do that like we do here, this is going to be a complete declaration and the definitionof another variable and this is going to initialize this variable to junk.So weâ€™re going to see that junk value printed out here and not what we have in the main function.So the first print out is going to print what we have in main.Itâ€™s going to print this value here.Itâ€™s going to print its address in memory and the print distance function.Itâ€™s going to print some junk value and itâ€™s going to print the address of that junk value.But the addresses are going to be different and the values are also going to be probably different.Thatâ€™s what we expect here.Weâ€™re going to build this with GCC and weâ€™re going to see a problem here.Weâ€™re going to see an initialized constant distance.So if you declare a constant, you also have to declare it.So we canâ€™t even do this.And.This is really good.The compiler is helpful here.So in hope to get this to work, we can try and put a pair of braces here to initialize this variableand weâ€™re going to run the test to build with GCC and youâ€™re going to see that the world is good.So if we try to clear and run Rooster, weâ€™re going to see that in Main.Weâ€™re going to have our distance here.Itâ€™s going to be living at this address.But the value in our some other file is going to be zero because we initialize that to zero and itâ€™sgoing to be a completely different variable because you canâ€™t really access a constant variable or aconstant global variable declared in another file.And we have a constant distance variable here.It has internal linkage.It can only be used from the translation unit where it was declared.This is the message here.So you canâ€™t really do what we are trying to do here.If you do this, this will be a completely separate variable.And we have proven that because we see the addresses to be different here.What we have in Main is living at this address ending in 060.What we have in some other file is living at an address ending in zero, a zero.So they are two completely different variables.We canâ€™t really access this variable from any other translation unit.It has internal linkage.This is what we mean here.Okay.So now that we know about internal linkage, weâ€™re going to learn about external linkage and weâ€™re goingto go down and set up another variable, we are going to say INT and weâ€™re going to call this item count.Why not?And weâ€™re going to put in a value of six.Why not?And because this is a not constant global variable, this thing is going to have external linkage.I really want you to know this.And what this means is that we can access this guy even from other translation units and itâ€™s goingto be the exact same variable.The memory is going to be the same if we print that out.And to really show this, weâ€™re going to go back in some other file and try to access our item count.But to do that, we need to mark this guy as a variable defined in some other translation unit.And to do that, we use the external keyword.Weâ€™re going to say extern, we are going to say its type and weâ€™re going to say the name of the variable.Weâ€™re going to say item count.And this is going to be a declaration of a variable that was defined in some other translation unit.This is what we mean here.So if, for example, we set up a function to print the item count, weâ€™re going to see that what weare accessing is what we have in the main function here, because this guy has external linkage.It can be accessible and used even from other translation units like some other file here.So letâ€™s go down and do that.Weâ€™re going to set up a function.Weâ€™re going to say void print item count, and weâ€™re going to put up a parameter list and weâ€™re goingto say stdcout item count from other file, and weâ€™re going to say Stdendl to go to the new line.We should separate these guys a little bit and weâ€™re going to just grab this thing and use this in main.So weâ€™re going to comment out the things we had for the distance, because they should be just confusingus now.And weâ€™re going to put a line to print from the main function.Letâ€™s do that.This is going to print item count that we have in main here.So letâ€™s say that this is from Main and weâ€™re going to put a separator N and then weâ€™re going to setup a declaration for the print item count function.We can go on top here and do that.And if we have this n, we can go down and call the function.So letâ€™s do that.We can say print item count and if weâ€™re build and run this program, we try to think about what weâ€™regoing to get.The first print here is going to print the variable we have in main, which is declared right here.So itâ€™s going to print the item count in Main.Itâ€™s going to print the value, which is going to be a six, and itâ€™s going to print the address ofthis variable because this variable is not cost.It has external linkage by default.So it can be accessible even from other translation units like some other file.Here we have it declared.Again, this is not a definition of a variable.It is just a declaration of a variable we have defined in some other translation unit.So what we really have here is a way to access something that we have declared and defined in the mainfunction here.So if we print the item count here, we will be accessing what we have in the main function.So they are going to be the same.The value is going to be the same.And the addresses are going to be the same.Thatâ€™s what we expect here.Letâ€™s bring this up and weâ€™re going to build the program to make sure we get what we expect.The world is going to be good, so weâ€™re going to clear and run.Rooster You see that the value is the same and the addresses in memory are of the same.So this should really prove that external linkage means that you can access the variable from othertranslation units.And the mechanism we have is to mark the variable as extern.And this is going to mean that it was defined in some other variable, but we can access it and useit even from other translation units like we are doing in this function here.And this is really cool, but this is not just limited to non-const global variables.Even functions have external linkage by default.Okay, so but for function we donâ€™t really need to mark them as external or anything.They have external linkage by default.For example, we had declared and defined the print item function in some other file here, but we areable to access it and use that even from the main CPP file here, which is another translation unit.So functions have external linkage by default and we can go in here and say that, but if you want toreally be explicit, you can go down and say that they are external.You can come and put the external keyword in front.This is not going to hurt anything, but itâ€™s going to be just repeating yourself because they are externalby default.If we try and build the program, youâ€™re going to see that this is going to build and run without aproblem.So the build is good.You can put this external keyword here or you can leave it, but note that functions have external linkageby default.This is really all I wanted you to see in this lecture.Learning about the concept of linkage.It is a property that you associate to your names in your Cplusplus program.That property is going to control how accessible the name is going to be a cross translation unit.And we had a chance to look at three kinds of linkage in this lecture here.We have seen that variables may have a null linkage, for example, local variables to functions.We have seen that some variables have internal linkage, for example, const global variables and wehave seen that some other variables can have external linkage like the item count here.And this should be super clear.We are going to stop here in this lecture and the next one weâ€™re going to zoom in on global externalvariables like we have this guy here.Go ahead and finish up here and meet me there.</p>
<hr>
<h2 id="ğŸ¤–-Assistant"><a href="#ğŸ¤–-Assistant" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¥½çš„ï¼Œå„ä½æœªæ¥çš„C++å¤§å¸ˆä»¬ï¼æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„C++å­¦ä¹ ä¹‹æ—…ã€‚</p>
<hr>
<h2 id="C-åå­—çš„â€œå¯è§åº¦â€ï¼šæ·±å…¥ç†è§£é“¾æ¥å±æ€§ï¼ˆLinkageï¼‰"><a href="#C-åå­—çš„â€œå¯è§åº¦â€ï¼šæ·±å…¥ç†è§£é“¾æ¥å±æ€§ï¼ˆLinkageï¼‰" class="headerlink" title="C++ åå­—çš„â€œå¯è§åº¦â€ï¼šæ·±å…¥ç†è§£é“¾æ¥å±æ€§ï¼ˆLinkageï¼‰"></a><strong>C++ åå­—çš„â€œå¯è§åº¦â€ï¼šæ·±å…¥ç†è§£é“¾æ¥å±æ€§ï¼ˆLinkageï¼‰</strong></h2><p><strong>æ‘˜è¦ï¼š</strong> æœ¬èŠ‚è¯¾å°†å¸¦ä½ æ·±å…¥ç†è§£C++ä¸­â€œåå­—â€ï¼ˆå˜é‡åã€å‡½æ•°åç­‰ï¼‰çš„<strong>é“¾æ¥å±æ€§</strong>ï¼ˆLinkageï¼‰ï¼Œå®ƒå†³å®šäº†ä¸€ä¸ªåå­—åœ¨ä¸åŒ<strong>ç¿»è¯‘å•å…ƒ</strong>ï¼ˆTranslation Unitï¼‰ä¹‹é—´çš„å¯è§æ€§ï¼Œä»¥åŠå®ƒæ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå®ä½“ã€‚æˆ‘ä»¬å°†é‡ç‚¹æ¢è®¨æ— é“¾æ¥ï¼ˆNo Linkageï¼‰ã€å†…éƒ¨é“¾æ¥ï¼ˆInternal Linkageï¼‰å’Œå¤–éƒ¨é“¾æ¥ï¼ˆExternal Linkageï¼‰è¿™ä¸‰ç§ç±»å‹ã€‚</p>
<hr>
<h2 id="1-ä»€ä¹ˆæ˜¯é“¾æ¥å±æ€§ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯é“¾æ¥å±æ€§ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯é“¾æ¥å±æ€§ï¼Ÿ"></a><strong>1. ä»€ä¹ˆæ˜¯é“¾æ¥å±æ€§ï¼Ÿ</strong></h2><p>åœ¨C++ä¸­ï¼Œ<strong>é“¾æ¥å±æ€§</strong>ï¼ˆLinkageï¼‰æ˜¯ä¸ä½ çš„ç¨‹åºä¸­<strong>åå­—</strong>ï¼ˆNameï¼‰ï¼Œä¾‹å¦‚å˜é‡åã€å‡½æ•°åç­‰ï¼Œå…³è”çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚å®ƒæ§åˆ¶ç€è¿™äº›åå­—åœ¨ä¸åŒçš„<strong>ç¿»è¯‘å•å…ƒ</strong>ï¼ˆTranslation Unitï¼‰ä¹‹é—´å¦‚ä½•è¢«çœ‹è§å’Œä½¿ç”¨ã€‚ç†è§£é“¾æ¥å±æ€§å¯¹äºç¼–å†™å¤§å‹ã€æ¨¡å—åŒ–çš„C++ç¨‹åºè‡³å…³é‡è¦ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å¾—æ¸…æ¥šä»€ä¹ˆæ˜¯â€œç¿»è¯‘å•å…ƒâ€ã€‚ç®€å•æ¥è¯´ï¼Œä¸€ä¸ª<strong>ç¿»è¯‘å•å…ƒ</strong>ï¼ˆTranslation Unitï¼‰é€šå¸¸æŒ‡ä¸€ä¸ªç‹¬ç«‹çš„ <code>.cpp</code> æºæ–‡ä»¶åŠå…¶æ‰€åŒ…å«ï¼ˆé€šè¿‡<code>#include</code>ï¼‰çš„æ‰€æœ‰å¤´æ–‡ä»¶ï¼Œåœ¨ç»è¿‡é¢„å¤„ç†å™¨å¤„ç†ä¹‹åï¼Œç”Ÿæˆçš„ä¸€ä¸ªå¯ä»¥ç›´æ¥ç¼–è¯‘çš„å•ä¸€æ–‡ä»¶ã€‚ä½ çš„æ•´ä¸ªç¨‹åºå¯èƒ½ç”±å¤šä¸ªè¿™æ ·çš„ç¿»è¯‘å•å…ƒç»„æˆï¼Œå®ƒä»¬æœ€ç»ˆä¼šè¢«é“¾æ¥å™¨ï¼ˆLinkerï¼‰ç»„åˆèµ·æ¥å½¢æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>é“¾æ¥å±æ€§å°±æ˜¯ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨ï¼šè¿™ä¸ªåå­—ï¼Œæ˜¯åªåœ¨è¿™ä¸ªç¿»è¯‘å•å…ƒé‡Œæœ‰æ•ˆï¼Œè¿˜æ˜¯å¯ä»¥åœ¨å…¶ä»–ç¿»è¯‘å•å…ƒé‡Œä¹Ÿèƒ½è®¿é—®åˆ°ï¼Œåˆæˆ–è€…æ ¹æœ¬å°±ä¸èƒ½ä»è¿™ä¸ªåå­—ä»¥å¤–çš„åœ°æ–¹è®¿é—®ã€‚</p>
<p>C++ä¸­çš„é“¾æ¥å±æ€§ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p>
<ul>
<li><strong>æ— é“¾æ¥ï¼ˆNo Linkageï¼‰ï¼š</strong> åå­—åªåœ¨å®ƒè¢«å®šä¹‰çš„<strong>ä½œç”¨åŸŸ</strong>ï¼ˆScopeï¼‰å†…å¯è§å’Œä½¿ç”¨ï¼Œæ— æ³•ä»å…¶ä½œç”¨åŸŸå¤–éƒ¨è®¿é—®ï¼Œæ›´ä¸èƒ½åœ¨å…¶ä»–ç¿»è¯‘å•å…ƒä¸­è®¿é—®ã€‚</li>
<li><strong>å†…éƒ¨é“¾æ¥ï¼ˆInternal Linkageï¼‰ï¼š</strong> åå­—å¯ä»¥åœ¨å®ƒè¢«å®šä¹‰çš„é‚£ä¸ªç¿»è¯‘å•å…ƒçš„<strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼ˆGlobal Scopeï¼‰å†…è¢«è®¿é—®å’Œä½¿ç”¨ï¼Œä½†æ— æ³•ä»å…¶ä»–ç¿»è¯‘å•å…ƒä¸­è®¿é—®ã€‚æ¯ä¸ªç¿»è¯‘å•å…ƒå¦‚æœå®šä¹‰äº†åŒåçš„å†…éƒ¨é“¾æ¥å®ä½“ï¼Œå®ƒä»¬éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“ã€‚</li>
<li><strong>å¤–éƒ¨é“¾æ¥ï¼ˆExternal Linkageï¼‰ï¼š</strong> åå­—å¯ä»¥åœ¨å®ƒè¢«å®šä¹‰çš„ç¿»è¯‘å•å…ƒä¸­è¢«è®¿é—®ï¼Œä¹Ÿå¯ä»¥åœ¨<strong>å…¶ä»–ç¿»è¯‘å•å…ƒ</strong>ä¸­è¢«è®¿é—®å’Œä½¿ç”¨ã€‚æ‰€æœ‰å¼•ç”¨åŒä¸€ä¸ªå¤–éƒ¨é“¾æ¥åå­—çš„åœ°æ–¹ï¼Œéƒ½æŒ‡å‘å†…å­˜ä¸­çš„åŒä¸€ä¸ªå®ä½“ã€‚</li>
<li><strong>æ¨¡å—é“¾æ¥ï¼ˆModule Linkageï¼‰ï¼š</strong> è¿™æ˜¯C++20å¼•å…¥çš„æ–°æ¦‚å¿µï¼Œç”¨äºæ¨¡å—ï¼ˆModuleï¼‰ï¼Œç›®å‰æˆ‘ä»¬æš‚æ—¶ä¸æ·±å…¥æ¢è®¨ï¼Œå…ˆä¸“æ³¨äºå‰ä¸‰ç§ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡å…·ä½“çš„ä»£ç ç¤ºä¾‹æ¥æ·±å…¥ç†è§£è¿™ä¸‰ç§æœ€å¸¸è§çš„é“¾æ¥å±æ€§ã€‚</p>
<h2 id="2-æ— é“¾æ¥ï¼ˆNo-Linkageï¼‰"><a href="#2-æ— é“¾æ¥ï¼ˆNo-Linkageï¼‰" class="headerlink" title="2. æ— é“¾æ¥ï¼ˆNo Linkageï¼‰"></a><strong>2. æ— é“¾æ¥ï¼ˆNo Linkageï¼‰</strong></h2><p>å½“ä¸€ä¸ªåå­—æ²¡æœ‰é“¾æ¥å±æ€§æ—¶ï¼Œå®ƒä»…ä»…åœ¨å®ƒè¢«å£°æ˜çš„<strong>å±€éƒ¨ä½œç”¨åŸŸ</strong>ï¼ˆLocal Scopeï¼‰å†…å¯è§ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½åœ¨å®šä¹‰å®ƒçš„å‡½æ•°å¤–éƒ¨è®¿é—®å®ƒï¼Œæ›´ä¸èƒ½åœ¨å…¶ä»–ç¿»è¯‘å•å…ƒä¸­è®¿é—®å®ƒã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šå‡½æ•°å†…çš„å±€éƒ¨å˜é‡</strong></p>
<p>å‡½æ•°å†…éƒ¨å£°æ˜çš„å±€éƒ¨å˜é‡ï¼Œå¦‚<code>age</code>ï¼Œå®ƒä»¬åªåœ¨å‡½æ•°å†…éƒ¨çš„<strong>å—ä½œç”¨åŸŸ</strong>ï¼ˆBlock Scopeï¼‰å†…æœ‰æ•ˆã€‚ä¸€æ—¦å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¿™äº›å˜é‡é€šå¸¸å°±ä¼šè¢«é”€æ¯ï¼Œå¹¶ä¸”åœ¨å‡½æ•°å¤–éƒ¨æ ¹æœ¬æ— æ³•é€šè¿‡è¿™ä¸ªåå­—æ¥è®¿é—®å®ƒä»¬ã€‚</p>
<p><strong>main.cpp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt; // å¼•å…¥è¾“å…¥è¾“å‡ºæµåº“</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">someFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> age = <span class="number">34</span>; <span class="comment">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å±€éƒ¨å˜é‡ï¼Œå®ƒå…·æœ‰â€œæ— é“¾æ¥â€å±æ€§</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ someFunction å†…éƒ¨: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"age çš„å€¼: "</span> &lt;&lt; age &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"age çš„åœ°å€: "</span> &lt;&lt; &amp;age &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// æ‰“å°å˜é‡çš„å†…å­˜åœ°å€</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ------------------------------------------</span></span><br><span class="line">    <span class="comment">// æ¼”ç¤ºæ— é“¾æ¥ (No Linkage)</span></span><br><span class="line">    <span class="comment">// ------------------------------------------</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- æ¼”ç¤ºæ— é“¾æ¥ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. è°ƒç”¨ someFunctionï¼Œå†…éƒ¨çš„ age å˜é‡ä¼šè¢«åˆ›å»ºå¹¶ä½¿ç”¨</span></span><br><span class="line">    someFunction();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- å°è¯•è®¿é—®å‡½æ•°å¤–éƒ¨çš„å±€éƒ¨å˜é‡ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// 2. å°è¯•åœ¨ main å‡½æ•°ä¸­è®¿é—® someFunction å†…éƒ¨çš„ age å˜é‡</span></span><br><span class="line">    <span class="comment">// è¿™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º age åªåœ¨ someFunction å†…éƒ¨å¯è§ã€‚</span></span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; "åœ¨ main å†…éƒ¨å°è¯•è®¿é—® someFunction çš„ age: " &lt;&lt; age &lt;&lt; std::endl; </span></span><br><span class="line">    <span class="comment">// ^^^ å¦‚æœå–æ¶ˆæ³¨é‡Šè¿™ä¸€è¡Œï¼Œä¼šæŠ¥é”™ï¼š'age' was not declared in this scope</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. è¯æ˜å³ä½¿åœ¨åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¸åŒä½œç”¨åŸŸçš„åŒåå˜é‡ä¹Ÿæ˜¯ç‹¬ç«‹çš„</span></span><br><span class="line">    <span class="keyword">int</span> age = <span class="number">33</span>; <span class="comment">// è¿™æ˜¯ main å‡½æ•°è‡ªå·±çš„å±€éƒ¨å˜é‡ï¼Œä¸ someFunction é‡Œçš„ age æ¯«æ— å…³ç³»</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ main å†…éƒ¨: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"main è‡ªå·±çš„ age çš„å€¼: "</span> &lt;&lt; age &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"main è‡ªå·±çš„ age çš„åœ°å€: "</span> &lt;&lt; &amp;age &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// æ‰“å° main è‡ªå·±çš„ age çš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†æ¬¡è°ƒç”¨ someFunctionï¼Œçœ‹çœ‹å®ƒå†…éƒ¨çš„ age ä»ç„¶æ˜¯ç‹¬ç«‹çš„</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- å†æ¬¡è°ƒç”¨ someFunction ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    someFunction(); <span class="comment">// å†æ¬¡è°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ° someFunction å†…éƒ¨çš„ age ä»ç„¶æ˜¯ 34ï¼Œä¸”åœ°å€å¯èƒ½ä¸åŒï¼ˆå¦‚æœæ ˆåˆ†é…ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- æ¼”ç¤ºæ— é“¾æ¥ (è·¨æ–‡ä»¶) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// 4. å°è¯•åœ¨å¦ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è®¿é—®ã€‚</span></span><br><span class="line">    <span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰å¦ä¸€ä¸ªæ–‡ä»¶ some_other_file.cpp</span></span><br><span class="line">    <span class="comment">// é‡Œé¢æœ‰ä¸€ä¸ªå‡½æ•°å°è¯•è®¿é—® someFunction é‡Œçš„ ageã€‚</span></span><br><span class="line">    <span class="comment">// è¿™åŒæ ·ä¼šå¤±è´¥ã€‚</span></span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ someOtherFunction çš„åŸå‹ï¼Œå› ä¸ºå®ƒåœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>; <span class="comment">// å£°æ˜åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„å‡½æ•°</span></span><br><span class="line">    doSomething(); <span class="comment">// è°ƒç”¨åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>some_other_file.cpp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°è¯•åœ¨å¦ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è®¿é—® main.cpp ä¸­ someFunction é‡Œçš„ age å˜é‡</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ some_other_file.cpp å†…éƒ¨çš„ doSomething å‡½æ•°: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// int age_from_main_function = age; // è¿™å°†å¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼š'age' was not declared in this scope</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"æ— æ³•ç›´æ¥è®¿é—® main.cpp ä¸­ someFunction é‡Œçš„å±€éƒ¨å˜é‡ ageã€‚"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>è§£é‡Šï¼š</strong><br>å½“ä½ åœ¨<code>main</code>å‡½æ•°ä¸­å°è¯•è®¿é—®<code>someFunction</code>å†…éƒ¨çš„<code>age</code>æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™<code>&#39;age&#39; was not declared in this scope</code>ï¼ˆageåœ¨æ­¤ä½œç”¨åŸŸä¸­æœªå£°æ˜ï¼‰ã€‚è¿™æ¸…æ¥šåœ°è¡¨æ˜<code>age</code>åªåœ¨<code>someFunction</code>çš„<strong>ä½œç”¨åŸŸ</strong>å†…å¯è§ã€‚å³ä½¿ä½ åœ¨<code>main</code>å‡½æ•°ä¸­å£°æ˜äº†ä¸€ä¸ªåŒåçš„<code>age</code>å˜é‡ï¼Œå®ƒä»¬ä¹Ÿæ˜¯å®Œå…¨ç‹¬ç«‹çš„å®ä½“ï¼Œä½äºä¸åŒçš„å†…å­˜åœ°å€ï¼Œäº’ä¸å¹²æ‰°ã€‚è¿™è¯´æ˜äº†å±€éƒ¨å˜é‡çš„â€œæ— é“¾æ¥â€ç‰¹æ€§ã€‚</p>
<h2 id="3-å†…éƒ¨é“¾æ¥ï¼ˆInternal-Linkageï¼‰"><a href="#3-å†…éƒ¨é“¾æ¥ï¼ˆInternal-Linkageï¼‰" class="headerlink" title="3. å†…éƒ¨é“¾æ¥ï¼ˆInternal Linkageï¼‰"></a><strong>3. å†…éƒ¨é“¾æ¥ï¼ˆInternal Linkageï¼‰</strong></h2><p>å…·æœ‰å†…éƒ¨é“¾æ¥å±æ€§çš„åå­—ï¼Œåªèƒ½åœ¨å®šä¹‰å®ƒçš„é‚£ä¸ª<strong>ç¿»è¯‘å•å…ƒ</strong>å†…éƒ¨è¢«è®¿é—®å’Œä½¿ç”¨ã€‚å³ä½¿ä½ åœ¨å¦ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­å£°æ˜äº†ä¸€ä¸ªåŒåçš„å®ä½“ï¼Œå®ƒä»¬ä¹Ÿæ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“ã€‚è¿™å°±åƒæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰è‡ªå·±ç§æœ‰çš„åŒåå‰¯æœ¬ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š<code>const</code> å…¨å±€å˜é‡</strong></p>
<p>åœ¨C++ä¸­ï¼Œ<code>const</code>ä¿®é¥°çš„<strong>å…¨å±€å˜é‡</strong>ï¼ˆGlobal Variableï¼‰é»˜è®¤å…·æœ‰å†…éƒ¨é“¾æ¥å±æ€§ã€‚</p>
<p><strong>main.cpp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ª const å…¨å±€å˜é‡ï¼Œå®ƒé»˜è®¤å…·æœ‰â€œå†…éƒ¨é“¾æ¥â€å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> distance = <span class="number">45.8</span>; <span class="comment">// è·ç¦»æŸä¸ªåœ°æ–¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„å‡½æ•°åŸå‹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printDistance</span><span class="params">()</span></span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- æ¼”ç¤ºå†…éƒ¨é“¾æ¥ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ main.cpp å†…éƒ¨: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"distance çš„å€¼: "</span> &lt;&lt; distance &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"distance çš„åœ°å€: "</span> &lt;&lt; &amp;distance &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// æ‰“å°åœ¨ main.cpp ä¸­ distance çš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- å°è¯•åœ¨å¦ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è®¿é—® distance ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    printDistance(); <span class="comment">// è°ƒç”¨åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„å‡½æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>some_other_file.cpp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°è¯•åœ¨å¦ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­â€œè®¿é—®â€ main.cpp ä¸­çš„ distanceã€‚</span></span><br><span class="line"><span class="comment">// ä½†ç”±äº const å…¨å±€å˜é‡é»˜è®¤æ˜¯å†…éƒ¨é“¾æ¥ï¼Œè¿™é‡Œå®é™…ä¸Šæ˜¯å®šä¹‰äº†ä¸€ä¸ªå…¨æ–°çš„ã€ç‹¬ç«‹çš„ distance å˜é‡ã€‚</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šå¦‚æœè¿™é‡Œä¸åˆå§‹åŒ–ï¼Œä¼šæŠ¥é”™ "uninitialized const 'distance'"</span></span><br><span class="line"><span class="comment">// å› ä¸ºå®ƒä¸æ˜¯å£°æ˜ä¸€ä¸ªå¤–éƒ¨å˜é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªæ–°çš„å®šä¹‰ã€‚</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> distance = <span class="number">0.0</span>; <span class="comment">// åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œå®šä¹‰äº†ä¸€ä¸ªç‹¬ç«‹çš„ const distance å˜é‡ï¼Œå¹¶åˆå§‹åŒ–ä¸º 0.0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printDistance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ some_other_file.cpp å†…éƒ¨çš„ printDistance å‡½æ•°: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"distance (ä»å…¶ä»–æ–‡ä»¶) çš„å€¼: "</span> &lt;&lt; distance &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"distance (ä»å…¶ä»–æ–‡ä»¶) çš„åœ°å€: "</span> &lt;&lt; &amp;distance &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// æ‰“å°åœ¨ some_other_file.cpp ä¸­ distance çš„åœ°å€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>è§£é‡Šï¼š</strong><br>å½“ä½ ç¼–è¯‘å¹¶è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œä½ ä¼šå‘ç°<code>main.cpp</code>ä¸­æ‰“å°çš„<code>distance</code>å€¼æ˜¯<code>45.8</code>ï¼Œåœ°å€æ˜¯æŸä¸ªå€¼ï¼›è€Œ<code>some_other_file.cpp</code>ä¸­æ‰“å°çš„<code>distance</code>å€¼æ˜¯<code>0.0</code>ï¼Œåœ°å€æ˜¯å¦ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å€¼ã€‚è¿™è¯æ˜äº†å³ä½¿å®ƒä»¬æœ‰ç›¸åŒçš„åå­—ï¼Œç”±äº<code>const</code>å…¨å±€å˜é‡é»˜è®¤çš„å†…éƒ¨é“¾æ¥å±æ€§ï¼Œæ¯ä¸ªç¿»è¯‘å•å…ƒéƒ½æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„<code>distance</code>å‰¯æœ¬ã€‚å®ƒä»¬ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³è”ã€‚</p>
<p><strong>æ€è€ƒï¼š</strong> ä¸ºä»€ä¹ˆ<code>const</code>å…¨å±€å˜é‡é»˜è®¤æ˜¯å†…éƒ¨é“¾æ¥ï¼Ÿ<br>è¿™æ˜¯C++è¯­è¨€è®¾è®¡çš„ä¸€ä¸ªè€ƒé‡ã€‚å¦‚æœ<code>const</code>å…¨å±€å˜é‡é»˜è®¤æ˜¯å¤–éƒ¨é“¾æ¥ï¼Œé‚£ä¹ˆå½“ä½ åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­<code>#include</code>åŒä¸€ä¸ªå®šä¹‰äº†<code>const</code>å…¨å±€å˜é‡çš„å¤´æ–‡ä»¶æ—¶ï¼Œä¼šå¯¼è‡´å¤šä¸ªç¿»è¯‘å•å…ƒéƒ½å®šä¹‰äº†åŒä¸€ä¸ªå¤–éƒ¨é“¾æ¥å˜é‡ï¼Œä»è€Œè¿åäº†C++çš„<strong>å•ä¸€å®šä¹‰è§„åˆ™</strong>ï¼ˆOne Definition Rule, ODRï¼‰ï¼Œé“¾æ¥å™¨ä¼šæŠ¥é”™ã€‚å°†<code>const</code>å…¨å±€å˜é‡é»˜è®¤è®¾ä¸ºå†…éƒ¨é“¾æ¥ï¼Œå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæ¯ä¸ªç¿»è¯‘å•å…ƒéƒ½ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„å‰¯æœ¬ï¼Œè¿™é€šå¸¸æ˜¯æœŸæœ›çš„è¡Œä¸ºã€‚</p>
<h2 id="4-å¤–éƒ¨é“¾æ¥ï¼ˆExternal-Linkageï¼‰"><a href="#4-å¤–éƒ¨é“¾æ¥ï¼ˆExternal-Linkageï¼‰" class="headerlink" title="4. å¤–éƒ¨é“¾æ¥ï¼ˆExternal Linkageï¼‰"></a><strong>4. å¤–éƒ¨é“¾æ¥ï¼ˆExternal Linkageï¼‰</strong></h2><p>å…·æœ‰å¤–éƒ¨é“¾æ¥å±æ€§çš„åå­—ï¼Œå¯ä»¥åœ¨å®ƒè¢«å®šä¹‰çš„ç¿»è¯‘å•å…ƒä¸­è¢«è®¿é—®å’Œä½¿ç”¨ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä¹Ÿå¯ä»¥åœ¨<strong>å…¶ä»–ç¿»è¯‘å•å…ƒ</strong>ä¸­è¢«è®¿é—®å’Œä½¿ç”¨ã€‚æ‰€æœ‰å¼•ç”¨åŒä¸€ä¸ªå¤–éƒ¨é“¾æ¥åå­—çš„åœ°æ–¹ï¼Œéƒ½æŒ‡å‘å†…å­˜ä¸­çš„åŒä¸€ä¸ªå®ä½“ã€‚è¿™æ˜¯å®ç°å¤šæ–‡ä»¶åä½œå’Œæ¨¡å—åŒ–ç¼–ç¨‹çš„åŸºç¡€ã€‚</p>
<p><strong>ç¤ºä¾‹1ï¼šé <code>const</code> å…¨å±€å˜é‡</strong></p>
<p>é<code>const</code>ä¿®é¥°çš„<strong>å…¨å±€å˜é‡</strong>é»˜è®¤å…·æœ‰å¤–éƒ¨é“¾æ¥å±æ€§ã€‚è¦åœ¨ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­ä½¿ç”¨å¦ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­å®šä¹‰çš„å¤–éƒ¨é“¾æ¥å˜é‡ï¼Œä½ éœ€è¦ä½¿ç”¨<code>extern</code>å…³é”®å­—è¿›è¡Œ<strong>å£°æ˜</strong>ï¼ˆDeclarationï¼‰ï¼Œè€Œä¸æ˜¯å†æ¬¡è¿›è¡Œ<strong>å®šä¹‰</strong>ï¼ˆDefinitionï¼‰ã€‚</p>
<p><strong>main.cpp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªé const å…¨å±€å˜é‡ï¼Œå®ƒé»˜è®¤å…·æœ‰â€œå¤–éƒ¨é“¾æ¥â€å±æ€§</span></span><br><span class="line"><span class="keyword">int</span> item_count = <span class="number">6</span>; <span class="comment">// ç‰©å“æ•°é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„å‡½æ•°åŸå‹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printItemCount</span><span class="params">()</span></span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- æ¼”ç¤ºå¤–éƒ¨é“¾æ¥ (é const å…¨å±€å˜é‡) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ main.cpp å†…éƒ¨: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"item_count çš„å€¼: "</span> &lt;&lt; item_count &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"item_count çš„åœ°å€: "</span> &lt;&lt; &amp;item_count &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// æ‰“å°åœ¨ main.cpp ä¸­ item_count çš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- å°è¯•åœ¨å¦ä¸€ä¸ªç¿»è¯‘å•å…ƒä¸­è®¿é—® item_count ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    printItemCount(); <span class="comment">// è°ƒç”¨åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ä»¥åœ¨ main ä¸­ä¿®æ”¹ item_count çš„å€¼ï¼Œç„¶åçœ‹çœ‹ printItemCount æ˜¯å¦ä¼šå—åˆ°å½±å“</span></span><br><span class="line">    item_count = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- åœ¨ main.cpp ä¸­ä¿®æ”¹ item_count åå†æ¬¡è°ƒç”¨ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    printItemCount(); <span class="comment">// å†æ¬¡è°ƒç”¨ï¼Œitem_count çš„å€¼åº”è¯¥ä¼šåæ˜ å‡ºä¿®æ”¹</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>some_other_file.cpp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ extern å…³é”®å­—å£°æ˜ item_count</span></span><br><span class="line"><span class="comment">// è¿™å‘Šè¯‰ç¼–è¯‘å™¨ï¼šitem_count åœ¨å…¶ä»–ç¿»è¯‘å•å…ƒä¸­å·²ç»å®šä¹‰äº†ï¼Œè¿™é‡Œåªæ˜¯å£°æ˜è¦ä½¿ç”¨å®ƒã€‚</span></span><br><span class="line"><span class="comment">// è¿™ä¸æ˜¯å®šä¹‰ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œè€Œæ˜¯å¼•ç”¨ main.cpp ä¸­å·²ç»å­˜åœ¨çš„é‚£ä¸ª item_countã€‚</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> item_count; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ some_other_file.cpp å†…éƒ¨çš„ printItemCount å‡½æ•°: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"item_count (ä»å…¶ä»–æ–‡ä»¶) çš„å€¼: "</span> &lt;&lt; item_count &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"item_count (ä»å…¶ä»–æ–‡ä»¶) çš„åœ°å€: "</span> &lt;&lt; &amp;item_count &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// æ‰“å°åœ¨ some_other_file.cpp ä¸­ item_count çš„åœ°å€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>è§£é‡Šï¼š</strong><br>ä½ ä¼šçœ‹åˆ°<code>main.cpp</code>å’Œ<code>some_other_file.cpp</code>ä¸­æ‰“å°çš„<code>item_count</code>çš„å€¼å’Œåœ°å€éƒ½æ˜¯ç›¸åŒçš„ã€‚è¿™è¯æ˜äº†å®ƒä»¬è®¿é—®çš„æ˜¯å†…å­˜ä¸­çš„åŒä¸€ä¸ªå˜é‡ã€‚å½“<code>main.cpp</code>ä¿®æ”¹äº†<code>item_count</code>çš„å€¼åï¼Œ<code>some_other_file.cpp</code>ä¸­çš„<code>printItemCount</code>å‡½æ•°ä¹Ÿèƒ½ç«‹å³çœ‹åˆ°è¿™ä¸ªæ”¹å˜ï¼Œè¿™æ­£æ˜¯å¤–éƒ¨é“¾æ¥çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<p><strong>ç¤ºä¾‹2ï¼šå‡½æ•°</strong></p>
<p><strong>å‡½æ•°</strong>ï¼ˆFunctionï¼‰é»˜è®¤ä¹Ÿå…·æœ‰å¤–éƒ¨é“¾æ¥å±æ€§ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°ï¼Œç„¶ååœ¨å¦ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­è°ƒç”¨å®ƒï¼Œåªè¦æä¾›äº†å‡½æ•°çš„<strong>å£°æ˜</strong>ï¼ˆåŸå‹ï¼‰å³å¯ã€‚</p>
<p><strong>main.cpp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„å‡½æ•°åŸå‹</span></span><br><span class="line"><span class="comment">// void doSomething(); // è¿™ä¸ªæˆ‘ä»¬å‰é¢æ¼”ç¤ºæ— é“¾æ¥æ—¶ç”¨è¿‡ï¼Œè¿™é‡Œå¯ä»¥ç»§ç»­ä¿ç•™</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printItemCount</span><span class="params">()</span></span>; <span class="comment">// å£°æ˜ printItemCount å‡½æ•°ï¼Œå®ƒåœ¨ some_other_file.cpp ä¸­å®šä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- æ¼”ç¤ºå¤–éƒ¨é“¾æ¥ (å‡½æ•°) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// æˆ‘ä»¬å·²ç»å¤šæ¬¡è°ƒç”¨äº† printItemCount å‡½æ•°ï¼Œå®ƒæ˜¯åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„ã€‚</span></span><br><span class="line">    <span class="comment">// è¿™æœ¬èº«å°±è¯æ˜äº†å‡½æ•°çš„é»˜è®¤é“¾æ¥å±æ€§æ˜¯å¤–éƒ¨é“¾æ¥ã€‚</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"printItemCount å‡½æ•°æ˜¯åœ¨ some_other_file.cpp ä¸­å®šä¹‰çš„ï¼Œä½†å¯ä»¥åœ¨ main.cpp ä¸­è°ƒç”¨ã€‚"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    printItemCount(); <span class="comment">// å†æ¬¡è°ƒç”¨ï¼Œä»¥ç¤ºå‡½æ•°å¯ä»¥åœ¨ä¸åŒç¿»è¯‘å•å…ƒé—´ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½ ä¹Ÿå¯ä»¥æ˜¾å¼åœ°ç»™å‡½æ•°æ·»åŠ  extern å…³é”®å­—ï¼Œä½†è¿™é€šå¸¸æ˜¯å¤šä½™çš„ï¼Œå› ä¸ºå‡½æ•°é»˜è®¤å°±æ˜¯å¤–éƒ¨é“¾æ¥ã€‚</span></span><br><span class="line">    <span class="comment">// extern void printItemCount(); // è¿™æ ·å†™æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œä½†é€šå¸¸çœç•¥ã€‚</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>some_other_file.cpp</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> item_count; <span class="comment">// å†æ¬¡å£°æ˜ item_count ä¸ºå¤–éƒ¨é“¾æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// printItemCount å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°æ˜¯å¤–éƒ¨é“¾æ¥çš„</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printItemCount</span><span class="params">()</span> </span>&#123; <span class="comment">// è¿™é‡Œçš„ void ä¹Ÿå¯ä»¥åŠ ä¸Š externï¼Œä½†é€šå¸¸çœç•¥</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ some_other_file.cpp å†…éƒ¨çš„ printItemCount å‡½æ•° (å†æ¬¡è¢«è°ƒç”¨): "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"item_count çš„å€¼: "</span> &lt;&lt; item_count &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"item_count çš„åœ°å€: "</span> &lt;&lt; &amp;item_count &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>è§£é‡Šï¼š</strong><br>æˆ‘ä»¬ä¸€ç›´ä»¥æ¥éƒ½åœ¨è·¨æ–‡ä»¶è°ƒç”¨å‡½æ•°ï¼Œè€Œæ²¡æœ‰é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¿™æ­£æ˜¯å› ä¸ºC++ä¸­çš„å‡½æ•°é»˜è®¤å°±å…·æœ‰å¤–éƒ¨é“¾æ¥å±æ€§ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼ˆç¿»è¯‘å•å…ƒï¼‰ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åé€šè¿‡åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ï¼ˆç¿»è¯‘å•å…ƒï¼‰ä¸­æä¾›å…¶<strong>å‡½æ•°åŸå‹</strong>ï¼ˆFunction Prototypeï¼‰æ¥è°ƒç”¨å®ƒã€‚</p>
<h2 id="5-QA-é—ªå¡-QA-Flash-Cards"><a href="#5-QA-é—ªå¡-QA-Flash-Cards" class="headerlink" title="5. QA é—ªå¡ (QA Flash Cards)"></a><strong>5. QA é—ªå¡ (QA Flash Cards)</strong></h2><p><strong>é—®é¢˜ (Q):</strong> ä»€ä¹ˆæ˜¯ C++ ä¸­çš„â€œé“¾æ¥å±æ€§â€ï¼Ÿ<br><strong>ç­”æ¡ˆ (A):</strong> é“¾æ¥å±æ€§æ˜¯ä¸ C++ ç¨‹åºä¸­çš„åå­—ï¼ˆå¦‚å˜é‡åã€å‡½æ•°åï¼‰ç›¸å…³è”çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå†³å®šäº†è¿™äº›åå­—åœ¨ä¸åŒ<strong>ç¿»è¯‘å•å…ƒ</strong>ä¹‹é—´å¦‚ä½•è¢«çœ‹è§å’Œä½¿ç”¨ã€‚</p>
<p><strong>é—®é¢˜ (Q):</strong> å±€éƒ¨å˜é‡ï¼ˆå¦‚å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼‰å…·æœ‰å“ªç§é“¾æ¥å±æ€§ï¼Ÿå®ƒçš„å¯è§èŒƒå›´æ˜¯ä»€ä¹ˆï¼Ÿ<br><strong>ç­”æ¡ˆ (A):</strong> å±€éƒ¨å˜é‡å…·æœ‰<strong>æ— é“¾æ¥</strong>ï¼ˆNo Linkageï¼‰å±æ€§ã€‚å®ƒä»¬åªåœ¨è¢«å®šä¹‰çš„<strong>ä½œç”¨åŸŸ</strong>å†…å¯è§å’Œä½¿ç”¨ï¼Œæ— æ³•ä»å…¶ä½œç”¨åŸŸå¤–éƒ¨æˆ–å…¶å®ƒç¿»è¯‘å•å…ƒä¸­è®¿é—®ã€‚</p>
<p><strong>é—®é¢˜ (Q):</strong> <code>const</code> ä¿®é¥°çš„å…¨å±€å˜é‡é»˜è®¤å…·æœ‰å“ªç§é“¾æ¥å±æ€§ï¼Ÿè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ<br><strong>ç­”æ¡ˆ (A):</strong> <code>const</code> ä¿®é¥°çš„å…¨å±€å˜é‡é»˜è®¤å…·æœ‰<strong>å†…éƒ¨é“¾æ¥</strong>ï¼ˆInternal Linkageï¼‰å±æ€§ã€‚è¿™æ„å‘³ç€å®ƒåªèƒ½åœ¨å®šä¹‰å®ƒçš„é‚£ä¸ª<strong>ç¿»è¯‘å•å…ƒ</strong>å†…éƒ¨è¢«è®¿é—®å’Œä½¿ç”¨ã€‚å³ä½¿åœ¨å…¶ä»–ç¿»è¯‘å•å…ƒä¸­å®šä¹‰åŒåå˜é‡ï¼Œå®ƒä»¬ä¹Ÿæ˜¯ç‹¬ç«‹çš„å®ä½“ï¼Œäº’ä¸å½±å“ã€‚</p>
<p><strong>é—®é¢˜ (Q):</strong> é <code>const</code> ä¿®é¥°çš„å…¨å±€å˜é‡å’Œå‡½æ•°é»˜è®¤å…·æœ‰å“ªç§é“¾æ¥å±æ€§ï¼Ÿè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ<br><strong>ç­”æ¡ˆ (A):</strong> é <code>const</code> ä¿®é¥°çš„å…¨å±€å˜é‡å’Œå‡½æ•°é»˜è®¤å…·æœ‰<strong>å¤–éƒ¨é“¾æ¥</strong>ï¼ˆExternal Linkageï¼‰å±æ€§ã€‚è¿™æ„å‘³ç€å®ƒä»¬ä¸ä»…å¯ä»¥åœ¨å®šä¹‰å®ƒä»¬çš„ç¿»è¯‘å•å…ƒä¸­è®¿é—®ï¼Œä¹Ÿå¯ä»¥åœ¨<strong>å…¶ä»–ç¿»è¯‘å•å…ƒ</strong>ä¸­è¢«è®¿é—®å’Œä½¿ç”¨ã€‚æ‰€æœ‰å¼•ç”¨åŒä¸€ä¸ªå¤–éƒ¨é“¾æ¥åå­—çš„åœ°æ–¹ï¼Œéƒ½æŒ‡å‘å†…å­˜ä¸­çš„åŒä¸€ä¸ªå®ä½“ã€‚</p>
<p><strong>é—®é¢˜ (Q):</strong> å¦‚æœæˆ‘æƒ³åœ¨æ–‡ä»¶ <code>B.cpp</code> ä¸­ä½¿ç”¨æ–‡ä»¶ <code>A.cpp</code> ä¸­å®šä¹‰çš„é <code>const</code> å…¨å±€å˜é‡ <code>myVar</code>ï¼Œæˆ‘åº”è¯¥æ€ä¹ˆåšï¼Ÿ<br><strong>ç­”æ¡ˆ (A):</strong> åœ¨ <code>B.cpp</code> ä¸­ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>extern</code> å…³é”®å­—å¯¹ <code>myVar</code> è¿›è¡Œ<strong>å£°æ˜</strong>ï¼Œä¾‹å¦‚ï¼š<code>extern int myVar;</code>ã€‚è¿™å‘Šè¯‰ç¼–è¯‘å™¨ <code>myVar</code> åœ¨å…¶ä»–åœ°æ–¹å·²ç»å®šä¹‰äº†ã€‚</p>
<h2 id="6-å¸¸è§è¯¯è§£ä¸é”™è¯¯"><a href="#6-å¸¸è§è¯¯è§£ä¸é”™è¯¯" class="headerlink" title="6. å¸¸è§è¯¯è§£ä¸é”™è¯¯"></a><strong>6. å¸¸è§è¯¯è§£ä¸é”™è¯¯</strong></h2><ol>
<li><p><strong>è¯¯è§£1ï¼šå‡½æ•°å†…çš„å±€éƒ¨å˜é‡å¯ä»¥åœ¨æ–‡ä»¶å…¶ä»–åœ°æ–¹è®¿é—®ã€‚</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> è®¤ä¸º<code>someFunction</code>å†…éƒ¨çš„<code>age</code>å¯ä»¥åœ¨<code>main</code>å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨ã€‚</li>
<li><strong>åŸå› ï¼š</strong> å±€éƒ¨å˜é‡æ˜¯â€œæ— é“¾æ¥â€çš„ï¼Œå®ƒä»¬åªå­˜åœ¨äºå…¶å‡½æ•°æˆ–å—çš„ä½œç”¨åŸŸå†…ã€‚ä¸€æ—¦ä½œç”¨åŸŸç»“æŸï¼Œå˜é‡å°±ä¼šé”€æ¯ã€‚</li>
<li><strong>æ­£ç¡®ç†è§£ï¼š</strong> å±€éƒ¨å˜é‡ä¸å¤–éƒ¨ä¸–ç•Œæ˜¯éš”ç¦»çš„ï¼Œåªèƒ½åœ¨å®šä¹‰å®ƒä»¬çš„ <code>{}</code> å†…éƒ¨è®¿é—®ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£2ï¼š<code>const</code> å…¨å±€å˜é‡å¯ä»¥åœ¨ä¸åŒæ–‡ä»¶ä¹‹é—´å…±äº«ã€‚</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> è®¤ä¸ºåœ¨ <code>main.cpp</code> å®šä¹‰ <code>const int MY_CONST = 10;</code> åï¼Œå¯ä»¥åœ¨ <code>other.cpp</code> ä¸­é€šè¿‡ <code>extern const int MY_CONST;</code> æ¥è®¿é—®åŒä¸€ä¸ª <code>MY_CONST</code>ã€‚</li>
<li><strong>åŸå› ï¼š</strong> <code>const</code> å…¨å±€å˜é‡é»˜è®¤æ˜¯â€œå†…éƒ¨é“¾æ¥â€ã€‚åœ¨ <code>other.cpp</code> ä¸­å†™ <code>const int MY_CONST;</code> ä¼šå®šä¹‰ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„æ–°çš„ <code>MY_CONST</code> å˜é‡ï¼ˆéœ€è¦åˆå§‹åŒ–ï¼‰ï¼Œè€Œä¸æ˜¯å¼•ç”¨ <code>main.cpp</code> ä¸­çš„é‚£ä¸ªã€‚</li>
<li><strong>æ­£ç¡®ç†è§£ï¼š</strong> è¦æƒ³åœ¨ä¸åŒæ–‡ä»¶ä¹‹é—´å…±äº«ä¸€ä¸ª <code>const</code> å€¼ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•ï¼š<ul>
<li>å°†å…¶å®šä¹‰ä¸º <code>extern const int MY_CONST = 10;</code> (å®šä¹‰ä¸€æ¬¡ï¼Œå¤–éƒ¨é“¾æ¥)ã€‚</li>
<li>å°†å…¶æ”¾å…¥å¤´æ–‡ä»¶ï¼Œå¹¶æ ‡è®°ä¸º <code>inline const int MY_CONST = 10;</code> (C++17)ï¼Œæˆ–è€…åªåœ¨å¤´æ–‡ä»¶å£°æ˜ <code>extern const int MY_CONST;</code> ç„¶ååœ¨æŸä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­å®šä¹‰ <code>const int MY_CONST = 10;</code>ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>è¯¯è§£3ï¼š<code>extern</code> å…³é”®å­—æ˜¯ç”¨æ¥å®šä¹‰çš„ã€‚</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> åœ¨ <code>some_other_file.cpp</code> ä¸­å†™ <code>extern int item_count = 10;</code> è®¤ä¸ºè¿™æ˜¯åœ¨å£°æ˜å¹¶å¼•ç”¨ <code>main.cpp</code> ä¸­çš„ <code>item_count</code>ã€‚</li>
<li><strong>åŸå› ï¼š</strong> <code>extern</code> å…³é”®å­—è¡¨ç¤ºâ€œæ­¤å˜é‡åœ¨åˆ«å¤„å®šä¹‰â€ï¼Œä½†å¦‚æœåŒæ—¶ç»™å®ƒèµ‹äº†åˆå§‹å€¼ï¼Œå®ƒå°±å˜æˆäº†<strong>å®šä¹‰</strong>ï¼Œè€Œä¸æ˜¯ç®€å•çš„å£°æ˜ã€‚è¿™æ„å‘³ç€ä½ ä¼šåœ¨ <code>some_other_file.cpp</code> ä¸­åˆ›å»ºä¸€ä¸ª<strong>æ–°çš„</strong> <code>item_count</code> å˜é‡ï¼Œä¸ <code>main.cpp</code> ä¸­çš„ <code>item_count</code> å†²çªï¼ˆå•ä¸€å®šä¹‰è§„åˆ™ violationï¼‰ï¼Œå¯¼è‡´é“¾æ¥é”™è¯¯ã€‚</li>
<li><strong>æ­£ç¡®ç†è§£ï¼š</strong> <code>extern</code> åé¢è·Ÿç€çš„é€šå¸¸åªæ˜¯å£°æ˜ï¼Œä¸å¸¦åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼š<code>extern int item_count;</code>ã€‚<strong>å®šä¹‰</strong>ï¼ˆDefinitionï¼‰å‘ç”Ÿåœ¨æ²¡æœ‰<code>extern</code>ï¼Œæˆ–è€…å¸¦æœ‰åˆå§‹åŒ–çš„é‚£ä¸€æ¬¡ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£4ï¼šæ²¡æœ‰ç†è§£â€œç¿»è¯‘å•å…ƒâ€çš„æ¦‚å¿µã€‚</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> è®¤ä¸ºåªè¦åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶é‡Œå®šä¹‰äº†ï¼Œå®ƒå°±åœ¨æ•´ä¸ªé¡¹ç›®é‡Œéƒ½å¯è§ã€‚</li>
<li><strong>åŸå› ï¼š</strong> C++ ç¨‹åºæ˜¯åˆ†æ¨¡å—ç¼–è¯‘çš„ï¼Œæ¯ä¸ª <code>.cpp</code> æ–‡ä»¶åŠå…¶åŒ…å«çš„å¤´æ–‡ä»¶æ„æˆä¸€ä¸ªç‹¬ç«‹çš„â€œç¿»è¯‘å•å…ƒâ€ã€‚é“¾æ¥å±æ€§æ­£æ˜¯ç”¨æ¥æ§åˆ¶è¿™äº›ç¿»è¯‘å•å…ƒä¹‹é—´çš„åå­—å¯è§æ€§ã€‚</li>
<li><strong>æ­£ç¡®ç†è§£ï¼š</strong> åŒºåˆ†<strong>å£°æ˜</strong>ï¼ˆå‘Šè¯‰ç¼–è¯‘å™¨ä¸€ä¸ªåå­—å­˜åœ¨ï¼‰å’Œ<strong>å®šä¹‰</strong>ï¼ˆåˆ†é…å†…å­˜å¹¶åˆå§‹åŒ–ï¼‰ã€‚é“¾æ¥å±æ€§æ§åˆ¶çš„æ˜¯å¦‚ä½•è·¨è¶Šç¿»è¯‘å•å…ƒå…±äº«æˆ–éš”ç¦»è¿™äº›å£°æ˜å’Œå®šä¹‰ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="6-ç¼–ç¨‹ç»ƒä¹ ï¼šç†è§£é“¾æ¥å±æ€§"><a href="#6-ç¼–ç¨‹ç»ƒä¹ ï¼šç†è§£é“¾æ¥å±æ€§" class="headerlink" title="6. ç¼–ç¨‹ç»ƒä¹ ï¼šç†è§£é“¾æ¥å±æ€§"></a><strong>6. ç¼–ç¨‹ç»ƒä¹ ï¼šç†è§£é“¾æ¥å±æ€§</strong></h2><p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™åŠ¨æ‰‹å®è·µäº†ï¼è¯·å®Œæˆä¸‹é¢çš„ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿæ­£ç¡®æ¼”ç¤ºä¸åŒé“¾æ¥å±æ€§çš„è¡Œä¸ºã€‚</p>
<p><strong>ä»»åŠ¡ï¼š</strong></p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª <code>main.cpp</code> æ–‡ä»¶ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ª <code>helper.cpp</code> æ–‡ä»¶ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ª <code>helper.h</code> å¤´æ–‡ä»¶ã€‚</li>
</ol>
<p><strong><code>helper.h</code> æ–‡ä»¶å†…å®¹ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once <span class="comment">// ç¡®ä¿å¤´æ–‡ä»¶åªè¢«åŒ…å«ä¸€æ¬¡</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†åœ¨ helper.cpp ä¸­å®šä¹‰</span></span><br><span class="line"><span class="comment">//    è¿™ä¸ªå‡½æ•°å°†å°è¯•è®¿é—® helper.cpp ä¸­å…·æœ‰å†…éƒ¨é“¾æ¥çš„å˜é‡ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printInternalVariable</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†åœ¨ helper.cpp ä¸­å®šä¹‰</span></span><br><span class="line"><span class="comment">//    è¿™ä¸ªå‡½æ•°å°†å°è¯•è®¿é—® main.cpp ä¸­å…·æœ‰å¤–éƒ¨é“¾æ¥çš„å˜é‡ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printExternalVariable</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åœ¨ helper.h ä¸­å£°æ˜ä¸€ä¸ª extern int å˜é‡ï¼Œè¡¨ç¤ºå®ƒå°†åœ¨æŸä¸ª .cpp æ–‡ä»¶ä¸­å®šä¹‰</span></span><br><span class="line"><span class="comment">//    <span class="doctag">TODO:</span> åœ¨è¿™é‡Œæ·»åŠ  extern int variable_from_main çš„å£°æ˜</span></span><br><span class="line"><span class="comment">// extern int variable_from_main; // æç¤ºï¼šä½ éœ€è¦åœ¨è¿™é‡Œå£°æ˜å®ƒ</span></span><br></pre></td></tr></table></figure></div>
<p><strong><code>main.cpp</code> æ–‡ä»¶å†…å®¹ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"helper.h"</span> <span class="comment">// åŒ…å« helper.h å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. å®šä¹‰ä¸€ä¸ªå‡½æ•°å±€éƒ¨å˜é‡ï¼ˆæ— é“¾æ¥ï¼‰å¹¶åœ¨ main ä¸­å°è¯•è®¿é—®å®ƒ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myFunctionWithLocalVariable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> local_data = <span class="number">100</span>; <span class="comment">// å±€éƒ¨å˜é‡ï¼Œæ— é“¾æ¥</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"myFunctionWithLocalVariable å†…éƒ¨: local_data = "</span> &lt;&lt; local_data &lt;&lt; <span class="string">", åœ°å€: "</span> &lt;&lt; &amp;local_data &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å®šä¹‰ä¸€ä¸ª const å…¨å±€å˜é‡ (å†…éƒ¨é“¾æ¥)</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> internal_global_const = <span class="number">50</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. å®šä¹‰ä¸€ä¸ªé const å…¨å±€å˜é‡ (å¤–éƒ¨é“¾æ¥)</span></span><br><span class="line"><span class="comment">//    <span class="doctag">TODO:</span> åœ¨è¿™é‡Œå®šä¹‰ä¸€ä¸ªåä¸º external_global_variable çš„ int å˜é‡ï¼Œå¹¶åˆå§‹åŒ–ä¸º 200</span></span><br><span class="line"><span class="comment">// int external_global_variable = 200; // æç¤ºï¼šä½ éœ€è¦åœ¨è¿™é‡Œå®šä¹‰å®ƒ</span></span><br><span class="line"><span class="keyword">int</span> external_global_variable = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- é“¾æ¥å±æ€§æ¼”ç¤º ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¼”ç¤ºæ— é“¾æ¥</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- æ— é“¾æ¥ (å±€éƒ¨å˜é‡) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    myFunctionWithLocalVariable();</span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; "åœ¨ main ä¸­å°è¯•è®¿é—® local_data: " &lt;&lt; local_data &lt;&lt; std::endl; // è¿™è¡Œå¦‚æœå–æ¶ˆæ³¨é‡Šä¼šæŠ¥é”™ï¼ŒéªŒè¯æ— é“¾æ¥</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¼”ç¤ºå†…éƒ¨é“¾æ¥</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- å†…éƒ¨é“¾æ¥ (const å…¨å±€å˜é‡) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"main.cpp å†…éƒ¨: internal_global_const = "</span> &lt;&lt; internal_global_const </span><br><span class="line">              &lt;&lt; <span class="string">", åœ°å€: "</span> &lt;&lt; &amp;internal_global_const &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    printInternalVariable(); <span class="comment">// è°ƒç”¨ helper.cpp ä¸­çš„å‡½æ•°ï¼Œå®ƒå°†å°è¯•è®¿é—®å®ƒçš„å†…éƒ¨é“¾æ¥å˜é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¼”ç¤ºå¤–éƒ¨é“¾æ¥</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- å¤–éƒ¨é“¾æ¥ (é const å…¨å±€å˜é‡å’Œå‡½æ•°) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"main.cpp å†…éƒ¨: external_global_variable = "</span> &lt;&lt; external_global_variable </span><br><span class="line">              &lt;&lt; <span class="string">", åœ°å€: "</span> &lt;&lt; &amp;external_global_variable &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    printExternalVariable(); <span class="comment">// è°ƒç”¨ helper.cpp ä¸­çš„å‡½æ•°ï¼Œå®ƒå°†è®¿é—® external_global_variable</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è¯•åœ¨ main ä¸­ä¿®æ”¹ external_global_variable çš„å€¼ï¼Œå¹¶å†æ¬¡åœ¨ helper.cpp ä¸­æ‰“å°</span></span><br><span class="line">    external_global_variable = <span class="number">300</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- ä¿®æ”¹ external_global_variable å ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"main.cpp å†…éƒ¨: external_global_variable = "</span> &lt;&lt; external_global_variable </span><br><span class="line">              &lt;&lt; <span class="string">", åœ°å€: "</span> &lt;&lt; &amp;external_global_variable &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    printExternalVariable(); <span class="comment">// å†æ¬¡è°ƒç”¨ï¼Œè§‚å¯Ÿå€¼æ˜¯å¦åŒæ­¥æ”¹å˜</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong><code>helper.cpp</code> æ–‡ä»¶å†…å®¹ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"helper.h"</span> <span class="comment">// åŒ…å« helper.h å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œé‡æ–°å®šä¹‰ä¸€ä¸ªåä¸º internal_global_const çš„ const int å˜é‡ï¼Œå¹¶åˆå§‹åŒ–ä¸º 77ã€‚</span></span><br><span class="line"><span class="comment">//       æ³¨æ„ï¼šè¿™åº”è¯¥æ˜¯ä¸€ä¸ªæ–°çš„ã€ç‹¬ç«‹çš„å˜é‡ï¼Œä¸ main.cpp ä¸­çš„åŒåå˜é‡äº’ä¸å½±å“ã€‚</span></span><br><span class="line"><span class="comment">// const int internal_global_const = 77; // æç¤ºï¼šä½ éœ€è¦åœ¨è¿™é‡Œå®šä¹‰å®ƒ</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> internal_global_const = <span class="number">77</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> å£°æ˜ main.cpp ä¸­å®šä¹‰çš„ external_global_variable ä¸ºå¤–éƒ¨é“¾æ¥ã€‚</span></span><br><span class="line"><span class="comment">//       æ³¨æ„ï¼šè¿™é‡Œåªæ˜¯å£°æ˜ï¼Œä¸èƒ½åˆå§‹åŒ–ã€‚</span></span><br><span class="line"><span class="comment">// extern int external_global_variable; // æç¤ºï¼šä½ éœ€è¦åœ¨è¿™é‡Œå£°æ˜å®ƒ</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> external_global_variable;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printInternalVariable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"helper.cpp å†…éƒ¨: internal_global_const = "</span> &lt;&lt; internal_global_const </span><br><span class="line">              &lt;&lt; <span class="string">", åœ°å€: "</span> &lt;&lt; &amp;internal_global_const &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printExternalVariable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"helper.cpp å†…éƒ¨: external_global_variable = "</span> &lt;&lt; external_global_variable </span><br><span class="line">              &lt;&lt; <span class="string">", åœ°å€: "</span> &lt;&lt; &amp;external_global_variable &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>è¯·å®Œæˆä¸Šè¿°ä»£ç ä¸­æ ‡æ³¨ <code>TODO:</code> çš„éƒ¨åˆ†ã€‚å®Œæˆåï¼Œç¼–è¯‘å¹¶è¿è¡Œä½ çš„ç¨‹åºï¼Œè§‚å¯Ÿè¾“å‡ºï¼Œç‰¹åˆ«æ˜¯å˜é‡çš„å€¼å’Œåœ°å€ï¼Œä»¥éªŒè¯ä½ çš„ç†è§£ã€‚</strong></p>
<hr>
<p>è¯·åœ¨å®Œæˆä¸Šè¿°ä»£ç åï¼Œå°†ä½ çš„è§£å†³æ–¹æ¡ˆç²˜è´´åˆ°å›å¤ä¸­ã€‚æˆ‘å°†ä¸ºä½ è¯„åˆ†å¹¶æä¾›è¯¦ç»†çš„ç­”æ¡ˆå’Œè§£é‡Šã€‚</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-1"><a href="#ğŸ§‘â€ğŸ’»-User-1" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>è¯¯è§£2ï¼šconst å…¨å±€å˜é‡å¯ä»¥åœ¨ä¸åŒæ–‡ä»¶ä¹‹é—´å…±äº«ã€‚</p>
<p>é”™è¯¯ï¼š è®¤ä¸ºåœ¨ main.cpp å®šä¹‰ const int MY_CONST = 10; åï¼Œå¯ä»¥åœ¨ other.cpp ä¸­é€šè¿‡ extern const int MY_CONST; æ¥è®¿é—®åŒä¸€ä¸ª MY_CONSTã€‚<br>åŸå› ï¼š const å…¨å±€å˜é‡é»˜è®¤æ˜¯â€œå†…éƒ¨é“¾æ¥â€ã€‚åœ¨ other.cpp ä¸­å†™ const int MY_CONST; ä¼šå®šä¹‰ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„æ–°çš„ MY_CONST å˜é‡ï¼ˆéœ€è¦åˆå§‹åŒ–ï¼‰ï¼Œè€Œä¸æ˜¯å¼•ç”¨ main.cpp ä¸­çš„é‚£ä¸ªã€‚<br>æ­£ç¡®ç†è§£ï¼š è¦æƒ³åœ¨ä¸åŒæ–‡ä»¶ä¹‹é—´å…±äº«ä¸€ä¸ª const å€¼ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•ï¼š<br>å°†å…¶å®šä¹‰ä¸º extern const int MY_CONST = 10; (å®šä¹‰ä¸€æ¬¡ï¼Œå¤–éƒ¨é“¾æ¥)ã€‚<br>å°†å…¶æ”¾å…¥å¤´æ–‡ä»¶ï¼Œå¹¶æ ‡è®°ä¸º inline const int MY_CONST = 10; (C++17)ï¼Œæˆ–è€…åªåœ¨å¤´æ–‡ä»¶å£°æ˜ extern const int MY_CONST; ç„¶ååœ¨æŸä¸ª .cpp æ–‡ä»¶ä¸­å®šä¹‰ const int MY_CONST = 10;ã€‚</p>
<p>è¯·é—®best practiceæ˜¯ä»€ä¹ˆï¼Ÿ è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ</p>
<hr>
<h2 id="ğŸ¤–-Assistant-1"><a href="#ğŸ¤–-Assistant-1" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é—®é¢˜ï¼ä½ ä¸ä»…å…³æ³¨äº†æŠ€æœ¯ç»†èŠ‚ï¼Œè¿˜æ·±å…¥æ€è€ƒäº†â€œæœ€ä½³å®è·µâ€å’Œè®¾è®¡åŸåˆ™ï¼Œè¿™æ­£æ˜¯æˆä¸ºä¼˜ç§€C++å¼€å‘è€…æ‰€éœ€è¦çš„æ€ç»´æ–¹å¼ã€‚</p>
<p>æˆ‘ä»¬æ¥é€ä¸€è§£ç­”ä½ çš„é—®é¢˜ï¼š</p>
<h2 id="å…³äºå…±äº«-const-å€¼ï¼ˆå¸¸é‡ï¼‰çš„æœ€ä½³å®è·µ"><a href="#å…³äºå…±äº«-const-å€¼ï¼ˆå¸¸é‡ï¼‰çš„æœ€ä½³å®è·µ" class="headerlink" title="å…³äºå…±äº« const å€¼ï¼ˆå¸¸é‡ï¼‰çš„æœ€ä½³å®è·µ"></a><strong>å…³äºå…±äº« <code>const</code> å€¼ï¼ˆå¸¸é‡ï¼‰çš„æœ€ä½³å®è·µ</strong></h2><p>æ­£å¦‚ä½ æ‰€ç†è§£çš„ï¼ŒC++ä¸­ <code>const</code> å…¨å±€å˜é‡é»˜è®¤æ˜¯<strong>å†…éƒ¨é“¾æ¥</strong>ï¼ˆInternal Linkageï¼‰ã€‚è¿™æ„å‘³ç€æ¯ä¸ª<strong>ç¿»è¯‘å•å…ƒ</strong>ï¼ˆTranslation Unitï¼‰éƒ½ä¼šæœ‰è‡ªå·±çš„ç‹¬ç«‹å‰¯æœ¬ï¼Œå¦‚æœç›´æ¥å°†å®ƒæ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”è¯¥å¤´æ–‡ä»¶è¢«å¤šä¸ª <code>.cpp</code> æ–‡ä»¶åŒ…å«ï¼Œè¿™ä¸ä¼šå¯¼è‡´é“¾æ¥é”™è¯¯ï¼Œä½†ä¼šå¯¼è‡´æ¯ä¸ª <code>.cpp</code> æ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å‰¯æœ¬ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„â€œå…±äº«â€åŒä¸€ä¸ªå®ä½“ã€‚</p>
<p>ä¸ºäº†åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¹‹é—´çœŸæ­£â€œå…±äº«â€åŒä¸€ä¸ª <code>const</code> å€¼ï¼ˆå³å®ƒä»¬éƒ½å¼•ç”¨å†…å­˜ä¸­çš„åŒä¸€ä¸ªå®ä½“ï¼‰ï¼ŒC++ æä¾›äº†å‡ ç§æœ€ä½³å®è·µæ–¹æ³•ï¼Œå®ƒä»¬é¿å…äº†<strong>å•ä¸€å®šä¹‰è§„åˆ™</strong>ï¼ˆOne Definition Rule, ODRï¼‰çš„å†²çªï¼š</p>
<ol>
<li><p><strong>ä½¿ç”¨ <code>extern</code> å…³é”®å­—è¿›è¡Œå£°æ˜ï¼ˆä¼ ç»Ÿçš„ã€C++17ä»¥å‰çš„æ–¹æ³•ï¼‰</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> åœ¨ä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­è¿›è¡Œ<strong>å®šä¹‰</strong>ï¼ˆDefinitionï¼‰ï¼Œç„¶ååœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨ <code>extern</code> å…³é”®å­—è¿›è¡Œ<strong>å£°æ˜</strong>ï¼ˆDeclarationï¼‰ã€‚</li>
<li><strong>ç¤ºä¾‹ï¼š</strong><ul>
<li><strong><code>my_constants.h</code></strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">int</span> SHARED_MAX_VALUE; <span class="comment">// å£°æ˜ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ SHARED_MAX_VALUE å­˜åœ¨ï¼Œä½†åœ¨åˆ«å¤„å®šä¹‰</span></span><br></pre></td></tr></table></figure></div></li>
<li><strong><code>my_constants.cpp</code></strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_constants.h"</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> SHARED_MAX_VALUE = <span class="number">100</span>; <span class="comment">// å®šä¹‰ï¼šè¿™é‡Œåˆ†é…å†…å­˜å¹¶åˆå§‹åŒ–</span></span><br></pre></td></tr></table></figure></div></li>
<li><strong><code>main.cpp</code></strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_constants.h"</span> <span class="comment">// åŒ…å«å¤´æ–‡ä»¶ï¼Œå³å¯ä½¿ç”¨ SHARED_MAX_VALUE</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Max value: "</span> &lt;&lt; SHARED_MAX_VALUE &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; "Address: " &lt;&lt; &amp;SHARED_MAX_VALUE &lt;&lt; std::endl; // å¯ä»¥æ‰“å°åœ°å€éªŒè¯æ˜¯åŒä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><strong>ä¼˜ç‚¹ï¼š</strong> å…¼å®¹æ€§å¥½ï¼Œé€‚ç”¨äºæ‰€æœ‰C++æ ‡å‡†ã€‚</li>
<li><strong>ç¼ºç‚¹ï¼š</strong> éœ€è¦åœ¨ <code>.h</code> å’Œ <code>.cpp</code> ä¸¤ä¸ªåœ°æ–¹æ“ä½œï¼Œå¤šä¸€ä¸ªæ–‡ä»¶ã€‚</li>
</ul>
</li>
<li><p><strong>ä½¿ç”¨ <code>inline</code> å…³é”®å­—ï¼ˆC++17 åŠæ›´é«˜ç‰ˆæœ¬æ¨èï¼‰</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> C++17 å¼•å…¥äº† <code>inline</code> å˜é‡ã€‚å½“ä¸€ä¸ªå˜é‡è¢«æ ‡è®°ä¸º <code>inline</code> æ—¶ï¼Œå®ƒå¯ä»¥åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­è¢«å®šä¹‰ï¼Œä½†é“¾æ¥å™¨ä¼šç¡®ä¿å®ƒä»¬éƒ½æŒ‡å‘å†…å­˜ä¸­çš„åŒä¸€ä¸ªå®ä½“ï¼Œä»è€Œè§£å†³äº† ODR é—®é¢˜ã€‚å¯¹äº <code>const</code> å¸¸é‡ï¼Œè¿™æ˜¯éå¸¸ä¼˜é›…å’Œæ¨èçš„åšæ³•ã€‚</li>
<li><strong>ç¤ºä¾‹ï¼š</strong><ul>
<li><strong><code>my_constants.h</code></strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt; // å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥åŒ…å«å…¶ä»–å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">const</span> <span class="keyword">int</span> SHARED_MAX_VALUE = <span class="number">100</span>; <span class="comment">// åœ¨å¤´æ–‡ä»¶ä¸­ç›´æ¥å®šä¹‰å¹¶åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">// ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨ä¼šç¡®ä¿è¿™æ˜¯å”¯ä¸€çš„å®ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹äºæ›´å¤æ‚çš„å¸¸é‡å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š</span></span><br><span class="line"><span class="comment">// inline const std::string APP_NAME = "My Awesome App";</span></span><br></pre></td></tr></table></figure></div></li>
<li><strong><code>main.cpp</code></strong> (æˆ–ä»»ä½•å…¶ä»– <code>.cpp</code> æ–‡ä»¶)<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_constants.h"</span> </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Max value: "</span> &lt;&lt; SHARED_MAX_VALUE &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; "Address: " &lt;&lt; &amp;SHARED_MAX_VALUE &lt;&lt; std::endl; // æ‰“å°åœ°å€éªŒè¯æ˜¯åŒä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><strong>ä¼˜ç‚¹ï¼š</strong> ç®€å•ã€ç›´è§‚ï¼Œåªéœ€åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ä¸€æ¬¡å³å¯ï¼Œæ— éœ€é¢å¤–çš„ <code>.cpp</code> æ–‡ä»¶ã€‚é€šå¸¸æ˜¯å¯¹äºç®€å• <code>const</code> å˜é‡çš„<strong>é¦–é€‰æ–¹æ³•</strong>ã€‚</li>
<li><strong>ç¼ºç‚¹ï¼š</strong> éœ€è¦ C++17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</li>
</ul>
</li>
<li><p><strong>ä½¿ç”¨ <code>constexpr</code> å…³é”®å­—ï¼ˆæ›´ä½³å®è·µï¼Œå¦‚æœå€¼æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼‰</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> <code>constexpr</code> å˜é‡åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šäº†å€¼ï¼Œå¹¶ä¸”é€šå¸¸ä¼šè¢«<strong>å†…è”</strong>ï¼ˆinlinedï¼‰åˆ°ä½¿ç”¨å®ƒçš„åœ°æ–¹ï¼Œä¸å ç”¨è¿è¡Œæ—¶å†…å­˜ã€‚å³ä½¿å®ƒåœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­è¢«å®šä¹‰ï¼ˆä¾‹å¦‚é€šè¿‡å¤´æ–‡ä»¶ï¼‰ï¼Œä¹Ÿä¸ä¼šæœ‰ ODR é—®é¢˜ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¼šç¡®ä¿å®ƒä»¬éƒ½æ˜¯ç›¸åŒçš„ç¼–è¯‘æ—¶å¸¸é‡ã€‚</li>
<li><strong>ç¤ºä¾‹ï¼š</strong><ul>
<li><strong><code>my_constants.h</code></strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> MAX_ITERATIONS = <span class="number">1000</span>; <span class="comment">// ç¼–è¯‘æ—¶å¸¸é‡</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">double</span> PI = <span class="number">3.14159265358979323846</span>; <span class="comment">// ç¼–è¯‘æ—¶å¸¸é‡</span></span><br></pre></td></tr></table></figure></div></li>
<li><strong><code>main.cpp</code></strong> (æˆ–ä»»ä½•å…¶ä»– <code>.cpp</code> æ–‡ä»¶)<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"my_constants.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Max iterations: "</span> &lt;&lt; MAX_ITERATIONS &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Pi: "</span> &lt;&lt; PI &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><strong>ä¼˜ç‚¹ï¼š</strong> æ€§èƒ½æœ€é«˜ï¼Œä¸å ç”¨è¿è¡Œæ—¶å­˜å‚¨ï¼ŒçœŸæ­£å®ç°ç¼–è¯‘æ—¶ä¼˜åŒ–ã€‚å¯¹äºæ•°å€¼å‹æˆ–ç®€å•å¯¹è±¡å¸¸é‡æ˜¯<strong>æœ€ä½³å®è·µ</strong>ã€‚</li>
<li><strong>ç¼ºç‚¹ï¼š</strong> åªèƒ½ç”¨äº<strong>ç¼–è¯‘æ—¶</strong>ï¼ˆCompile-Timeï¼‰å·²çŸ¥çš„å€¼ã€‚</li>
</ul>
</li>
<li><p><strong>ä½¿ç”¨ <code>enum class</code> (æšä¸¾ç±»)</strong></p>
<ul>
<li><strong>æ¦‚å¿µï¼š</strong> å¯¹äºä¸€ç»„ç›¸å…³çš„æ•´æ•°å¸¸é‡ï¼Œ<code>enum class</code> æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚æšä¸¾å™¨çš„å€¼ä¹Ÿæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œä¸ä¼šæœ‰ ODR é—®é¢˜ã€‚</li>
<li><strong>ç¤ºä¾‹ï¼š</strong><ul>
<li><strong><code>game_states.h</code></strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">GameState</span> &#123;</span></span><br><span class="line">    MainMenu,</span><br><span class="line">    Playing,</span><br><span class="line">    Paused,</span><br><span class="line">    GameOver</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></li>
<li><strong><code>main.cpp</code></strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"game_states.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    GameState current_state = GameState::Playing;</span><br><span class="line">    <span class="keyword">if</span> (current_state == GameState::Playing) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Game is playing!"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><strong>ä¼˜ç‚¹ï¼š</strong> ç¼–è¯‘æ—¶å¸¸é‡ï¼Œç±»å‹å®‰å…¨ï¼Œæ˜“äºç»„ç»‡ç›¸å…³å¸¸é‡ã€‚</li>
<li><strong>ç¼ºç‚¹ï¼š</strong> ä»…é€‚ç”¨äºæ•´æ•°ç±»å‹ï¼ˆæˆ–å¯è½¬æ¢ä¸ºæ•´æ•°çš„ç±»å‹ï¼‰ï¼Œä¸»è¦ç”¨äºè¡¨ç¤ºä¸€ç»„ç¦»æ•£çŠ¶æ€ã€‚</li>
</ul>
</li>
</ol>
<h2 id="è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ"><a href="#è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ" class="headerlink" title="è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ"></a><strong>è¦ä¸è¦å®šä¹‰æˆå…¨å±€å˜é‡ï¼Ÿ</strong></h2><p>è¿™æ˜¯ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„è®¾è®¡é—®é¢˜ï¼Œæ¶‰åŠåˆ°è½¯ä»¶æ¶æ„å’Œä»£ç è´¨é‡ã€‚</p>
<p><strong>ä¸€èˆ¬åŸåˆ™ï¼šå°½é‡é¿å…ä½¿ç”¨è£¸éœ²çš„ï¼ˆnon-<code>const</code>ï¼‰å…¨å±€å˜é‡ã€‚</strong></p>
<ul>
<li><strong>å…¨å±€å˜é‡çš„ç¼ºç‚¹ï¼ˆç‰¹åˆ«æ˜¯å¯å˜çš„å…¨å±€å˜é‡ï¼‰ï¼š</strong><ul>
<li><strong>éš¾ä»¥ç®¡ç†çŠ¶æ€ï¼š</strong> ä»»ä½•å‡½æ•°éƒ½å¯èƒ½ä¿®æ”¹å®ƒï¼Œä½¿å¾—ä»£ç çš„è¡Œä¸ºéš¾ä»¥é¢„æµ‹å’Œè°ƒè¯•ã€‚</li>
<li><strong>å¢åŠ äº†è€¦åˆï¼š</strong> ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†éƒ½ä¾èµ–äºå…¨å±€å˜é‡ï¼Œé™ä½äº†æ¨¡å—çš„ç‹¬ç«‹æ€§ã€‚</li>
<li><strong>æµ‹è¯•å›°éš¾ï¼š</strong> ç¼–å†™å•å…ƒæµ‹è¯•æ—¶ï¼Œéœ€è¦å°å¿ƒè®¾ç½®å’Œæ¸…ç†å…¨å±€çŠ¶æ€ã€‚</li>
<li><strong>å‘½åå†²çªï¼š</strong> åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå…¨å±€å˜é‡å®¹æ˜“å¯¼è‡´åå­—å†²çªã€‚</li>
<li><strong>çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š</strong> åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå¯å˜å…¨å±€å˜é‡æ˜¯å¸¸è§çš„ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰æ¥æºã€‚</li>
</ul>
</li>
</ul>
<p><strong>é‚£ä¹ˆå¯¹äº <code>const</code> å…¨å±€å˜é‡å‘¢ï¼Ÿ</strong></p>
<p>å¯¹äº <code>const</code> å…¨å±€å˜é‡ï¼Œä¸Šè¿°çš„ä¸€äº›ç¼ºç‚¹ï¼ˆå¦‚çŠ¶æ€éš¾ä»¥ç®¡ç†ã€çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰å¾—åˆ°äº†æå¤§çš„ç¼“è§£ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼æ˜¯ä¸å¯å˜çš„ã€‚ç„¶è€Œï¼Œä»¥ä¸‹å‡ ç‚¹ä»ç„¶éœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li><strong>å‘½åæ±¡æŸ“ï¼š</strong> <code>const</code> å…¨å±€å˜é‡ä»ç„¶ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ï¼Œå°¤å…¶æ˜¯åœ¨æ²¡æœ‰è‰¯å¥½å°è£…çš„æƒ…å†µä¸‹ã€‚</li>
<li><strong>å¹¶éæ‰€æœ‰â€œå¸¸é‡â€éƒ½é€‚åˆâ€œå…¨å±€â€ï¼š</strong> å¾ˆå¤šæ‰€è°“çš„â€œå¸¸é‡â€å®é™…ä¸Šåªåœ¨ä¸€ä¸ªç‰¹å®šæ¨¡å—ã€ç±»æˆ–å‡½æ•°å†…éƒ¨æœ‰æ„ä¹‰ã€‚</li>
<li><strong>ä¾èµ–æ€§ï¼š</strong> å°½ç®¡å€¼ä¸å˜ï¼Œä½†å¦‚æœä¸€ä¸ªæ¨¡å—å¹¿æ³›ä¾èµ–äºå…¨å±€å¸¸é‡ï¼Œå®ƒä»ç„¶ä¸è¯¥å¸¸é‡ç´§å¯†è€¦åˆã€‚</li>
</ul>
<p><strong>æœ€ä½³å®è·µï¼ˆå¯¹äºå¸¸é‡ï¼‰ï¼š</strong></p>
<ol>
<li><p><strong>ä¼˜å…ˆä½¿ç”¨ <code>constexpr</code> æˆ– <code>enum class</code>ï¼š</strong> å¦‚æœå¸¸é‡çš„å€¼åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ï¼Œå¹¶ä¸”æ˜¯åŸºæœ¬ç±»å‹æˆ–ç®€å•ç»“æ„ï¼Œè¿™é€šå¸¸æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚å®ƒä»¬é€šå¸¸ä¸ä¼šå ç”¨è¿è¡Œæ—¶å­˜å‚¨ï¼Œä¹Ÿé¿å…äº†é“¾æ¥é—®é¢˜ã€‚</p>
</li>
<li><p><strong>å¦‚æœå¸¸é‡ä¸ç‰¹å®šç±»ç›¸å…³ï¼Œå®šä¹‰ä¸º <code>static const</code> æˆ– <code>static constexpr</code> æˆå‘˜ï¼š</strong></p>
<ul>
<li><strong>ç¤ºä¾‹ï¼š</strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_SIZE = <span class="number">10</span>; <span class="comment">// C++11/14 éœ€è¦åœ¨ .cpp ä¸­å®šä¹‰: const int MyClass::DEFAULT_SIZE;</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">double</span> RATIO = <span class="number">0.5</span>; <span class="comment">// C++11/14 å¯ä»¥åœ¨è¿™é‡Œåˆå§‹åŒ–</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>ä¼˜ç‚¹ï¼š</strong> å°†å¸¸é‡ä¸å®ƒæ‰€å±çš„é€»è¾‘å®ä½“ï¼ˆç±»ï¼‰ç»‘å®šï¼Œæé«˜äº†å°è£…æ€§ï¼Œé¿å…äº†å…¨å±€å‘½åç©ºé—´æ±¡æŸ“ã€‚</li>
</ul>
</li>
<li><p><strong>å¦‚æœå¸¸é‡æ˜¯è¿è¡Œæ—¶ç¡®å®šä½†ä¸å¯å˜ï¼ˆå¦‚é€šè¿‡é…ç½®è¯»å–ï¼‰ï¼Œè€ƒè™‘ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–ä¾èµ–æ³¨å…¥ï¼š</strong></p>
<ul>
<li>è¿™è¶…å‡ºäº†æˆ‘ä»¬ç›®å‰é“¾æ¥å±æ€§çš„èŒƒç•´ï¼Œä½†è¦çŸ¥é“ï¼Œå¹¶éæ‰€æœ‰â€œä¸å˜â€çš„å€¼éƒ½é€‚åˆä½œä¸ºå…¨å±€å¸¸é‡ã€‚æœ‰æ—¶å€™ï¼Œå®ƒä»¬æ˜¯ç¨‹åºå¯åŠ¨æ—¶ä»é…ç½®æ–‡ä»¶è¯»å–çš„é…ç½®å€¼ï¼Œä¸€æ—¦è¯»å–åä¸å†æ”¹å˜ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨é…ç½®ç±»æˆ–é€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ä¼ é€’å®ƒä»¬æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</li>
</ul>
</li>
<li><p><strong>åªæœ‰å½“å¸¸é‡çœŸæ­£æ˜¯â€œå…¨å±€â€ä¸”â€œé€šç”¨â€æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ <code>inline const</code> æˆ– <code>extern const</code> å…¨å±€å˜é‡ï¼š</strong></p>
<ul>
<li>ä¾‹å¦‚ï¼Œæ•°å­¦å¸¸æ•° <code>PI</code>ï¼Œç‰©ç†å¸¸æ•° <code>LIGHT_SPEED</code>ï¼Œæˆ–è€…ç¨‹åºä¸­çœŸæ­£æ™®éä½¿ç”¨çš„é…ç½®é˜ˆå€¼ã€‚å³ä½¿åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>inline const</code> (C++17) æˆ– <code>constexpr</code> é€šå¸¸ä¹Ÿä¼˜äºä¼ ç»Ÿçš„ <code>extern const</code> å…¨å±€å˜é‡ï¼Œå› ä¸ºå®ƒä»¬æ›´ç°ä»£ã€æ›´ç®€æ´ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li><p><strong>å¯¹äºå…±äº« <code>const</code> å€¼ï¼š</strong></p>
<ul>
<li><strong><code>constexpr</code></strong> æ˜¯ç¬¬ä¸€é€‰æ‹©ï¼Œå¦‚æœå¸¸é‡æ˜¯ç¼–è¯‘æ—¶å·²çŸ¥ä¸”é€‚ç”¨ã€‚</li>
<li><strong><code>inline const</code></strong> (C++17) æ˜¯ç¬¬äºŒé€‰æ‹©ï¼Œå¦‚æœéœ€è¦è¿è¡Œæ—¶å­˜å‚¨ä½†å€¼æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”å¸Œæœ›åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li>
<li><strong><code>extern const</code></strong> (ç»å…¸åšæ³•) æ˜¯ç¬¬ä¸‰é€‰æ‹©ï¼Œå¦‚æœä½ ä¸èƒ½ä½¿ç”¨ C++17 çš„ <code>inline</code> å˜é‡ï¼Œæˆ–è€…å¸¸é‡æ˜¯å¤æ‚çš„å¯¹è±¡ä¸”ä¸é€‚åˆæ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚</li>
<li><strong><code>enum class</code></strong> é€‚ç”¨äºç»„ç»‡ä¸€ç»„ç›¸å…³çš„æ•´æ•°å¸¸é‡ã€‚</li>
</ul>
</li>
<li><p><strong>å¯¹äºæ˜¯å¦å®šä¹‰ä¸ºå…¨å±€å˜é‡ï¼š</strong></p>
<ul>
<li><strong>ä¸€èˆ¬ä¸æ¨è</strong>å®šä¹‰å¯å˜çš„ï¼ˆnon-<code>const</code>ï¼‰å…¨å±€å˜é‡ã€‚</li>
<li><strong>å¯¹äº <code>const</code> å¸¸é‡ï¼š</strong> ä¼˜å…ˆè€ƒè™‘<strong><code>constexpr</code></strong>ã€<strong><code>inline const</code></strong>ï¼ˆåœ¨å¤´æ–‡ä»¶ä¸­ï¼‰ã€<strong>ç±»é™æ€æˆå‘˜å¸¸é‡</strong>ã€‚åªæœ‰å½“å¸¸é‡ç¡®å®å…·æœ‰<strong>å…¨å±€</strong>ã€<strong>æ™®é</strong>çš„æ„ä¹‰æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨å®ƒä»¬ä½œä¸ºå…¨å±€å˜é‡ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œä¹Ÿè¦ä¼˜å…ˆä½¿ç”¨ç°ä»£çš„ <code>constexpr</code> æˆ– <code>inline const</code> æ–¹å¼ã€‚</li>
</ul>
</li>
</ul>
<p>å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œé€‰æ‹©æœ€ä½³å®è·µï¼</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cpp/">Cpp    </a><a class="post-meta__tags" href="/tags/Coding/">Coding    </a><a class="post-meta__tags" href="/tags/Learning/">Learning    </a><a class="post-meta__tags" href="/tags/Function/">Function    </a><a class="post-meta__tags" href="/tags/Language/">Language    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2025/06/08/10-projects/cplusplus/notes/diff%20between%20constexpr%20and%20define/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>diff between constexpr and define</span></div></a></div><div class="next-post pull_right"><a href="/2025/06/08/10-projects/cplusplus/notes/cpp%20%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>cpp å…¨å±€å˜é‡å’Œå¸¸é‡</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/265 - using concept/" title="265 - using concept"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">265 - using concept</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/268 - Combining concepts/" title="268 - Combining concepts"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">268 - Combining concepts</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/260 - Named Template Parameters for Lambdas/" title="260 - Named Template Parameters for Lambdas"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">260 - Named Template Parameters for Lambdas</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/267 - requires clause/" title="267 - requires clause"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">267 - requires clause</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/293 - cpp ç»“æ„åŒ–ç»‘å®šè¯­æ³•è®²è§£/" title="293 - cpp ç»“æ„åŒ–ç»‘å®šè¯­æ³•è®²è§£"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">293 - cpp ç»“æ„åŒ–ç»‘å®šè¯­æ³•è®²è§£</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/c_plus_plus_teacher prompt/" title="c_plus_plus_teacher prompt"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">c_plus_plus_teacher prompt</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'xvMxbws16Erd8WUfqxkvHmb5-gzGzoHsz',
  appKey:'4U0Vo7NQIUL0eJzHdkPzdCDr',
  placeholder:'ä¸è¯´è¯çš„äººä¼šç–¯æ‰å—?',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By supersheepbear</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="external nofollow noopener noreferrer"><span>Butterfly</span></a></div><div class="footer_custom_text">å¤–å‘å­¤ç‹¬è€…æ‚£è€…</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="canvas_nest" color="255,240,245" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>