<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>343 - cppé“¾æ¥å±æ€§ç¿»è½¬ | Bear's dream</title><meta name="description" content="343 - cppé“¾æ¥å±æ€§ç¿»è½¬"><meta name="keywords" content="Cpp,Coding,Tutorial,Development"><meta name="author" content="supersheepbear"><meta name="copyright" content="supersheepbear"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="p43hXBn3_dLvbyxUzx0eo5eYmj9OVYOV52pdrhBa2sw"><meta name="baidu-site-verification" content="EXLlfLv2pV"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="343 - cppé“¾æ¥å±æ€§ç¿»è½¬"><meta name="twitter:description" content="343 - cppé“¾æ¥å±æ€§ç¿»è½¬"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta property="og:type" content="article"><meta property="og:title" content="343 - cppé“¾æ¥å±æ€§ç¿»è½¬"><meta property="og:url" content="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/343%20-%20cpp%E9%93%BE%E6%8E%A5%E5%B1%9E%E6%80%A7%E7%BF%BB%E8%BD%AC/"><meta property="og:site_name" content="Bear's dream"><meta property="og:description" content="343 - cppé“¾æ¥å±æ€§ç¿»è½¬"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/343%20-%20cpp%E9%93%BE%E6%8E%A5%E5%B1%9E%E6%80%A7%E7%BF%BB%E8%BD%AC/"><link rel="prev" title="Jupyter correct workflow" href="https://yxiong.org/2025/06/08/30-resources/coding/python/Jupyter%20correct%20workflow/"><link rel="next" title="numpy_advanced_command_quick_lookup_table" href="https://yxiong.org/2025/06/08/30-resources/coding/python/numpy_advanced_command_quick_lookup_table/"><link rel="stylesheet" href="hfttps://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bear's dream" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Bear's dream</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200520153141.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">152</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">151</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">20</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#342-C-é“¾æ¥å±æ€§ç¿»è½¬"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">342 - C++é“¾æ¥å±æ€§ç¿»è½¬</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-æ ‡é¢˜ä¸æ¦‚è¦"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">1. æ ‡é¢˜ä¸æ¦‚è¦</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-è¯¦ç»†è§£é‡Š"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">2. è¯¦ç»†è§£é‡Š</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-å°†å†…éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå¤–éƒ¨é“¾æ¥"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">(1) å°†å†…éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå¤–éƒ¨é“¾æ¥</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-å°†å¤–éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå†…éƒ¨é“¾æ¥"><span class="toc_mobile_items-number">1.4.2.</span> <span class="toc_mobile_items-text">(2) å°†å¤–éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå†…éƒ¨é“¾æ¥</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-ä»£ç ç¤ºä¾‹"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">3. ä»£ç ç¤ºä¾‹</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-QA-é—ªå¡-QA-Flash-Cards"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">4. QA é—ªå¡ (QA Flash Cards)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">5. å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#6-ç¼–ç ç»ƒä¹ "><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">6. ç¼–ç ç»ƒä¹ </span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#342-C-é“¾æ¥å±æ€§ç¿»è½¬"><span class="toc-number">1.</span> <span class="toc-text">342 - C++é“¾æ¥å±æ€§ç¿»è½¬</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant"><span class="toc-number">1.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-æ ‡é¢˜ä¸æ¦‚è¦"><span class="toc-number">1.3.</span> <span class="toc-text">1. æ ‡é¢˜ä¸æ¦‚è¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-è¯¦ç»†è§£é‡Š"><span class="toc-number">1.4.</span> <span class="toc-text">2. è¯¦ç»†è§£é‡Š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-å°†å†…éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå¤–éƒ¨é“¾æ¥"><span class="toc-number">1.4.1.</span> <span class="toc-text">(1) å°†å†…éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå¤–éƒ¨é“¾æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-å°†å¤–éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå†…éƒ¨é“¾æ¥"><span class="toc-number">1.4.2.</span> <span class="toc-text">(2) å°†å¤–éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå†…éƒ¨é“¾æ¥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-ä»£ç ç¤ºä¾‹"><span class="toc-number">1.5.</span> <span class="toc-text">3. ä»£ç ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-QA-é—ªå¡-QA-Flash-Cards"><span class="toc-number">1.6.</span> <span class="toc-text">4. QA é—ªå¡ (QA Flash Cards)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯"><span class="toc-number">1.7.</span> <span class="toc-text">5. å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-ç¼–ç ç»ƒä¹ "><span class="toc-number">1.8.</span> <span class="toc-text">6. ç¼–ç ç»ƒä¹ </span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)"><div id="post-info"><div id="post-title"><div class="posttitle">343 - cppé“¾æ¥å±æ€§ç¿»è½¬</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2025-06-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2025-06-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/">10-projects</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/">cplusplus</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/lectures/">lectures</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/2025/06/08/10-projects/cplusplus/lectures/343%20-%20cpp%E9%93%BE%E6%8E%A5%E5%B1%9E%E6%80%A7%E7%BF%BB%E8%BD%AC/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2025/06/08/10-projects/cplusplus/lectures/343%20-%20cpp%E9%93%BE%E6%8E%A5%E5%B1%9E%E6%80%A7%E7%BF%BB%E8%BD%AC/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="342-C-é“¾æ¥å±æ€§ç¿»è½¬"><a href="#342-C-é“¾æ¥å±æ€§ç¿»è½¬" class="headerlink" title="342 - C++é“¾æ¥å±æ€§ç¿»è½¬"></a>342 - C++é“¾æ¥å±æ€§ç¿»è½¬</h1><h2 id="ğŸ§‘â€ğŸ’»-User"><a href="#ğŸ§‘â€ğŸ’»-User" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>In this lecture, weâ€™re going to see how we can flip linkage properties associated with names in ourC plus plus program.For example, if something had internal linkage, we can change it to have external linkage or the reverse.Here we have a simple program.We have our distance variable.It is a constant variable.So by default itâ€™s going to have internal linkage, but we can change it to have external linkage byputting the external keyword in front.And when we want to use it in a separate translation unit, we are also going to prefix it with theexternal keyword.I realize this is a little bit confusing, but it is possible to do this.When we set up our constant variable like this, what we have here is going to be a declaration forthe variable we had in the main CPP file.And if we try to print it out, for example, here we are printing the distance.This is going to be accessing the variable.We have in the main function.Itâ€™s not going to be a separate variable.So this is how you can do this.This is an example of how you can take something that had internal linkage and change it to have externallinkage and you can do this.Another thing weâ€™re going to see is how we can take something that had external linkage like a functionhere.For example, the print distance function here has external linkage by default or the other.Some function here we want to change one of these guys to have internal linkage.And the way to do that you prefix that thing with the static keyword.Okay, so we can do something like this.For example, for the function, some function here, we can prefix it with the static keyword and thisis going to mark it as an internal function to this translation unit here.If you try to call it from another translation unit, youâ€™re going to get a compiler error because nowit will be limited to this translation unit where it is defined.Another way to do this is to wrap the function or the name that you want to have internal linkage inan anonymous namespace like we do here.If we do this, this function here will only be accessible from the translation unit where it was declared.So we have two techniques here.We can take something that had internal linkage and mark it to have external linkage.And to do that we just prefix that with the external keyword as we have seen before.Or we can take something that has external linkage and change it to have internal linkage by prefacingthat with the static keyword or wrapping that in an anonymous namespace like we see here.Now that you know this, weâ€™re going to head over to Visual Studio code and play with this a littlemore.Okay.Here we are in our working folder.The current project is flipping linkage.Weâ€™re going to grab the template files like we always do.Weâ€™re going to put them in place and we are going to open this in Visual Studio code by dragging anddropping here.This is going to give us our main CPP file and we can start setting up things.The first thing we want to do is to turn something from internal linkage to external linkage as we seehere.And a good example of this is a const variable.Weâ€™re going to do const and thatâ€™s going to be a double variable.The name is going to be distance and weâ€™re going to put in a distance here.You can put in whatever you want, but the main message here is that this is a constant global variable.So itâ€™s going to have internal linkage by default.But we want this guy to be used in other translation units.For example, if we set up another file, weâ€™re going to do that.Weâ€™re going to call this some other file dot CPP.Weâ€™re going to go in and we want to have access to this constant here and use it in our program.The way to do this is really simple.You prefix whatever you want to have external linkage with the external keyword here.And once you want to use it, you go in whatever translation unit where you want to use it and you markit as external.You say external, you say the type of the variable.So it is conceivable and weâ€™re going to say the name of the variable.It happens to be distance.And this is going to be a declaration for the variable we had in main.What we have here is both a declaration and a definition, but what we have in some other file is goingto be a declaration.Itâ€™s not a definition.The definition for this variable is in the main function.And notice that we were able to change the default behavior for linkage for global constant variables.Okay, now that we have this, weâ€™re going to set up a function which is going to access this guy andweâ€™re going to let the function have external linkage because we want to call this from our main CPPfile.We are going to include Iostream here because we want to print some things.Thatâ€™s why we.Have the squiggly lines here.Youâ€™re going to see theyâ€™re going to go away and weâ€™re going to hop over in the main function and setup a declaration for the print distance function here so we can grab its signature here or its header,put that in the main function, and then weâ€™re going to do whatever we did before to print what we havein the main function here and what we have in some other file dot cpp here I am going to hop over inthe main function and put in the code to do that because I donâ€™t want to type all this.Weâ€™re going to print the distance in main, weâ€™re going to see its distance and weâ€™re going to printthe same thing from our other translation unit and weâ€™re going to see that they actually are the samethings, because now our constant here has external linkage.And what we have in some other file is the same thing we had in our main CPP file here.And we are effectively changing from internal linkage to external linkage for this variable here.And this is really cool.So letâ€™s build the program and show you that this is actually what we expect.Letâ€™s see if the world is good, the world is good here.We can clear, but letâ€™s bring up a terminal.First.Weâ€™re going to clear and run Rooster.Youâ€™re going to see that what we have in Main is 45.7.The address is what we see here.It ends in zero 50.And what we have in some other file is exactly the same thing, because now this constant has externallinkage and this is how you can change the linkage for your constant global variables to be externallinkage.If this happens to be making sense for your project.The other thing weâ€™re going to see is how we can change from external linkage to internal linkage.And we know that functions have external linkage by default.So for example, if we have a function in our other translation unit, weâ€™re going to make it not returnanything and itâ€™s going to be called some other function.We can do this and itâ€™s just going to say, Hello there, letâ€™s do that.Okay, so this function has external linkage by default because thatâ€™s how C plus plus compilers wehave, we have external linkage here, but we wanted to change this to go from external linkage to internallinkage.So we want this function only usable inside this translation unit here.But before we do that, letâ€™s make sure that this function is usable from the other translation unitHere.For example, we can put in its declaration.Weâ€™re going to say, what is it called?The name is some other function.So weâ€™re going to grab the signature for this little guy here.Weâ€™re going to hop over in Main and weâ€™re going to put in the declaration for this.This is a declaration, letâ€™s say that to be super clear and we can call it in main, for example,we can go down and put a separator.This is going to do and weâ€™re going to say some other function.Thatâ€™s what itâ€™s called.I think we have its name in our clipboard so we can take out the return type here and turn this intoa function call.This is going to work just fine.If we build and run the program, weâ€™re going to see that the world is going to be good because thisguy has external linkage.We want to change the linkage of this guy.One way to do this is to prefix it with a static keyword, and at the moment you do this, the C plusplus compiler is going to look at this and note that this function can only be used or called from thistranslation unit here.Now, if we try to build our program, weâ€™re going to see that weâ€™re going to get a compiler error andthe compiler error is going to say undefined reference to some other function.We have this function and this translation unit here, but when the linker is going to look for it becauseof this call here, the compiler is going to say this function is only for use in this translation unit.You canâ€™t call it from the main CPP file here, which is another translation unit.And we have effectively changed the linkage of this function from external to internal using this statickeyword here.This is what I want you to know, but this is not the only way to do this.Another way to do this is to wrap this function in an anonymous namespace.So if we go down here and say namespace and not give this namespace a name and weâ€™re going to grab ourfunction here and move that inside our namespace here, weâ€™re going to take out the static keyword.Weâ€™re going to see that we have the same effect here weâ€™re going to build.And we are going to get an undefined reference to our function here because it is internal to this function.We have effectively changed from external linkage to internal linkage here.So we have seen two ways we can change the linkage.We can change from internal linkage to external linkage using the technique here, prefixing thingswith the external keyword and declaring them using the external keyword.This is going to tell the compiler that what we have in some other translation unit is just a declaration.We can also change from external linkage to internal linkage by prefixing what we want to set up withthe static keyword.Or we can wrap our name in an anonymous namespace and this is going to give it internal linkage andyou want to be able to use that thing from other translation units.For example, if we go into the main function and call some other function, this is not going to workand we have effectively changed the default behavior for linkage.This is really all I wanted you to see in this lecture, that you can change the linkage if you want,but donâ€™t really overdo this because itâ€™s going to make your code not easy to read and understand forother developers.Another thing is that the static keyword is really not welcome in modern C plus plus.If you happen to want to change from external linkage to internal linkage, wrapping your things insideunnamed or anonymous namespaces is the way to go in modern C plus plus.We are going to stop here in this lecture.In the next one, weâ€™re going to learn about inline variables and functions.Go ahead and finish up here and meet me there.</p>
<hr>
<h2 id="ğŸ¤–-Assistant"><a href="#ğŸ¤–-Assistant" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¥½çš„ï¼ŒåŒå­¦ä½ å¥½ï¼å¾ˆé«˜å…´èƒ½æˆä¸ºä½ çš„C++å¯è’™è€å¸ˆã€‚åˆ«æ‹…å¿ƒï¼ŒC++è™½ç„¶çŸ¥è¯†ç‚¹å¤šï¼Œä½†åªè¦æˆ‘ä»¬ä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œç”¨æ­£ç¡®çš„æ–¹æ³•å­¦ä¹ ï¼Œä½ ä¼šå‘ç°å®ƒçš„é­…åŠ›æ‰€åœ¨ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬è¦å­¦ä¹ çš„æ˜¯C++ä¸­ä¸€ä¸ªéå¸¸é‡è¦ä½†æœ‰æ—¶åˆæœ‰ç‚¹å¾®å¦™çš„æ¦‚å¿µâ€”â€”<strong>é“¾æ¥å±æ€§ (linkage)</strong>ï¼Œä»¥åŠå¦‚ä½•â€œç¿»è½¬â€å®ƒã€‚</p>
<hr>
<h2 id="1-æ ‡é¢˜ä¸æ¦‚è¦"><a href="#1-æ ‡é¢˜ä¸æ¦‚è¦" class="headerlink" title="1. æ ‡é¢˜ä¸æ¦‚è¦"></a>1. æ ‡é¢˜ä¸æ¦‚è¦</h2><p><strong>æ ‡é¢˜ï¼š</strong> C++ é“¾æ¥å±æ€§æ­ç§˜ï¼šè½»æ¾ç¿»è½¬å†…éƒ¨ä¸å¤–éƒ¨é“¾æ¥</p>
<p><strong>æ¦‚è¦ï¼š</strong> æœ¬èŠ‚è¯¾æˆ‘ä»¬å°†å­¦ä¹ ä»€ä¹ˆæ˜¯C++ä¸­çš„é“¾æ¥å±æ€§ï¼Œç‰¹åˆ«æ˜¯å†…éƒ¨é“¾æ¥ (internal linkage) å’Œå¤–éƒ¨é“¾æ¥ (external linkage)ã€‚æˆ‘ä»¬å°†é‡ç‚¹æ¢è®¨å¦‚ä½•ä½¿ç”¨ <code>extern</code> å…³é”®å­—å°†é»˜è®¤å…·æœ‰å†…éƒ¨é“¾æ¥çš„ <code>const</code> (å¸¸é‡) å…¨å±€å˜é‡æ”¹ä¸ºå¤–éƒ¨é“¾æ¥ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ <code>static</code> (é™æ€) å…³é”®å­—æˆ–åŒ¿åå‘½åç©ºé—´ (anonymous namespace) å°†é»˜è®¤å…·æœ‰å¤–éƒ¨é“¾æ¥çš„å‡½æ•°æ”¹ä¸ºå†…éƒ¨é“¾æ¥ã€‚è¿™å°†å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç»„ç»‡ä»£ç å’Œæ§åˆ¶ç¬¦å· (symbol) åœ¨ä¸åŒç¼–è¯‘å•å…ƒ (translation unit) é—´çš„å¯è§æ€§ã€‚</p>
<hr>
<h2 id="2-è¯¦ç»†è§£é‡Š"><a href="#2-è¯¦ç»†è§£é‡Š" class="headerlink" title="2. è¯¦ç»†è§£é‡Š"></a>2. è¯¦ç»†è§£é‡Š</h2><p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œé¦–å…ˆè¦ç†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ul>
<li><strong>ç¬¦å· (Symbol)ï¼š</strong> åœ¨ç¼–ç¨‹ä¸­ï¼Œç¬¦å·é€šå¸¸æŒ‡å˜é‡åã€å‡½æ•°åç­‰æ ‡è¯†ç¬¦ã€‚</li>
<li><strong>ç¼–è¯‘å•å…ƒ (Translation Unit)ï¼š</strong> ç®€å•æ¥è¯´ï¼Œä¸€ä¸ª <code>.cpp</code> æ–‡ä»¶ï¼ˆä»¥åŠå®ƒåŒ…å«çš„æ‰€æœ‰å¤´æ–‡ä»¶ï¼Œç»è¿‡é¢„å¤„ç†å™¨å¤„ç†åï¼‰é€šå¸¸è¢«è§†ä¸ºä¸€ä¸ªç¼–è¯‘å•å…ƒã€‚ç¼–è¯‘å™¨ä¼šåˆ†åˆ«ç¼–è¯‘æ¯ä¸ªç¼–è¯‘å•å…ƒï¼Œç”Ÿæˆç›®æ ‡æ–‡ä»¶ (object file)ã€‚</li>
<li><strong>é“¾æ¥ (Linkage)ï¼š</strong> é“¾æ¥æ˜¯ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨ç”¨æ¥ç¡®å®šä¸€ä¸ªæ ‡è¯†ç¬¦ï¼ˆå¦‚å˜é‡æˆ–å‡½æ•°åï¼‰åœ¨ä¸åŒç¼–è¯‘å•å…ƒä¸­æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå®ä½“çš„è§„åˆ™ã€‚å®ƒå†³å®šäº†ä¸€ä¸ªåç§°çš„â€œå¯è§èŒƒå›´â€ã€‚</li>
</ul>
<p>C++ ä¸»è¦æœ‰ä¸¤ç§é“¾æ¥å±æ€§ï¼š</p>
<ol>
<li><p><strong>å†…éƒ¨é“¾æ¥ (Internal Linkage)ï¼š</strong></p>
<ul>
<li>å…·æœ‰å†…éƒ¨é“¾æ¥çš„ç¬¦å·åªåœ¨å®ƒè‡ªå·±æ‰€åœ¨çš„ç¼–è¯‘å•å…ƒå†…å¯è§ã€‚å³ä½¿å…¶ä»–ç¼–è¯‘å•å…ƒå£°æ˜äº†åŒåçš„ç¬¦å·ï¼Œå®ƒä»¬ä¹Ÿäº’ä¸ç›¸å…³ï¼Œæ˜¯å„è‡ªç‹¬ç«‹çš„å­˜åœ¨ã€‚</li>
<li><strong>é»˜è®¤æƒ…å†µï¼š</strong> <code>const</code> (å¸¸é‡) å’Œ <code>constexpr</code> (å¸¸é‡è¡¨è¾¾å¼) å…¨å±€å˜é‡ï¼Œä»¥åŠ <code>static</code> (é™æ€) å…¨å±€å˜é‡å’Œ <code>static</code> å‡½æ•°ï¼ˆéç±»æˆå‘˜ï¼‰é»˜è®¤å…·æœ‰å†…éƒ¨é“¾æ¥ã€‚åŒ¿åå‘½åç©ºé—´ä¸­çš„æ‰€æœ‰ç¬¦å·ä¹Ÿå…·æœ‰å†…éƒ¨é“¾æ¥ã€‚</li>
</ul>
</li>
<li><p><strong>å¤–éƒ¨é“¾æ¥ (External Linkage)ï¼š</strong></p>
<ul>
<li>å…·æœ‰å¤–éƒ¨é“¾æ¥çš„ç¬¦å·å¯ä»¥åœ¨å¤šä¸ªç¼–è¯‘å•å…ƒä¹‹é—´å…±äº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªç¼–è¯‘å•å…ƒä¸­å®šä¹‰çš„å¤–éƒ¨é“¾æ¥ç¬¦å·ï¼Œå¯ä»¥åœ¨å…¶ä»–ç¼–è¯‘å•å…ƒä¸­å£°æ˜å¹¶ä½¿ç”¨ï¼Œå®ƒä»¬éƒ½æŒ‡å‘åŒä¸€ä¸ªå®ä½“ï¼ˆåŒä¸€å—å†…å­˜åœ°å€æˆ–åŒä¸€ä¸ªå‡½æ•°å®ç°ï¼‰ã€‚</li>
<li><strong>é»˜è®¤æƒ…å†µï¼š</strong> æ™®é€šçš„å…¨å±€å˜é‡ï¼ˆé<code>const</code>ã€é<code>static</code>ï¼‰å’Œæ™®é€šå‡½æ•°ï¼ˆé<code>static</code>ã€éåŒ¿åå‘½åç©ºé—´å†…ï¼‰é»˜è®¤å…·æœ‰å¤–éƒ¨é“¾æ¥ã€‚</li>
</ul>
</li>
</ol>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•â€œç¿»è½¬â€è¿™äº›é»˜è®¤çš„é“¾æ¥å±æ€§ã€‚</p>
<h3 id="1-å°†å†…éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå¤–éƒ¨é“¾æ¥"><a href="#1-å°†å†…éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå¤–éƒ¨é“¾æ¥" class="headerlink" title="(1) å°†å†…éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå¤–éƒ¨é“¾æ¥"></a>(1) å°†å†…éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå¤–éƒ¨é“¾æ¥</h3><p>æ­£å¦‚æˆ‘ä»¬æ‰€è¯´ï¼Œ<code>const</code> å…¨å±€å˜é‡é»˜è®¤å…·æœ‰å†…éƒ¨é“¾æ¥ã€‚è¿™æ„å‘³ç€å¦‚æœä½ åœ¨ä¸€ä¸ª <code>main.cpp</code> æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ª <code>const</code> å…¨å±€å˜é‡ï¼Œä¾‹å¦‚ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="number">3.14159</span>; <span class="comment">// é»˜è®¤å†…éƒ¨é“¾æ¥</span></span><br></pre></td></tr></table></figure></div>
<p>é‚£ä¹ˆåœ¨å¦ä¸€ä¸ª <code>other.cpp</code> æ–‡ä»¶ä¸­ï¼Œä½ æ— æ³•ç›´æ¥è®¿é—®åˆ° <code>main.cpp</code> ä¸­çš„è¿™ä¸ª <code>PI</code>ã€‚å¦‚æœä½ åœ¨ <code>other.cpp</code> ä¸­ä¹Ÿå†™ <code>const double PI = 3.14159;</code>ï¼Œé‚£ä¹ˆ <code>other.cpp</code> ä¼šæ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„ã€ç‹¬ç«‹çš„ <code>PI</code> å˜é‡ï¼Œå®ƒå’Œ <code>main.cpp</code> ä¸­çš„ <code>PI</code> ä¸æ˜¯åŒä¸€ä¸ªã€‚</p>
<p><strong>å¦‚ä½•æ”¹å˜ï¼Ÿä½¿ç”¨ <code>extern</code> (å¤–éƒ¨) å…³é”®å­—ã€‚</strong></p>
<p><code>extern</code> å…³é”®å­—å¯ä»¥ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼ŒæŸä¸ªå˜é‡æˆ–å‡½æ•°çš„å®šä¹‰åœ¨åˆ«å¤„ï¼ˆå¯èƒ½åœ¨å½“å‰ç¼–è¯‘å•å…ƒï¼Œä¹Ÿå¯èƒ½åœ¨å…¶ä»–ç¼–è¯‘å•å…ƒï¼‰ã€‚</p>
<ul>
<li><p><strong>æ­¥éª¤ä¸€ï¼šåœ¨å®šä¹‰å¤„ä½¿ç”¨ <code>extern</code></strong><br>å½“ä½ æƒ³è®©ä¸€ä¸ª <code>const</code> å…¨å±€å˜é‡å…·æœ‰å¤–éƒ¨é“¾æ¥æ—¶ï¼Œä½ éœ€è¦åœ¨å®ƒçš„<strong>å®šä¹‰</strong>å¤„ä½¿ç”¨ <code>extern</code> å…³é”®å­—ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ª const å…¨å±€å˜é‡ï¼Œå¹¶ä½¿ç”¨ extern æ˜¾å¼å£°æ˜å…¶ä¸ºå¤–éƒ¨é“¾æ¥</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">double</span> DISTANCE = <span class="number">45.7</span>; <span class="comment">// DISTANCE ç°åœ¨å…·æœ‰å¤–éƒ¨é“¾æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªåœ¨ other.cpp ä¸­å®šä¹‰çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_distance_from_other</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"In main.cpp: distance is "</span> &lt;&lt; DISTANCE</span><br><span class="line">              &lt;&lt; <span class="string">", address is "</span> &lt;&lt; &amp;DISTANCE &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    print_distance_from_other();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>è¿™é‡Œçš„ <code>extern const double DISTANCE = 45.7;</code> æ˜¯ä¸€ä¸ª<strong>å®šä¹‰ (definition)</strong>ï¼Œå› ä¸ºå®ƒåˆ†é…äº†å­˜å‚¨ç©ºé—´å¹¶æä¾›äº†åˆå§‹å€¼ã€‚é€šè¿‡ <code>extern</code>ï¼Œæˆ‘ä»¬è¦†ç›–äº† <code>const</code> å˜é‡é»˜è®¤çš„å†…éƒ¨é“¾æ¥è¡Œä¸ºï¼Œä½¿å…¶å˜ä¸ºå¤–éƒ¨é“¾æ¥ã€‚</p>
</li>
<li><p><strong>æ­¥éª¤äºŒï¼šåœ¨å…¶ä»–ç¼–è¯‘å•å…ƒä½¿ç”¨ <code>extern</code> è¿›è¡Œå£°æ˜</strong><br>åœ¨å…¶ä»–éœ€è¦ä½¿ç”¨è¿™ä¸ª <code>DISTANCE</code> å˜é‡çš„ç¼–è¯‘å•å…ƒä¸­ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>extern</code> æ¥<strong>å£°æ˜ (declaration)</strong> å®ƒã€‚å£°æ˜å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå˜é‡å­˜åœ¨ï¼Œå¹¶ä¸”å…·æœ‰å¤–éƒ¨é“¾æ¥ï¼Œä½†å®šä¹‰åœ¨åˆ«å¤„ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// other.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ main.cpp ä¸­å®šä¹‰çš„ DISTANCE å˜é‡</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªå£°æ˜å‘Šè¯‰ç¼–è¯‘å™¨ DISTANCE æ˜¯ä¸€ä¸ªåœ¨åˆ«å¤„å®šä¹‰çš„ const double ç±»å‹å˜é‡</span></span><br><span class="line"><span class="comment">// å¹¶ä¸”å®ƒå…·æœ‰å¤–éƒ¨é“¾æ¥</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">double</span> DISTANCE;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_distance_from_other</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"In other.cpp: distance is "</span> &lt;&lt; DISTANCE</span><br><span class="line">              &lt;&lt; <span class="string">", address is "</span> &lt;&lt; &amp;DISTANCE &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>è¿™é‡Œçš„ <code>extern const double DISTANCE;</code> æ˜¯ä¸€ä¸ª<strong>å£°æ˜</strong>ï¼Œå®ƒä¸åˆ†é…å†…å­˜ï¼Œåªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ <code>DISTANCE</code> çš„ç±»å‹å’Œåç§°ï¼Œå¹¶æŒ‡æ˜å®ƒæ˜¯åœ¨å…¶ä»–åœ°æ–¹å®šä¹‰çš„ã€‚</p>
</li>
</ul>
<p><strong>å…³é”®ç‚¹ï¼š</strong><br>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>main.cpp</code> å’Œ <code>other.cpp</code> ä¸­çš„ <code>DISTANCE</code> æŒ‡çš„æ˜¯åŒä¸€ä¸ªå˜é‡ã€‚å¦‚æœä½ æ‰“å°å®ƒä»¬çš„åœ°å€ï¼Œä¼šå‘ç°åœ°å€æ˜¯ç›¸åŒçš„ã€‚è¿™å°±å®ç°äº†ä»å†…éƒ¨é“¾æ¥åˆ°å¤–éƒ¨é“¾æ¥çš„ç¿»è½¬ã€‚</p>
<h3 id="2-å°†å¤–éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå†…éƒ¨é“¾æ¥"><a href="#2-å°†å¤–éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå†…éƒ¨é“¾æ¥" class="headerlink" title="(2) å°†å¤–éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå†…éƒ¨é“¾æ¥"></a>(2) å°†å¤–éƒ¨é“¾æ¥ç¿»è½¬ä¸ºå†…éƒ¨é“¾æ¥</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ™®é€šå‡½æ•°ï¼ˆéæˆå‘˜å‡½æ•°ï¼‰å…·æœ‰å¤–éƒ¨é“¾æ¥ã€‚è¿™æ„å‘³ç€å¦‚æœä½ åœ¨ä¸€ä¸ª <code>helper.cpp</code> ä¸­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œä½ å¯ä»¥åœ¨ <code>main.cpp</code> ä¸­å£°æ˜å¹¶è°ƒç”¨å®ƒã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// helper.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">some_external_function</span><span class="params">()</span> </span>&#123; <span class="comment">// é»˜è®¤å¤–éƒ¨é“¾æ¥</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello from some_external_function in helper.cpp!"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åœ¨ helper.cpp ä¸­å®šä¹‰çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">some_external_function</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    some_external_function(); <span class="comment">// å¯ä»¥æ­£å¸¸è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›ä¸€ä¸ªå‡½æ•°åªåœ¨å®ƒè‡ªå·±å®šä¹‰çš„é‚£ä¸ª <code>.cpp</code> æ–‡ä»¶å†…éƒ¨ä½¿ç”¨ï¼Œä¸å¸Œæœ›è¢«å…¶ä»–ç¼–è¯‘å•å…ƒæ„å¤–åœ°è°ƒç”¨ï¼Œæˆ–è€…ä¸ºäº†é¿å…ä¸å…¶ä»–ç¼–è¯‘å•å…ƒä¸­å¯èƒ½å­˜åœ¨çš„åŒåå‡½æ•°å‘ç”Ÿå‘½åå†²çªã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å®ƒçš„å¤–éƒ¨é“¾æ¥æ”¹ä¸ºå†…éƒ¨é“¾æ¥ã€‚</p>
<p>æœ‰ä¸¤ç§ä¸»è¦æ–¹æ³•ï¼š</p>
<ul>
<li><p><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ <code>static</code> (é™æ€) å…³é”®å­—</strong><br>åœ¨å‡½æ•°å®šä¹‰å‰åŠ ä¸Š <code>static</code> å…³é”®å­—ï¼Œå¯ä»¥å°†å…¶é“¾æ¥å±æ€§æ”¹ä¸ºå†…éƒ¨é“¾æ¥ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// helper.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">this_is_an_internal_function</span><span class="params">()</span> </span>&#123; <span class="comment">// ä½¿ç”¨ staticï¼Œå˜ä¸ºå†…éƒ¨é“¾æ¥</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"This function can only be called within helper.cpp"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">call_internal_from_helper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    this_is_an_internal_function(); <span class="comment">// åœ¨ helper.cpp å†…éƒ¨å¯ä»¥è°ƒç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>ç°åœ¨ï¼Œå¦‚æœä½ å°è¯•åœ¨ <code>main.cpp</code> ä¸­å£°æ˜å¹¶è°ƒç”¨ <code>this_is_an_internal_function()</code>ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="comment">// void this_is_an_internal_function(); // å°è¯•å£°æ˜</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// this_is_an_internal_function(); // å°è¯•è°ƒç”¨</span></span><br></pre></td></tr></table></figure></div>
<p>é“¾æ¥å™¨åœ¨é“¾æ¥é˜¶æ®µä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒåœ¨ <code>main.cpp</code> çš„ç¼–è¯‘å•å…ƒæ‰¾ä¸åˆ° <code>this_is_an_internal_function</code> çš„å®šä¹‰ï¼ˆå› ä¸ºå®ƒåœ¨ <code>helper.cpp</code> ä¸­æ˜¯å†…éƒ¨é“¾æ¥çš„ï¼Œå¯¹å¤–éƒ¨ä¸å¯è§ï¼‰ã€‚</p>
</li>
<li><p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨åŒ¿åå‘½åç©ºé—´ (Anonymous Namespace)</strong><br>åŒ¿åå‘½åç©ºé—´ï¼ˆä¹Ÿå«æœªå‘½åå‘½åç©ºé—´ï¼‰æ˜¯ä¸€ç§æ›´ç°ä»£ã€æ›´æ¨èçš„åšæ³•ï¼Œç”¨æ¥é™åˆ¶ç¬¦å·çš„é“¾æ¥ä¸ºå†…éƒ¨é“¾æ¥ã€‚æ‰€æœ‰åœ¨åŒ¿åå‘½åç©ºé—´ä¸­å£°æ˜çš„ç¬¦å·ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰éƒ½è‡ªåŠ¨å…·æœ‰å†…éƒ¨é“¾æ¥ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// helper.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> &#123; <span class="comment">// è¿™æ˜¯ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">another_internal_function</span><span class="params">()</span> </span>&#123; <span class="comment">// è‡ªåŠ¨å…·æœ‰å†…éƒ¨é“¾æ¥</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"This function (in anonymous namespace) is also internal to helper.cpp"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">// åŒ¿åå‘½åç©ºé—´ç»“æŸ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">call_another_internal_from_helper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    another_internal_function(); <span class="comment">// åœ¨ helper.cpp å†…éƒ¨å¯ä»¥è°ƒç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>æ•ˆæœä¸ä½¿ç”¨ <code>static</code> å…³é”®å­—ç±»ä¼¼ã€‚<code>another_internal_function</code> ä¹Ÿæ— æ³•ä» <code>main.cpp</code> æˆ–å…¶ä»–ç¼–è¯‘å•å…ƒä¸­ç›´æ¥è®¿é—®ã€‚</p>
</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆåŒ¿åå‘½åç©ºé—´æ›´å¥½ï¼Ÿ</strong><br><code>static</code> å…³é”®å­—åœ¨C++ä¸­æœ‰å¤šç§å«ä¹‰ï¼ˆä¾‹å¦‚ï¼Œé™æ€å±€éƒ¨å˜é‡ã€é™æ€æˆå‘˜å˜é‡ã€é™æ€æˆå‘˜å‡½æ•°ï¼‰ï¼Œè¿™æœ‰æ—¶ä¼šå¼•èµ·æ··æ·†ã€‚åŒ¿åå‘½åç©ºé—´çš„ç›®çš„éå¸¸æ˜ç¡®ï¼šæä¾›å†…éƒ¨é“¾æ¥ã€‚å› æ­¤ï¼Œåœ¨ç°ä»£C++ä¸­ï¼Œå½“éœ€è¦å°†éæˆå‘˜å‡½æ•°æˆ–å…¨å±€å˜é‡é™åˆ¶åœ¨å½“å‰ç¼–è¯‘å•å…ƒæ—¶ï¼Œæ¨èä½¿ç”¨åŒ¿åå‘½åç©ºé—´ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>ä¸è¦è¿‡åº¦ä½¿ç”¨é“¾æ¥ç¿»è½¬æŠ€æœ¯ã€‚é»˜è®¤çš„é“¾æ¥è¡Œä¸ºé€šå¸¸æ˜¯åˆç†çš„ã€‚ä»…åœ¨ç¡®å®éœ€è¦æ§åˆ¶ç¬¦å·å¯è§æ€§æˆ–è§£å†³å‘½åå†²çªæ—¶æ‰ä½¿ç”¨ã€‚</li>
<li><code>static</code> å…³é”®å­—å¯¹äºç±»æˆå‘˜ï¼ˆå˜é‡æˆ–å‡½æ•°ï¼‰æœ‰ä¸åŒçš„å«ä¹‰ï¼Œä¸é“¾æ¥å±æ€§æ— å…³ï¼Œè€Œæ˜¯ä¸ç±»çš„å®ä¾‹æˆ–ç±»å‹æœ¬èº«ç›¸å…³è”ã€‚æˆ‘ä»¬è¿™é‡Œè®¨è®ºçš„æ˜¯å…¨å±€ä½œç”¨åŸŸæˆ–å‘½åç©ºé—´ä½œç”¨åŸŸä¸‹çš„ <code>static</code>ã€‚</li>
</ul>
<hr>
<h2 id="3-ä»£ç ç¤ºä¾‹"><a href="#3-ä»£ç ç¤ºä¾‹" class="headerlink" title="3. ä»£ç ç¤ºä¾‹"></a>3. ä»£ç ç¤ºä¾‹</h2><p>æˆ‘ä»¬å°†æ•´åˆä¸Šé¢çš„ä¾‹å­ï¼Œåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š<code>main.cpp</code> å’Œ <code>utils.cpp</code>ã€‚</p>
<p><strong><code>utils.cpp</code> æ–‡ä»¶:</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. const å…¨å±€å˜é‡ï¼Œé»˜è®¤å†…éƒ¨é“¾æ¥ï¼Œæˆ‘ä»¬ç”¨ extern æŠŠå®ƒå˜æˆå¤–éƒ¨é“¾æ¥</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">double</span> SHARED_CONSTANT_VALUE = <span class="number">9.81</span>; <span class="comment">// å®šä¹‰ï¼Œå¹¶èµ‹äºˆå¤–éƒ¨é“¾æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œé»˜è®¤å¤–éƒ¨é“¾æ¥</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">externally_linked_function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"utils.cpp: Called externally_linked_function."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"utils.cpp: Accessing SHARED_CONSTANT_VALUE: "</span> &lt;&lt; SHARED_CONSTANT_VALUE</span><br><span class="line">              &lt;&lt; <span class="string">" (Address: "</span> &lt;&lt; &amp;SHARED_CONSTANT_VALUE &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. ä½¿ç”¨ static å°†å‡½æ•°æ”¹ä¸ºå†…éƒ¨é“¾æ¥</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">internal_via_static</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"utils.cpp: Called internal_via_static. This shouldn't be callable from main.cpp directly."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. ä½¿ç”¨åŒ¿åå‘½åç©ºé—´å°†å‡½æ•°æ”¹ä¸ºå†…éƒ¨é“¾æ¥</span></span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">internal_via_anonymous_namespace</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"utils.cpp: Called internal_via_anonymous_namespace. Also not directly callable from main.cpp."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. ä¸€ä¸ªå¤–éƒ¨é“¾æ¥çš„å‡½æ•°ï¼Œå®ƒä¼šè°ƒç”¨å†…éƒ¨é“¾æ¥çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">call_internal_functions_from_utils</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"utils.cpp: Going to call my internal functions."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    internal_via_static();</span><br><span class="line">    internal_via_anonymous_namespace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>main.cpp</code> æ–‡ä»¶:</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. å£°æ˜åœ¨ utils.cpp ä¸­å®šä¹‰çš„å…·æœ‰å¤–éƒ¨é“¾æ¥çš„ const å˜é‡</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">double</span> SHARED_CONSTANT_VALUE;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å£°æ˜åœ¨ utils.cpp ä¸­å®šä¹‰çš„å…·æœ‰å¤–éƒ¨é“¾æ¥çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">externally_linked_function</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. å£°æ˜åœ¨ utils.cpp ä¸­å®šä¹‰çš„ç”¨äºè°ƒç”¨å…¶å†…éƒ¨å‡½æ•°çš„å¤–éƒ¨é“¾æ¥å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">call_internal_functions_from_utils</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢è¿™ä¸¤è¡Œæ˜¯å°è¯•å£°æ˜å†…éƒ¨é“¾æ¥çš„å‡½æ•°ï¼Œä¼šå¯¼è‡´é“¾æ¥é”™è¯¯</span></span><br><span class="line"><span class="comment">// static void internal_via_static(); // é”™è¯¯: 'internal_via_static' has internal linkage and is not defined</span></span><br><span class="line"><span class="comment">// namespace &#123; void internal_via_anonymous_namespace(); &#125; // æ›´å¤æ‚çš„é”™è¯¯ï¼Œæœ¬è´¨ä¹Ÿæ˜¯æ‰¾ä¸åˆ°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"main.cpp: Accessing SHARED_CONSTANT_VALUE: "</span> &lt;&lt; SHARED_CONSTANT_VALUE</span><br><span class="line">              &lt;&lt; <span class="string">" (Address: "</span> &lt;&lt; &amp;SHARED_CONSTANT_VALUE &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    externally_linked_function();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    call_internal_functions_from_utils();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è¯•è°ƒç”¨å†…éƒ¨é“¾æ¥çš„å‡½æ•° (å¦‚æœå–æ¶ˆæ³¨é‡Šä¸‹é¢çš„å£°æ˜å’Œè°ƒç”¨ï¼Œä¼šå¯¼è‡´é“¾æ¥é”™è¯¯)</span></span><br><span class="line">    <span class="comment">// internal_via_static();</span></span><br><span class="line">    <span class="comment">// internal_via_anonymous_namespace();</span></span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; "If you see this, the direct calls to internal functions somehow worked (they shouldn't)." &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"main.cpp: Program finished."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong>å¦‚ä½•ç¼–è¯‘å’Œè¿è¡Œ (ä»¥ g++ ä¸ºä¾‹):</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g++ main.cpp utils.cpp -o program</span><br><span class="line">./program</span><br></pre></td></tr></table></figure></div></p>
<p><strong>é¢„æœŸè¾“å‡º:</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">main.cpp: Accessing SHARED_CONSTANT_VALUE: 9.81 (Address: 0x........)</span><br><span class="line"></span><br><span class="line">utils.cpp: Called externally_linked_function.</span><br><span class="line">utils.cpp: Accessing SHARED_CONSTANT_VALUE: 9.81 (Address: 0x........) &#x2F;&#x2F; æ³¨æ„åœ°å€å’Œ main.cpp ä¸­çš„ç›¸åŒ</span><br><span class="line"></span><br><span class="line">utils.cpp: Going to call my internal functions.</span><br><span class="line">utils.cpp: Called internal_via_static. This shouldn&#39;t be callable from main.cpp directly.</span><br><span class="line">utils.cpp: Called internal_via_anonymous_namespace. Also not directly callable from main.cpp.</span><br><span class="line"></span><br><span class="line">main.cpp: Program finished.</span><br></pre></td></tr></table></figure></div><br>ä½ ä¼šæ³¨æ„åˆ° <code>SHARED_CONSTANT_VALUE</code> åœ¨ <code>main.cpp</code> å’Œ <code>utils.cpp</code> ä¸­çš„åœ°å€æ˜¯ç›¸åŒçš„ï¼Œè¯æ˜å®ƒä»¬æ˜¯åŒä¸€ä¸ªå˜é‡ã€‚è€Œ <code>internal_via_static</code> å’Œ <code>internal_via_anonymous_namespace</code> æ— æ³•åœ¨ <code>main.cpp</code> ä¸­ç›´æ¥è°ƒç”¨ã€‚</p>
<hr>
<h2 id="4-QA-é—ªå¡-QA-Flash-Cards"><a href="#4-QA-é—ªå¡-QA-Flash-Cards" class="headerlink" title="4. QA é—ªå¡ (QA Flash Cards)"></a>4. QA é—ªå¡ (QA Flash Cards)</h2><ol>
<li><p><strong>é—®ï¼š</strong> <code>const</code> å…¨å±€å˜é‡é»˜è®¤å…·æœ‰ä»€ä¹ˆé“¾æ¥ç±»å‹ï¼Ÿ<br><strong>ç­”ï¼š</strong> å†…éƒ¨é“¾æ¥ (Internal linkage)ã€‚</p>
</li>
<li><p><strong>é—®ï¼š</strong> å¦‚ä½•å°†ä¸€ä¸ª <code>const</code> å…¨å±€å˜é‡çš„é“¾æ¥ç±»å‹ä»å†…éƒ¨æ”¹ä¸ºå¤–éƒ¨ï¼Ÿ<br><strong>ç­”ï¼š</strong> åœ¨å…¶å®šä¹‰å¤„ä½¿ç”¨ <code>extern</code> å…³é”®å­— (e.g., <code>extern const int VAL = 10;</code>)ï¼Œå¹¶åœ¨å…¶ä»–éœ€è¦ä½¿ç”¨å®ƒçš„ç¼–è¯‘å•å…ƒä¸­ä¹Ÿä½¿ç”¨ <code>extern</code> è¿›è¡Œå£°æ˜ (e.g., <code>extern const int VAL;</code>)ã€‚</p>
</li>
<li><p><strong>é—®ï¼š</strong> æ™®é€šçš„éæˆå‘˜å‡½æ•°é»˜è®¤å…·æœ‰ä»€ä¹ˆé“¾æ¥ç±»å‹ï¼Ÿ<br><strong>ç­”ï¼š</strong> å¤–éƒ¨é“¾æ¥ (External linkage)ã€‚</p>
</li>
<li><p><strong>é—®ï¼š</strong> æœ‰å“ªä¸¤ç§ä¸»è¦æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªé»˜è®¤å…·æœ‰å¤–éƒ¨é“¾æ¥çš„å‡½æ•°æ”¹ä¸ºå†…éƒ¨é“¾æ¥ï¼Ÿ<br><strong>ç­”ï¼š</strong> 1. åœ¨å‡½æ•°å®šä¹‰å‰åŠ ä¸Š <code>static</code> å…³é”®å­—ã€‚ 2. å°†å‡½æ•°å®šä¹‰åœ¨ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´ä¸­ã€‚</p>
</li>
<li><p><strong>é—®ï¼š</strong> åœ¨ç°ä»£C++ä¸­ï¼Œå¦‚æœæƒ³å°†ä¸€ä¸ªå‡½æ•°æ”¹ä¸ºå†…éƒ¨é“¾æ¥ï¼Œæ›´æ¨èä½¿ç”¨ <code>static</code> è¿˜æ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br><strong>ç­”ï¼š</strong> æ¨èä½¿ç”¨åŒ¿åå‘½åç©ºé—´ã€‚å› ä¸º <code>static</code> å…³é”®å­—åœ¨C++ä¸­æœ‰å¤šç§å«ä¹‰ï¼Œå¯èƒ½å¼•èµ·æ··æ·†ï¼Œè€ŒåŒ¿åå‘½åç©ºé—´çš„æ„å›¾æ›´æ¸…æ™°ï¼Œå°±æ˜¯ä¸ºäº†æä¾›å†…éƒ¨é“¾æ¥ã€‚</p>
</li>
<li><p><strong>é—®ï¼š</strong> ä»€ä¹ˆæ˜¯ç¼–è¯‘å•å…ƒ (Translation Unit)ï¼Ÿ<br><strong>ç­”ï¼š</strong> é€šå¸¸æŒ‡ä¸€ä¸ª <code>.cpp</code> æºæ–‡ä»¶åŠå…¶åŒ…å«çš„æ‰€æœ‰å¤´æ–‡ä»¶ï¼Œåœ¨ç»è¿‡é¢„å¤„ç†å™¨å¤„ç†åå½¢æˆçš„ä¸€ä¸ªå•å…ƒï¼Œç¼–è¯‘å™¨ä¼šç‹¬ç«‹ç¼–è¯‘å®ƒã€‚</p>
</li>
</ol>
<hr>
<h2 id="5-å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯"><a href="#5-å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯" class="headerlink" title="5. å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯"></a>5. å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯</h2><ol>
<li><p><strong><code>extern</code> çš„æ»¥ç”¨ä¸è¯¯è§£ï¼š</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> åœ¨å¤šä¸ª <code>.cpp</code> æ–‡ä»¶ä¸­éƒ½å†™ <code>extern const int MY_CONST = 100;</code>ã€‚è¿™ä¼šå¯¼è‡´å¤šé‡å®šä¹‰ (multiple definition) é“¾æ¥é”™è¯¯ã€‚<code>extern</code> å˜é‡çš„<strong>å®šä¹‰</strong>ï¼ˆå¸¦åˆå§‹åŒ–çš„ï¼‰åªèƒ½åœ¨ä¸€ä¸ªç¼–è¯‘å•å…ƒä¸­å‡ºç°ã€‚å…¶ä»–ç¼–è¯‘å•å…ƒåº”è¯¥åªç”¨ <code>extern const int MY_CONST;</code> è¿›è¡Œå£°æ˜ã€‚</li>
<li><strong>æ··æ·†å£°æ˜ä¸å®šä¹‰ï¼š</strong> <code>extern int x;</code> æ˜¯å£°æ˜ã€‚<code>int x;</code> åœ¨å…¨å±€ä½œç”¨åŸŸæ˜¯å®šä¹‰ï¼ˆå¦‚æœä¹‹å‰æ²¡æœ‰å£°æ˜è¿‡ï¼Œåˆ™ä¸ºæš‚å®šæ€§å®šä¹‰ï¼Œè‹¥é“¾æ¥æ—¶æ— å…¶ä»–å®šä¹‰ï¼Œåˆ™ä¸º0åˆå§‹åŒ–ï¼‰ã€‚<code>extern int x = 10;</code> æ˜¯å®šä¹‰ã€‚</li>
</ul>
</li>
<li><p><strong><code>static</code> å…³é”®å­—çš„å¤šä¹‰æ€§ï¼š</strong></p>
<ul>
<li><strong>è¯¯è§£ï¼š</strong> è®¤ä¸ºå‡½æ•°å†…çš„ <code>static</code> å±€éƒ¨å˜é‡ä¹Ÿä¸é“¾æ¥å±æ€§æœ‰å…³ã€‚å‡½æ•°å†…çš„ <code>static</code> å˜é‡è¡¨ç¤ºå®ƒå…·æœ‰é™æ€å­˜å‚¨æœŸï¼ˆç”Ÿå‘½å‘¨æœŸè´¯ç©¿æ•´ä¸ªç¨‹åºï¼‰ï¼Œå¹¶ä¸”åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå®ƒçš„ä½œç”¨åŸŸä»ç„¶æ˜¯å±€éƒ¨çš„ï¼Œä¸é“¾æ¥å±æ€§æ— å…³ã€‚æˆ‘ä»¬è¿™é‡Œè®¨è®ºçš„æ˜¯å…¨å±€æˆ–å‘½åç©ºé—´ä½œç”¨åŸŸçš„ <code>static</code> å¯¹é“¾æ¥å±æ€§çš„å½±å“ã€‚</li>
</ul>
</li>
<li><p><strong>å¿˜è®°åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨ <code>extern</code> å£°æ˜ï¼š</strong></p>
<ul>
<li>å¦‚æœåœ¨ <code>file1.cpp</code> ä¸­å®šä¹‰äº† <code>extern const int VAL = 5;</code>ï¼Œä½†åœ¨ <code>file2.cpp</code> ä¸­ç›´æ¥å†™ <code>const int VAL = 10;</code>ï¼ˆæ²¡æœ‰ <code>extern</code>ï¼‰ï¼Œé‚£ä¹ˆ <code>file2.cpp</code> ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ–°çš„ã€ç‹¬ç«‹çš„ã€å…·æœ‰å†…éƒ¨é“¾æ¥çš„ <code>VAL</code>ï¼Œè€Œä¸æ˜¯å¼•ç”¨ <code>file1.cpp</code> ä¸­çš„é‚£ä¸€ä¸ªã€‚å¦‚æœ <code>file2.cpp</code> ä¸­å°è¯•ä½¿ç”¨ <code>VAL</code> ä½†æ²¡æœ‰è‡ªå·±çš„å®šä¹‰ä¹Ÿæ²¡æœ‰ <code>extern</code> å£°æ˜ï¼Œåˆ™ä¼šæŠ¥æœªå®šä¹‰ç¬¦å·é”™è¯¯ã€‚</li>
</ul>
</li>
<li><p><strong>æ— æ³•åŒºåˆ†ç¼–è¯‘å™¨é”™è¯¯å’Œé“¾æ¥å™¨é”™è¯¯ï¼š</strong></p>
<ul>
<li>é“¾æ¥å±æ€§é—®é¢˜é€šå¸¸å¯¼è‡´<strong>é“¾æ¥å™¨é”™è¯¯</strong> (linker error)ï¼Œä¾‹å¦‚ â€œundefined reference to <code>symbol_name</code>â€œ æˆ– â€œmultiple definition of <code>symbol_name</code>â€œã€‚è€Œè¯­æ³•é”™è¯¯ã€ç±»å‹ä¸åŒ¹é…ç­‰é€šå¸¸æ˜¯<strong>ç¼–è¯‘å™¨é”™è¯¯</strong> (compiler error)ã€‚</li>
</ul>
</li>
<li><p><strong>ä¸å¿…è¦çš„é“¾æ¥ç¿»è½¬ï¼š</strong></p>
<ul>
<li>æ–°æ‰‹å¯èƒ½å› ä¸ºåˆšå­¦äº†å°±æƒ³ç”¨ï¼Œä½†å®é™…ä¸Šå¾ˆå¤šæ—¶å€™é»˜è®¤çš„é“¾æ¥å±æ€§å°±æ˜¯æœ€åˆé€‚çš„ã€‚è¿‡åº¦ç¿»è½¬é“¾æ¥å±æ€§ä¼šä½¿ä»£ç å¯è¯»æ€§å˜å·®ï¼Œæ›´éš¾ç»´æŠ¤ã€‚</li>
</ul>
</li>
<li><p><strong>å¯¹åŒ¿åå‘½åç©ºé—´çš„è¯¯è§£ï¼š</strong></p>
<ul>
<li>è®¤ä¸ºåŒ¿åå‘½åç©ºé—´åªæ˜¯â€œéšè—â€äº†åå­—ã€‚å®é™…ä¸Šï¼Œå®ƒç¡®å®ä¸ºå…¶ä¸­çš„ç¬¦å·æä¾›äº†å†…éƒ¨é“¾æ¥ï¼Œä½¿å¾—è¿™äº›ç¬¦å·åœ¨ä¸åŒç¼–è¯‘å•å…ƒä¸­å³ä½¿åŒåä¹Ÿæ˜¯ç‹¬ç«‹çš„ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="6-ç¼–ç ç»ƒä¹ "><a href="#6-ç¼–ç ç»ƒä¹ " class="headerlink" title="6. ç¼–ç ç»ƒä¹ "></a>6. ç¼–ç ç»ƒä¹ </h2><p>ç°åœ¨ï¼Œè¯·ä½ æ¥åŠ¨æ‰‹å®è·µä¸€ä¸‹ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œ<code>exercise_main.cpp</code> å’Œ <code>exercise_helper.cpp</code>ã€‚ä½ çš„ä»»åŠ¡æ˜¯è¡¥å…¨ä»£ç ï¼Œä½¿å¾—ç¨‹åºèƒ½å¤ŸæŒ‰é¢„æœŸå·¥ä½œã€‚</p>
<p><strong><code>exercise_helper.cpp</code>:</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 1: å®šä¹‰ä¸€ä¸ªåä¸º 'MAX_USERS' çš„ const int ç±»å‹çš„å…¨å±€å¸¸é‡ï¼Œ</span></span><br><span class="line"><span class="comment">//         å…¶å€¼ä¸º 100ã€‚è¯·ç¡®ä¿å®ƒå…·æœ‰ EXTERNAL é“¾æ¥ï¼Œä»¥ä¾¿ main.cpp å¯ä»¥è®¿é—®ã€‚</span></span><br><span class="line"><span class="comment">// _______ const int MAX_USERS = 100;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 2: å®šä¹‰ä¸€ä¸ªåä¸º 'print_helper_message' çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">//         è¿™ä¸ªå‡½æ•°ä¸éœ€è¦å‚æ•°ï¼Œè¿”å› voidã€‚</span></span><br><span class="line"><span class="comment">//         å®ƒåº”è¯¥æ‰“å° "Message from exercise_helper.cpp!" åˆ°æ§åˆ¶å°ã€‚</span></span><br><span class="line"><span class="comment">//         è¿™ä¸ªå‡½æ•°åº”è¯¥å…·æœ‰ EXTERNAL é“¾æ¥ (é»˜è®¤å³å¯)ã€‚</span></span><br><span class="line"><span class="comment">// void print_helper_message() &#123;</span></span><br><span class="line"><span class="comment">//     // ... å®ç°æ‰“å° ...</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 3: å®šä¹‰ä¸€ä¸ªåä¸º 'internal_calculation' çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">//         è¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ª int å‚æ•°ï¼Œè¿”å›å®ƒä»¬çš„å’Œ (int)ã€‚</span></span><br><span class="line"><span class="comment">//         è¯·ç¡®ä¿è¿™ä¸ªå‡½æ•°å…·æœ‰ INTERNAL é“¾æ¥ã€‚ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ static æˆ–åŒ¿åå‘½åç©ºé—´ã€‚</span></span><br><span class="line"><span class="comment">// _______ int internal_calculation(int a, int b) &#123;</span></span><br><span class="line"><span class="comment">//     // ... è¿”å› a + b ...</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªå·²æä¾›çš„å¤–éƒ¨é“¾æ¥å‡½æ•°ï¼Œå®ƒä¼šè°ƒç”¨ä¸Šé¢çš„å†…éƒ¨é“¾æ¥å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">perform_calculation_and_print</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"exercise_helper.cpp: Performing internal calculation..."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> result = <span class="number">0</span>; <span class="comment">// æ›¿æ¢ä¸ºå¯¹ internal_calculation çš„è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// TODO 4: åœ¨è¿™é‡Œè°ƒç”¨ä½ å®šä¹‰çš„ internal_calculation å‡½æ•°ï¼Œå¹¶å°†ç»“æœèµ‹å€¼ç»™ result å˜é‡ã€‚</span></span><br><span class="line">    <span class="comment">// result = internal_calculation(x, y);</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"exercise_helper.cpp: Calculation result: "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>exercise_main.cpp</code>:</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 1: å£°æ˜åœ¨ exercise_helper.cpp ä¸­å®šä¹‰çš„ 'MAX_USERS' å¸¸é‡ã€‚</span></span><br><span class="line"><span class="comment">// _______ const int MAX_USERS;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 2: å£°æ˜åœ¨ exercise_helper.cpp ä¸­å®šä¹‰çš„ 'print_helper_message' å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">// _______ void print_helper_message();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åœ¨ exercise_helper.cpp ä¸­å®šä¹‰çš„ 'perform_calculation_and_print' å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">// (è¿™ä¸ªå£°æ˜å·²ç»ä¸ºä½ æä¾›)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">perform_calculation_and_print</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO 3: (æ€è€ƒé¢˜) ä½ èƒ½å¦åœ¨è¿™é‡Œå£°æ˜å¹¶æˆåŠŸè°ƒç”¨ 'internal_calculation' å‡½æ•°ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</span></span><br><span class="line"><span class="comment">// (ä¸éœ€è¦å†™ä»£ç ï¼Œåœ¨å¿ƒé‡Œå›ç­”æˆ–å†™æ³¨é‡Šå›ç­”å³å¯)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"exercise_main.cpp: Program started."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨ TODO 1 å’Œ TODO 2 ä¸­å£°æ˜çš„å†…å®¹</span></span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; "exercise_main.cpp: MAX_USERS = " &lt;&lt; MAX_USERS &lt;&lt; std::endl; // å–æ¶ˆæ­¤è¡Œæ³¨é‡Š</span></span><br><span class="line">    <span class="comment">// print_helper_message(); // å–æ¶ˆæ­¤è¡Œæ³¨é‡Š</span></span><br><span class="line"></span><br><span class="line">    perform_calculation_and_print(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è¯•è°ƒç”¨ internal_calculation (å¦‚æœç›´æ¥è°ƒç”¨ä¼šæ€æ ·ï¼Ÿ)</span></span><br><span class="line">    <span class="comment">// int r = internal_calculation(5,5); // è¿™è¡Œä»£ç å¦‚æœå–æ¶ˆæ³¨é‡Šï¼Œåº”è¯¥ä¼šå¯¼è‡´é“¾æ¥é”™è¯¯</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"exercise_main.cpp: Program finished."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p>ä½ éœ€è¦å°† <code>_______</code> æ›¿æ¢ä¸ºæ­£ç¡®çš„å…³é”®å­—ï¼Œå¹¶è¡¥å…¨å‡½æ•°ä½“å’Œè°ƒç”¨ã€‚å®Œæˆåï¼Œå°è¯•ç¼–è¯‘è¿™ä¸¤ä¸ªæ–‡ä»¶å¹¶è¿è¡Œç¨‹åºã€‚</p>
<p>ç­‰ä½ å®Œæˆåï¼ŒæŠŠä½ çš„ <code>exercise_helper.cpp</code> å’Œ <code>exercise_main.cpp</code> çš„ä»£ç å‘ç»™æˆ‘ï¼Œæˆ‘ä¼šå¸®ä½ æ‰¹æ”¹å¹¶ç»™å‡ºè§£ç­”å’Œè¿›ä¸€æ­¥çš„å»ºè®®ã€‚åŠ æ²¹ï¼</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cpp/">Cpp    </a><a class="post-meta__tags" href="/tags/Coding/">Coding    </a><a class="post-meta__tags" href="/tags/Tutorial/">Tutorial    </a><a class="post-meta__tags" href="/tags/Development/">Development    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2025/06/08/30-resources/coding/python/Jupyter%20correct%20workflow/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>Jupyter correct workflow</span></div></a></div><div class="next-post pull_right"><a href="/2025/06/08/30-resources/coding/python/numpy_advanced_command_quick_lookup_table/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202104250.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>numpy_advanced_command_quick_lookup_table</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/notes/diff between constexpr and define/" title="diff between constexpr and define"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">diff between constexpr and define</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/257 - cpp Default template arguments/" title="257 - cpp Default template arguments"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">257 - cpp Default template arguments</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/262 - constexpr if/" title="262 - constexpr if"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">262 - constexpr if</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/279 - cppææ„å‡½æ•°ï¼šå¯¹è±¡é”€æ¯æ—¶çš„å†…å­˜é‡Šæ”¾/" title="279 - cppææ„å‡½æ•°ï¼šå¯¹è±¡é”€æ¯æ—¶çš„å†…å­˜é‡Šæ”¾"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">279 - cppææ„å‡½æ•°ï¼šå¯¹è±¡é”€æ¯æ—¶çš„å†…å­˜é‡Šæ”¾</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/256 - cpp decltype(auto)/" title="256 - cpp decltype(auto)"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">256 - cpp decltype(auto)</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/282 - cppç»“æ„ä½“ä¸ç±»çš„åŒºåˆ«å’Œç”¨æ³•/" title="282 - cppç»“æ„ä½“ä¸ç±»çš„åŒºåˆ«å’Œç”¨æ³•"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">282 - cppç»“æ„ä½“ä¸ç±»çš„åŒºåˆ«å’Œç”¨æ³•</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'xvMxbws16Erd8WUfqxkvHmb5-gzGzoHsz',
  appKey:'4U0Vo7NQIUL0eJzHdkPzdCDr',
  placeholder:'ä¸è¯´è¯çš„äººä¼šç–¯æ‰å—?',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By supersheepbear</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="external nofollow noopener noreferrer"><span>Butterfly</span></a></div><div class="footer_custom_text">å¤–å‘å­¤ç‹¬è€…æ‚£è€…</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="canvas_nest" color="255,240,245" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>