<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰ | Bear's dream</title><meta name="description" content="333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"><meta name="keywords" content="Coding,Cpp,Tutorial,Development,Developer"><meta name="author" content="supersheepbear"><meta name="copyright" content="supersheepbear"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="p43hXBn3_dLvbyxUzx0eo5eYmj9OVYOV52pdrhBa2sw"><meta name="baidu-site-verification" content="EXLlfLv2pV"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"><meta name="twitter:description" content="333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta property="og:type" content="article"><meta property="og:title" content="333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"><meta property="og:url" content="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/333%20-%20%E5%8C%BF%E5%90%8D%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E6%96%87%E4%BB%B6%E7%A7%81%E6%9C%89/"><meta property="og:site_name" content="Bear's dream"><meta property="og:description" content="333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/333%20-%20%E5%8C%BF%E5%90%8D%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E6%96%87%E4%BB%B6%E7%A7%81%E6%9C%89/"><link rel="prev" title="329 - è·¨æ–‡ä»¶å‘½åç©ºé—´" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/329%20-%20%E8%B7%A8%E6%96%87%E4%BB%B6%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/"><link rel="next" title="332 - cpp usingå£°æ˜å‘½åç©ºé—´å†²çª" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/332%20-%20cpp%20using%E5%A3%B0%E6%98%8E%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%86%B2%E7%AA%81/"><link rel="stylesheet" href="hfttps://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bear's dream" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Bear's dream</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200520153141.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">150</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">151</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">18</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#333-åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æ·±å…¥ç†è§£C-åŒ¿åå‘½åç©ºé—´ï¼šæ–‡ä»¶ç§æœ‰åŒ–çš„åˆ©å™¨"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">æ·±å…¥ç†è§£C++åŒ¿åå‘½åç©ºé—´ï¼šæ–‡ä»¶ç§æœ‰åŒ–çš„åˆ©å™¨</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-ä»€ä¹ˆæ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿ"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">1. ä»€ä¹ˆæ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">2. ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-å†…éƒ¨å‘½åç”Ÿæˆ-Internal-Name-Generation"><span class="toc_mobile_items-number">1.3.2.1.</span> <span class="toc_mobile_items-text">2.1 å†…éƒ¨å‘½åç”Ÿæˆ (Internal Name Generation)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-2-ä½œç”¨åŸŸé™åˆ¶ï¼šå†…éƒ¨é“¾æ¥-Internal-Linkage"><span class="toc_mobile_items-number">1.3.2.2.</span> <span class="toc_mobile_items-text">2.2 ä½œç”¨åŸŸé™åˆ¶ï¼šå†…éƒ¨é“¾æ¥ (Internal Linkage)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-3-åŒä¸€ç¿»è¯‘å•å…ƒå†…çš„å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—"><span class="toc_mobile_items-number">1.3.2.3.</span> <span class="toc_mobile_items-text">2.3 åŒä¸€ç¿»è¯‘å•å…ƒå†…çš„å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-ä¸ºä»€ä¹ˆä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼ŸåŠå…¶ä¸-static-å…³é”®å­—çš„è”ç³»"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">3. ä¸ºä»€ä¹ˆä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼ŸåŠå…¶ä¸ static å…³é”®å­—çš„è”ç³»</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-1-æ›¿ä»£-static-å…³é”®å­—å®ç°å†…éƒ¨é“¾æ¥"><span class="toc_mobile_items-number">1.3.3.1.</span> <span class="toc_mobile_items-text">3.1 æ›¿ä»£ static å…³é”®å­—å®ç°å†…éƒ¨é“¾æ¥</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-2-é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´-Avoiding-Global-Namespace-Pollution"><span class="toc_mobile_items-number">1.3.3.2.</span> <span class="toc_mobile_items-text">3.2 é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ (Avoiding Global Namespace Pollution)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-ä»£ç ç¤ºä¾‹"><span class="toc_mobile_items-number">1.3.4.</span> <span class="toc_mobile_items-text">4. ä»£ç ç¤ºä¾‹</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-QA-é—ªå¡-Flash-Cards"><span class="toc_mobile_items-number">1.3.5.</span> <span class="toc_mobile_items-text">5. QA é—ªå¡ (Flash Cards)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#6-å¸¸è§è¯¯è§£ä¸é”™è¯¯-Common-Misunderstandings-or-Mistakes"><span class="toc_mobile_items-number">1.3.6.</span> <span class="toc_mobile_items-text">6. å¸¸è§è¯¯è§£ä¸é”™è¯¯ (Common Misunderstandings or Mistakes)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#7-ç¼–ç¨‹ç»ƒä¹ -Coding-Exercise"><span class="toc_mobile_items-number">1.3.7.</span> <span class="toc_mobile_items-text">7. ç¼–ç¨‹ç»ƒä¹  (Coding Exercise)</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#333-åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"><span class="toc-number">1.</span> <span class="toc-text">333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant"><span class="toc-number">1.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ·±å…¥ç†è§£C-åŒ¿åå‘½åç©ºé—´ï¼šæ–‡ä»¶ç§æœ‰åŒ–çš„åˆ©å™¨"><span class="toc-number">1.3.</span> <span class="toc-text">æ·±å…¥ç†è§£C++åŒ¿åå‘½åç©ºé—´ï¼šæ–‡ä»¶ç§æœ‰åŒ–çš„åˆ©å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ä»€ä¹ˆæ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿ"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. ä»€ä¹ˆæ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-å†…éƒ¨å‘½åç”Ÿæˆ-Internal-Name-Generation"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">2.1 å†…éƒ¨å‘½åç”Ÿæˆ (Internal Name Generation)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-ä½œç”¨åŸŸé™åˆ¶ï¼šå†…éƒ¨é“¾æ¥-Internal-Linkage"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2.2 ä½œç”¨åŸŸé™åˆ¶ï¼šå†…éƒ¨é“¾æ¥ (Internal Linkage)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-åŒä¸€ç¿»è¯‘å•å…ƒå†…çš„å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">2.3 åŒä¸€ç¿»è¯‘å•å…ƒå†…çš„å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ä¸ºä»€ä¹ˆä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼ŸåŠå…¶ä¸-static-å…³é”®å­—çš„è”ç³»"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. ä¸ºä»€ä¹ˆä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼ŸåŠå…¶ä¸ static å…³é”®å­—çš„è”ç³»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-æ›¿ä»£-static-å…³é”®å­—å®ç°å†…éƒ¨é“¾æ¥"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">3.1 æ›¿ä»£ static å…³é”®å­—å®ç°å†…éƒ¨é“¾æ¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´-Avoiding-Global-Namespace-Pollution"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">3.2 é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ (Avoiding Global Namespace Pollution)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ä»£ç ç¤ºä¾‹"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. ä»£ç ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-QA-é—ªå¡-Flash-Cards"><span class="toc-number">1.3.5.</span> <span class="toc-text">5. QA é—ªå¡ (Flash Cards)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-å¸¸è§è¯¯è§£ä¸é”™è¯¯-Common-Misunderstandings-or-Mistakes"><span class="toc-number">1.3.6.</span> <span class="toc-text">6. å¸¸è§è¯¯è§£ä¸é”™è¯¯ (Common Misunderstandings or Mistakes)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-ç¼–ç¨‹ç»ƒä¹ -Coding-Exercise"><span class="toc-number">1.3.7.</span> <span class="toc-text">7. ç¼–ç¨‹ç»ƒä¹  (Coding Exercise)</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)"><div id="post-info"><div id="post-title"><div class="posttitle">333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2025-06-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2025-06-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/">10-projects</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/">cplusplus</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/lectures/">lectures</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/2025/06/08/10-projects/cplusplus/lectures/333%20-%20%E5%8C%BF%E5%90%8D%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E6%96%87%E4%BB%B6%E7%A7%81%E6%9C%89/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2025/06/08/10-projects/cplusplus/lectures/333%20-%20%E5%8C%BF%E5%90%8D%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E6%96%87%E4%BB%B6%E7%A7%81%E6%9C%89/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="333-åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"><a href="#333-åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰" class="headerlink" title="333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰"></a>333 - åŒ¿åå‘½åç©ºé—´æ–‡ä»¶ç§æœ‰</h1><h2 id="ğŸ§‘â€ğŸ’»-User"><a href="#ğŸ§‘â€ğŸ’»-User" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>In this lecture, weâ€™re going to learn about anonymous namespaces.And these are namespaces that donâ€™t have explicit names in our code.And here is a simple example of how you can do that.You just say namespace.You say the curly braces here, but you donâ€™t specify the name for the namespace.And the things we have inside our namespace here are going to be accessible without specifying the namespacename.As you see here, for example, we can call this add function here and weâ€™re going to have access tothis.If you have multiple declarations for an anonymous namespace like we have here, for example, we haveone on top and we have another below the main function.These are not going to be separate namespaces.They are going to be the same namespace.But what we have below is just going to be an extension of the namespace we have on top here.So note that they are not going to be different namespaces and because they are basically the same namespace,we have a declaration on top and we have a definition for our add function in the namespace below here.But anonymous namespaces have a few things you need to be aware of and weâ€™re going to look at them here.The first is that when the compiler sees an anonymous namespace declared in your code, it is goingto generate an internal name for your namespace.So what is going to happen is basically something like this in file one dot cpp we have a namespacewhich is anonymous in file two.We also have an anonymous namespace.What the compiler is going to do behind the scenes is to generate names for these namespaces.So for example, for file one here, we might have a namespace like this.For file two, we might have a namespace like this, but one thing you should know is that you donâ€™thave access to these names here.These are for use by the compiler and a direct consequence of this is that anonymous namespaces canonly be used in the translation units where they are declared.Or to say this.In other words, things you declare in an anonymous namespaces are only going to be usable in the translationunit where they were declared, and you should really know this.And weâ€™re going to see an example of this in a minute when we hit Visual Studio code.But you should really keep this clear in your mind.Okay.The generated unique namespace name is not accessible to you, the developer, so you canâ€™t use thatname.It is for use by the compiler and there can only be one anonymous namespace for a single translationunit.If you set up multiple anonymous namespaces blocks, they just be extensions for the first one.And we have talked about this.Anonymous namespaces in different translation units are completely separate and the compiler is justgoing to generate different namespaces for these guys.And because you donâ€™t have access to the compiler generated namespace, the things you declare insidethe namespace are only going to be accessible in the translation unit where they were declared.This is what we just said, but I really want you to keep this in mind.Okay?We have seen the syntax to declare anonymous namespaces and we know that names inside an anonymous namespaceare only going to be reachable and usable from the translation unit where they were declared.And it is time we headed over to Visual Studio Code and played with us a little more.Okay, here we are in our working folder.The current project is Anonymous Namespaces.Weâ€™re going to grab our template files, weâ€™re going to put them in place.Letâ€™s do that.And weâ€™re going to open this little guy in Visual Studio code by dragging and dropping here, and weâ€™regoing to have our main.cpp file.We can close the left sidebar.We donâ€™t need that anymore.And weâ€™re going to play a little bit.Weâ€™re going to set up another function, double add.Itâ€™s going to add up two parameters, double A and double B, and this function is going to live insidean anonymous namespace.So weâ€™re going to say namespace and weâ€™re not going to specify the name for this namespace.Weâ€™re just going to say namespace here.I think we can bring this guy to the top.Thatâ€™s what I like and weâ€™re going to bring this inside our namespace here and this is the syntax foran anonymous namespace.You say namespace, you donâ€™t specify the name and you put your curly braces and you put whatever youwant to put inside your namespace.Here.In this case, we are putting in the declaration for our Add function.We can also put the definition of this little guy below the main function and it is going to live insidethe namespace here.But this is going to be a definition.So weâ€™re going to put a.A pair of curly braces and weâ€™re going to return A plus B, because thatâ€™s what we want to do here.Now, how do we call this function?We know it is living inside the namespace.The compiler is going to generate a name for this namespace, but we donâ€™t have access to that name.To call this function.All we have to do is say Add, letâ€™s do double result equals Add and say 10.1 and 20.2.We can do that and weâ€™re going to see what we get from the compiler.Letâ€™s put a semicolon there and we can print the result out.We can say Stdcout result and weâ€™re going to say result here.Okay, so what do we get?Letâ€™s try and build this program weâ€™re going to build successfully.We can clear and run Rooster by bringing up a terminal here.Letâ€™s bring up a terminal and weâ€™re going to clear and run Rooster.Weâ€™re going to see that the result is going to be what we expect, 30.4.So what this is really doing, itâ€™s making this function behave as if it was declared in the globalnamespace because we are able to call it like this.So but that magic is going to be done by the compiler to make this function accessible here.But one thing you should know is that once you declare inside, anonymous namespaces like this are onlygoing to be usable in the translation unit where they were declared.And thatâ€™s really important to bring this point home.I am going to add another translation unit, maybe called this some other file.Why not?And itâ€™s going to be a CPP file and weâ€™re going to set up an anonymous namespace with a definition forthis function here.We can copy this and comment this out.To take this out of the main CPP file and weâ€™re going to paste that little guy here.And we note that when the compiler sees a call to this function, it is going to see a declaration insidethis namespace.So this is going to compile.But once we hit the link stage, the linker is going to look for the definition of this function.Itâ€™s going to look in this translation unit.Itâ€™s not going to find it.Itâ€™s going to look in this translation unit, itâ€™s going to see this Add function.This is a definition, but this definition is only accessible from the translation unit where it isdefined.And this happens to be a separate translation unit.So the compiler is not going to find this.This is only usable in some other file translation unit.So this is not going to work and we are going to get a linker error.Letâ€™s try and build this because I want you to see this.Weâ€™re going to run the task to build with GCC and the world should fail.Youâ€™re going to see build finished with errors and we have an undefined reference to add double, whichis living in an anonymous namespace.So you really should see this.And this is a problem.This should prove that things that you declare inside anonymous namespaces are only usable and accessiblefrom the translation unit where they were declared.The function we have here is only usable in this translation unit.If we go down here and, for example, say void, do something and we go inside and call, add and specifyone and two, for example.So if this function was declared in the main function like we did before, this should work just finebecause now we are trying to use this function from the translation unit where it was declared and definedhere.If we do this, youâ€™re going to see that this is going to work.Letâ€™s build again to make sure this works.We have no typo.This is building successfully.We can clear and run Rooster and this is working just fine.This is really all I had to share in this lecture, showing you the syntax you can use to set up anonymousnamespaces.Please note that the compiler is going to generate a name for this namespaces, but the name is notgoing to be accessible to you in your code.A direct consequence of that is that things you declare inside your anonymous namespace are going tobe only usable and reachable from the translation unit where you declare them and they are going tobe accessible because the compiler is going to do some magic and make them feel like they were declaredin the global namespace.And we can access these names directly without using a namespace prefix like we have been doing before.We are going to stop here in this lecture and the next one weâ€™re going to learn about nesting.Namespaces.Go ahead and finish up here and meet me there.ã€</p>
<hr>
<h2 id="ğŸ¤–-Assistant"><a href="#ğŸ¤–-Assistant" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¥½çš„ï¼Œæ¬¢è¿æ¥åˆ°C++å­¦ä¹ ä¹‹æ—…ï¼ä½œä¸ºæ‚¨çš„C++ä¸“ä¸šå¼€å‘å¯¼å¸ˆï¼Œæˆ‘å°†å°½æˆ‘æ‰€èƒ½ï¼Œç”¨æœ€æ¸…æ™°ã€æœ€æ˜“æ‡‚çš„æ–¹å¼ï¼Œå¸¦æ‚¨æ·±å…¥äº†è§£C++ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µâ€”â€”<strong>åŒ¿åå‘½åç©ºé—´ (Anonymous Namespaces)</strong>ã€‚</p>
<hr>
<h2 id="æ·±å…¥ç†è§£C-åŒ¿åå‘½åç©ºé—´ï¼šæ–‡ä»¶ç§æœ‰åŒ–çš„åˆ©å™¨"><a href="#æ·±å…¥ç†è§£C-åŒ¿åå‘½åç©ºé—´ï¼šæ–‡ä»¶ç§æœ‰åŒ–çš„åˆ©å™¨" class="headerlink" title="æ·±å…¥ç†è§£C++åŒ¿åå‘½åç©ºé—´ï¼šæ–‡ä»¶ç§æœ‰åŒ–çš„åˆ©å™¨"></a><strong>æ·±å…¥ç†è§£C++åŒ¿åå‘½åç©ºé—´ï¼šæ–‡ä»¶ç§æœ‰åŒ–çš„åˆ©å™¨</strong></h2><p><strong>æ ¸å¿ƒæ€»ç»“ï¼š</strong> æœ¬èŠ‚è¯¾å°†è¯¦ç»†ä»‹ç»C++ä¸­<strong>åŒ¿åå‘½åç©ºé—´ (Anonymous Namespaces)</strong> çš„å®šä¹‰ã€è¯­æ³•ã€å·¥ä½œåŸç†åŠå…¶æ ¸å¿ƒç‰¹æ€§â€”â€”<strong>æ–‡ä»¶å†…ä½œç”¨åŸŸ (translation unit scope)</strong>ã€‚æˆ‘ä»¬å°†ç†è§£å®ƒä¸ºä½•æ˜¯å®ç°<strong>å†…éƒ¨é“¾æ¥ (internal linkage)</strong> çš„ç°ä»£C++æ–¹å¼ï¼Œå¹¶æ¢è®¨å®ƒä¸ä¼ ç»Ÿ<code>static</code>å…³é”®å­—çš„åŒºåˆ«ä¸è”ç³»ï¼Œä»¥åŠå¦‚ä½•é¿å…å¸¸è§çš„è¯¯è§£å’Œé”™è¯¯ã€‚</p>
<hr>
<h3 id="1-ä»€ä¹ˆæ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿ"></a><strong>1. ä»€ä¹ˆæ˜¯åŒ¿åå‘½åç©ºé—´ï¼Ÿ</strong></h3><p>åŒ¿åå‘½åç©ºé—´ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯<strong>æ²¡æœ‰æ˜¾å¼åå­— (explicit names)</strong> çš„å‘½åç©ºé—´ã€‚å®ƒçš„è¯­æ³•éå¸¸ç®€å•ï¼Œå°±åƒä¸€ä¸ªæ™®é€šçš„å‘½åç©ºé—´å£°æ˜ï¼Œåªæ˜¯åœ¨<code>namespace</code>å…³é”®å­—åé¢æ²¡æœ‰è·Ÿç€ä»»ä½•åå­—ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> &#123; <span class="comment">// è¿™å°±æ˜¯ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´</span></span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œå£°æ˜æˆ–å®šä¹‰ä½ çš„å˜é‡ã€å‡½æ•°ã€ç±»ç­‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>ä½œç”¨ï¼š</strong> åŒ¿åå‘½åç©ºé—´çš„ä¸»è¦ä½œç”¨æ˜¯å°†å…¶å†…éƒ¨å£°æ˜æˆ–å®šä¹‰çš„æ‰€æœ‰å®ä½“ï¼ˆå¦‚å˜é‡ã€å‡½æ•°ã€ç±»ã€æšä¸¾ç­‰ï¼‰çš„ä½œç”¨åŸŸé™åˆ¶åœ¨å½“å‰çš„<strong>ç¿»è¯‘å•å…ƒ (translation unit)</strong> å†…ã€‚ä¸€ä¸ªç¿»è¯‘å•å…ƒé€šå¸¸æŒ‡ä¸€ä¸ª<code>.cpp</code>æºæ–‡ä»¶åŠå…¶é€šè¿‡<code>#include</code>æŒ‡ä»¤åŒ…å«çš„æ‰€æœ‰å¤´æ–‡ä»¶ç»è¿‡é¢„å¤„ç†åçš„ç»“æœã€‚</p>
<p><strong>è®¿é—®æ–¹å¼ï¼š</strong> æœ‰è¶£çš„æ˜¯ï¼Œè™½ç„¶å®ƒæ²¡æœ‰åå­—ï¼Œä½†æ‚¨å¯ä»¥åœ¨å½“å‰ç¿»è¯‘å•å…ƒå†…ç›´æ¥è®¿é—®å…¶å†…éƒ¨çš„æˆå‘˜ï¼Œä¸éœ€è¦ä½¿ç”¨ä»»ä½•å‘½åç©ºé—´å‰ç¼€ã€‚è¿™ä½¿å¾—å®ƒä»¬çœ‹èµ·æ¥åƒæ˜¯ä½äº<strong>å…¨å±€å‘½åç©ºé—´ (global namespace)</strong> ä¸­ï¼Œä½†å®é™…ä¸Šï¼Œå®ƒä»¬çš„ä½œç”¨åŸŸè¢«ä¸¥æ ¼é™åˆ¶åœ¨å½“å‰æ–‡ä»¶å†…éƒ¨ã€‚</p>
<h3 id="2-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ"><a href="#2-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ" class="headerlink" title="2. ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ"></a><strong>2. ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ</strong></h3><p>ç†è§£åŒ¿åå‘½åç©ºé—´çš„å…³é”®åœ¨äºç†è§£ç¼–è¯‘å™¨åœ¨å¹•åæ˜¯å¦‚ä½•å¤„ç†å®ƒä»¬çš„ã€‚</p>
<h4 id="2-1-å†…éƒ¨å‘½åç”Ÿæˆ-Internal-Name-Generation"><a href="#2-1-å†…éƒ¨å‘½åç”Ÿæˆ-Internal-Name-Generation" class="headerlink" title="2.1 å†…éƒ¨å‘½åç”Ÿæˆ (Internal Name Generation)"></a><strong>2.1 å†…éƒ¨å‘½åç”Ÿæˆ (Internal Name Generation)</strong></h4><p>å½“<strong>ç¼–è¯‘å™¨ (compiler)</strong> é‡åˆ°ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´æ—¶ï¼Œå®ƒä¼šä¸ºè¿™ä¸ªå‘½åç©ºé—´ç”Ÿæˆä¸€ä¸ª<strong>å”¯ä¸€ (unique)</strong> çš„ã€å¯¹å¼€å‘è€…<strong>ä¸å¯è®¿é—® (inaccessible)</strong> çš„å†…éƒ¨åå­—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„<code>file1.cpp</code>ä¸­æœ‰ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨å†…éƒ¨å°†å…¶è§†ä¸ºä¸€ä¸ªåä¸º<code>__unique_id_for_file1</code>çš„å‘½åç©ºé—´ã€‚è€Œ<code>file2.cpp</code>ä¸­çš„åŒ¿åå‘½åç©ºé—´åˆ™ä¼šå¾—åˆ°å¦ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å†…éƒ¨åå­—ï¼Œæ¯”å¦‚<code>__unique_id_for_file2</code>ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ file1.cpp</span></span><br><span class="line"><span class="keyword">namespace</span> &#123; <span class="comment">// ç¼–è¯‘å™¨å†…éƒ¨å¯èƒ½å¤„ç†ä¸ºï¼šnamespace __some_unique_id_123A_ &#123; ... &#125;</span></span><br><span class="line">    <span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">helper_func</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾ file2.cpp</span></span><br><span class="line"><span class="keyword">namespace</span> &#123; <span class="comment">// ç¼–è¯‘å™¨å†…éƒ¨å¯èƒ½å¤„ç†ä¸ºï¼šnamespace __another_unique_id_456B_ &#123; ... &#125;</span></span><br><span class="line">    <span class="keyword">int</span> counter = <span class="number">0</span>; <span class="comment">// è¿™ä¸ª counter å’Œ file1.cpp é‡Œçš„ counter æ˜¯å®Œå…¨ç‹¬ç«‹çš„</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">helper_func</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span> &#125; <span class="comment">// è¿™ä¸ª helper_func å’Œ file1.cpp é‡Œçš„ helper_func ä¹Ÿæ˜¯å®Œå…¨ç‹¬ç«‹çš„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>å…³é”®ç‚¹ï¼š</strong> æ‚¨æ— æ³•åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨è¿™äº›ç¼–è¯‘å™¨ç”Ÿæˆçš„å†…éƒ¨åå­—ã€‚</p>
<h4 id="2-2-ä½œç”¨åŸŸé™åˆ¶ï¼šå†…éƒ¨é“¾æ¥-Internal-Linkage"><a href="#2-2-ä½œç”¨åŸŸé™åˆ¶ï¼šå†…éƒ¨é“¾æ¥-Internal-Linkage" class="headerlink" title="2.2 ä½œç”¨åŸŸé™åˆ¶ï¼šå†…éƒ¨é“¾æ¥ (Internal Linkage)"></a><strong>2.2 ä½œç”¨åŸŸé™åˆ¶ï¼šå†…éƒ¨é“¾æ¥ (Internal Linkage)</strong></h4><p>ç”±äºç¼–è¯‘å™¨ä¸ºæ¯ä¸ªç¿»è¯‘å•å…ƒä¸­çš„åŒ¿åå‘½åç©ºé—´ç”Ÿæˆäº†ç‹¬æœ‰çš„ã€ä¸å¯è®¿é—®çš„å†…éƒ¨åå­—ï¼Œè¿™å°±å¯¼è‡´äº†åŒ¿åå‘½åç©ºé—´ä¸­å£°æ˜çš„å®ä½“å…·æœ‰<strong>å†…éƒ¨é“¾æ¥ (internal linkage)</strong>ã€‚</p>
<p><strong>å†…éƒ¨é“¾æ¥æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li><strong>ç§æœ‰åŒ–ï¼š</strong> è¿™äº›å®ä½“åªåœ¨å®ƒä»¬è¢«å®šä¹‰å’Œå£°æ˜çš„é‚£ä¸ªç¿»è¯‘å•å…ƒå†…æ˜¯å¯è§å’Œå¯ç”¨çš„ã€‚</li>
<li><strong>éš”ç¦»æ€§ï¼š</strong> å®ƒä»¬ä¸ä¼šè¢«<strong>é“¾æ¥å™¨ (linker)</strong> åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¹‹é—´å…±äº«ã€‚å³ä½¿ä¸åŒæ–‡ä»¶æœ‰åŒåçš„å‡½æ•°æˆ–å˜é‡ï¼Œåªè¦å®ƒä»¬åœ¨å„è‡ªçš„åŒ¿åå‘½åç©ºé—´å†…ï¼Œå°±ä¸ä¼šäº§ç”Ÿå†²çªï¼Œå› ä¸ºé“¾æ¥å™¨ä¼šå°†å®ƒä»¬è§†ä¸ºå®Œå…¨ä¸åŒçš„å®ä½“ï¼ˆå› ä¸ºå®ƒä»¬å±äºä¸åŒçš„å†…éƒ¨å‘½åç©ºé—´ï¼‰ã€‚</li>
</ul>
<p>è¿™æ˜¯åŒ¿åå‘½åç©ºé—´ä¸æ™®é€šå‘½åç©ºé—´æœ€æœ¬è´¨çš„åŒºåˆ«ã€‚æ™®é€šå‘½åç©ºé—´ä¸­çš„å®ä½“é»˜è®¤å…·æœ‰å¤–éƒ¨é“¾æ¥ï¼Œå¯ä»¥è¢«å…¶ä»–ç¿»è¯‘å•å…ƒè®¿é—®ï¼ˆåªè¦å£°æ˜å¯è§ï¼‰ã€‚</p>
<h4 id="2-3-åŒä¸€ç¿»è¯‘å•å…ƒå†…çš„å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—"><a href="#2-3-åŒä¸€ç¿»è¯‘å•å…ƒå†…çš„å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—" class="headerlink" title="2.3 åŒä¸€ç¿»è¯‘å•å…ƒå†…çš„å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—"></a><strong>2.3 åŒä¸€ç¿»è¯‘å•å…ƒå†…çš„å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—</strong></h4><p>åœ¨ä¸€ä¸ªç¿»è¯‘å•å…ƒï¼ˆ<code>.cpp</code>æ–‡ä»¶ï¼‰å†…éƒ¨ï¼Œæ‚¨å¯ä»¥å£°æ˜å¤šä¸ªåŒ¿åå‘½åç©ºé—´å—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>è¿™äº›å—å¹¶ä¸ä¼šåˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„åŒ¿åå‘½åç©ºé—´</strong>ã€‚ç›¸åï¼Œå®ƒä»¬éƒ½æ˜¯å¯¹<strong>åŒä¸€ä¸ª</strong>ã€ç”±ç¼–è¯‘å™¨ä¸ºè¯¥ç¿»è¯‘å•å…ƒç”Ÿæˆçš„é‚£ä¸ªåŒ¿åå‘½åç©ºé—´çš„<strong>æ‰©å±• (extension)</strong>ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œæ‚¨å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´å—ä¸­å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­çš„å¦ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´å—ä¸­ä¸ºå®ƒæä¾›<strong>å®šä¹‰ (definition)</strong>ï¼Œå°±åƒæ“ä½œæ™®é€šå‘½åç©ºé—´ä¸€æ ·ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> &#123; <span class="comment">// ç¬¬ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´å—</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">do_something</span><span class="params">()</span></span>; <span class="comment">// å£°æ˜ (declaration)</span></span><br><span class="line">    <span class="keyword">int</span> file_private_data = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ... main å‡½æ•°æˆ–å…¶ä»–ä»£ç  ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> &#123; <span class="comment">// ç¬¬äºŒä¸ªåŒ¿åå‘½åç©ºé—´å— (æ˜¯å‰ä¸€ä¸ªçš„æ‰©å±•)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">do_something</span><span class="params">()</span> </span>&#123; <span class="comment">// å®šä¹‰</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Doing something and accessing private data: "</span> &lt;&lt; file_private_data &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="3-ä¸ºä»€ä¹ˆä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼ŸåŠå…¶ä¸-static-å…³é”®å­—çš„è”ç³»"><a href="#3-ä¸ºä»€ä¹ˆä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼ŸåŠå…¶ä¸-static-å…³é”®å­—çš„è”ç³»" class="headerlink" title="3. ä¸ºä»€ä¹ˆä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼ŸåŠå…¶ä¸ static å…³é”®å­—çš„è”ç³»"></a><strong>3. ä¸ºä»€ä¹ˆä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼ŸåŠå…¶ä¸ <code>static</code> å…³é”®å­—çš„è”ç³»</strong></h3><p>åŒ¿åå‘½åç©ºé—´æ˜¯ç°ä»£C++ä¸­éå¸¸æ¨èçš„ç‰¹æ€§ï¼Œä¸»è¦ç”¨äºå®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p>
<h4 id="3-1-æ›¿ä»£-static-å…³é”®å­—å®ç°å†…éƒ¨é“¾æ¥"><a href="#3-1-æ›¿ä»£-static-å…³é”®å­—å®ç°å†…éƒ¨é“¾æ¥" class="headerlink" title="3.1 æ›¿ä»£ static å…³é”®å­—å®ç°å†…éƒ¨é“¾æ¥"></a><strong>3.1 æ›¿ä»£ <code>static</code> å…³é”®å­—å®ç°å†…éƒ¨é“¾æ¥</strong></h4><p>åœ¨C++11ä¹‹å‰ï¼Œä¸ºäº†è®©ä¸€ä¸ªå…¨å±€å˜é‡æˆ–å‡½æ•°åªåœ¨å½“å‰æ–‡ä»¶å¯è§ï¼ˆå³å…·æœ‰å†…éƒ¨é“¾æ¥ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨<code>static</code>å…³é”®å­—ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// old_style_module.cpp</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> s_global_counter = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_private_helper</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span><br></pre></td></tr></table></figure></div>
<p>ç„¶è€Œï¼Œ<code>static</code>å…³é”®å­—åœ¨C++ä¸­æœ‰å¤šç§å«ä¹‰ï¼ˆä¾‹å¦‚ï¼Œç”¨äºç±»æˆå‘˜ã€å±€éƒ¨å˜é‡ã€å…¨å±€/æ–‡ä»¶ä½œç”¨åŸŸï¼‰ï¼Œè¿™æœ‰æ—¶ä¼šå¼•èµ·æ··æ·†ã€‚</p>
<p><strong>åŒ¿åå‘½åç©ºé—´æ˜¯C++æ ‡å‡†æ¨èçš„æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼Œå®ƒæ›´æ¸…æ™°åœ°è¡¨è¾¾äº†â€œè¿™ä¸ªå®ä½“åªåœ¨å½“å‰ç¿»è¯‘å•å…ƒå†…å¯è§â€çš„æ„å›¾ï¼Œå¹¶ä¸”å¯ä»¥åº”ç”¨äºæ›´å¹¿æ³›çš„å®ä½“ç±»å‹ï¼ˆåŒ…æ‹¬ç±»ã€æšä¸¾ç­‰ï¼‰ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// modern_module.cpp</span></span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> file_private_counter = <span class="number">0</span>; <span class="comment">// å…·æœ‰å†…éƒ¨é“¾æ¥çš„å˜é‡</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">file_private_helper</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span> &#125; <span class="comment">// å…·æœ‰å†…éƒ¨é“¾æ¥çš„å‡½æ•°</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">FilePrivateClass</span> &#123;</span> <span class="comment">/* ... */</span> &#125;; <span class="comment">// å…·æœ‰å†…éƒ¨é“¾æ¥çš„ç±»</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>ä½¿ç”¨åŒ¿åå‘½åç©ºé—´çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰æ¸…æ™°ï¼š</strong> æ˜ç¡®è¡¨è¾¾äº†æ–‡ä»¶ç§æœ‰åŒ–çš„æ„å›¾ã€‚</li>
<li><strong>é¿å…åç§°å†²çªï¼š</strong> å³ä½¿å…¶ä»–ç¿»è¯‘å•å…ƒå®šä¹‰äº†åŒåçš„å…¨å±€å˜é‡æˆ–å‡½æ•°ï¼Œä¹Ÿä¸ä¼šå‘ç”Ÿå†²çªã€‚</li>
<li><strong>å¯åº”ç”¨äºæ‰€æœ‰å®ä½“ï¼š</strong> ä¸ä»…é™äºå˜é‡å’Œå‡½æ•°ï¼Œè¿˜å¯ä»¥ç”¨äºç±»ã€ç»“æ„ä½“ã€æšä¸¾ç­‰ã€‚</li>
</ul>
<h4 id="3-2-é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´-Avoiding-Global-Namespace-Pollution"><a href="#3-2-é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´-Avoiding-Global-Namespace-Pollution" class="headerlink" title="3.2 é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ (Avoiding Global Namespace Pollution)"></a><strong>3.2 é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ (Avoiding Global Namespace Pollution)</strong></h4><p>å°½ç®¡åŒ¿åå‘½åç©ºé—´ä¸­çš„å†…å®¹å¯ä»¥ç›´æ¥è®¿é—®ï¼Œçœ‹èµ·æ¥åƒæ˜¯åœ¨<strong>å…¨å±€å‘½åç©ºé—´ (global namespace)</strong> ä¸­ï¼Œä½†ä»é“¾æ¥çš„è§’åº¦çœ‹ï¼Œå®ƒä»¬æ˜¯è¢«éš”ç¦»çš„ã€‚è¿™æœ‰åŠ©äºä¿æŒå…¨å±€å‘½åç©ºé—´çš„æ•´æ´ï¼Œå‡å°‘åç§°å†²çªçš„å¯èƒ½æ€§ã€‚</p>
<h3 id="4-ä»£ç ç¤ºä¾‹"><a href="#4-ä»£ç ç¤ºä¾‹" class="headerlink" title="4. ä»£ç ç¤ºä¾‹"></a><strong>4. ä»£ç ç¤ºä¾‹</strong></h3><p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç ç¤ºä¾‹æ¥å…·ä½“ç†è§£åŒ¿åå‘½åç©ºé—´çš„ä½¿ç”¨å’Œç‰¹æ€§ã€‚</p>
<p><strong>é¡¹ç›®ç»“æ„ï¼š</strong></p>
<ul>
<li><code>main.cpp</code></li>
<li><code>some_other_file.cpp</code></li>
</ul>
<p><strong><code>main.cpp</code> æ–‡ä»¶ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¿åå‘½åç©ºé—´å— 1ï¼šåŒ…å« Add å‡½æ•°çš„å£°æ˜</span></span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">Add</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span></span>; <span class="comment">// å£°æ˜ Add å‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> MODULE_NAME = <span class="string">"MainModule"</span>; <span class="comment">// å£°æ˜ä¸€ä¸ªæ–‡ä»¶ç§æœ‰å¸¸é‡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"æ¨¡å—åç§°: "</span> &lt;&lt; MODULE_NAME &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// å¯ä»¥ç›´æ¥è®¿é—® MODULE_NAME</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›´æ¥è°ƒç”¨ Add å‡½æ•°ï¼Œæ— éœ€å‘½åç©ºé—´å‰ç¼€</span></span><br><span class="line">    <span class="keyword">double</span> result = Add(<span class="number">10.1</span>, <span class="number">20.2</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Add(10.1, 20.2) = "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è¯•è°ƒç”¨ some_other_file.cpp ä¸­çš„ do_something</span></span><br><span class="line">    <span class="comment">// ç†è®ºä¸Š do_something åº”è¯¥åœ¨ some_other_file.cpp ä¸­è°ƒç”¨å…¶å†…éƒ¨çš„ Add</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œæˆ‘ä»¬æ— æ³•ç›´æ¥è°ƒç”¨ some_other_file.cpp å†…éƒ¨çš„ Add å‡½æ•°</span></span><br><span class="line">    <span class="comment">// ä½†å¯ä»¥å°è¯•å£°æ˜ä¸€ä¸ªå¤–éƒ¨å‡½æ•°ï¼ˆå¦‚æœ some_other_file.cpp æš´éœ²äº†å®ƒï¼‰</span></span><br><span class="line">    <span class="comment">// extern void call_add_from_other_file(); // å‡è®¾ some_other_file.cpp æœ‰ä¸€ä¸ªè¿™ä¸ªå‡½æ•°</span></span><br><span class="line">    <span class="comment">// call_add_from_other_file(); // å¦‚æœ some_other_file.cpp æä¾›äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨å®ƒæ¥é—´æ¥è§¦å‘</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¿åå‘½åç©ºé—´å— 2ï¼šä¸º Add å‡½æ•°æä¾›å®šä¹‰</span></span><br><span class="line"><span class="comment">// è¿™æ˜¯å¯¹ä¸Šé¢åŒ¿åå‘½åç©ºé—´çš„æ‰©å±•</span></span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">Add</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span> </span>&#123; <span class="comment">// å®šä¹‰ Add å‡½æ•°</span></span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong><code>some_other_file.cpp</code> æ–‡ä»¶ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// some_other_file.cpp çš„åŒ¿åå‘½åç©ºé—´</span></span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">Add</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span> </span>&#123; <span class="comment">// è¿™ä¸ª Add å’Œ main.cpp ä¸­çš„ Add æ˜¯å®Œå…¨ç‹¬ç«‹çš„</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ some_other_file.cpp çš„åŒ¿åå‘½åç©ºé—´ä¸­è°ƒç”¨ Add å‡½æ•°."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> a + b + <span class="number">1.0</span>; <span class="comment">// åŠ ä¸€ä¸ª 1.0 ä»¥ç¤ºåŒºåˆ«</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">do_something_internal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åœ¨ some_other_file.cpp å†…éƒ¨è°ƒç”¨ Add(1, 2): "</span>;</span><br><span class="line">        <span class="keyword">double</span> res = Add(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// æˆåŠŸè°ƒç”¨æœ¬æ–‡ä»¶åŒ¿åå‘½åç©ºé—´ä¸­çš„ Add</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå‡½æ•°æ˜¯å¤–éƒ¨å¯è§çš„ï¼Œå®ƒä¼šè°ƒç”¨å½“å‰æ–‡ä»¶å†…éƒ¨çš„åŒ¿åå‘½åç©ºé—´æˆå‘˜</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">call_add_from_other_file</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ä» some_other_file.cpp çš„å¤–éƒ¨å¯è§å‡½æ•°ä¸­è°ƒç”¨ do_something_internal()"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    do_something_internal(); <span class="comment">// å¯ä»¥åœ¨æœ¬æ–‡ä»¶å†…è®¿é—®åŒ¿åå‘½åç©ºé—´ä¸­çš„ do_something_internal</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šå¦‚æœ main.cpp å°è¯•ç›´æ¥è°ƒç”¨ some_other_file.cpp é‡Œçš„ Add å‡½æ•°ï¼ˆä¾‹å¦‚é€šè¿‡ extern double Add(double, double);ï¼‰</span></span><br><span class="line"><span class="comment">// é“¾æ¥å™¨ä¼šæŠ¥é”™ï¼Œå› ä¸º some_other_file.cpp é‡Œçš„ Add å…·æœ‰å†…éƒ¨é“¾æ¥ï¼Œæ— æ³•è¢«å¤–éƒ¨é“¾æ¥ã€‚</span></span><br></pre></td></tr></table></figure></div>
<p><strong>ç¼–è¯‘å’Œé“¾æ¥æ¼”ç¤ºï¼š</strong></p>
<ol>
<li><p><strong>å•ç‹¬ç¼–è¯‘ <code>main.cpp</code> å’Œ <code>some_other_file.cpp</code>ï¼š</strong></p>
<ul>
<li><code>g++ -c main.cpp -o main.o</code></li>
<li><code>g++ -c some_other_file.cpp -o some_other_file.o</code></li>
<li>è¿™ä¸¤ä¸ªå‘½ä»¤éƒ½ä¼šæˆåŠŸï¼Œå› ä¸ºå„è‡ªæ–‡ä»¶å†…çš„åŒ¿åå‘½åç©ºé—´ä½¿ç”¨æ˜¯åˆæ³•çš„ã€‚</li>
</ul>
</li>
<li><p><strong>é“¾æ¥æ‰€æœ‰<code>.o</code>æ–‡ä»¶ï¼š</strong></p>
<ul>
<li><code>g++ main.o some_other_file.o -o my_program</code></li>
<li>è¿™ä¹Ÿä¼šæˆåŠŸï¼Œå› ä¸º <code>main.cpp</code> é‡Œçš„ <code>Add</code> å’Œ <code>some_other_file.cpp</code> é‡Œçš„ <code>Add</code> å³ä½¿åŒåï¼Œåœ¨é“¾æ¥é˜¶æ®µä¹Ÿæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ç¬¦å·ï¼Œä¸ä¼šå†²çªã€‚</li>
</ul>
</li>
<li><p><strong>è¿è¡Œ <code>my_program</code>ï¼š</strong></p>
<ul>
<li>æ‚¨ä¼šçœ‹åˆ° <code>main.cpp</code> æ‰“å°å‡º <code>Add(10.1, 20.2) = 30.3</code>ã€‚</li>
<li>å¦‚æœæ‚¨åœ¨ <code>main.cpp</code> ä¸­å–æ¶ˆ <code>extern void call_add_from_other_file();</code> çš„æ³¨é‡Šå¹¶è°ƒç”¨å®ƒï¼Œæ‚¨å°†çœ‹åˆ° <code>some_other_file.cpp</code> å†…éƒ¨çš„ <code>Add</code> è¢«è°ƒç”¨ï¼Œå¹¶æ‰“å°å‡º <code>åœ¨ some_other_file.cpp çš„åŒ¿åå‘½åç©ºé—´ä¸­è°ƒç”¨ Add å‡½æ•°. 3.0</code>ã€‚</li>
</ul>
</li>
</ol>
<p><strong>å°è¯•åˆ¶é€ é“¾æ¥é”™è¯¯ï¼ˆå…³é”®ç‚¹ï¼‰ï¼š</strong></p>
<ul>
<li><strong>å‡è®¾ï¼š</strong> æˆ‘ä»¬æƒ³åœ¨ <code>main.cpp</code> ä¸­ç›´æ¥ä½¿ç”¨ <code>some_other_file.cpp</code> ä¸­çš„ <code>Add</code> å‡½æ•°ã€‚</li>
<li><strong>ä¿®æ”¹ <code>main.cpp</code> (é”™è¯¯å°è¯•):</strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æƒ³è®¿é—® some_other_file.cpp ä¸­çš„ Add</span></span><br><span class="line"><span class="comment">// extern double Add(double a, double b); // é”™è¯¯çš„å°è¯•ï¼</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// double result = Add(1.0, 2.0); // ç¼–è¯‘ä¼šé€šè¿‡ï¼Œä½†é“¾æ¥ä¼šå¤±è´¥ï¼</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>ç»“æœï¼š</strong> ç¼–è¯‘é˜¶æ®µå¯èƒ½ä¸ä¼šæŠ¥é”™ï¼ˆå› ä¸ºæœ‰<code>extern</code>å£°æ˜ï¼Œç¼–è¯‘å™¨è®¤ä¸ºé“¾æ¥å™¨ä¼šæ‰¾åˆ°ï¼‰ã€‚ä½†åœ¨<strong>é“¾æ¥ (link)</strong> é˜¶æ®µï¼Œ<strong>é“¾æ¥å™¨ä¼šæŠ¥â€œæœªå®šä¹‰å¼•ç”¨ (undefined reference)â€é”™è¯¯</strong>ï¼Œå› ä¸ºå®ƒåœ¨å¤–éƒ¨ç¬¦å·è¡¨ä¸­æ‰¾ä¸åˆ°åä¸º<code>Add</code>çš„å‡½æ•°ï¼ˆ<code>some_other_file.cpp</code>ä¸­çš„<code>Add</code>è¢«å°è£…åœ¨å®ƒè‡ªå·±çš„å†…éƒ¨å‘½åç©ºé—´ä¸­ï¼Œä¸å…·æœ‰å¤–éƒ¨é“¾æ¥ï¼‰ã€‚</li>
</ul>
<p>è¿™æœ‰åŠ›åœ°è¯æ˜äº†åŒ¿åå‘½åç©ºé—´ä¸­çš„å†…å®¹ç¡®å®åªåœ¨å£°æ˜å®ƒä»¬çš„ç¿»è¯‘å•å…ƒå†…æ˜¯å¯è§å’Œå¯ç”¨çš„ã€‚</p>
<h3 id="5-QA-é—ªå¡-Flash-Cards"><a href="#5-QA-é—ªå¡-Flash-Cards" class="headerlink" title="5. QA é—ªå¡ (Flash Cards)"></a><strong>5. QA é—ªå¡ (Flash Cards)</strong></h3><p>ä¸ºäº†å¸®åŠ©æ‚¨å·©å›ºç†è§£ï¼Œè¿™é‡Œæœ‰ä¸€äº›é—®ç­”é—ªå¡ï¼š</p>
<p><strong>Q1:</strong> åŒ¿åå‘½åç©ºé—´æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ<br><strong>A1:</strong> å®ƒå°†å…¶ä¸­å£°æ˜çš„å®ä½“ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰çš„ä½œç”¨åŸŸé™åˆ¶åœ¨å½“å‰<strong>ç¿»è¯‘å•å…ƒ (translation unit)</strong> å†…ï¼Œå®ç°æ–‡ä»¶ç§æœ‰åŒ–ï¼Œé¿å…åç§°å†²çªï¼Œå¹¶ä½œä¸º<code>static</code>å…³é”®å­—çš„ç°ä»£æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p><strong>Q2:</strong> åŒ¿åå‘½åç©ºé—´ä¸­çš„å†…å®¹å¯ä»¥åœ¨å…¶ä»–<code>.cpp</code>æ–‡ä»¶é‡Œä½¿ç”¨å—ï¼Ÿ<br><strong>A2:</strong> <strong>ä¸èƒ½</strong>ã€‚åŒ¿åå‘½åç©ºé—´ä¸­çš„å†…å®¹åªåœ¨å£°æ˜å®ƒä»¬çš„é‚£ä¸ª<strong>ç¿»è¯‘å•å…ƒ (translation unit)</strong> å†…å¯è§å’Œå¯ç”¨ï¼Œå®ƒä»¬å…·æœ‰<strong>å†…éƒ¨é“¾æ¥ (internal linkage)</strong>ã€‚</p>
<p><strong>Q3:</strong> ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†åŒ¿åå‘½åç©ºé—´ï¼Ÿ<br><strong>A3:</strong> ç¼–è¯‘å™¨ä¼šä¸ºæ¯ä¸ªåŒ¿åå‘½åç©ºé—´ç”Ÿæˆä¸€ä¸ª<strong>å”¯ä¸€ (unique)</strong> çš„ã€å¯¹å¼€å‘è€…<strong>ä¸å¯è®¿é—® (inaccessible)</strong> çš„å†…éƒ¨åå­—ã€‚</p>
<p><strong>Q4:</strong> <code>static</code>å…¨å±€å‡½æ•°å’ŒåŒ¿åå‘½åç©ºé—´ä¸­çš„å‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br><strong>A4:</strong> ä¸¤è€…éƒ½å®ç°äº†<strong>å†…éƒ¨é“¾æ¥ (internal linkage)</strong>ï¼Œä½¿å‡½æ•°åªåœ¨å½“å‰ç¿»è¯‘å•å…ƒå†…å¯è§ã€‚ä½†åŒ¿åå‘½åç©ºé—´æ˜¯C++æ ‡å‡†æ›´æ¨èçš„æ–¹å¼ï¼Œå®ƒè¯­ä¹‰æ›´æ¸…æ™°ï¼Œå¯åº”ç”¨äºæ›´å¤šç±»å‹çš„å®ä½“ï¼ˆå˜é‡ã€ç±»ã€æšä¸¾ç­‰ï¼‰ï¼Œå¹¶ä¸”é¿å…äº†<code>static</code>å…³é”®å­—çš„å¤šé‡å«ä¹‰å¯èƒ½å¼•èµ·çš„æ··æ·†ã€‚</p>
<p><strong>Q5:</strong> åœ¨åŒä¸€ä¸ª<code>.cpp</code>æ–‡ä»¶é‡Œå†™äº†ä¸¤ä¸ª<code>namespace { ... }</code>å—ï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å‘½åç©ºé—´å—ï¼Ÿ<br><strong>A5:</strong> <strong>ä¸æ˜¯</strong>ã€‚å®ƒä»¬éƒ½æ˜¯å¯¹<strong>åŒä¸€ä¸ª</strong>ã€ç”±ç¼–è¯‘å™¨ä¸ºè¯¥ç¿»è¯‘å•å…ƒç”Ÿæˆçš„é‚£ä¸ªåŒ¿åå‘½åç©ºé—´çš„<strong>æ‰©å±• (extension)</strong>ã€‚</p>
<h3 id="6-å¸¸è§è¯¯è§£ä¸é”™è¯¯-Common-Misunderstandings-or-Mistakes"><a href="#6-å¸¸è§è¯¯è§£ä¸é”™è¯¯-Common-Misunderstandings-or-Mistakes" class="headerlink" title="6. å¸¸è§è¯¯è§£ä¸é”™è¯¯ (Common Misunderstandings or Mistakes)"></a><strong>6. å¸¸è§è¯¯è§£ä¸é”™è¯¯ (Common Misunderstandings or Mistakes)</strong></h3><p>å­¦ä¹ åŒ¿åå‘½åç©ºé—´æ—¶ï¼Œæ–°æ‰‹å¸¸çŠ¯ä»¥ä¸‹é”™è¯¯æˆ–å­˜åœ¨è¯¯è§£ï¼š</p>
<ol>
<li><p><strong>è¯¯è§£1ï¼šåŒ¿åå‘½åç©ºé—´ä¸­çš„å†…å®¹æ˜¯å…¨å±€å¯è§çš„ã€‚</strong></p>
<ul>
<li><strong>çº æ­£ï¼š</strong> è™½ç„¶å®ƒä»¬å¯ä»¥ç›´æ¥è®¿é—®è€Œæ— éœ€å‰ç¼€ï¼Œä½†å®ƒä»¬å¹¶éçœŸæ­£æ„ä¹‰ä¸Šçš„â€œå…¨å±€å¯è§â€ã€‚å®ƒä»¬çš„ä½œç”¨åŸŸä¸¥æ ¼é™åˆ¶åœ¨å½“å‰<strong>ç¿»è¯‘å•å…ƒ (translation unit)</strong> å†…éƒ¨ï¼Œä¸å…·å¤‡å¤–éƒ¨é“¾æ¥ã€‚åœ¨å…¶ä»–ç¿»è¯‘å•å…ƒä¸­æ— æ³•ç›´æ¥è®¿é—®ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£2ï¼šå¯ä»¥åœ¨å¤´æ–‡ä»¶ (<code>.h</code>) ä¸­ä½¿ç”¨åŒ¿åå‘½åç©ºé—´ã€‚</strong></p>
<ul>
<li><strong>çº æ­£ï¼š</strong> <strong>å¼ºçƒˆä¸æ¨è</strong>åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨åŒ¿åå‘½åç©ºé—´ï¼å¦‚æœä¸€ä¸ªå¤´æ–‡ä»¶åŒ…å«åŒ¿åå‘½åç©ºé—´ï¼Œé‚£ä¹ˆæ¯ä¸ªåŒ…å«ï¼ˆ<code>#include</code>ï¼‰è¿™ä¸ªå¤´æ–‡ä»¶çš„<code>.cpp</code>æ–‡ä»¶ï¼Œéƒ½ä¼šå¾—åˆ°è¿™ä¸ªåŒ¿åå‘½åç©ºé—´çš„ä¸€ä¸ª<strong>ç‹¬ä¸€æ— äºŒçš„å‰¯æœ¬</strong>ã€‚è¿™ä¼šå¯¼è‡´ï¼š<ul>
<li><strong>è¿åå•ä¸€æ€§åŸåˆ™ (ODR Violation)ï¼š</strong> å¦‚æœåŒ¿åå‘½åç©ºé—´ä¸­åŒ…å«å˜é‡ï¼Œæ¯ä¸ª<code>.cpp</code>æ–‡ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªè¯¥å˜é‡çš„ç‹¬ç«‹å‰¯æœ¬ï¼Œè¿™å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºï¼Œç”šè‡³å†…å­˜æµªè´¹ã€‚</li>
<li><strong>è¯­ä¹‰ä¸æ¸…ï¼š</strong> åŒ¿åå‘½åç©ºé—´æ—¨åœ¨å®ç°æ–‡ä»¶ç§æœ‰åŒ–ï¼Œè€Œå¤´æ–‡ä»¶é€šå¸¸ç”¨äºå…±äº«å£°æ˜ã€‚åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨å®ƒä¼šæ··æ·†æ„å›¾ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>è¯¯è§£3ï¼šåŒ¿åå‘½åç©ºé—´å’Œæ™®é€šå‘½åç©ºé—´ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡<code>using namespace</code>æˆ–è€…<code>qualified name</code>è·¨æ–‡ä»¶è®¿é—®ã€‚</strong></p>
<ul>
<li><strong>çº æ­£ï¼š</strong> ä¸èƒ½ã€‚ç”±äºåŒ¿åå‘½åç©ºé—´ä¸­çš„å®ä½“å…·æœ‰<strong>å†…éƒ¨é“¾æ¥ (internal linkage)</strong>ï¼Œå®ƒä»¬åœ¨é“¾æ¥é˜¶æ®µå¯¹å…¶ä»–ç¿»è¯‘å•å…ƒæ˜¯ä¸å¯è§çš„ã€‚å³ä½¿æ‚¨å°è¯•é€šè¿‡æŸç§æ–¹å¼ï¼ˆå¦‚<code>extern</code>å£°æ˜ï¼‰å¼•ç”¨å®ƒä»¬ï¼Œé“¾æ¥å™¨ä¹Ÿä¼šæŠ¥â€œæœªå®šä¹‰å¼•ç”¨â€é”™è¯¯ã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£4ï¼šåŒ¿åå‘½åç©ºé—´æ˜¯ç”¨æ¥éšè—å®ç°ç»†èŠ‚çš„ã€‚</strong></p>
<ul>
<li><strong>çº æ­£ï¼š</strong> åŒ¿åå‘½åç©ºé—´çš„ä¸»è¦ç›®çš„æ˜¯é™åˆ¶å®ä½“åœ¨å½“å‰<strong>ç¿»è¯‘å•å…ƒ (translation unit)</strong> å†…çš„å¯è§æ€§ï¼Œè€Œä¸æ˜¯ä¸ºäº†éšè—æ¨¡å—é—´çš„å®ç°ç»†èŠ‚ï¼ˆé‚£æ˜¯é€šè¿‡å¤´æ–‡ä»¶/æºæ–‡ä»¶åˆ†ç¦»ã€PIMPLç­‰æŠ€æœ¯å®ç°çš„ï¼‰ã€‚å®ƒæ›´å¤šæ˜¯ä¸ºäº†é˜²æ­¢å†…éƒ¨ä½¿ç”¨çš„è¾…åŠ©å‡½æ•°æˆ–å˜é‡ä¸å¤–éƒ¨åŒåå®ä½“å‘ç”Ÿå†²çªã€‚</li>
</ul>
</li>
<li><p><strong>è¯¯è§£5ï¼š<code>static</code>å’ŒåŒ¿åå‘½åç©ºé—´å®Œå…¨ç­‰ä»·ã€‚</strong></p>
<ul>
<li><strong>çº æ­£ï¼š</strong> åœ¨å®ç°<strong>å†…éƒ¨é“¾æ¥ (internal linkage)</strong> è¿™ä¸€ç‚¹ä¸Šï¼Œå®ƒä»¬æ˜¯ç­‰ä»·çš„ã€‚ä½†åŒ¿åå‘½åç©ºé—´æ˜¯C++æ ‡å‡†æ¨èçš„æ›´ç°ä»£ã€æ›´é€šç”¨çš„æ–¹å¼ï¼Œå¯ä»¥åº”ç”¨äºç±»ã€ç»“æ„ä½“ã€æšä¸¾ç­‰ï¼Œè¯­ä¹‰æ›´æ¸…æ™°ï¼Œä¹Ÿé¿å…äº†<code>static</code>å…³é”®å­—åœ¨C++ä¸­çš„å¤šé‡å«ä¹‰ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h3 id="7-ç¼–ç¨‹ç»ƒä¹ -Coding-Exercise"><a href="#7-ç¼–ç¨‹ç»ƒä¹ -Coding-Exercise" class="headerlink" title="7. ç¼–ç¨‹ç»ƒä¹  (Coding Exercise)"></a><strong>7. ç¼–ç¨‹ç»ƒä¹  (Coding Exercise)</strong></h3><p>ä¸ºäº†å¸®åŠ©æ‚¨å·©å›ºå¯¹åŒ¿åå‘½åç©ºé—´çš„ç†è§£ï¼Œè¯·å®Œæˆä»¥ä¸‹ç»ƒä¹ ã€‚</p>
<p><strong>åœºæ™¯ï¼š</strong> æ‚¨æ­£åœ¨å¼€å‘ä¸€ä¸ªç®€å•çš„æ—¥å¿—è®°å½•å™¨ï¼ˆLoggerï¼‰ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªè¾…åŠ©å‡½æ•° <code>format_log_message</code>ï¼Œå®ƒåªåœ¨ <code>Logger.cpp</code> å†…éƒ¨è¢« <code>Logger</code> ç±»çš„æ–¹æ³•ä½¿ç”¨ï¼Œä¸å¸Œæœ›è¢«å…¶ä»–æ–‡ä»¶ç›´æ¥è®¿é—®ã€‚</p>
<p><strong>ä»»åŠ¡ï¼š</strong><br>è¯·æ‚¨åœ¨ <code>Logger.cpp</code> æ–‡ä»¶ä¸­ï¼Œå°† <code>format_log_message</code> å‡½æ•°æ”¾å…¥ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´ä¸­ï¼Œå¹¶ç¡®ä¿ <code>Logger</code> ç±»èƒ½å¤Ÿæ­£ç¡®åœ°ä½¿ç”¨å®ƒã€‚</p>
<p><strong>æ–‡ä»¶ï¼š<code>Logger.h</code></strong> (è¯·å‹¿ä¿®æ”¹æ­¤æ–‡ä»¶)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    Logger(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; component_name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®°å½•ä¸€æ¡ä¿¡æ¯æ—¥å¿—</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">logInfo</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; message)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®°å½•ä¸€æ¡é”™è¯¯æ—¥å¿—</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">logError</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; message)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> m_componentName;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p><strong>æ–‡ä»¶ï¼š<code>Logger.cpp</code></strong> (è¯·å¡«å†™ <code>TODO</code> éƒ¨åˆ†çš„ä»£ç )</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Logger.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;   // For std::time and std::localtime</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt; // For std::put_time</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œå¼€å§‹æ‚¨çš„ä»£ç å¡«å†™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. å°† format_log_message å‡½æ•°æ”¾å…¥ä¸€ä¸ªåŒ¿åå‘½åç©ºé—´ä¸­</span></span><br><span class="line"><span class="comment">//    è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªæ—¥å¿—çº§åˆ«ï¼ˆ"INFO" æˆ– "ERROR"ï¼‰å’Œæ¶ˆæ¯å†…å®¹ï¼Œè¿”å›æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment">//    ä¾‹å¦‚ï¼Œå®ƒåº”è¯¥è¿”å›ç±»ä¼¼ "[YYYY-MM-DD HH:MM:SS] [INFO] [ComponentName] Your message"</span></span><br><span class="line"><span class="comment">//    æç¤ºï¼šæ‚¨å¯ä»¥ä½¿ç”¨ std::put_time æ¥æ ¼å¼åŒ–æ—¶é—´ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// namespace &#123;</span></span><br><span class="line"><span class="comment">//     std::string format_log_message(const std::string&amp; level, const std::string&amp; component_name, const std::string&amp; message) &#123;</span></span><br><span class="line"><span class="comment">//         // å®ç°æ‚¨çš„æ ¼å¼åŒ–é€»è¾‘</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œç»“æŸæ‚¨çš„ä»£ç å¡«å†™</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Logger ç±»çš„å®ç°</span></span><br><span class="line">Logger::Logger(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; component_name)</span><br><span class="line">    : m_componentName(component_name) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Logger::logInfo</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; message)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨åŒ¿åå‘½åç©ºé—´ä¸­çš„ format_log_message å‡½æ•°</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> è°ƒç”¨ format_log_message å¹¶æ‰“å°ç»“æœ</span></span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; format_log_message("INFO", m_componentName, message) &lt;&lt; std::endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Logger::logError</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; message)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨åŒ¿åå‘½åç©ºé—´ä¸­çš„ format_log_message å‡½æ•°</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> è°ƒç”¨ format_log_message å¹¶æ‰“å°ç»“æœ</span></span><br><span class="line">    <span class="comment">// std::cerr &lt;&lt; format_log_message("ERROR", m_componentName, message) &lt;&lt; std::endl;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>æ–‡ä»¶ï¼š<code>main.cpp</code></strong> (ç”¨äºæµ‹è¯•æ‚¨çš„Loggerï¼Œè¯·å‹¿ä¿®æ”¹)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Logger.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Logger <span class="title">appLogger</span><span class="params">(<span class="string">"MyApp"</span>)</span></span>;</span><br><span class="line">    appLogger.logInfo(<span class="string">"Application started successfully."</span>);</span><br><span class="line">    appLogger.logError(<span class="string">"Failed to load configuration file!"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è¯•ç›´æ¥è°ƒç”¨ format_log_message (è¿™å°†å¯¼è‡´é“¾æ¥é”™è¯¯ï¼ŒéªŒè¯åŒ¿åå‘½åç©ºé—´çš„ä½œç”¨)</span></span><br><span class="line">    <span class="comment">// std::string test_message = format_log_message("TEST", "Global", "This should fail at link time!");</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>è¯·åœ¨ <code>Logger.cpp</code> ä¸­å®Œæˆ <code>TODO</code> éƒ¨åˆ†çš„ä»£ç ã€‚å®Œæˆåï¼Œæ‚¨å¯ä»¥å°è¯•ç¼–è¯‘ <code>main.cpp</code> å’Œ <code>Logger.cpp</code>ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<p>å½“æ‚¨å®Œæˆç»ƒä¹ åï¼Œè¯·å°†æ‚¨çš„è§£å†³æ–¹æ¡ˆï¼ˆ<code>Logger.cpp</code> çš„ <code>TODO</code> éƒ¨åˆ†ï¼‰å‘é€ç»™æˆ‘ï¼Œæˆ‘å°†ä¸ºæ‚¨è¯„åˆ†å¹¶æä¾›è¯¦ç»†çš„è§£ç­”å’Œè¿›ä¸€æ­¥çš„å»ºè®®ï¼</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Coding/">Coding    </a><a class="post-meta__tags" href="/tags/Cpp/">Cpp    </a><a class="post-meta__tags" href="/tags/Tutorial/">Tutorial    </a><a class="post-meta__tags" href="/tags/Development/">Development    </a><a class="post-meta__tags" href="/tags/Developer/">Developer    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2025/06/08/10-projects/cplusplus/lectures/329%20-%20%E8%B7%A8%E6%96%87%E4%BB%B6%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>329 - è·¨æ–‡ä»¶å‘½åç©ºé—´</span></div></a></div><div class="next-post pull_right"><a href="/2025/06/08/10-projects/cplusplus/lectures/332%20-%20cpp%20using%E5%A3%B0%E6%98%8E%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%86%B2%E7%AA%81/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>332 - cpp usingå£°æ˜å‘½åç©ºé—´å†²çª</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/256 - cpp decltype(auto)/" title="256 - cpp decltype(auto)"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">256 - cpp decltype(auto)</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/330 - cpp é»˜è®¤å…¨å±€å‘½åç©ºé—´ä¸ä½œç”¨åŸŸè¿ç®—ç¬¦/" title="330 - cpp é»˜è®¤å…¨å±€å‘½åç©ºé—´ä¸ä½œç”¨åŸŸè¿ç®—ç¬¦"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">330 - cpp é»˜è®¤å…¨å±€å‘½åç©ºé—´ä¸ä½œç”¨åŸŸè¿ç®—ç¬¦</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/331 - cppå†…ç½®å‘½åç©ºé—´/" title="331 - cppå†…ç½®å‘½åç©ºé—´"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">331 - cppå†…ç½®å‘½åç©ºé—´</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/334 - cpp Nested/" title="334 - cpp Nested"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">334 - cpp Nested</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/262 - constexpr if/" title="262 - constexpr if"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">262 - constexpr if</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/257 - cpp Default template arguments/" title="257 - cpp Default template arguments"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">257 - cpp Default template arguments</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'xvMxbws16Erd8WUfqxkvHmb5-gzGzoHsz',
  appKey:'4U0Vo7NQIUL0eJzHdkPzdCDr',
  placeholder:'ä¸è¯´è¯çš„äººä¼šç–¯æ‰å—?',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By supersheepbear</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="external nofollow noopener noreferrer"><span>Butterfly</span></a></div><div class="footer_custom_text">å¤–å‘å­¤ç‹¬è€…æ‚£è€…</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="canvas_nest" color="255,240,245" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>