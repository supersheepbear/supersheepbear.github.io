<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>276 - Class across multiple files | Bear's dream</title><meta name="description" content="276 - Class across multiple files"><meta name="keywords" content="Cpp,Coding,Development,Developer,Class"><meta name="author" content="supersheepbear"><meta name="copyright" content="supersheepbear"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="p43hXBn3_dLvbyxUzx0eo5eYmj9OVYOV52pdrhBa2sw"><meta name="baidu-site-verification" content="EXLlfLv2pV"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="276 - Class across multiple files"><meta name="twitter:description" content="276 - Class across multiple files"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta property="og:type" content="article"><meta property="og:title" content="276 - Class across multiple files"><meta property="og:url" content="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/276%20-%20Class%20across%20multiple%20files/"><meta property="og:site_name" content="Bear's dream"><meta property="og:description" content="276 - Class across multiple files"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/276%20-%20Class%20across%20multiple%20files/"><link rel="prev" title="297 - 构造函数初始化列表" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/297%20-%20%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%88%9D%E5%A7%8B%E5%8C%96%E5%88%97%E8%A1%A8/"><link rel="next" title="293 - cpp 结构化绑定语法讲解" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/293%20-%20cpp%20%E7%BB%93%E6%9E%84%E5%8C%96%E7%BB%91%E5%AE%9A%E8%AF%AD%E6%B3%95%E8%AE%B2%E8%A7%A3/"><link rel="stylesheet" href="hfttps://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bear's dream" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Bear's dream</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> 音乐照片</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 学习计划</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200520153141.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">152</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">151</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">20</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> 音乐照片</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> 照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 学习计划</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#C-类拆分文件管理代码示例"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">C++ 类拆分文件管理代码示例</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#🤖-Assistant"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">🤖 Assistant</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#1-标题与摘要"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">1. 标题与摘要</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#2-详细解释"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">2. 详细解释</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#3-代码示例"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">3. 代码示例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#4-QA闪卡"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">4. QA闪卡</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#5-常见误解或错误"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">5. 常见误解或错误</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#6-编程练习"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">6. 编程练习</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#🧑‍💻-User"><span class="toc_mobile_items-number">7.1.</span> <span class="toc_mobile_items-text">🧑‍💻 User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#🤖-Assistant-1"><span class="toc_mobile_items-number">7.2.</span> <span class="toc_mobile_items-text">🤖 Assistant</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#7-用户解答评分与正确答案及解释"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">7. 用户解答评分与正确答案及解释</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#8-建议与扩展问题供用户研究"><span class="toc_mobile_items-number">9.</span> <span class="toc_mobile_items-text">8. 建议与扩展问题供用户研究</span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#C-类拆分文件管理代码示例"><span class="toc-number">1.</span> <span class="toc-text">C++ 类拆分文件管理代码示例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#🤖-Assistant"><span class="toc-number">1.1.</span> <span class="toc-text">🤖 Assistant</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-标题与摘要"><span class="toc-number">2.</span> <span class="toc-text">1. 标题与摘要</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-详细解释"><span class="toc-number">3.</span> <span class="toc-text">2. 详细解释</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-代码示例"><span class="toc-number">4.</span> <span class="toc-text">3. 代码示例</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-QA闪卡"><span class="toc-number">5.</span> <span class="toc-text">4. QA闪卡</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-常见误解或错误"><span class="toc-number">6.</span> <span class="toc-text">5. 常见误解或错误</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-编程练习"><span class="toc-number">7.</span> <span class="toc-text">6. 编程练习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#🧑‍💻-User"><span class="toc-number">7.1.</span> <span class="toc-text">🧑‍💻 User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#🤖-Assistant-1"><span class="toc-number">7.2.</span> <span class="toc-text">🤖 Assistant</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-用户解答评分与正确答案及解释"><span class="toc-number">8.</span> <span class="toc-text">7. 用户解答评分与正确答案及解释</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-建议与扩展问题供用户研究"><span class="toc-number">9.</span> <span class="toc-text">8. 建议与扩展问题供用户研究</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)"><div id="post-info"><div id="post-title"><div class="posttitle">276 - Class across multiple files</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2025-06-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2025-06-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/">10-projects</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/">cplusplus</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/lectures/">lectures</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/2025/06/08/10-projects/cplusplus/lectures/276%20-%20Class%20across%20multiple%20files/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2025/06/08/10-projects/cplusplus/lectures/276%20-%20Class%20across%20multiple%20files/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="C-类拆分文件管理代码示例"><a href="#C-类拆分文件管理代码示例" class="headerlink" title="C++ 类拆分文件管理代码示例"></a>C++ 类拆分文件管理代码示例</h1><hr>
<h2 id="🤖-Assistant"><a href="#🤖-Assistant" class="headerlink" title="🤖 Assistant"></a>🤖 Assistant</h2><p>好的，C++萌新你好！非常开心能带你学习C++中一个非常重要的概念：如何将你的代码（特别是类）组织到多个文件中。这不仅能让你的项目更整洁，也更易于管理和协作。</p>
<h1 id="1-标题与摘要"><a href="#1-标题与摘要" class="headerlink" title="1. 标题与摘要"></a>1. 标题与摘要</h1><p><strong>标题：</strong> C++代码组织：将类与常量分散到多个文件 (Splitting Classes and Constants Across Multiple Files)</p>
<p><strong>摘要：</strong> 本节课我们将学习如何将C++代码中的常量 (constant) 和类定义 (class definition) 从主文件 (<code>main.cpp</code>) 中分离出来，分别放到不同的头文件 (header file) 和源文件 (source file / .cpp file) 中。这将使我们的代码结构更清晰、更易于维护，并介绍预处理器 (preprocessor) 指令和包含守卫 (include guard) 的概念，以避免重复定义的问题。</p>
<h1 id="2-详细解释"><a href="#2-详细解释" class="headerlink" title="2. 详细解释"></a>2. 详细解释</h1><p>想象一下，你正在写一个大型的C++程序。如果把所有的代码——常量定义、类声明、类实现、主函数 (main function)——都塞在一个 <code>main.cpp</code> 文件里，这个文件会变得非常臃肿，难以阅读和修改。就像你把所有的书都堆在一个房间里，找某一本书会非常困难。更好的方法是把书分门别类放到不同的书架上。在C++中，我们通过将代码分散到多个文件来实现类似的管理。</p>
<p><strong>初始状态：所有代码都在 <code>main.cpp</code> 中</strong></p>
<p>通常，我们开始学习时，可能会像这样：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 常量</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="number">3.14159</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类定义</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    Cylinder(<span class="keyword">double</span> r, <span class="keyword">double</span> h) : base_radius(r), height(h) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PI * base_radius * base_radius * height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> base_radius;</span><br><span class="line">    <span class="keyword">double</span> height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Cylinder <span class="title">c1</span><span class="params">(<span class="number">2.0</span>, <span class="number">5.0</span>)</span></span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Volume: "</span> &lt;&lt; c1.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>这对于小程序来说还行，但项目变大后就不理想了。</p>
<p><strong>第一步：将常量移动到单独的头文件</strong></p>
<p>常量，比如 <code>PI</code>，可能在项目的多个地方被用到。将它们集中管理是个好主意。</p>
<ol>
<li><p><strong>创建 <code>constants.h</code> 文件：</strong><br>我们创建一个新的文件，命名为 <code>constants.h</code>。”.h” 后缀通常表示这是一个头文件。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// constants.h</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="number">3.14159</span>;</span><br><span class="line"><span class="comment">// 你可以在这里添加更多常量</span></span><br><span class="line"><span class="comment">// const int MAX_USERS = 100;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>在 <code>main.cpp</code> 中包含 (include) 该头文件：</strong><br>为了在 <code>main.cpp</code> 中使用 <code>PI</code>，我们需要使用预处理器指令 <code>#include</code>。当编译器处理 <code>main.cpp</code> 时，<code>#include &quot;constants.h&quot;</code> 这行代码会告诉预处理器把 <code>constants.h</code> 文件的全部内容复制粘贴到这个位置。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span> <span class="comment">// 包含我们自己的头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类定义 (暂时还在这里)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line">    <span class="comment">// ... (同上, 内部会用到 PI)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>注意：<code>#include &lt;iostream&gt;</code> 使用尖括号 <code>&lt;&gt;</code>，表示这是一个标准库头文件，编译器会在标准库路径查找。<code>#include &quot;constants.h&quot;</code> 使用双引号 <code>&quot;&quot;</code>，表示这是一个用户自定义的头文件，编译器会首先在当前项目目录查找。</p>
<p><strong>好处：</strong></p>
<ul>
<li>常量集中管理，易于查找和修改。</li>
<li><code>main.cpp</code> 更简洁。</li>
</ul>
</li>
</ol>
<p><strong>第二步：将类定义移动到单独的头文件</strong></p>
<p>现在，我们将 <code>Cylinder</code> 类的定义也移出去。</p>
<ol>
<li><p><strong>创建 <code>cylinder.h</code> 文件：</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cylinder.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span> <span class="comment">// Cylinder 类用到了 PI，所以需要包含 constants.h</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    Cylinder(<span class="keyword">double</span> r, <span class="keyword">double</span> h) : base_radius(r), height(h) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PI * base_radius * base_radius * height; <span class="comment">// 使用 PI</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 可以添加 Getters 和 Setters</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_radius</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> base_radius; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_height</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> height; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_radius</span><span class="params">(<span class="keyword">double</span> r)</span> </span>&#123; base_radius = r; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_height</span><span class="params">(<span class="keyword">double</span> h)</span> </span>&#123; height = h; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> base_radius;</span><br><span class="line">    <span class="keyword">double</span> height;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>在 <code>main.cpp</code> 中包含 <code>cylinder.h</code>：</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">// #include "constants.h" // 不再需要直接包含 constants.h，因为 cylinder.h 已经包含了它</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cylinder.h"</span>   <span class="comment">// 包含 Cylinder 类的定义</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Cylinder <span class="title">c1</span><span class="params">(<span class="number">2.0</span>, <span class="number">5.0</span>)</span></span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Volume: "</span> &lt;&lt; c1.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Radius: "</span> &lt;&lt; c1.get_radius() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>现在 <code>main.cpp</code> 非常清爽，它只关心如何使用 <code>Cylinder</code> 类，而不关心 <code>Cylinder</code> 是如何实现的，也不关心 <code>PI</code> 是多少。</p>
</li>
</ol>
<p><strong>问题来了：重复包含 (Multiple Inclusion) 和 包含守卫 (Include Guards)</strong></p>
<p>想象一下，如果 <code>main.cpp</code> 由于某种原因，既包含了 <code>constants.h</code> 又包含了 <code>cylinder.h</code>（而 <code>cylinder.h</code> 内部已经包含了 <code>constants.h</code>）。<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp (一个可能导致问题的例子)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cylinder.h"</span> <span class="comment">// cylinder.h 内部也 #include "constants.h"</span></span></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure></div><br>预处理器工作时，它会：</p>
<ol>
<li>遇到 <code>#include &quot;constants.h&quot;</code>，将 <code>constants.h</code> 的内容（即 <code>const double PI = 3.14159;</code>）复制到 <code>main.cpp</code>。</li>
<li>遇到 <code>#include &quot;cylinder.h&quot;</code>，展开 <code>cylinder.h</code>。</li>
<li>在展开 <code>cylinder.h</code> 的过程中，遇到 <code>cylinder.h</code> 内部的 <code>#include &quot;constants.h&quot;</code>，再次将 <code>constants.h</code> 的内容复制过来。</li>
</ol>
<p>最终，<code>main.cpp</code> 在预处理后会变成类似这样：<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp (预处理后，示意)</span></span><br><span class="line"><span class="comment">// ... 其他来自 iostream 的内容 ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 来自第一次 #include "constants.h"</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="number">3.14159</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 来自 #include "cylinder.h"</span></span><br><span class="line">    <span class="comment">// 来自 cylinder.h 内部的 #include "constants.h"</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="number">3.14159</span>; <span class="comment">// 问题！PI 被定义了两次！</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span><br></pre></td></tr></table></figure></div><br>编译器会报错，提示 <code>PI</code> 重复定义 (redefinition)。</p>
<p>为了解决这个问题，我们使用 <strong>包含守卫 (Include Guards)</strong>。这是一种预处理器技巧，确保一个头文件的内容在一次编译中只被包含一次。</p>
<p>修改 <code>constants.h</code>：<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// constants.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CONSTANTS_H_  <span class="comment">// 如果 CONSTANTS_H_ 这个宏没有被定义过</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONSTANTS_H_  <span class="comment">// 那么就定义 CONSTANTS_H_</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="number">3.14159</span>;</span><br><span class="line"><span class="comment">// ... 其他常量 ...</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// CONSTANTS_H_  // 结束 #ifndef 块</span></span></span><br></pre></td></tr></table></figure></div><br>修改 <code>cylinder.h</code>：<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cylinder.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CYLINDER_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CYLINDER_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span> <span class="comment">// Cylinder 类用到了 PI</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line">    <span class="comment">// ... (类定义同上) ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// CYLINDER_H_</span></span></span><br></pre></td></tr></table></figure></div><br><strong>工作原理：</strong></p>
<ul>
<li>当预处理器第一次遇到 <code>#include &quot;constants.h&quot;</code> 时：<ol>
<li><code>#ifndef CONSTANTS_H_</code>：检查 <code>CONSTANTS_H_</code> 是否未定义。是的，此时未定义。</li>
<li><code>#define CONSTANTS_H_</code>：定义 <code>CONSTANTS_H_</code> 这个宏。</li>
<li>头文件的实际内容 (<code>const double PI = ...;</code>) 被包含进来。</li>
</ol>
</li>
<li>当预处理器因为其他 <code>#include</code> 语句再次遇到 <code>constants.h</code> 时（例如通过 <code>cylinder.h</code>）：<ol>
<li><code>#ifndef CONSTANTS_H_</code>：检查 <code>CONSTANTS_H_</code> 是否未定义。不是，此时 <code>CONSTANTS_H_</code> 已经被定义了。</li>
<li>因此，从 <code>#ifndef</code> 到 <code>#endif</code> 之间的所有内容都会被预处理器跳过。</li>
</ol>
</li>
</ul>
<p>这样，无论一个头文件被 <code>#include</code> 多少次，它的实际内容只会被有效地包含一次。宏的名字 (<code>CONSTANTS_H_</code>, <code>CYLINDER_H_</code>) 通常是基于文件名并加上一些下划线，以确保其唯一性。</p>
<p><strong>第三步：分离类的声明 (Declaration) 和实现 (Implementation/Definition)</strong></p>
<p>目前，<code>cylinder.h</code> 文件中既有类的成员变量和成员函数的声明，也有成员函数的具体实现代码（比如 <code>volume</code> 函数体）。对于使用者来说，他们通常只需要知道类有什么功能（即函数的声明），而不需要关心这些功能是如何实现的。将声明和实现分开，可以使头文件更简洁，并且在修改函数实现时，不需要重新编译所有包含了该头文件的文件（这是一个更深层次的编译优化话题，暂时了解即可）。</p>
<ol>
<li><p><strong><code>cylinder.h</code>（类的声明 - 接口 Interface）：</strong><br>头文件现在只包含类的框架和成员函数的声明（也叫函数原型 prototypes）。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cylinder.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CYLINDER_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CYLINDER_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span> <span class="comment">// 仍然需要 PI 的声明或其类型</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 构造函数声明</span></span><br><span class="line">    Cylinder() = <span class="keyword">default</span>; <span class="comment">// 默认构造函数</span></span><br><span class="line">    Cylinder(<span class="keyword">double</span> r, <span class="keyword">double</span> h);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员函数声明</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_radius</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_height</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_radius</span><span class="params">(<span class="keyword">double</span> r)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_height</span><span class="params">(<span class="keyword">double</span> h)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> base_radius &#123;<span class="number">1.0</span>&#125;; <span class="comment">// 可以给成员变量默认值</span></span><br><span class="line">    <span class="keyword">double</span> height &#123;<span class="number">1.0</span>&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// CYLINDER_H_</span></span></span><br></pre></td></tr></table></figure></div>
<p>注意：</p>
<ul>
<li>我们为构造函数添加了一个默认构造函数 <code>Cylinder() = default;</code>。</li>
<li>函数体 <code>{...}</code> 被移除了，只留下分号。</li>
</ul>
</li>
<li><p><strong>创建 <code>cylinder.cpp</code>（类的实现 - Implementation）：</strong><br>创建一个新的 <code>.cpp</code> 文件（源文件），用于存放 <code>Cylinder</code> 类成员函数的具体实现。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cylinder.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cylinder.h"</span> <span class="comment">// 必须包含对应的头文件，以获取类的声明</span></span></span><br><span class="line"><span class="comment">// constants.h 已经被 cylinder.h 包含了，所以这里通常不需要再显式包含 constants.h</span></span><br><span class="line"><span class="comment">// 但如果 cylinder.cpp 中的函数实现直接用到了 PI，而 cylinder.h 没有包含 constants.h，则这里需要包含</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造函数的实现</span></span><br><span class="line">Cylinder::Cylinder(<span class="keyword">double</span> r, <span class="keyword">double</span> h) : base_radius(r), height(h) &#123;</span><br><span class="line">    <span class="comment">// 构造函数体，如果需要可以添加更多逻辑</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// volume 函数的实现</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Cylinder::volume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> PI * base_radius * base_radius * height; <span class="comment">// PI 来自 constants.h (通过 cylinder.h 包含)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Getter 和 Setter 的实现</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Cylinder::get_radius</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> base_radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Cylinder::get_height</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Cylinder::set_radius</span><span class="params">(<span class="keyword">double</span> r)</span> </span>&#123;</span><br><span class="line">    base_radius = r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Cylinder::set_height</span><span class="params">(<span class="keyword">double</span> h)</span> </span>&#123;</span><br><span class="line">    height = h;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>关键点：</p>
<ul>
<li><code>#include &quot;cylinder.h&quot;</code>：这样 <code>cylinder.cpp</code> 才知道 <code>Cylinder</code> 类是什么样的，以及它有哪些成员函数需要实现。</li>
<li><strong>作用域解析运算符 (Scope Resolution Operator) <code>::</code></strong>： 当在类外部定义成员函数时，你需要告诉编译器这个函数属于哪个类。例如，<code>Cylinder::volume()</code> 表示这是 <code>Cylinder</code> 类的 <code>volume</code> 函数。返回类型写在类名和作用域解析运算符之前。</li>
</ul>
</li>
<li><p><strong><code>main.cpp</code>（使用者代码）：</strong><br><code>main.cpp</code> 保持不变，它仍然只需要 <code>#include &quot;cylinder.h&quot;</code>。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cylinder.h"</span> <span class="comment">// 只需要包含头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Cylinder <span class="title">c1</span><span class="params">(<span class="number">2.0</span>, <span class="number">5.0</span>)</span></span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1 Volume: "</span> &lt;&lt; c1.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    Cylinder c2; <span class="comment">// 使用默认构造函数</span></span><br><span class="line">    c2.set_radius(<span class="number">3.0</span>);</span><br><span class="line">    c2.set_height(<span class="number">7.0</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 2 Volume: "</span> &lt;&lt; c2.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 2 Radius: "</span> &lt;&lt; c2.get_radius() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<p><strong>编译过程：</strong><br>当你编译这个项目时，编译器会：</p>
<ol>
<li>编译 <code>cylinder.cpp</code> 生成一个目标文件 (object file)，比如 <code>cylinder.o</code> 或 <code>cylinder.obj</code>。</li>
<li>编译 <code>main.cpp</code> 生成另一个目标文件，比如 <code>main.o</code> 或 <code>main.obj</code>。</li>
<li>最后，链接器 (linker) 会把 <code>cylinder.o</code> 和 <code>main.o</code> 以及任何需要的库文件链接起来，生成最终的可执行文件。</li>
</ol>
<p><strong>好处：</strong></p>
<ul>
<li><strong>关注点分离：</strong> 头文件 (<code>.h</code>) 定义“是什么”（接口），源文件 (<code>.cpp</code>) 定义“怎么做”（实现）。</li>
<li><strong>提高编译效率：</strong> 如果你只修改了 <code>cylinder.cpp</code> 中的函数实现，而没有改变 <code>cylinder.h</code> 中的类声明，那么通常只需要重新编译 <code>cylinder.cpp</code> 并重新链接，而不需要重新编译 <code>main.cpp</code>（以及其他可能包含 <code>cylinder.h</code> 的文件）。对于大型项目，这能节省大量编译时间。</li>
<li><strong>代码更清晰：</strong> 用户只需要查看头文件就能了解如何使用一个类。</li>
</ul>
<p>这就是将类和常量分散到多个文件的基本方法和原因。这是一种非常好的编程实践！</p>
<h1 id="3-代码示例"><a href="#3-代码示例" class="headerlink" title="3. 代码示例"></a>3. 代码示例</h1><p>下面是组织后的完整文件结构和内容：</p>
<p><strong><code>constants.h</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CONSTANTS_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONSTANTS_H_</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="number">3.1415926535</span>; <span class="comment">// 更精确的 PI</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// CONSTANTS_H_</span></span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>cylinder.h</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CYLINDER_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CYLINDER_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span> <span class="comment">// Cylinder 类可能直接或间接使用 PI</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cylinder</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    Cylinder() = <span class="keyword">default</span>; <span class="comment">// 允许默认构造</span></span><br><span class="line">    Cylinder(<span class="keyword">double</span> radius, <span class="keyword">double</span> height);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员函数 (访问器 - getters)</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_base_radius</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_height</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员函数 (修改器 - setters)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_base_radius</span><span class="params">(<span class="keyword">double</span> radius)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_height</span><span class="params">(<span class="keyword">double</span> height)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 功能函数</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">volume</span><span class="params">()</span> <span class="keyword">const</span></span>; <span class="comment">// 标记为 const 因为它不修改对象状态</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> base_radius &#123;<span class="number">1.0</span>&#125;; <span class="comment">// C++11 起支持成员初始化器</span></span><br><span class="line">    <span class="keyword">double</span> height &#123;<span class="number">1.0</span>&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// CYLINDER_H_</span></span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>cylinder.cpp</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cylinder.h"</span> <span class="comment">// 必须包含它自己的头文件</span></span></span><br><span class="line"><span class="comment">// 注意：constants.h 已经被 cylinder.h 包含了，这里通常不需要再显式 include constants.h</span></span><br><span class="line"><span class="comment">// 除非 cylinder.cpp 中的实现直接用到了 PI，且 cylinder.h 没有包含 constants.h，但这不是推荐做法。</span></span><br><span class="line"><span class="comment">// 一般规则是 .cpp 文件包含其对应的 .h 文件，.h 文件包含它所依赖的其他 .h 文件。</span></span><br><span class="line"></span><br><span class="line">Cylinder::Cylinder(<span class="keyword">double</span> radius, <span class="keyword">double</span> height)</span><br><span class="line">    : base_radius(radius), height(height) &#123;</span><br><span class="line">    <span class="comment">// 构造函数体可以为空，或者进行一些参数校验等</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Cylinder::get_base_radius</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> base_radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Cylinder::get_height</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Cylinder::set_base_radius</span><span class="params">(<span class="keyword">double</span> radius)</span> </span>&#123;</span><br><span class="line">    base_radius = radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Cylinder::set_height</span><span class="params">(<span class="keyword">double</span> height)</span> </span>&#123;</span><br><span class="line">    height = height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Cylinder::volume</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="comment">// PI 是从 "constants.h" 中获取的, 该文件被 "cylinder.h" 包含</span></span><br><span class="line">    <span class="keyword">return</span> PI * base_radius * base_radius * height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>main.cpp</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cylinder.h"</span> <span class="comment">// 只需要包含 Cylinder 类的头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Cylinder <span class="title">cylinder1</span><span class="params">(<span class="number">10.0</span>, <span class="number">2.0</span>)</span></span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 1:"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Radius: "</span> &lt;&lt; cylinder1.get_base_radius() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Height: "</span> &lt;&lt; cylinder1.get_height() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Volume: "</span> &lt;&lt; cylinder1.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    Cylinder cylinder2; <span class="comment">// 使用默认构造函数</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Cylinder 2 (default):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Radius: "</span> &lt;&lt; cylinder2.get_base_radius() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Height: "</span> &lt;&lt; cylinder2.get_height() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Volume: "</span> &lt;&lt; cylinder2.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    cylinder2.set_base_radius(<span class="number">3.0</span>);</span><br><span class="line">    cylinder2.set_height(<span class="number">5.0</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nCylinder 2 (after set):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Radius: "</span> &lt;&lt; cylinder2.get_base_radius() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Height: "</span> &lt;&lt; cylinder2.get_height() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Volume: "</span> &lt;&lt; cylinder2.volume() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p><strong>如何编译 (以g++为例):</strong><br>在终端中，进入这些文件所在的目录，然后执行：<br><code>g++ main.cpp cylinder.cpp -o my_program</code><br>然后运行：<br><code>./my_program</code></p>
<h1 id="4-QA闪卡"><a href="#4-QA闪卡" class="headerlink" title="4. QA闪卡"></a>4. QA闪卡</h1><p><strong>Q1: 为什么要把类定义分散到多个文件？</strong><br>A1: 使代码更模块化、易于管理、可维护性更高，并能提高大型项目的编译效率。主文件会更简洁，专注于程序逻辑。</p>
<p><strong>Q2: 头文件 (<code>.h</code>) 和源文件 (<code>.cpp</code>) 的主要区别是什么？</strong><br>A2:</p>
<ul>
<li>头文件 (<code>.h</code>) 主要包含类的声明 (declaration)、函数原型、常量定义、宏定义等。它定义了“接口” (interface)。</li>
<li>源文件 (<code>.cpp</code>) 主要包含函数的具体实现 (implementation)、全局变量的定义等。它定义了“实现细节”。</li>
</ul>
<p><strong>Q3: 什么是包含守卫 (include guard)，为什么需要它？</strong><br>A3: 包含守卫是一种预处理器机制（通常使用 <code>#ifndef/#define/#endif</code>），用于防止同一个头文件的内容在一次编译中被多次包含。如果一个头文件被多次包含，可能导致重复定义错误。</p>
<p><strong>Q4: <code>Cylinder::volume()</code> 中的 <code>Cylinder::</code> 是什么意思？</strong><br>A4: <code>::</code> 是作用域解析运算符 (scope resolution operator)。<code>Cylinder::volume()</code> 表示 <code>volume</code> 这个函数是属于 <code>Cylinder</code> 类的成员函数。在类外部定义成员函数时必须使用它。</p>
<p><strong>Q5: 在 <code>main.cpp</code> 中，我应该 <code>#include &quot;cylinder.h&quot;</code> 还是 <code>#include &quot;cylinder.cpp&quot;</code>？</strong><br>A5: 永远 <code>#include &quot;cylinder.h&quot;</code> (头文件)。<code>.cpp</code> 文件是用来编译的，而不是被包含的。包含 <code>.cpp</code> 文件会导致链接错误或其他问题。</p>
<h1 id="5-常见误解或错误"><a href="#5-常见误解或错误" class="headerlink" title="5. 常见误解或错误"></a>5. 常见误解或错误</h1><ol>
<li><p><strong>忘记包含守卫 (Forgetting include guards):</strong></p>
<ul>
<li><strong>错误：</strong> 没有在头文件中使用 <code>#ifndef MACRO_NAME_H_</code>, <code>#define MACRO_NAME_H_</code>, <code>#endif</code>。</li>
<li><strong>后果：</strong> 如果该头文件被多个地方（直接或间接）包含，会导致编译错误，通常是“重定义 (redefinition)”错误。</li>
</ul>
</li>
<li><p><strong>在 <code>.cpp</code> 文件中忘记 <code>#include</code> 对应的头文件：</strong></p>
<ul>
<li><strong>错误：</strong> 在 <code>cylinder.cpp</code> 中没有写 <code>#include &quot;cylinder.h&quot;</code>。</li>
<li><strong>后果：</strong> 编译器在 <code>cylinder.cpp</code> 中遇到 <code>Cylinder::</code> 时，不知道 <code>Cylinder</code> 是什么，会导致编译错误，如 “Cylinder has not been declared” 或 “Cylinder is not a class, namespace, or enumeration”。</li>
</ul>
</li>
<li><p><strong>在 <code>.cpp</code> 文件中定义成员函数时忘记加类名和作用域解析运算符：</strong></p>
<ul>
<li><strong>错误：</strong> 在 <code>cylinder.cpp</code> 中写成 <code>double volume() { ... }</code> 而不是 <code>double Cylinder::volume() { ... }</code>。</li>
<li><strong>后果：</strong> 编译器会认为你正在定义一个普通的全局函数 <code>volume()</code>，而不是 <code>Cylinder</code> 类的成员函数。如果头文件中声明了 <code>Cylinder::volume()</code>，链接时会找不到其定义，报链接错误 “undefined reference to Cylinder::volume()”。</li>
</ul>
</li>
<li><p><strong>错误地 <code>#include &lt;filename.cpp&gt;</code>：</strong></p>
<ul>
<li><strong>错误：</strong> 在 <code>main.cpp</code> 中写 <code>#include &quot;cylinder.cpp&quot;</code>。</li>
<li><strong>后果：</strong> 这会将 <code>cylinder.cpp</code> 的所有代码（包括函数实现）复制到 <code>main.cpp</code> 中。如果 <code>cylinder.cpp</code> 和 <code>main.cpp</code> 都被分别编译然后链接，会导致每个函数都有两份定义，从而引发链接器 (linker) 报“多重定义 (multiple definition)”错误。</li>
</ul>
</li>
<li><p><strong>头文件和源文件中的函数签名不匹配：</strong></p>
<ul>
<li><strong>错误：</strong> <code>cylinder.h</code> 中声明 <code>double volume() const;</code>，但在 <code>cylinder.cpp</code> 中实现为 <code>double Cylinder::volume() { ... }</code> (忘记了 <code>const</code>)。</li>
<li><strong>后果：</strong> 编译器会认为这是两个不同的函数。链接器会报告 <code>Cylinder::volume() const</code> 未定义。</li>
</ul>
</li>
<li><p><strong>将函数定义（实现）放在头文件中（非 <code>inline</code> 或模板时）：</strong></p>
<ul>
<li><strong>错误：</strong> 像我们最初那样，将 <code>Cylinder::volume()</code> 的完整函数体直接写在 <code>cylinder.h</code> 中，并且这个 <code>cylinder.h</code> 被多个 <code>.cpp</code> 文件包含。</li>
<li><strong>后果：</strong> 每个包含此头文件的 <code>.cpp</code> 文件编译后都会有一份 <code>Cylinder::volume()</code> 的实现。链接时，链接器发现多个相同的函数定义，会报“多重定义 (multiple definition)”错误。</li>
<li><strong>注意：</strong> <code>inline</code> 函数和模板函数通常整个定义都放在头文件中，这是特例。对于普通成员函数，声明在 <code>.h</code>，定义在 <code>.cpp</code>。</li>
</ul>
</li>
<li><p><strong>循环包含 (Circular Inclusion):</strong></p>
<ul>
<li><strong>错误：</strong> <code>A.h</code> 包含 <code>B.h</code>，同时 <code>B.h</code> 又包含 <code>A.h</code>。</li>
<li><strong>后果：</strong> 即使有包含守卫，也可能导致编译问题，因为编译器可能在一个类完全定义之前就需要另一个类的完整定义。这通常通过前向声明 (forward declaration) 来解决部分问题，但设计上应尽量避免循环依赖。</li>
</ul>
</li>
</ol>
<h1 id="6-编程练习"><a href="#6-编程练习" class="headerlink" title="6. 编程练习"></a>6. 编程练习</h1><p>现在，轮到你来实践了！我们将创建一个简单的 <code>Rectangle</code> 类，你需要将它的声明和定义分散到 <code>rectangle.h</code> 和 <code>rectangle.cpp</code> 文件中。</p>
<p><strong>文件1: <code>rectangle.h</code> (你需要补充完整)</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 添加包含守卫</span></span><br><span class="line"><span class="comment">// #ifndef ...</span></span><br><span class="line"><span class="comment">// #define ...</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> width;</span><br><span class="line">    <span class="keyword">double</span> height;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明一个默认构造函数，将 width 和 height 初始化为 1.0</span></span><br><span class="line">    <span class="comment">// Rectangle();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明一个带参数的构造函数，接收宽度和高度</span></span><br><span class="line">    <span class="comment">// Rectangle(double w, double h);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明一个计算面积的函数 get_area()，它应该是一个 const 函数</span></span><br><span class="line">    <span class="comment">// double get_area() const;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明设置宽度的函数 set_width(double w)</span></span><br><span class="line">    <span class="comment">// void set_width(double w);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明设置高度的函数 set_height(double h)</span></span><br><span class="line">    <span class="comment">// void set_height(double h);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明获取宽度的函数 get_width()，它应该是一个 const 函数</span></span><br><span class="line">    <span class="comment">// double get_width() const;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明获取高度的函数 get_height()，它应该是一个 const 函数</span></span><br><span class="line">    <span class="comment">// double get_height() const;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 结束包含守卫</span></span><br><span class="line"><span class="comment">// #endif</span></span><br></pre></td></tr></table></figure></div></p>
<p><strong>文件2: <code>rectangle.cpp</code> (你需要补充完整)</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 包含 "rectangle.h"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现默认构造函数 Rectangle()</span></span><br><span class="line"><span class="comment">// Rectangle::Rectangle() ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现带参数的构造函数 Rectangle(double w, double h)</span></span><br><span class="line"><span class="comment">// Rectangle::Rectangle(double w, double h) ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 get_area() 函数</span></span><br><span class="line"><span class="comment">// double Rectangle::get_area() const ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 set_width(double w) 函数</span></span><br><span class="line"><span class="comment">// void Rectangle::set_width(double w) ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 set_height(double h) 函数</span></span><br><span class="line"><span class="comment">// void Rectangle::set_height(double h) ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 get_width() const 函数</span></span><br><span class="line"><span class="comment">// double Rectangle::get_width() const ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 get_height() const 函数</span></span><br><span class="line"><span class="comment">// double Rectangle::get_height() const ...</span></span><br></pre></td></tr></table></figure></div></p>
<p><strong>文件3: <code>main.cpp</code> (这个文件提供给你测试，无需修改)</strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"rectangle.h"</span> <span class="comment">// 假设你已经创建并正确设置了 rectangle.h</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Rectangle rect1; <span class="comment">// 测试默认构造函数</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Rectangle 1 (default):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Width: "</span> &lt;&lt; rect1.get_width() &lt;&lt; <span class="string">", Height: "</span> &lt;&lt; rect1.get_height() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Area: "</span> &lt;&lt; rect1.get_area() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Rectangle <span class="title">rect2</span><span class="params">(<span class="number">5.0</span>, <span class="number">3.0</span>)</span></span>; <span class="comment">// 测试带参数构造函数</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nRectangle 2 (5x3):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Width: "</span> &lt;&lt; rect2.get_width() &lt;&lt; <span class="string">", Height: "</span> &lt;&lt; rect2.get_height() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Area: "</span> &lt;&lt; rect2.get_area() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    rect1.set_width(<span class="number">2.5</span>);</span><br><span class="line">    rect1.set_height(<span class="number">4.0</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nRectangle 1 (after set to 2.5x4):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Width: "</span> &lt;&lt; rect1.get_width() &lt;&lt; <span class="string">", Height: "</span> &lt;&lt; rect1.get_height() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Area: "</span> &lt;&lt; rect1.get_area() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p>请你完成 <code>rectangle.h</code> 和 <code>rectangle.cpp</code> 中的 <code>// TODO:</code> 部分。完成后，将你的代码发给我，我会帮你检查。<br>编译命令提示: <code>g++ main.cpp rectangle.cpp -o rectangle_test</code><br>运行命令: <code>./rectangle_test</code></p>
<p>期待你的解答！</p>
<hr>
<h2 id="🧑‍💻-User"><a href="#🧑‍💻-User" class="headerlink" title="🧑‍💻 User"></a>🧑‍💻 User</h2><p>rectangle.cpp:<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 包含 "rectangle.h"</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"rectangle.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现默认构造函数 Rectangle()</span></span><br><span class="line">Rectangle::Rectangle() &#123;</span><br><span class="line">    set_width(<span class="number">1.0</span>);</span><br><span class="line">    set_height(<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现带参数的构造函数 Rectangle(double w, double h)</span></span><br><span class="line">Rectangle::Rectangle(<span class="keyword">double</span> w, <span class="keyword">double</span> h) &#123;</span><br><span class="line">    set_width(w);</span><br><span class="line">    set_height(h);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 get_area() 函数</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Rectangle::get_area</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> get_width() * get_height();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 set_width(double w) 函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rectangle::set_width</span><span class="params">(<span class="keyword">double</span> w)</span> </span>&#123;</span><br><span class="line">    width = w;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 set_height(double h) 函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rectangle::set_height</span><span class="params">(<span class="keyword">double</span> h)</span> </span>&#123;</span><br><span class="line">    height = h;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 get_width() const 函数</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Rectangle::get_width</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> width;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 实现 get_height() const 函数</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Rectangle::get_height</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p>rectangle.h:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 添加包含守卫</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> RECTANGLE_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RECTANGLE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> width;</span><br><span class="line">    <span class="keyword">double</span> height;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明一个默认构造函数，将 width 和 height 初始化为 1.0</span></span><br><span class="line">    Rectangle();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明一个带参数的构造函数，接收宽度和高度</span></span><br><span class="line">    Rectangle(<span class="keyword">double</span> w, <span class="keyword">double</span> h);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明一个计算面积的函数 get_area()，它应该是一个 const 函数</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_area</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明设置宽度的函数 set_width(double w)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_width</span><span class="params">(<span class="keyword">double</span> w)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明设置高度的函数 set_height(double h)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_height</span><span class="params">(<span class="keyword">double</span> h)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明获取宽度的函数 get_width()，它应该是一个 const 函数</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_width</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 声明获取高度的函数 get_height()，它应该是一个 const 函数</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_height</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 结束包含守卫</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></div>
<hr>
<h2 id="🤖-Assistant-1"><a href="#🤖-Assistant-1" class="headerlink" title="🤖 Assistant"></a>🤖 Assistant</h2><p>太棒了！你做得非常好，基本上完全掌握了如何将类的声明和实现分离到不同的文件中，并且正确地使用了包含守卫。你的代码逻辑清晰，易于理解。</p>
<h1 id="7-用户解答评分与正确答案及解释"><a href="#7-用户解答评分与正确答案及解释" class="headerlink" title="7. 用户解答评分与正确答案及解释"></a>7. 用户解答评分与正确答案及解释</h1><p><strong>评分：4.5 / 5.0 星</strong> 🌟🌟🌟🌟✨</p>
<p><strong>做得好的地方：</strong></p>
<ul>
<li><strong>包含守卫 (Include Guards)：</strong> 你在 <code>rectangle.h</code> 中正确地使用了 <code>#ifndef RECTANGLE_H_</code>, <code>#define RECTANGLE_H_</code>, 和 <code>#endif</code>。这是非常重要的良好实践！</li>
<li><strong>声明与定义分离：</strong> 你成功地将类的声明放在了 <code>.h</code> 文件，将成员函数的实现放在了 <code>.cpp</code> 文件。</li>
<li><strong>作用域解析运算符 (Scope Resolution Operator)：</strong> 在 <code>rectangle.cpp</code> 中，你正确地使用了 <code>Rectangle::</code> 来指定成员函数的归属。</li>
<li><strong><code>const</code> 正确性：</strong> 对于不修改对象状态的成员函数（如 <code>get_area</code>, <code>get_width</code>, <code>get_height</code>），你都正确地将它们声明为 <code>const</code>。</li>
<li><strong>逻辑正确：</strong> 所有函数的实现逻辑都是正确的。</li>
</ul>
<p><strong>可以探讨和改进的小点 (更多是风格或进阶考虑，并非错误)：</strong></p>
<ol>
<li><p><strong>构造函数中的初始化：</strong><br>在你的构造函数中：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rectangle.cpp (你的版本)</span></span><br><span class="line">Rectangle::Rectangle() &#123;</span><br><span class="line">    set_width(<span class="number">1.0</span>);</span><br><span class="line">    set_height(<span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Rectangle::Rectangle(<span class="keyword">double</span> w, <span class="keyword">double</span> h) &#123;</span><br><span class="line">    set_width(w);</span><br><span class="line">    set_height(h);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>这样做是完全可以工作的。不过，在C++中，更常见和推荐的方式是使用 <strong>成员初始化列表 (member initializer list)</strong> 来初始化成员变量，尤其是在构造函数体执行之前就需要完成初始化的时候。对于简单的赋值，它也更直接。</p>
<p>使用成员初始化列表的版本如下：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rectangle.cpp (使用成员初始化列表的版本)</span></span><br><span class="line">Rectangle::Rectangle() : width(<span class="number">1.0</span>), height(<span class="number">1.0</span>) &#123;</span><br><span class="line">    <span class="comment">// 构造函数体可以为空，或者执行其他设置逻辑</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Rectangle::Rectangle(<span class="keyword">double</span> w, <span class="keyword">double</span> h) : width(w), height(h) &#123;</span><br><span class="line">    <span class="comment">// 构造函数体可以为空</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>为什么推荐成员初始化列表？</strong></p>
<ul>
<li><strong>效率：</strong> 对于类类型的成员变量或 <code>const</code> 成员，使用初始化列表是必须的或者更高效。对于内置类型（如 <code>double</code>），编译器通常能优化，但在复杂类型中差异明显。它直接进行“初始化”而不是“赋值”。</li>
<li><strong>const 和引用成员：</strong> <code>const</code> 成员和引用成员必须在初始化列表中初始化。</li>
<li><strong>顺序：</strong> 成员变量的初始化顺序是它们在类中声明的顺序，而不是它们在初始化列表中出现的顺序。</li>
<li>如果你在 <code>set_width</code> 或 <code>set_height</code> 中有复杂的验证逻辑，并且希望这个逻辑在对象构造时也执行，那么调用setter是合理的。但对于简单的初始化，初始化列表更简洁。</li>
</ul>
</li>
<li><p><strong><code>get_area()</code> 中调用 <code>get_width()</code> 和 <code>get_height()</code>：</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rectangle.cpp (你的版本)</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Rectangle::get_area</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> get_width() * get_height();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>这也是可以的。另一种方式是直接访问成员变量：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rectangle.cpp (直接访问成员变量)</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Rectangle::get_area</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> width * height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>两者结果相同。直接访问成员变量可能稍微直接一点。如果 <code>getter</code> 函数内部有额外的逻辑（比如日志记录、延迟计算等），那么调用 <code>getter</code> 就有其必要性。对于简单的 <code>getter</code>，直接访问在类内部是常见的。</p>
</li>
</ol>
<p>你的实现是完全有效的，并且展示了对核心概念的良好理解。以上只是提供一些C++中更惯用的写法或可以进一步思考的点。</p>
<hr>
<p><strong>标准答案参考：</strong></p>
<p><strong><code>rectangle.h</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> RECTANGLE_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RECTANGLE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> width;</span><br><span class="line">    <span class="keyword">double</span> height;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 默认构造函数</span></span><br><span class="line">    Rectangle();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 带参数的构造函数</span></span><br><span class="line">    Rectangle(<span class="keyword">double</span> w, <span class="keyword">double</span> h);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算面积 (const 函数)</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_area</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置宽度</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_width</span><span class="params">(<span class="keyword">double</span> w)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置高度</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_height</span><span class="params">(<span class="keyword">double</span> h)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取宽度 (const 函数)</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_width</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 获取高度 (const 函数)</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">get_height</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// RECTANGLE_H_</span></span></span><br></pre></td></tr></table></figure></div></p>
<p><strong><code>rectangle.cpp</code></strong><br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"rectangle.h"</span> <span class="comment">// 包含对应的头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认构造函数：使用成员初始化列表</span></span><br><span class="line">Rectangle::Rectangle() : width(<span class="number">1.0</span>), height(<span class="number">1.0</span>) &#123;</span><br><span class="line">    <span class="comment">// 构造函数体，如果需要可以添加其他逻辑</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带参数的构造函数：使用成员初始化列表</span></span><br><span class="line">Rectangle::Rectangle(<span class="keyword">double</span> w, <span class="keyword">double</span> h) : width(w), height(h) &#123;</span><br><span class="line">    <span class="comment">// 构造函数体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算面积</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Rectangle::get_area</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> width * height; <span class="comment">//可以直接访问私有成员</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置宽度</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rectangle::set_width</span><span class="params">(<span class="keyword">double</span> w)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 可以在这里添加验证逻辑，例如 w &gt; 0</span></span><br><span class="line">    width = w;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置高度</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rectangle::set_height</span><span class="params">(<span class="keyword">double</span> h)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 可以在这里添加验证逻辑，例如 h &gt; 0</span></span><br><span class="line">    height = h;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取宽度</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Rectangle::get_width</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> width;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取高度</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Rectangle::get_height</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
<p>将这些文件与提供的 <code>main.cpp</code> 一起编译，应该能得到预期的输出：<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Rectangle 1 (default):</span><br><span class="line">Width: 1, Height: 1</span><br><span class="line">Area: 1</span><br><span class="line"></span><br><span class="line">Rectangle 2 (5x3):</span><br><span class="line">Width: 5, Height: 3</span><br><span class="line">Area: 15</span><br><span class="line"></span><br><span class="line">Rectangle 1 (after set to 2.5x4):</span><br><span class="line">Width: 2.5, Height: 4</span><br><span class="line">Area: 10</span><br></pre></td></tr></table></figure></div></p>
<p>你做的非常好！继续保持这种学习势头。</p>
<h1 id="8-建议与扩展问题供用户研究"><a href="#8-建议与扩展问题供用户研究" class="headerlink" title="8. 建议与扩展问题供用户研究"></a>8. 建议与扩展问题供用户研究</h1><p><strong>建议：</strong></p>
<ol>
<li><p><strong>在Setters中添加验证：</strong> 考虑在 <code>set_width</code> 和 <code>set_height</code> 函数中添加一些验证逻辑。例如，宽度和高度通常应该是正数。如果用户尝试设置一个无效的值（如负数或零），你可以选择抛出异常、打印错误消息或保持原值不变。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例：在 set_width 中添加验证</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rectangle::set_width</span><span class="params">(<span class="keyword">double</span> w)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (w &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        width = w;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 处理错误，例如打印消息或保持原样</span></span><br><span class="line">        <span class="comment">// std::cerr &lt;&lt; "Error: Width must be positive." &lt;&lt; std::endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong><code>this</code> 指针 (this pointer)：</strong> 了解一下 <code>this</code> 指针。在成员函数内部，<code>this</code> 是一个指向调用该函数的对象的指针。当你需要区分成员变量和同名参数时，它非常有用。例如：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_value</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;value = value; <span class="comment">// this-&gt;value 是成员变量, value 是参数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>内联函数 (Inline Functions)：</strong> 对于非常短小的函数（比如简单的 <code>getter</code> 和 <code>setter</code>），有时为了性能考虑，可以将它们的完整定义直接放在头文件中，并标记为 <code>inline</code>。这会建议编译器在调用点展开函数代码，避免函数调用的开销。但过度使用 <code>inline</code> 可能导致代码膨胀。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rectangle.h (示例)</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">get_width</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> width; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">set_width</span><span class="params">(<span class="keyword">double</span> w)</span> </span>&#123; <span class="keyword">if</span>(w &gt; <span class="number">0</span>) width = w; &#125;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure></div>
<p>注意：现代编译器在优化方面非常智能，很多时候即使你不显式声明 <code>inline</code>，它们也会对短函数进行内联。通常，将函数定义放在 <code>.cpp</code> 文件中是更清晰的做法，除非有明确的性能瓶颈。</p>
</li>
</ol>
<p><strong>扩展问题供你研究：</strong></p>
<ol>
<li><strong>编译多个 <code>.cpp</code> 文件：</strong> 你已经知道了如何编译 <code>main.cpp</code> 和 <code>rectangle.cpp</code>。如果你的项目有更多的 <code>.cpp</code> 文件（比如 <code>circle.cpp</code>, <code>shape_utilities.cpp</code>），你将如何在命令行中将它们一起编译并链接成一个可执行文件？</li>
<li><strong><code>#pragma once</code> vs Include Guards：</strong> 搜索一下 <code>#pragma once</code>。这是另一种防止头文件被多次包含的预处理器指令，很多现代编译器都支持它，并且它比传统的包含守卫更简洁。了解它的优点和潜在的（较小的）可移植性问题。</li>
<li><strong>前向声明 (Forward Declaration)：</strong> 想象你有两个类 <code>A</code> 和 <code>B</code>，<code>A</code> 需要一个指向 <code>B</code> 的指针或引用作为成员，同时 <code>B</code> 也需要一个指向 <code>A</code> 的指针或引用作为成员。如果你在 <code>A.h</code> 中 <code>#include &quot;B.h&quot;</code>，在 <code>B.h</code> 中 <code>#include &quot;A.h&quot;</code>，就会产生循环包含。这时就需要用到前向声明。研究一下什么是前向声明以及如何使用它。<br>例如，在 <code>A.h</code> 中，你可以在 <code>#include &quot;B.h&quot;</code> 之前写 <code>class B;</code>。</li>
<li><strong>命名空间 (Namespaces)：</strong> 当项目变大，或者你使用多个库时，可能会出现名称冲突（比如你的类名和库里的某个类名相同）。命名空间可以帮助解决这个问题。了解如何定义和使用命名空间。</li>
</ol>
<p>继续努力，你在C++的学习道路上取得了很棒的进展！遇到问题随时可以问。</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cpp/">Cpp    </a><a class="post-meta__tags" href="/tags/Coding/">Coding    </a><a class="post-meta__tags" href="/tags/Development/">Development    </a><a class="post-meta__tags" href="/tags/Developer/">Developer    </a><a class="post-meta__tags" href="/tags/Class/">Class    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2025/06/08/10-projects/cplusplus/lectures/297%20-%20%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%88%9D%E5%A7%8B%E5%8C%96%E5%88%97%E8%A1%A8/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>297 - 构造函数初始化列表</span></div></a></div><div class="next-post pull_right"><a href="/2025/06/08/10-projects/cplusplus/lectures/293%20-%20cpp%20%E7%BB%93%E6%9E%84%E5%8C%96%E7%BB%91%E5%AE%9A%E8%AF%AD%E6%B3%95%E8%AE%B2%E8%A7%A3/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>293 - cpp 结构化绑定语法讲解</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/notes/静态成员访问控制/" title="静态成员访问控制"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">静态成员访问控制</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/277 - IDE 创建 cpp 类方法/" title="277 - IDE 创建 cpp 类方法"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">277 - IDE 创建 cpp 类方法</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/322 - Different Type Members/" title="322 - Different Type Members"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">322 - Different Type Members</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/273 - constructor/" title="273 - constructor"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">273 - constructor</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/275 - getter and setter/" title="275 - getter and setter"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">275 - getter and setter</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/272 - first class/" title="272 - first class"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">272 - first class</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'xvMxbws16Erd8WUfqxkvHmb5-gzGzoHsz',
  appKey:'4U0Vo7NQIUL0eJzHdkPzdCDr',
  placeholder:'不说话的人会疯掉吗?',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By supersheepbear</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="external nofollow noopener noreferrer"><span>Butterfly</span></a></div><div class="footer_custom_text">外向孤独者患者</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="canvas_nest" color="255,240,245" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>