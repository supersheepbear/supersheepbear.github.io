<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>283 - cpp ç±»å¯¹è±¡å¤§å°æ¢ç©¶ | Bear's dream</title><meta name="description" content="283 - cpp ç±»å¯¹è±¡å¤§å°æ¢ç©¶"><meta name="keywords" content="Cpp,Coding,Development,Class,Object"><meta name="author" content="supersheepbear"><meta name="copyright" content="supersheepbear"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="p43hXBn3_dLvbyxUzx0eo5eYmj9OVYOV52pdrhBa2sw"><meta name="baidu-site-verification" content="EXLlfLv2pV"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="283 - cpp ç±»å¯¹è±¡å¤§å°æ¢ç©¶"><meta name="twitter:description" content="283 - cpp ç±»å¯¹è±¡å¤§å°æ¢ç©¶"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta property="og:type" content="article"><meta property="og:title" content="283 - cpp ç±»å¯¹è±¡å¤§å°æ¢ç©¶"><meta property="og:url" content="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/283%20-%20cpp%20%E7%B1%BB%E5%AF%B9%E8%B1%A1%E5%A4%A7%E5%B0%8F%E6%8E%A2%E7%A9%B6/"><meta property="og:site_name" content="Bear's dream"><meta property="og:description" content="283 - cpp ç±»å¯¹è±¡å¤§å°æ¢ç©¶"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/283%20-%20cpp%20%E7%B1%BB%E5%AF%B9%E8%B1%A1%E5%A4%A7%E5%B0%8F%E6%8E%A2%E7%A9%B6/"><link rel="prev" title="279 - cppææ„å‡½æ•°ï¼šå¯¹è±¡é”€æ¯æ—¶çš„å†…å­˜é‡Šæ”¾" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/279%20-%20cpp%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%EF%BC%9A%E5%AF%B9%E8%B1%A1%E9%94%80%E6%AF%81%E6%97%B6%E7%9A%84%E5%86%85%E5%AD%98%E9%87%8A%E6%94%BE/"><link rel="next" title="280 - æ„é€ ä¸ææ„é¡ºåº å€’åºææ„" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/280%20-%20%E6%9E%84%E9%80%A0%E4%B8%8E%E6%9E%90%E6%9E%84%E9%A1%BA%E5%BA%8F%20%E5%80%92%E5%BA%8F%E6%9E%90%E6%9E%84/"><link rel="stylesheet" href="hfttps://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bear's dream" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Bear's dream</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200520153141.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">151</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">151</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">19</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#C-ç±»å¯¹è±¡å¤§å°æ¢ç©¶"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">C++ ç±»å¯¹è±¡å¤§å°æ¢ç©¶</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#C-ç±»å¯¹è±¡çš„å¤§å°ï¼šæ·±å…¥ç†è§£-sizeof"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">C++ ç±»å¯¹è±¡çš„å¤§å°ï¼šæ·±å…¥ç†è§£ sizeof</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#C-ç±»å¯¹è±¡å¤§å°æ¢ç©¶"><span class="toc-number">1.</span> <span class="toc-text">C++ ç±»å¯¹è±¡å¤§å°æ¢ç©¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant"><span class="toc-number">1.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-ç±»å¯¹è±¡çš„å¤§å°ï¼šæ·±å…¥ç†è§£-sizeof"><span class="toc-number">1.3.</span> <span class="toc-text">C++ ç±»å¯¹è±¡çš„å¤§å°ï¼šæ·±å…¥ç†è§£ sizeof</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)"><div id="post-info"><div id="post-title"><div class="posttitle">283 - cpp ç±»å¯¹è±¡å¤§å°æ¢ç©¶</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2025-06-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2025-06-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/">10-projects</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/">cplusplus</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/lectures/">lectures</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/2025/06/08/10-projects/cplusplus/lectures/283%20-%20cpp%20%E7%B1%BB%E5%AF%B9%E8%B1%A1%E5%A4%A7%E5%B0%8F%E6%8E%A2%E7%A9%B6/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2025/06/08/10-projects/cplusplus/lectures/283%20-%20cpp%20%E7%B1%BB%E5%AF%B9%E8%B1%A1%E5%A4%A7%E5%B0%8F%E6%8E%A2%E7%A9%B6/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="C-ç±»å¯¹è±¡å¤§å°æ¢ç©¶"><a href="#C-ç±»å¯¹è±¡å¤§å°æ¢ç©¶" class="headerlink" title="C++ ç±»å¯¹è±¡å¤§å°æ¢ç©¶"></a>C++ ç±»å¯¹è±¡å¤§å°æ¢ç©¶</h1><h2 id="ğŸ§‘â€ğŸ’»-User"><a href="#ğŸ§‘â€ğŸ’»-User" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>In this lecture, weâ€™re going to learn about sizes of class objects and try to think about it.What are we going to see if we try to print the size of our class here called Wrapper?Inside, we have two member variables which are of int type and we have a member variable which is ofstdstring type.What do you think weâ€™ll see when we print the size of this wrapper object here, try to think aboutit.So what c plus plus does, itâ€™s going to only account for the size of your member variables.So itâ€™s going to add the sizes of these guys in memory.So we know an INT is going to take four bytes in memory.So weâ€™re going to have eight bytes for these two aunts and weâ€™re going to have an unspecified amountof memory for a string because a string is internally implemented as a class and it stores its dataas const called pointers.So we have really a pointer, and the size of an object doesnâ€™t really account for things you are referringto using pointers.It may count to the size of the pointer itself, but itâ€™s not going to count what is pointed to.And in the case of string, for example, we really want to know the range of things that we are pointingto.So weâ€™re not going to have correct information with Stdstring here.But in general, the size of the object is going to be the sum of the sizes of its member variables.The functions are not going to be counted then the functions are just helper functions that live somewherein memory, but theyâ€™re not going to be accounted for in the size of your object.Another reason you might think functions are not accounted for in the size of the object is that reallyfunctions are affiliated with the class itself.Functions are not affiliated with class objects.The class is going to be the blueprint from which weâ€™re going to generate thousands of objects if wewant.But the functions or the methods are going to be associated to the blueprint itself.So it really wouldnâ€™t make sense to associate the size of those functions in memory to class objects.Now that you have this idea, letâ€™s head over to Visual Studio code and play with this a little more.Okay.We have said that the size is mostly going to be the sum of the sizes for the member variables, butthis is not always correct because of a phenomenon we called boundary alignment.Boundary alignment is a thing most compilers do when they have member variables of different types andmember variables that have the size of four bytes in memory are going to be stored at memory locationsthat are multiples of four.And because of this phenomenon, we might have gaps between our memory.If we have variables, for example, that are of two bytes in memory and four bytes in memory, andweâ€™re going to have gaps inside and the size of the object is going to be slightly off the sum we mightdo for the sizes of our object.I realize this may be confusing.Weâ€™re going to head over to Visual Studio code and weâ€™re going to see a few examples.Okay.Here we are in our working folder.The current project is size of class Objects.Weâ€™re going to grab our template files pretty quick and weâ€™re going to put them in place and weâ€™re goingto open our project in Visual Studio code.By dragging and dropping here we have our main CPP file.We can close the left sidebar and we can clean the main function here.Weâ€™re going to set up a simple class.Letâ€™s call this dog.Why not?We have been using dog.So letâ€™s use this again.Weâ€™re going to put our closing semicolon.Weâ€™re going to put a public section and itâ€™s going to just contain a constructor and weâ€™re going tosay dog and weâ€™re going to use the default and weâ€™re going to put in a private section.And in here weâ€™re going to put in a size T and say, this is the leg count of a dog.Why not?Letâ€™s say we are modeling this.Okay?So now we have our dog class in place.We can create objects of this dog class.Weâ€™re going to say dog dog one.And if we do this, we are interested in knowing the size of our dog class here.So we are going to say stdcout size of dog and say that.And fingers crossed weâ€™re going to see the size of our dog object here and try to guess what weâ€™re goingto get in the slides.We have seen that the size is mostly going to be the sum of the size of the member variables.And letâ€™s print the size of size T here because size T is our only member variable.So I think itâ€™s going to be helpful to see its size printed out.So weâ€™re going to have some context.If we do that, weâ€™re going to say size of size T and weâ€™re going to save that and weâ€™re going to buildthis program.Letâ€™s do that.Weâ€™re going to pass this through.JC You see, the bolt is good and weâ€™re going to bring up a terminal and run this, see what happens.Okay, We see size of size.T is eight and the size of our dark object is eight.And this is really cool because we see that the size of our class object is really the size of our membervariables that we have in here.Letâ€™s set up another member variable and really show you this.So weâ€™re going to have arm count.Okay, so we are just messing with this to learn.I donâ€™t aim for this class here to make some sense practically.We just want to see how the member variables affect the size of our class object.Now we have two member variables and weâ€™re going to try and build.Weâ€™re going to use JC to do that and weâ€™re going to clear and run Rooster Now you see that size of dogis 16 and this is really proven that the size of an object is only accounting for the sizes of the membervariables.Itâ€™s not going to count the functions that we have here.So if, for example, we had a function that says principal and we have another one that says do something,this is not going to change the size of our object because functions arenâ€™t accounted for in the sizeof our object here.So letâ€™s build and really show you this The world is good.We can clear and run Rooster.We see that we have the same sizes.The size of dog is 16, the size of size, T is eight.We can even use object names here.For example, we are using the class itself, but we can use dog one here and weâ€™re going to get thesame information.Letâ€™s go out and weâ€™re going to clear and run Rooster and you see that we have the same size.So if we change this thing to put in a pointer, weâ€™re going to see something else.Letâ€™s put in an end pointer and letâ€™s say page like we have been doing all along and see what we get.And we know that the size of a pointer on my system, letâ€™s print that out so that we have no doubt.Letâ€™s for example say size of end pointer is going to be size of end pointer.Okay, letâ€™s build.Weâ€™re going to pass this through JK and the world is going to be good.We can clear and run Rooster Weâ€™re going to see that we have 24 because we have two member variablesthat are going to be eight bytes in memory of size.T They are of type size T and we have a pointer which is going to have a size of eight in memory, butwe donâ€™t care what this pointer is pointing to.If for example, this pointer is pointing to something really large, we donâ€™t care.Weâ€™re just going to account for the end pointer here.And this is really phenomenal because if, for example, we tried to set up an stdstring object andby now you should know that Stdstring itself is implemented as a class in C plus plus.So itâ€™s really a class and we can print its size.So letâ€™s set up a string object here.Weâ€™re going to say STD string and weâ€™re going to say name and weâ€™re going to initialize this with HelloWorld.Okay, weâ€™re going to see something really strange here.So if we print the size of name here, weâ€™re going to say size of name and weâ€™re going to print that.Letâ€™s see what we get.Weâ€™re going to run and weâ€™re going to see the world is good and I can clear and run Rooster.Weâ€™re going to see that size of name is 32.Letâ€™s change the text inside our string and see that we change accordingly, because this can reallybe confusing.Letâ€™s say I am the king of the universe.Why not?And weâ€™re going to build again.Letâ€™s see what we get.Fingers crossed this is going to blow your mind.You see, we have the same size for name even if we are changing the text in here.So what is really happening?The string is storing our text here as const char pointer and what we have is a pointer inside and whatwe probably have inside is a member variable, which is a pointer like we have here.So what we will be accounting for in the string class is the size of the pointer, but itâ€™s not thesize of what is pointed to.Okay, so the car pointer may be pointing to thousands of characters in memory, but as long as thecompiler is concerned, itâ€™s just going to use the pointer member variable and itâ€™s going to accountfor it in the size of your object.Hopefully you can understand why the size of our string object is going to be the same regardless ofhow large is the string.And this is really something you need to understand.Otherwise this is going to throw you off as you design your C plus plus applications.And this is really all I had to share in this lecture.The size of your object is mostly going to be determined by the.A member variables you have and the size is going to be the sum of the sizes of your member variables.We are going to stop here in this lecture and the next one, weâ€™re going to try and recap what we sawin this chapter.Go ahead and finish up here and meet me there.</p>
<hr>
<h2 id="ğŸ¤–-Assistant"><a href="#ğŸ¤–-Assistant" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¥½çš„ï¼ŒC++ æ–°åŒå­¦ä½ å¥½ï¼å¾ˆé«˜å…´èƒ½æˆä¸ºä½ çš„ C++ å¯¼å¸ˆã€‚æˆ‘ä»¬ä¼šç”¨æœ€æœ‰æ•ˆçš„æ–¹æ³•ä¸€æ­¥æ­¥å­¦ä¹ ã€‚</p>
<h2 id="C-ç±»å¯¹è±¡çš„å¤§å°ï¼šæ·±å…¥ç†è§£-sizeof"><a href="#C-ç±»å¯¹è±¡çš„å¤§å°ï¼šæ·±å…¥ç†è§£-sizeof" class="headerlink" title="C++ ç±»å¯¹è±¡çš„å¤§å°ï¼šæ·±å…¥ç†è§£ sizeof"></a>C++ ç±»å¯¹è±¡çš„å¤§å°ï¼šæ·±å…¥ç†è§£ <code>sizeof</code></h2><p><strong>æœ¬èŠ‚æ¦‚è¦ï¼š</strong><br>æˆ‘ä»¬å°†æ¢è®¨ C++ ä¸­ç±» (class) å¯¹è±¡æ‰€å å†…å­˜å¤§å°æ˜¯å¦‚ä½•ç¡®å®šçš„ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¯¹è±¡çš„å¤§å°ä¸»è¦ç”±å…¶æˆå‘˜å˜é‡ (member variables) å†³å®šï¼Œè€Œæˆå‘˜å‡½æ•° (member functions) é€šå¸¸ä¸è®¡å…¥å•ä¸ªå¯¹è±¡çš„å¤§å°ã€‚æˆ‘ä»¬è¿˜ä¼šè®¨è®ºåƒ <code>std::string</code> è¿™æ ·çš„ç‰¹æ®Šæƒ…å†µä»¥åŠä¸€ä¸ªå«åšå†…å­˜å¯¹é½ (memory alignment) çš„é‡è¦æ¦‚å¿µã€‚</p>
<hr>
<p><strong>è¯¦ç»†è§£é‡Šï¼š</strong></p>
<ol>
<li><p><strong><code>sizeof</code> è¿ç®—ç¬¦ (operator)ï¼š</strong><br>åœ¨ C++ ä¸­ï¼Œ<code>sizeof</code> æ˜¯ä¸€ä¸ªä¸€å…ƒè¿ç®—ç¬¦ï¼Œå®ƒè¿”å›ä¸€ä¸ªç±»å‹æˆ–ä¸€ä¸ªå˜é‡åœ¨å†…å­˜ä¸­å ç”¨çš„å­—èŠ‚ (bytes) æ•°ã€‚è¿™å¯¹äºç†è§£æ•°æ®å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜å‚¨è‡³å…³é‡è¦ã€‚</p>
</li>
<li><p><strong>ç±»å¯¹è±¡å¤§å°çš„åŸºæœ¬åŸåˆ™ï¼šæˆå‘˜å˜é‡çš„æ€»å’Œ</strong></p>
<ul>
<li>å½“ä½ åˆ›å»ºä¸€ä¸ªç±»çš„å¯¹è±¡æ—¶ï¼Œç¼–è¯‘å™¨ (compiler) ä¼šä¸ºè¯¥å¯¹è±¡çš„æˆå‘˜å˜é‡åˆ†é…å†…å­˜ã€‚</li>
<li>æœ€ç›´æ¥çš„ç†è§£æ˜¯ï¼Œä¸€ä¸ªå¯¹è±¡çš„å¤§å°çº¦ç­‰äºå…¶æ‰€æœ‰æˆå‘˜å˜é‡å¤§å°çš„æ€»å’Œã€‚</li>
<li>ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç±»æœ‰ä¸¤ä¸ª <code>int</code> ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œè€Œä¸€ä¸ª <code>int</code> åœ¨ä½ çš„ç³»ç»Ÿä¸Šå ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡çš„å¤§å°è‡³å°‘æ˜¯ 4 + 4 = 8 ä¸ªå­—èŠ‚ã€‚</li>
</ul>
</li>
<li><p><strong>æˆå‘˜å‡½æ•°ä¸è®¡å…¥å¯¹è±¡å¤§å°ï¼š</strong></p>
<ul>
<li>ç±»çš„æˆå‘˜å‡½æ•°ï¼ˆæˆ–ç§°æ–¹æ³• (methods)ï¼‰å®šä¹‰äº†å¯¹è±¡å¯ä»¥æ‰§è¡Œçš„æ“ä½œã€‚ç„¶è€Œï¼Œè¿™äº›å‡½æ•°çš„ä»£ç æœ¬èº«å¹¶ä¸å­˜å‚¨åœ¨æ¯ä¸ªå¯¹è±¡å®ä¾‹ä¸­ã€‚</li>
<li>å¯ä»¥æŠŠç±»æƒ³è±¡æˆä¸€ä¸ªè“å›¾ (blueprint)ï¼Œè€Œå¯¹è±¡æ˜¯æ ¹æ®è¿™ä¸ªè“å›¾å»ºé€ çš„æˆ¿å­ã€‚è“å›¾ä¸Šæè¿°äº†æˆ¿å­çš„åŠŸèƒ½ï¼ˆç›¸å½“äºæˆå‘˜å‡½æ•°ï¼‰ï¼Œä½†è¿™äº›æè¿°æœ¬èº«å¹¶ä¸å¢åŠ æ¯æ ‹æˆ¿å­å ç”¨çš„åœŸåœ°é¢ç§¯ã€‚</li>
<li>å‡½æ•°çš„ä»£ç å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªåœ°æ–¹ï¼ˆé€šå¸¸æ˜¯ä»£ç æ®µï¼‰ï¼Œæ‰€æœ‰è¯¥ç±»çš„å¯¹è±¡å…±äº«è¿™äº›ä»£ç ã€‚å½“è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œç¨‹åºä¼šè·³è½¬åˆ°è¯¥ä»£ç ä½ç½®æ‰§è¡Œï¼Œå¹¶éšå¼åœ°ä¼ é€’ä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆ (pointer) (é€šå¸¸ç§°ä¸º <code>this</code> æŒ‡é’ˆ)ï¼Œä»¥ä¾¿å‡½æ•°çŸ¥é“è¦æ“ä½œå“ªä¸ªå¯¹è±¡çš„æ•°æ®ã€‚</li>
<li>å› æ­¤ï¼Œæ— è®ºç±»æœ‰å¤šå°‘æˆå‘˜å‡½æ•°ï¼Œæˆ–è€…å‡½æ•°å¤šä¹ˆå¤æ‚ï¼Œå®ƒä»¬éƒ½ä¸ä¼šå¢åŠ ç±»å¯¹è±¡æœ¬èº«çš„å¤§å°ã€‚</li>
</ul>
</li>
<li><p><strong>æŒ‡é’ˆæˆå‘˜å˜é‡å’Œ <code>std::string</code> çš„ç‰¹æ®Šæ€§ï¼š</strong></p>
<ul>
<li><strong>æŒ‡é’ˆæˆå‘˜ï¼š</strong> å¦‚æœç±»æœ‰ä¸€ä¸ªæŒ‡é’ˆæˆå‘˜å˜é‡ï¼Œä¾‹å¦‚ <code>int* p_age;</code>ï¼Œé‚£ä¹ˆ <code>sizeof</code> è®¡ç®—çš„æ˜¯è¿™ä¸ªæŒ‡é’ˆå˜é‡æœ¬èº«çš„å¤§å°ï¼ˆåœ¨ 64 ä½ç³»ç»Ÿä¸Šé€šå¸¸æ˜¯ 8 å­—èŠ‚ï¼Œ32 ä½ç³»ç»Ÿä¸Šæ˜¯ 4 å­—èŠ‚ï¼‰ï¼Œè€Œä¸æ˜¯å®ƒæ‰€æŒ‡å‘çš„æ•°æ®çš„å¤§å°ã€‚æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜å¯èƒ½å¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½å¾ˆå°ï¼Œæˆ–è€…ç”šè‡³å¯èƒ½æ²¡æœ‰æŒ‡å‘ä»»ä½•æœ‰æ•ˆçš„å†…å­˜ï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œä½†è¿™ä¸æŒ‡é’ˆå˜é‡æœ¬èº«çš„å¤§å°æ— å…³ã€‚</li>
<li><strong><code>std::string</code>ï¼š</strong> <code>std::string</code> æ˜¯ C++ æ ‡å‡†åº“ä¸­ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ç±»ï¼Œç”¨äºå¤„ç†æ–‡æœ¬ã€‚ç†è§£ <code>sizeof(std::string)</code> çš„è¡Œä¸ºå¾ˆé‡è¦ï¼š<ul>
<li><code>std::string</code> å†…éƒ¨é€šå¸¸ä¼šä½¿ç”¨æŒ‡é’ˆæ¥ç®¡ç†å®é™…çš„å­—ç¬¦æ•°æ®ï¼Œè¿™äº›æ•°æ®å­˜å‚¨åœ¨å † (heap) å†…å­˜ä¸Šã€‚</li>
<li>æ‰€ä»¥ï¼Œ<code>sizeof(std::string)</code> è¿”å›çš„æ˜¯ <code>std::string</code> å¯¹è±¡æœ¬èº«ç®¡ç†ç»“æ„çš„å¤§å°ï¼ˆå¯èƒ½åŒ…å«æŒ‡å‘å­—ç¬¦æ•°æ®çš„æŒ‡é’ˆã€å½“å‰å­—ç¬¦ä¸²é•¿åº¦ã€å·²åˆ†é…å®¹é‡ç­‰æˆå‘˜ï¼‰ï¼Œè€Œä¸æ˜¯å®ƒæ‰€å­˜å‚¨çš„æ–‡æœ¬çš„å®é™…é•¿åº¦ã€‚</li>
<li>è¿™æ„å‘³ç€ï¼Œæ— è®º <code>std::string</code> å¯¹è±¡å­˜å‚¨ â€œHelloâ€è¿˜æ˜¯ â€œHello World, this is a very long stringâ€ï¼Œ<code>sizeof(std::string)</code> çš„ç»“æœé€šå¸¸æ˜¯ç›¸åŒçš„ï¼ˆåœ¨åŒä¸€ä¸ªç¼–è¯‘å™¨å’Œå¹³å°ä¸‹ï¼‰ã€‚è¿™æ˜¯å› ä¸ºå®ƒåªè®¡ç®—äº†ç®¡ç†è¿™äº›å­—ç¬¦æ‰€éœ€çš„å›ºå®šå¤§å°çš„å†…éƒ¨æˆå‘˜ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>å†…å­˜å¯¹é½ (Memory Alignment)ï¼š</strong></p>
<ul>
<li>è™½ç„¶æˆ‘ä»¬è¯´å¯¹è±¡å¤§å°çº¦ç­‰äºæˆå‘˜å˜é‡å¤§å°ä¹‹å’Œï¼Œä½†å®é™…æƒ…å†µå¯èƒ½å› ä¸ºâ€œå†…å­˜å¯¹é½â€è€Œç•¥æœ‰ä¸åŒã€‚</li>
<li>ä¸ºäº†æé«˜ CPU è®¿é—®å†…å­˜çš„æ•ˆç‡ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¼šå°†å˜é‡æ”¾ç½®åœ¨ç‰¹å®šçš„å†…å­˜åœ°å€ä¸Šï¼Œè¿™äº›åœ°å€æ˜¯æŸä¸ªæ•°ï¼ˆé€šå¸¸æ˜¯å˜é‡å¤§å°æˆ–ç‰¹å®šå€¼å¦‚ 4 æˆ– 8ï¼‰çš„å€æ•°ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦å¯¹é½ï¼Ÿ</strong> CPU è¯»å–æœªå¯¹é½çš„æ•°æ®å¯èƒ½éœ€è¦å¤šæ¬¡å†…å­˜è®¿é—®ï¼Œæˆ–è€…åœ¨æŸäº›æ¶æ„ä¸Šç›´æ¥å¼•å‘ç¡¬ä»¶å¼‚å¸¸ã€‚å¯¹é½è®¿é—®é€šå¸¸æ›´å¿«ã€‚</li>
<li><strong>å¡«å……å­—èŠ‚ (Padding Bytes)ï¼š</strong> ä¸ºäº†å®ç°å¯¹é½ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨æˆå‘˜å˜é‡ä¹‹é—´æˆ–åœ¨å¯¹è±¡çš„æœ«å°¾æ’å…¥ä¸€äº›æœªä½¿ç”¨çš„å­—èŠ‚ï¼Œç§°ä¸ºå¡«å……å­—èŠ‚ã€‚</li>
<li><strong>å½±å“ï¼š</strong> ç”±äºå¡«å……å­—èŠ‚çš„å­˜åœ¨ï¼Œä¸€ä¸ªå¯¹è±¡çš„å®é™…å¤§å°å¯èƒ½ä¼šå¤§äºå…¶æ‰€æœ‰æˆå‘˜å˜é‡å¤§å°çš„ç®€å•æ€»å’Œã€‚</li>
<li>ä¾‹å¦‚ï¼Œä¸€ä¸ªç±»æœ‰å¦‚ä¸‹æˆå‘˜ï¼š<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> a;     <span class="comment">// 1 byte</span></span><br><span class="line">    <span class="keyword">int</span> b;      <span class="comment">// 4 bytes</span></span><br><span class="line">    short c;    <span class="comment">// 2 bytes</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
ç®€å•ç›¸åŠ æ˜¯ 1 + 4 + 2 = 7 å­—èŠ‚ã€‚ä½†å®é™…å¤§å°å¯èƒ½æ˜¯ï¼š<ul>
<li><code>char a;</code> (1 byte)</li>
<li>ç¼–è¯‘å™¨å¯èƒ½å¡«å…… 3 ä¸ªå­—èŠ‚ï¼Œä½¿æ¥ä¸‹æ¥çš„ <code>int b</code> ä»ä¸€ä¸ªèƒ½è¢« 4 æ•´é™¤çš„åœ°å€å¼€å§‹ã€‚</li>
<li><code>int b;</code> (4 bytes)</li>
<li><code>short c;</code> (2 bytes)</li>
<li>å¯¹è±¡æ€»å¤§å°ä¹Ÿå¯èƒ½éœ€è¦å¯¹é½åˆ°æŸä¸ªè¾¹ç•Œï¼ˆä¾‹å¦‚ 4 æˆ– 8 å­—èŠ‚çš„å€æ•°ï¼‰ï¼Œæ‰€ä»¥æœ«å°¾å¯èƒ½è¿˜ä¼šå¡«å…… 2 ä¸ªå­—èŠ‚ã€‚</li>
<li>å› æ­¤ï¼Œè¿™ä¸ª <code>Example</code> å¯¹è±¡çš„å¤§å°å¯èƒ½æ˜¯ 1 (a) + 3 (padding) + 4 (b) + 2 (c) + 2 (padding) = 12 å­—èŠ‚ï¼Œè€Œä¸æ˜¯ 7 å­—èŠ‚ã€‚å…·ä½“å–å†³äºç¼–è¯‘å™¨å’Œç›®æ ‡å¹³å°ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç æ¥éªŒè¯è¿™äº›æ¦‚å¿µã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt; // åŒ…å« std::string æ‰€éœ€çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªç®€å•çš„ Dog ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•° (Constructor) - ä½¿ç”¨é»˜è®¤çš„</span></span><br><span class="line">    Dog() = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆå‘˜å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print_info</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Dog's leg count: "</span> &lt;&lt; leg_count_ &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Dog's arm count: "</span> &lt;&lt; arm_count_ &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span> (p_age_ != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Dog's age: "</span> &lt;&lt; *p_age_ &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Dog's name: "</span> &lt;&lt; name_ &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_age</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p_age_ == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            p_age_ = <span class="keyword">new</span> <span class="keyword">int</span>; <span class="comment">// åœ¨å †ä¸Šåˆ†é…å†…å­˜</span></span><br><span class="line">        &#125;</span><br><span class="line">        *p_age_ = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_name</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; name)</span> </span>&#123;</span><br><span class="line">        name_ = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ææ„å‡½æ•° (Destructor) - ç”¨äºé‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜</span></span><br><span class="line">    ~Dog() &#123;</span><br><span class="line">        <span class="keyword">delete</span> p_age_; <span class="comment">// é‡Šæ”¾ p_age_ æŒ‡å‘çš„å†…å­˜</span></span><br><span class="line">        p_age_ = <span class="literal">nullptr</span>; <span class="comment">// å¥½ä¹ æƒ¯ï¼Œé˜²æ­¢æ‚¬æŒ‚æŒ‡é’ˆ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="keyword">size_t</span> leg_count_ &#123;<span class="number">4</span>&#125;;      <span class="comment">// size_t é€šå¸¸æ˜¯æ— ç¬¦å·é•¿æ•´å‹</span></span><br><span class="line">    <span class="keyword">size_t</span> arm_count_ &#123;<span class="number">0</span>&#125;;      <span class="comment">// åˆå§‹å€¼</span></span><br><span class="line">    <span class="keyword">int</span>* p_age_ &#123;<span class="literal">nullptr</span>&#125;;      <span class="comment">// æŒ‡å‘å¹´é¾„çš„æŒ‡é’ˆï¼Œåˆå§‹ä¸ºç©ºæŒ‡é’ˆ</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> name_ &#123;<span class="string">"Buddy"</span>&#125;; <span class="comment">// std::string å¯¹è±¡</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºæ¼”ç¤ºå†…å­˜å¯¹é½çš„ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlignmentDemo</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">char</span> c1;</span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨è¿™é‡Œæ’å…¥å¡«å……å­—èŠ‚</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨è¿™é‡Œæ’å…¥å¡«å……å­—èŠ‚</span></span><br><span class="line">    short s;</span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨è¿™é‡Œä¸ºæ•´ä¸ªå¯¹è±¡æœ«å°¾æ’å…¥å¡«å……å­—èŠ‚</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmptyClass</span> &#123;</span>&#125;; <span class="comment">// ç©ºç±»</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- åŸºæœ¬ç±»å‹å¤§å° ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(char): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="keyword">char</span>) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(short): "</span> &lt;&lt; <span class="keyword">sizeof</span>(short) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(int): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="keyword">int</span>) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(long): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="keyword">long</span>) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(long long): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="keyword">long</span> <span class="keyword">long</span>) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(float): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="keyword">float</span>) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(double): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="keyword">double</span>) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(size_t): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="keyword">size_t</span>) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(int*): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="keyword">int</span>*) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(std::string): "</span> &lt;&lt; <span class="keyword">sizeof</span>(<span class="built_in">std</span>::<span class="built_in">string</span>) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- Dog ç±»å¯¹è±¡å¤§å° ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    Dog dog1;</span><br><span class="line">    dog1.set_age(<span class="number">5</span>);</span><br><span class="line">    dog1.set_name(<span class="string">"Rex"</span>);</span><br><span class="line"></span><br><span class="line">    Dog dog2;</span><br><span class="line">    dog2.set_age(<span class="number">10</span>);</span><br><span class="line">    <span class="comment">// dog2 ä½¿ç”¨é»˜è®¤åå­— "Buddy"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å° Dog ç±»æœ¬èº«çš„å¤§å° (é€šè¿‡ç±»å‹)</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(Dog) class: "</span> &lt;&lt; <span class="keyword">sizeof</span>(Dog) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// æ‰“å° Dog å¯¹è±¡çš„å¤§å° (é€šè¿‡å¯¹è±¡å®ä¾‹)</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(dog1) object: "</span> &lt;&lt; <span class="keyword">sizeof</span>(dog1) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£é‡Šï¼š</span></span><br><span class="line">    <span class="comment">// Dog åŒ…å«:</span></span><br><span class="line">    <span class="comment">// 1. size_t leg_count_  (å‡è®¾ 8 å­—èŠ‚)</span></span><br><span class="line">    <span class="comment">// 2. size_t arm_count_  (å‡è®¾ 8 å­—èŠ‚)</span></span><br><span class="line">    <span class="comment">// 3. int* p_age_        (å‡è®¾ 8 å­—èŠ‚)</span></span><br><span class="line">    <span class="comment">// 4. std::string name_   (å‡è®¾ 32 å­—èŠ‚ï¼Œå…·ä½“å€¼å–å†³äºæ ‡å‡†åº“å®ç°)</span></span><br><span class="line">    <span class="comment">// ç†è®ºä¸Šä¸è€ƒè™‘å¯¹é½çš„ç®€å•ç›¸åŠ : 8 + 8 + 8 + 32 = 56 å­—èŠ‚ã€‚</span></span><br><span class="line">    <span class="comment">// å®é™…å¤§å°å¯èƒ½ä¼šå› å¯¹é½è€Œç•¥æœ‰ä¸åŒï¼Œä½†é€šå¸¸ä¼šæ¥è¿‘è¿™ä¸ªå€¼ï¼Œæˆ–è€…æ˜¯è¿™ä¸ªå€¼çš„æŸä¸ªå¯¹é½åçš„å€æ•°ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- std::string è¡Œä¸º ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> s1 = <span class="string">"short"</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> s2 = <span class="string">"this is a much longer string"</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(s1) (\""</span> &lt;&lt; s1 &lt;&lt; <span class="string">"\"): "</span> &lt;&lt; <span class="keyword">sizeof</span>(s1) &lt;&lt; <span class="string">" byte(s), length: "</span> &lt;&lt; s1.length() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(s2) (\""</span> &lt;&lt; s2 &lt;&lt; <span class="string">"\"): "</span> &lt;&lt; <span class="keyword">sizeof</span>(s2) &lt;&lt; <span class="string">" byte(s), length: "</span> &lt;&lt; s2.length() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// æ³¨æ„ï¼šsizeof(s1) å’Œ sizeof(s2) çš„å€¼æ˜¯ç›¸åŒçš„ï¼Œå°½ç®¡å®ƒä»¬å­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦ä¸åŒã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- å†…å­˜å¯¹é½æ¼”ç¤º ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(AlignmentDemo): "</span> &lt;&lt; <span class="keyword">sizeof</span>(AlignmentDemo) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// AlignmentDemo åŒ…å« char (1), int (4), short (2). æ€»å…± 1+4+2 = 7 å­—èŠ‚ã€‚</span></span><br><span class="line">    <span class="comment">// å®é™…å¤§å°å¯èƒ½æ˜¯ 12 å­—èŠ‚ï¼š</span></span><br><span class="line">    <span class="comment">// char c1;      // 1 byte</span></span><br><span class="line">    <span class="comment">// padding;       // 3 bytes (ä¸ºäº†è®© int i å¯¹é½åˆ° 4 å­—èŠ‚è¾¹ç•Œ)</span></span><br><span class="line">    <span class="comment">// int i;         // 4 bytes</span></span><br><span class="line">    <span class="comment">// short s;       // 2 bytes</span></span><br><span class="line">    <span class="comment">// padding;       // 2 bytes (ä¸ºäº†è®©æ•´ä¸ªç»“æ„ä½“å¤§å°æ˜¯å¯¹é½å€¼(å¦‚4æˆ–8)çš„å€æ•°ï¼Œè¿™é‡Œå‡è®¾æ˜¯4ï¼Œæ‰€ä»¥1+3+4+2 = 10ï¼Œéœ€è¦è¡¥2åˆ°12)</span></span><br><span class="line">    <span class="comment">// å…·ä½“å¡«å……ç­–ç•¥å–å†³äºç¼–è¯‘å™¨ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- ç©ºç±»å¤§å° ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof(EmptyClass): "</span> &lt;&lt; <span class="keyword">sizeof</span>(EmptyClass) &lt;&lt; <span class="string">" byte(s)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// C++ æ ‡å‡†è§„å®šï¼Œç©ºç±»çš„å¤§å°ä¸èƒ½ä¸º 0ã€‚é€šå¸¸æ˜¯ 1 å­—èŠ‚ã€‚</span></span><br><span class="line">    <span class="comment">// è¿™æ˜¯ä¸ºäº†ç¡®ä¿ç©ºç±»çš„ä¸åŒå¯¹è±¡åœ¨å†…å­˜ä¸­æœ‰ä¸åŒçš„åœ°å€ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>é¢„æœŸè¾“å‡ºåˆ†æ (ä¸åŒç³»ç»Ÿå’Œç¼–è¯‘å™¨å¯èƒ½ä¼šç•¥æœ‰å·®å¼‚ï¼Œå°¤å…¶æ˜¯ <code>sizeof(std::string)</code> å’Œå¯¹é½åçš„ç±»å¤§å°)ï¼š</strong></p>
<ul>
<li>åŸºæœ¬ç±»å‹å¤§å°ä¼šæ˜¾ç¤ºä½ ç³»ç»Ÿä¸Šè¿™äº›ç±»å‹çš„æ ‡å‡†å¤§å°ã€‚</li>
<li><code>sizeof(Dog)</code> ä¼šæ˜¯å…¶æˆå‘˜ <code>size_t</code> (é€šå¸¸8å­—èŠ‚), <code>size_t</code> (8å­—èŠ‚), <code>int*</code> (é€šå¸¸8å­—èŠ‚), å’Œ <code>std::string</code> (ä¾‹å¦‚ï¼ŒGCC libstdc++ ä¸­å¯èƒ½æ˜¯32å­—èŠ‚) çš„æ€»å’Œï¼Œå¹¶è€ƒè™‘å†…å­˜å¯¹é½ã€‚æ‰€ä»¥å¯èƒ½æ˜¯ 8+8+8+32 = 56ï¼Œæˆ–è€…å› ä¸ºå¯¹é½è€Œç¨å¤§ã€‚</li>
<li><code>sizeof(s1)</code> å’Œ <code>sizeof(s2)</code> ä¼šç›¸åŒï¼Œå³ä½¿å­—ç¬¦ä¸²å†…å®¹é•¿åº¦ä¸åŒã€‚</li>
<li><code>sizeof(AlignmentDemo)</code> å¾ˆå¯èƒ½ä¸æ˜¯ <code>1+4+2 = 7</code> å­—èŠ‚ï¼Œè€Œæ˜¯ç”±äºå¯¹é½ï¼Œä¾‹å¦‚ 12 å­—èŠ‚ã€‚</li>
<li><code>sizeof(EmptyClass)</code> é€šå¸¸æ˜¯ 1 å­—èŠ‚ã€‚</li>
</ul>
<hr>
<p><strong>QA é—ªå¡ (Flash Cards):</strong></p>
<ol>
<li><strong>Q:</strong> è®¡ç®—ä¸€ä¸ªå˜é‡æˆ–ç±»å‹åœ¨å†…å­˜ä¸­å ç”¨å¤šå°‘å­—èŠ‚çš„ C++ è¿ç®—ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ<br><strong>A:</strong> <code>sizeof</code> è¿ç®—ç¬¦ã€‚</li>
<li><strong>Q:</strong> ç±»å¯¹è±¡çš„å¤§å°ä¸»è¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ<br><strong>A:</strong> ä¸»è¦ç”±å…¶æˆå‘˜å˜é‡ (member variables) çš„å¤§å°æ€»å’Œå†³å®šï¼ˆå¯èƒ½å—å†…å­˜å¯¹é½å½±å“ï¼‰ã€‚</li>
<li><strong>Q:</strong> ç±»çš„æˆå‘˜å‡½æ•° (member functions) ä¼šå¢åŠ è¯¥ç±»æ¯ä¸ªå¯¹è±¡å®ä¾‹çš„å¤§å°å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ<br><strong>A:</strong> ä¸ä¼šã€‚æˆå‘˜å‡½æ•°çš„ä»£ç å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªå…±äº«ä½ç½®ï¼Œä¸å¤åˆ¶åˆ°æ¯ä¸ªå¯¹è±¡ä¸­ã€‚</li>
<li><strong>Q:</strong> å¦‚æœä¸€ä¸ªç±»æœ‰ä¸€ä¸ª <code>int* ptr;</code> æˆå‘˜ï¼Œ<code>sizeof</code> è¿™ä¸ªå¯¹è±¡æ—¶ï¼Œ<code>ptr</code> è´¡çŒ®çš„å¤§å°æ˜¯å¤šå°‘ï¼Ÿ<br><strong>A:</strong> æŒ‡é’ˆ <code>ptr</code> æœ¬èº«çš„å¤§å°ï¼ˆä¾‹å¦‚ï¼Œ64ä½ç³»ç»Ÿä¸Šæ˜¯8å­—èŠ‚ï¼‰ï¼Œè€Œä¸æ˜¯å®ƒæ‰€æŒ‡å‘çš„ <code>int</code> æ•°æ®çš„å¤§å°ã€‚</li>
<li><strong>Q:</strong> <code>sizeof(std::string)</code> è¿”å›çš„æ˜¯å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ•°é‡å—ï¼Ÿ<br><strong>A:</strong> ä¸æ˜¯ã€‚å®ƒè¿”å› <code>std::string</code> å¯¹è±¡å†…éƒ¨ç®¡ç†ç»“æ„çš„å¤§å°ï¼Œè¿™ä¸ªå¤§å°é€šå¸¸æ˜¯å›ºå®šçš„ï¼Œä¸å­—ç¬¦ä¸²å†…å®¹çš„é•¿åº¦æ— å…³ã€‚</li>
<li><strong>Q:</strong> ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½ (memory alignment)ï¼Ÿå®ƒå¦‚ä½•å½±å“å¯¹è±¡çš„å¤§å°ï¼Ÿ<br><strong>A:</strong> ç¼–è¯‘å™¨ä¸ºäº†æé«˜ CPU è®¿é—®æ•ˆç‡ï¼Œä¼šå°†æˆå‘˜å˜é‡å­˜æ”¾åœ¨ç‰¹å®šåœ°å€ï¼ˆé€šå¸¸æ˜¯å…¶å¤§å°çš„å€æ•°ï¼‰ã€‚è¿™å¯èƒ½å¯¼è‡´åœ¨æˆå‘˜é—´æˆ–å¯¹è±¡æœ«å°¾æ·»åŠ å¡«å……å­—èŠ‚ (padding bytes)ï¼Œä½¿å¾—å¯¹è±¡çš„å®é™…å¤§å°å¤§äºæˆå‘˜å¤§å°çš„ç®€å•æ€»å’Œã€‚</li>
<li><strong>Q:</strong> ä¸€ä¸ªæ²¡æœ‰ä»»ä½•æˆå‘˜å˜é‡çš„ç©ºç±» (empty class)ï¼Œå…¶å¤§å°æ˜¯å¤šå°‘ï¼Ÿ<br><strong>A:</strong> é€šå¸¸æ˜¯ 1 å­—èŠ‚ã€‚C++ æ ‡å‡†ä¸å…è®¸å¯¹è±¡å¤§å°ä¸º0ï¼Œä»¥ä¿è¯ä¸åŒå¯¹è±¡æœ‰ä¸åŒåœ°å€ã€‚</li>
</ol>
<hr>
<p><strong>å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯ï¼š</strong></p>
<ol>
<li><strong>æ··æ·† <code>sizeof(std::string)</code> å’Œ <code>myString.length()</code>ï¼š</strong><ul>
<li><strong>é”™è¯¯ï¼š</strong> è®¤ä¸º <code>sizeof(std::string)</code> ä¼šå‘Šè¯‰ä½ å­—ç¬¦ä¸²é‡Œæœ‰å¤šå°‘ä¸ªå­—ç¬¦ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> <code>sizeof(std::string)</code> æ˜¯ <code>std::string</code> è¿™ä¸ªç®¡ç†ç±»æœ¬èº«çš„å¤§å°ã€‚è¦è·å–å­—ç¬¦æ•°ï¼Œåº”è¯¥ä½¿ç”¨ <code>.length()</code> æˆ– <code>.size()</code> æˆå‘˜å‡½æ•°ã€‚</li>
</ul>
</li>
<li><strong>å¿½ç•¥å†…å­˜å¯¹é½ï¼š</strong><ul>
<li><strong>é”™è¯¯ï¼š</strong> ç®€å•åœ°å°†æ‰€æœ‰æˆå‘˜å˜é‡çš„å¤§å°ç›¸åŠ ï¼Œå°±è®¤ä¸ºè¿™æ˜¯å¯¹è±¡çš„æœ€ç»ˆå¤§å°ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> æœ€ç»ˆå¤§å°å¯èƒ½å› ä¸ºå†…å­˜å¯¹é½è€Œå˜å¤§ã€‚</li>
</ul>
</li>
<li><strong>è®¤ä¸ºæˆå‘˜å‡½æ•°ä¼šå¢åŠ å¯¹è±¡å¤§å°ï¼š</strong><ul>
<li><strong>é”™è¯¯ï¼š</strong> å®šä¹‰äº†å¾ˆå¤šæˆå‘˜å‡½æ•°ï¼Œæ‹…å¿ƒå¯¹è±¡ä¼šå˜å¾—éå¸¸åºå¤§ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> æˆå‘˜å‡½æ•°ä¸å½±å“å•ä¸ªå¯¹è±¡çš„å¤§å°ã€‚</li>
</ul>
</li>
<li><strong>å¯¹æŒ‡é’ˆæˆå‘˜çš„ <code>sizeof</code> ç†è§£é”™è¯¯ï¼š</strong><ul>
<li><strong>é”™è¯¯ï¼š</strong> <code>MyClass { char* name; };</code> è®¤ä¸º <code>sizeof(MyClass)</code> ä¼šåŒ…æ‹¬ <code>name</code> æŒ‡å‘çš„å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> <code>sizeof(MyClass)</code> åªåŒ…æ‹¬æŒ‡é’ˆ <code>name</code> æœ¬èº«çš„å¤§å°ã€‚</li>
</ul>
</li>
<li><strong>åœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¹å˜å¤§å°ï¼š</strong><ul>
<li><strong>é”™è¯¯ï¼š</strong> è®¤ä¸º <code>sizeof(MyObject)</code> çš„å€¼ä¼šéšç€å¯¹è±¡å†…éƒ¨åŠ¨æ€åˆ†é…å†…å­˜ï¼ˆå¦‚ <code>std::vector</code> æ·»åŠ å…ƒç´ ï¼‰è€Œæ”¹å˜ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> <code>sizeof</code> æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶ï¼ˆæˆ–æ¥è¿‘ç¼–è¯‘æ—¶ï¼‰ç¡®å®šçš„å€¼ï¼Œå®ƒç»™å‡ºçš„æ˜¯å¯¹è±¡æœ¬èº«å›ºå®šç»“æ„çš„å¤§å°ï¼Œä¸åŒ…æ‹¬å®ƒå¯èƒ½ç®¡ç†çš„ã€åœ¨å †ä¸ŠåŠ¨æ€åˆ†é…çš„å†…å­˜åŒºåŸŸã€‚</li>
</ul>
</li>
</ol>
<hr>
<p><strong>ç¼–ç ç»ƒä¹ ï¼š</strong></p>
<p>ä¸‹é¢æœ‰ä¸€ä¸ª <code>Gadget</code> ç±»ã€‚è¯·ä½ æ€è€ƒä¸€ä¸‹ï¼Œå¹¶å°è¯•å¡«å†™ä»£ç æ¥æ‰“å°å‡º <code>Gadget</code> å¯¹è±¡çš„å¤§å°ã€‚ç„¶åç¼–è¯‘å¹¶è¿è¡Œï¼Œçœ‹çœ‹ä½ çš„é¢„æµ‹æ˜¯å¦å‡†ç¡®ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gadget</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">char</span> id_char;       <span class="comment">// 1 byte</span></span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨è¿™é‡Œæ’å…¥å¡«å…… (padding)</span></span><br><span class="line">    <span class="keyword">int</span> item_code;      <span class="comment">// 4 bytes</span></span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨è¿™é‡Œæ’å…¥å¡«å……</span></span><br><span class="line">    short version;      <span class="comment">// 2 bytes</span></span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨è¿™é‡Œæ’å…¥å¡«å……</span></span><br><span class="line">    <span class="keyword">bool</span> is_enabled;    <span class="comment">// 1 byte (åœ¨æŸäº›å®ç°ä¸­boolå¯èƒ½å ç”¨æ›´å¤šï¼Œä½†é€šå¸¸æ˜¯1)</span></span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨å¯¹è±¡æœ«å°¾æ’å…¥å¡«å……ï¼Œä»¥ä½¿æ•´ä¸ªå¯¹è±¡çš„å¤§å°æ˜¯æŸä¸ªå€¼çš„å€æ•° (ä¾‹å¦‚4æˆ–8)</span></span><br><span class="line"></span><br><span class="line">    Gadget(<span class="keyword">char</span> id, <span class="keyword">int</span> code, short v, <span class="keyword">bool</span> enabled)</span><br><span class="line">        : id_char(id), item_code(code), version(v), is_enabled(enabled) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display_details</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ID Char: "</span> &lt;&lt; id_char</span><br><span class="line">                  &lt;&lt; <span class="string">", Item Code: "</span> &lt;&lt; item_code</span><br><span class="line">                  &lt;&lt; <span class="string">", Version: "</span> &lt;&lt; version</span><br><span class="line">                  &lt;&lt; <span class="string">", Enabled: "</span> &lt;&lt; (is_enabled ? <span class="string">"true"</span> : <span class="string">"false"</span>)</span><br><span class="line">                  &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Gadget <span class="title">my_gadget</span><span class="params">(<span class="string">'A'</span>, <span class="number">101</span>, <span class="number">2</span>, <span class="literal">true</span>)</span></span>;</span><br><span class="line">    my_gadget.display_details();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¢„æµ‹ä¸€ä¸‹ my_gadget çš„å¤§å°ä¼šæ˜¯å¤šå°‘ï¼Ÿ</span></span><br><span class="line">    <span class="comment">// æˆå‘˜å¤§å°æ€»å’Œ: sizeof(char) + sizeof(int) + sizeof(short) + sizeof(bool)</span></span><br><span class="line">    <span class="comment">// = 1 + 4 + 2 + 1 = 8 bytes.</span></span><br><span class="line">    <span class="comment">// ä½†ç”±äºå†…å­˜å¯¹é½ï¼Œå®é™…å¤§å°å¯èƒ½æ˜¯å¤šå°‘å‘¢ï¼Ÿ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">size_t</span> size_of_gadget;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> åœ¨è¿™é‡Œå¡«å†™ä»£ç ï¼Œè®¡ç®— my_gadget å¯¹è±¡çš„å¤§å°ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ size_of_gadget å˜é‡ä¸­ã€‚</span></span><br><span class="line">    <span class="comment">// ç„¶åæ‰“å°å‡ºè¿™ä¸ªå¤§å°ã€‚</span></span><br><span class="line">    <span class="comment">// ----------- åœ¨ä¸‹é¢å¡«ç©º -----------</span></span><br><span class="line">    <span class="comment">// size_of_gadget = ... ;</span></span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; "Size of my_gadget: " &lt;&lt; ... &lt;&lt; " bytes" &lt;&lt; std::endl;</span></span><br><span class="line">    <span class="comment">// ---------------------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>è¯·ä½ å°è¯•å¡«å†™ <code>TODO</code> éƒ¨åˆ†çš„ä»£ç ï¼Œç„¶åæˆ‘ä¼šæ ¹æ®ä½ çš„ç­”æ¡ˆç»™å‡ºè¯„åˆ†å’Œè§£é‡Šã€‚</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cpp/">Cpp    </a><a class="post-meta__tags" href="/tags/Coding/">Coding    </a><a class="post-meta__tags" href="/tags/Development/">Development    </a><a class="post-meta__tags" href="/tags/Class/">Class    </a><a class="post-meta__tags" href="/tags/Object/">Object    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2025/06/08/10-projects/cplusplus/lectures/279%20-%20cpp%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%EF%BC%9A%E5%AF%B9%E8%B1%A1%E9%94%80%E6%AF%81%E6%97%B6%E7%9A%84%E5%86%85%E5%AD%98%E9%87%8A%E6%94%BE/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>279 - cppææ„å‡½æ•°ï¼šå¯¹è±¡é”€æ¯æ—¶çš„å†…å­˜é‡Šæ”¾</span></div></a></div><div class="next-post pull_right"><a href="/2025/06/08/10-projects/cplusplus/lectures/280%20-%20%E6%9E%84%E9%80%A0%E4%B8%8E%E6%9E%90%E6%9E%84%E9%A1%BA%E5%BA%8F%20%E5%80%92%E5%BA%8F%E6%9E%90%E6%9E%84/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>280 - æ„é€ ä¸ææ„é¡ºåº å€’åºææ„</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/272 - first class/" title="272 - first class"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">272 - first class</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/273 - constructor/" title="273 - constructor"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">273 - constructor</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/275 - getter and setter/" title="275 - getter and setter"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">275 - getter and setter</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•/" title="277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹/" title="278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/276 - Class across multiple files/" title="276 - Class across multiple files"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">276 - Class across multiple files</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'xvMxbws16Erd8WUfqxkvHmb5-gzGzoHsz',
  appKey:'4U0Vo7NQIUL0eJzHdkPzdCDr',
  placeholder:'ä¸è¯´è¯çš„äººä¼šç–¯æ‰å—?',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By supersheepbear</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="external nofollow noopener noreferrer"><span>Butterfly</span></a></div><div class="footer_custom_text">å¤–å‘å­¤ç‹¬è€…æ‚£è€…</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="canvas_nest" color="255,240,245" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>