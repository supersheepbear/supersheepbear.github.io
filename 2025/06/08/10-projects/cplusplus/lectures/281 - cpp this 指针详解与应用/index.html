<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>281 - cpp this æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨ | Bear's dream</title><meta name="description" content="281 - cpp this æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"><meta name="keywords" content="Cpp,Coding,Tutorial,Developer,Class"><meta name="author" content="supersheepbear"><meta name="copyright" content="supersheepbear"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="p43hXBn3_dLvbyxUzx0eo5eYmj9OVYOV52pdrhBa2sw"><meta name="baidu-site-verification" content="EXLlfLv2pV"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="281 - cpp this æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"><meta name="twitter:description" content="281 - cpp this æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta property="og:type" content="article"><meta property="og:title" content="281 - cpp this æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"><meta property="og:url" content="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/281%20-%20cpp%20this%20%E6%8C%87%E9%92%88%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/"><meta property="og:site_name" content="Bear's dream"><meta property="og:description" content="281 - cpp this æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/281%20-%20cpp%20this%20%E6%8C%87%E9%92%88%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/"><link rel="prev" title="sql-data-types-constraints-example" href="https://yxiong.org/2025/06/08/30-resources/coding/sql/sql-data-types-constraints-example/"><link rel="next" title="301 - æ‹·è´æ„é€ å‡½æ•°æ·±æ‹·è´" href="https://yxiong.org/2025/06/08/10-projects/cplusplus/lectures/301%20-%20%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D/"><link rel="stylesheet" href="hfttps://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bear's dream" type="application/atom+xml">
</head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Bear's dream</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200520153141.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">152</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">151</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">20</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> éŸ³ä¹ç…§ç‰‡</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å­¦ä¹ è®¡åˆ’</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#C-This-æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">C++ This æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#1-æ ‡é¢˜å’Œç®€ä»‹"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">1. æ ‡é¢˜å’Œç®€ä»‹</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#2-è¯¦ç»†è§£é‡Š"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">2. è¯¦ç»†è§£é‡Š</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#3-ä»£ç ç¤ºä¾‹"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">3. ä»£ç ç¤ºä¾‹</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#4-QA-é—ªå¡-Flash-Cards"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">4. QA é—ªå¡ (Flash Cards)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#5-å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">5. å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#6-ç¼–ç ç»ƒä¹ "><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">6. ç¼–ç ç»ƒä¹ </span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-1"><span class="toc_mobile_items-number">7.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-1"><span class="toc_mobile_items-number">7.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#7-ç”¨æˆ·è§£ç­”è¯„ä»·ã€æ­£ç¡®ç­”æ¡ˆåŠè§£é‡Š"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">7. ç”¨æˆ·è§£ç­”è¯„ä»·ã€æ­£ç¡®ç­”æ¡ˆåŠè§£é‡Š</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#8-å»ºè®®å’Œæ‰©å±•é—®é¢˜"><span class="toc_mobile_items-number">9.</span> <span class="toc_mobile_items-text">8. å»ºè®®å’Œæ‰©å±•é—®é¢˜</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ§‘â€ğŸ’»-User-2"><span class="toc_mobile_items-number">9.1.</span> <span class="toc_mobile_items-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ¤–-Assistant-2"><span class="toc_mobile_items-number">9.2.</span> <span class="toc_mobile_items-text">ğŸ¤– Assistant</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#è§£ç­”æ‰©å±•é—®é¢˜"><span class="toc_mobile_items-number">10.</span> <span class="toc_mobile_items-text">è§£ç­”æ‰©å±•é—®é¢˜</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-this-æŒ‡é’ˆä¸-const-æˆå‘˜å‡½æ•°-member-function"><span class="toc_mobile_items-number">10.1.</span> <span class="toc_mobile_items-text">1. this æŒ‡é’ˆä¸ const æˆå‘˜å‡½æ•° (member function)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-è¿”å›-this-Vs-è¿”å›-this-çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰"><span class="toc_mobile_items-number">10.2.</span> <span class="toc_mobile_items-text">2. è¿”å› *this Vs è¿”å› this çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-this-åœ¨ç»§æ‰¿-inheritance-ä¸­çš„è¡Œä¸º"><span class="toc_mobile_items-number">10.3.</span> <span class="toc_mobile_items-text">3. this åœ¨ç»§æ‰¿ (inheritance) ä¸­çš„è¡Œä¸º</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-ç®­å¤´æ“ä½œç¬¦-gt-çš„é‡è½½-operator-overloading"><span class="toc_mobile_items-number">10.4.</span> <span class="toc_mobile_items-text">4. ç®­å¤´æ“ä½œç¬¦ -&gt; çš„é‡è½½ (operator overloading)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-éšå¼-this-å‚æ•°-implicit-parameter"><span class="toc_mobile_items-number">10.5.</span> <span class="toc_mobile_items-text">5. éšå¼ this å‚æ•° (implicit parameter)</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#C-This-æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"><span class="toc-number">1.</span> <span class="toc-text">C++ This æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant"><span class="toc-number">1.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-æ ‡é¢˜å’Œç®€ä»‹"><span class="toc-number">2.</span> <span class="toc-text">1. æ ‡é¢˜å’Œç®€ä»‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-è¯¦ç»†è§£é‡Š"><span class="toc-number">3.</span> <span class="toc-text">2. è¯¦ç»†è§£é‡Š</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-ä»£ç ç¤ºä¾‹"><span class="toc-number">4.</span> <span class="toc-text">3. ä»£ç ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-QA-é—ªå¡-Flash-Cards"><span class="toc-number">5.</span> <span class="toc-text">4. QA é—ªå¡ (Flash Cards)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯"><span class="toc-number">6.</span> <span class="toc-text">5. å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-ç¼–ç ç»ƒä¹ "><span class="toc-number">7.</span> <span class="toc-text">6. ç¼–ç ç»ƒä¹ </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-1"><span class="toc-number">7.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-1"><span class="toc-number">7.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-ç”¨æˆ·è§£ç­”è¯„ä»·ã€æ­£ç¡®ç­”æ¡ˆåŠè§£é‡Š"><span class="toc-number">8.</span> <span class="toc-text">7. ç”¨æˆ·è§£ç­”è¯„ä»·ã€æ­£ç¡®ç­”æ¡ˆåŠè§£é‡Š</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-å»ºè®®å’Œæ‰©å±•é—®é¢˜"><span class="toc-number">9.</span> <span class="toc-text">8. å»ºè®®å’Œæ‰©å±•é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ§‘â€ğŸ’»-User-2"><span class="toc-number">9.1.</span> <span class="toc-text">ğŸ§‘â€ğŸ’» User</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ¤–-Assistant-2"><span class="toc-number">9.2.</span> <span class="toc-text">ğŸ¤– Assistant</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#è§£ç­”æ‰©å±•é—®é¢˜"><span class="toc-number">10.</span> <span class="toc-text">è§£ç­”æ‰©å±•é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-this-æŒ‡é’ˆä¸-const-æˆå‘˜å‡½æ•°-member-function"><span class="toc-number">10.1.</span> <span class="toc-text">1. this æŒ‡é’ˆä¸ const æˆå‘˜å‡½æ•° (member function)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-è¿”å›-this-Vs-è¿”å›-this-çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰"><span class="toc-number">10.2.</span> <span class="toc-text">2. è¿”å› *this Vs è¿”å› this çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-this-åœ¨ç»§æ‰¿-inheritance-ä¸­çš„è¡Œä¸º"><span class="toc-number">10.3.</span> <span class="toc-text">3. this åœ¨ç»§æ‰¿ (inheritance) ä¸­çš„è¡Œä¸º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ç®­å¤´æ“ä½œç¬¦-gt-çš„é‡è½½-operator-overloading"><span class="toc-number">10.4.</span> <span class="toc-text">4. ç®­å¤´æ“ä½œç¬¦ -&gt; çš„é‡è½½ (operator overloading)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-éšå¼-this-å‚æ•°-implicit-parameter"><span class="toc-number">10.5.</span> <span class="toc-text">5. éšå¼ this å‚æ•° (implicit parameter)</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)"><div id="post-info"><div id="post-title"><div class="posttitle">281 - cpp this æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2025-06-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2025-06-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/">10-projects</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/">cplusplus</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/10-projects/cplusplus/lectures/">lectures</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/2025/06/08/10-projects/cplusplus/lectures/281%20-%20cpp%20this%20%E6%8C%87%E9%92%88%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2025/06/08/10-projects/cplusplus/lectures/281%20-%20cpp%20this%20%E6%8C%87%E9%92%88%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="C-This-æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"><a href="#C-This-æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨" class="headerlink" title="C++ This æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨"></a>C++ This æŒ‡é’ˆè¯¦è§£ä¸åº”ç”¨</h1><h2 id="ğŸ§‘â€ğŸ’»-User"><a href="#ğŸ§‘â€ğŸ’»-User" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>In this lecture, weâ€™re going to learn about the this pointer.And this is a special pointer that is maintained by C plus plus to really help you manipulate the currentobject.And it is the current object for which a given method is being executed.Here is a simple example with our dog class and weâ€™re going to show some usefulness for the this pointer.The first thing weâ€™re going to look at is the syntax.For example, here we might need to print the address in memory where the object was created and dothat from the inside of the function.And to do that, we use the this pointer.For example, we can put out a message and we can do that through a statement like we have here.We are printing dog dog name constructed at a given memory address and we use the this keyword to getthe address of the current object for which a specific method or function is being called.In this case, it was the constructor of the dog object.Here we can also do the same thing for the other constructor.And you see we are using the this pointer.This is one of the uses you have for this pointer.Again, the this pointer is a special pointer that is maintained by the C plus plus system and it isgoing to be pointing to the current object that is being manipulated by the C plus plus around the timeand itâ€™s going to be manipulated through a special function of the class object that is being called.This is the meaning here.Here is another use case for the this pointer.It may be used to resolve conflicts when you have a parameter and a member variable that are named thesame way.For example, here we are calling the set name function.It has a parameter with a name, Doug name, and it has a member variable called Doug name.So if you do a statement like we have on top here, the compiler is going to be confused.Youâ€™re going to say, Doug name equals Doug name and it wonâ€™t really know which Doug name you are referringto.We can resolve this conflict by saying this and say pointer access notation and say Doug name and thisthing here is going to be the member variable and weâ€™re going to be assigning it to the member variablefrom the parameter.This is the meaning here and we can use the this pointer to resolve such conflicts.Another use we have for use pointer is if we want to set up chained calls, for example, using pointersand we might need to do something like this.So we have a Doug Pointer set up on top here and we can do something with our new object.For example, we can call a function called print on our Doug object.After we print the information, weâ€™re going to set some information on the dog.And you see we are setting all of the information through one statement.The way we achieve this, our setters are going to be returning a pointer to the current object andweâ€™re going to be grabbing that return value and calling stuff on it directly because itâ€™s a pointerand we are going to be using the pointer access notation.So weâ€™re going to call, set name, set, name is going to return a pointer.Weâ€™re going to use that pointer to set the breed and say to breed is going to return a pointer.Weâ€™re going to use that pointer to set the age.And after this entire line, all the information is going to change about our dog.And we can see that here.And after we do whatever we want with our dog object, weâ€™re going to release it from memory.So this is another thing you can achieve using the this pointer and this is how you can set up thissetters.It is nothing complicated.We have set name.Itâ€™s going to return a Doug Pointer and weâ€™re going to return this.Okay.And this is going to be a pointer or the memory address of the current object of the dog class.We have the same setup for set dog breed.We return the dog pointer and we return thus the same setup for set dog age.We return a dog pointer and we return this.We can do the same thing using references, but our setup is going to be somewhat a little bit different.We have our dog object here and weâ€™re going to do our chain call here.So weâ€™re going to say set name through the pointer because we have a dog pointer here.But after that weâ€™re going to return a reference from the functions here.So set name is going to return a reference.Weâ€™re going to go through that reference to set the breed set dog breed is going to return a referenceand we are going to go through that reference to set the dog age.And if we print the information now, weâ€™re going to see that we have new information in our dog object.And after we are done with our dog object, we have to remember to release it from memory because itwas.I look at it dynamically from the hip.Here is how you can set this up.It really is nothing complicated.We just have our setters and we are going to return a reference.But before we return through the disk pointer we will need to dereference the disk pointer and get tothe actual thing that is being pointed to.Thatâ€™s why we have this star operator here and for the other setters weâ€™re going to do the same thing.Weâ€™re going to return a reference.Weâ€™re going to return a dereferenced version of this.Weâ€™re going to return a dog reference for set dog age and weâ€™re going to return a dereference this pointerbecause this is a reference we are returning here.So this is what the this pointer is about.Now weâ€™re going to head over to Visual Studio code and play with this a little more.Okay.Here we are in our working folder.The current project is the this pointer.Weâ€™re going to grab our template files and weâ€™re going to put them in place and then weâ€™re going toopen this in Visual Studio code by dragging and dropping here, this is going to open our folder.Weâ€™re going to open the Main.cpp file and weâ€™re going to close the left sidebar here so that we havesome more space to work with.I am going to put in a version of our dog class.It is pretty limited right now.Itâ€™s just has a destructor and a constructor and a constructor and we have our member variables andweâ€™re going to tune this a little bit so that we can work with this however we want.The first thing we want to do is to print the addresses of dog objects that we construct and destructhere, and weâ€™re going to do that in our constructor.So letâ€™s go to our Stdcout statement here and weâ€™re going to say add to mean the memory address wherethe object was constructed and weâ€™re going to say this.So when we do this, this is going to be the address in memory of the current object that is being constructedby our constructor here.And weâ€™re going to say the same thing in our destructor.Weâ€™re going to say at and weâ€™re going to say the memory address where the current object is being destroyedfrom.So after we do this, if we go in the main function and, for example, set up a dog object, weâ€™regoing to say dog, weâ€™re going to say dog one and weâ€™re going to give it the information.Weâ€™re going to give it the name, which is going to be fluffy.Weâ€™re going to give it the breed, which is going to be a shepherd, and weâ€™re going to give it theage of two like we have been doing all along.When we do something like this, this is going to call the constructor because we are trying to setup an object.And before the main function ends, weâ€™re going to call the destructor and weâ€™re going to see thingshappening here, letâ€™s say, done, so that we know that the code is actually running.Weâ€™re going to say Stdcout done here.Okay, we have the setup done.We can build and run the application.Weâ€™re going to use GCC to build and the world is good.We can bring up a terminal to try and run the application.And now if we run Rooster, weâ€™re going to see that dog constructor called for a fluffy at this memorylocation.And the current object is this object here which is being constructed.And weâ€™re going to have access to its memory through the disk pointer.Hopefully you can see how powerful this is.If we didnâ€™t have the disk pointer, the only way to get the address to this object would be to grabthe address from the main function or from wherever.We are setting up our object here.But we have access to this address from the inside of the functions for the class and this is reallycool.So we can manipulate these addresses if we need to.And weâ€™re going to show you another use for this.So suppose we need to set up setters for our class here.So we need a setter to set the name, the breed and to set the age here.So letâ€™s set up our setters.Weâ€™re going to say setters and weâ€™re going to say void set name, or letâ€™s be explicit set dog namethatâ€™s going to be better.And weâ€™re going to pass a string view.Weâ€™re going to say Stdstring view and weâ€™re going to say name Param and weâ€™re going to put the bodiesin our class here.But I would encourage you to be consistent if you are doing this in real code.We are learning here and we are taking some shortcuts so that we can do things simply.But what we want to see now is what happens if we have a parameter named the same as a member variable.So how do you set this name to the member variable called name?So if you have a case like this, youâ€™re really going to be in trouble.Because if you say name equals name, letâ€™s try this.We should get a compiler error or a squiggly line because the compiler is not going to know which nameare you using here?Is it the member variable?Is it the parameter?Itâ€™s not going to know.And letâ€™s try to build and see what we get.Weâ€™re going to use the GCC and surprisingly, GCC is taking this and itâ€™s probably knowing that we havea member variable named name and itâ€™s going to assign the parameter to that member variable.So behind the scenes, GCC is going to change this to this.Itâ€™s going to use this name equals name.This is the syntax we want, which is really not confusing.But what we have on top here is going to be confusing and some compilers are not even going to takethis.Letâ€™s leave this in and actually build again with this.I want to see that this actually works.So weâ€™re going to build successfully.And if we go down in main and try to say, Doug, one set Doug name, letâ€™s say Puma, letâ€™s see whathappens.If we do something like this, weâ€™re going to try and build again and GCC is going to take this andthis is really cool.So letâ€™s put in a function which is going to print information about our.Doug.We can do that down here and itâ€™s going to return nothing.Itâ€™s going to be called print info and itâ€™s going to basically print the name of the breed and the age.So itâ€™s going to say Stdcout.Weâ€™re going to say the address where the Doug object lives.I think thatâ€™s more meaningful.Weâ€™re going to say this and then weâ€™re going to put a parentheses and say the name.I think we can put an angle bracket here and say name and weâ€™re going to say the Doug name.We can go down and say the age or the breed and say the age, and weâ€™re going to dereference the agemember variable because itâ€™s a pointer.Weâ€™re going to say the reference page here.And I think this is going to be it.Now we can put a new line character Stdendl and if we go down now and say print eval before we set thename, weâ€™re going to say Doug, one print info, Weâ€™re going to print the information about this.Doug And after we set the Doug name, weâ€™re going to go down and also say, Doug, one printable.You can play with these things and I really encourage you to do so.So weâ€™re going to build this.Weâ€™re going to use GCC, so the build is good.We can clear and run.Rooster This is going to say the constructor was called for Fluffy at give given address.Weâ€™re going to say the dog, weâ€™re going to print the information and weâ€™re going to say itâ€™s a Dougobject at this address.The name is Fluffy and weâ€™re going to print the Doug for the second time.Youâ€™re going to see that the name is still Fluffy and we have a problem here.Why is that?Why is our object not being modified?Letâ€™s go up and see our set dog name function here.So weâ€™re going to remove this and weâ€™re going to use the this pointer and weâ€™re going to build again.And letâ€™s clear now and run Rooster.And now you see that the changes are actually making sense.So what is happening with the assignment here?The compiler is assigning the value of the variable to the variable itself.And this is really doing nothing and it is not what you expect.I was fooled a little bit by the compiler because this was compiling, but itâ€™s not going to do whatyou want.When you call set dog name, you probably want to take this name and assign that to the member variablename of this class, but this is not what itâ€™s going to do.Letâ€™s build again and really show you this.So it is a really good advice to practice and really try things out yourself.Weâ€™re going to run a rooster.Youâ€™re going to see that after we set the dog name here to Puma and we try to print the information,The information is not going to be and the name is not going to be Puma for the second call here.And what this is really doing is doing nothing here.This does nothing.And you really need to know this.If you want to affect your member variable, you will have to go through the this pointer and this isgoing to tell take the name member variable of the current object and assign the value in name the nameparameter to that and thatâ€™s going to set your name to whatever new name you passed when you call theset dog name function here.So hopefully you really understand this.Now, if we build, weâ€™re going to see that the Puma name has been applied.Letâ€™s build again.So weâ€™re going to clear and run Rooster and weâ€™re going to see now that the name is Puma, and thereis some annoying thing we have in our constructors.We donâ€™t have a space before at here and it is really annoying to look at here.So letâ€™s build again and fix this.We are going to use GCC.The build is good.We can clear and run rooster and now we have what we want.So this is the second use case you might have for the this pointer through setters thatâ€™s use the parameterthat is named the same as your member variables.So weâ€™re going to set up.All the other theaters were going to set up a center for the breed.Weâ€™re going to say STD string view and itâ€™s going to be breed.We can do that because now we have tools to really do this properly.Weâ€™re going to say this breed and weâ€™re going to say equals breed.This is going to do and we can set the age and weâ€™re going to say void set age.Dog age.And weâ€™re going to pass in a value and weâ€™re going to go inside.What is it called?Itâ€™s called p h.I donâ€™t think it makes sense to call the parameter p h because itâ€™s not a pointer.So weâ€™re going to go inside and just dereference a pointer.So weâ€™re going to dereference that and weâ€™re going to say this.So weâ€™re going to go inside and say this p h equals H.I think this is going to work and we need to dereference this pointer because what we have as a membervariable is the pointer.So we need to go through the ugly syntax you see here and this is going to set our age so we can gothrough this and really change the information.So weâ€™re going to change the breed here.Set dog, breed, letâ€™s go down and choose that and weâ€™re going to say wire Fox terrier and weâ€™re goingto go down and set the age.Weâ€™re going to say dog one set dog age and weâ€™re going to say for why not?So we change the information of our dog through our setters here, and weâ€™re going to print new information.Letâ€™s build again, weâ€™re going to use GCC for that.The build is good.We can clear and run Rooster.This is going to give us new information for the second print here.So name is going to be Puma.Breed is going to be Wire Fox terrier and the age is going to be four.And we have the information for our dog object here.Okay, Now we have this and we want to see how we can set up chained calls using the this pointer.And in this case, we will be using pointers.Letâ€™s change our setters to return dog pointers.We can do that and weâ€™re going to go down to set dog breed.Weâ€™re going to return a dog pointer and weâ€™re going to go to set dog age and weâ€™re going to return adog pointer.Now, after we do this, we will need to return these pointers and weâ€™re going to go inside and say,return this.Remember, this contains the memory of the current object so we can return this and feed that to a returnedpointer so we can go down in all the other functions and really say this.Weâ€™re going to say return this.We return the memory address of the current object through the setters that we are doing here.Weâ€™re going to return this and after we do this, we can change the setting we are doing here to beone statement and we can comment this out.I think we can do that.And what weâ€™re going to say is dog one and weâ€™re going to say set dog name and weâ€™re going to pass inPuma, but this is going to return a pointer.Now set dog name is returning a pointer to the current object.And you can see that here, this is what we are returning.So we can go through this pointer and call some other functions.For example, we can say set dog breed directly and Visual Studio code is going to figure out that whatwe are returning is a pointer and itâ€™s going to change our access notation here to a pointer accessnotation.And weâ€™re going to use this in one single statement.So weâ€™re going to put in our breed and weâ€™re going to call the function to set the age.Okay, You see that it uses pointer access notation and this is really cool.So weâ€™re going to put in our four and youâ€™re going to see that this actually works.And this is really cool.If you donâ€™t want to do things in three steps, you can give your users the option to do things in onestep using returned pointers like this.And this is really cool.I use this all the time for my classes that I design in my applications, so if we build, weâ€™re goingto see that the build is good and weâ€™re going to clear and run Rooster.Weâ€™re going to see that the information is then name is Puma, Breed is Wire Fox Terrier and the agesfour.And we were able to do all these changes in one go.So we can even change this to use references.Here we are using pointers.So letâ€™s say that we are using pointers, but we can also use references.Letâ€™s go on top here and say that this is using pointers and weâ€™re going to comment this out.But before we do, weâ€™re going to copy all this because weâ€™re going to need that and weâ€™re going tocomment all this out and weâ€™re going to go down and say change calls using references, and weâ€™re goingto go down and put in our code and weâ€™re going to change our setters to return references instead ofpointers.We can do that.So weâ€™re going to change the star here to an ampersand symbol here, and this is going to do the magic.So we have a dog reference returned from all these functions.So because we are no longer returning a pointer, returning this directly is going to give us a compilererror.We need to reference this pointer and get to what?Of what is pointed to.Now, the compiler will know that we are returning a reference to the current object and this is thesyntax we can use to do this.Letâ€™s go down and the reference or the returned pointers and if we go down weâ€™re going to see that thisis good already and we can go down and set up our chained call using references and weâ€™re going to godown and say, Dog one, weâ€™re going to set dog name and weâ€™re going to pass in Pumba what we have beendoing all along.Now weâ€™re going to use the dot access notation because what we are returning is a reference and youâ€™regoing to see that Visual Studio code is going to pick this up.The breed is going to be Firefox and weâ€™re going to say set dog age and weâ€™re going to pass in our fourand youâ€™re going to see that this is valid cplusplus syntax.And if we print the information, weâ€™re going to have new information applied to our dog object here.We can build and see that this is actually working.You see the build is good.We can clear and run rooster and weâ€™re going to see that information has been applied to our dog object.So these are a few examples showing some of the usefulness for the this pointer.We have seen that we can use the this pointer to print the memory address of the current object.If we go down and look at our constructor and destructor, we are printing the address of the currentobject in our debug statement here.And this is really cool.We can use the this pointer to resolve conflicts in our setters.For example, we can use a parameter that has the same name as the member variable and itâ€™s not goingto be really confusing and lead to bad results.Itâ€™s going to change the actual member variable and change it to whatever you pass as the parameter.And this is really cool.We can also use the this pointer to set up change calls for our function and we have seen that we cando that either through returning pointers like we are doing here and using the this pointer as a returnobject for our function here.Or we can use returned pointers to do this.And if we do that, weâ€™re going to be able to call our functions in one go like we are doing here,using pointers or do the same thing using references like we are doing here.This is really all we set out to do in this lecture.I hope you found it interesting.We are going to stop here in this one.The next one weâ€™re going to learn about struct.Go ahead and finish up here and meet me there.</p>
<hr>
<h2 id="ğŸ¤–-Assistant"><a href="#ğŸ¤–-Assistant" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¥½çš„ï¼Œå¾ˆé«˜å…´èƒ½å¸®åŠ©ä½ å­¦ä¹  C++ï¼<code>this</code> æŒ‡é’ˆæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œç†è§£å®ƒèƒ½è®©ä½ æ›´å¥½åœ°æŒæ¡ C++ ä¸­ç±»çš„è¡Œä¸ºã€‚æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h1 id="1-æ ‡é¢˜å’Œç®€ä»‹"><a href="#1-æ ‡é¢˜å’Œç®€ä»‹" class="headerlink" title="1. æ ‡é¢˜å’Œç®€ä»‹"></a>1. æ ‡é¢˜å’Œç®€ä»‹</h1><p><strong>æ ‡é¢˜ï¼š</strong> C++ <code>this</code> æŒ‡é’ˆï¼šæ·±å…¥ç†è§£ä¸åº”ç”¨</p>
<p><strong>ç®€ä»‹ï¼š</strong><br>æœ¬èŠ‚è¯¾æˆ‘ä»¬å°†å­¦ä¹  C++ ä¸­çš„ <code>this</code> æŒ‡é’ˆ (pointer)ã€‚<code>this</code> æ˜¯ä¸€ä¸ªç”± C++ ç³»ç»Ÿç»´æŠ¤çš„ç‰¹æ®ŠæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œå…¶æˆå‘˜å‡½æ•° (member function) çš„å¯¹è±¡ (object)ã€‚æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ª <code>Dog</code> ç±»çš„ä¾‹å­ï¼Œä¸€æ­¥æ­¥æ­ç¤º <code>this</code> æŒ‡é’ˆçš„ç”¨é€”å’Œå¼ºå¤§ä¹‹å¤„ã€‚</p>
<h1 id="2-è¯¦ç»†è§£é‡Š"><a href="#2-è¯¦ç»†è§£é‡Š" class="headerlink" title="2. è¯¦ç»†è§£é‡Š"></a>2. è¯¦ç»†è§£é‡Š</h1><p><code>this</code> æŒ‡é’ˆæ˜¯ C++ ç±»ä¸­ä¸€ä¸ªéšå«çš„å‚æ•°ï¼Œå®ƒåœ¨æ¯ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…éƒ½å¯ç”¨ã€‚ä½ ä¸éœ€è¦å£°æ˜å®ƒï¼ŒC++ ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¤„ç†ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æŒ‡å‘è°ƒç”¨è¯¥æˆå‘˜å‡½æ•°çš„é‚£ä¸ªç‰¹å®šçš„å¯¹è±¡å®ä¾‹ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹ <code>this</code> æŒ‡é’ˆçš„å‡ ä¸ªå…³é”®ç”¨é€”ï¼š</p>
<p><strong>ç”¨é€”ä¸€ï¼šè·å–å½“å‰å¯¹è±¡çš„å†…å­˜åœ°å€</strong></p>
<p>æœ‰æ—¶ï¼Œåœ¨ç±»çš„æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦çŸ¥é“å½“å‰å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚<code>this</code> æŒ‡é’ˆå°±ä¿å­˜äº†è¿™ä¸ªåœ°å€ã€‚</p>
<ul>
<li><strong>åœºæ™¯ï¼š</strong> åœ¨æ„é€ å‡½æ•° (constructor) æˆ–ææ„å‡½æ•° (destructor) ä¸­æ‰“å°å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶å†…å­˜åœ°å€ï¼Œè¿™å¯¹äºè°ƒè¯•å’Œç†è§£å¯¹è±¡ç”Ÿå‘½å‘¨æœŸéå¸¸æœ‰å¸®åŠ©ã€‚</li>
<li><strong>å¦‚ä½•å·¥ä½œï¼š</strong> å½“ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œç¼–è¯‘å™¨ä¼šéšå¼åœ°å°†è¯¥å¯¹è±¡çš„åœ°å€ä½œä¸º <code>this</code> æŒ‡é’ˆä¼ é€’ç»™è¯¥å‡½æ•°ã€‚å› æ­¤ï¼Œåœ¨å‡½æ•°å†…éƒ¨ï¼Œ<code>this</code> å°±ä»£è¡¨äº†â€œæˆ‘ï¼Œè¿™ä¸ªå¯¹è±¡æœ¬èº«â€çš„åœ°å€ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼ˆæ¦‚å¿µæ€§ï¼‰ï¼š</strong><br>æƒ³è±¡ä½ æœ‰ä¸€ä¸ªé¥æ§å™¨ï¼ˆæˆå‘˜å‡½æ•°ï¼‰ï¼Œè¿™ä¸ªé¥æ§å™¨è¦æ“ä½œä¸€å°ç‰¹å®šçš„ç”µè§†æœºï¼ˆå¯¹è±¡ï¼‰ã€‚<code>this</code> æŒ‡é’ˆå°±åƒæ˜¯é¥æ§å™¨å†…éƒ¨çš„ä¸€ä¸ªæœºåˆ¶ï¼Œå®ƒå§‹ç»ˆçŸ¥é“è‡ªå·±å½“å‰æ­£å¯¹ç€å“ªå°ç”µè§†æœºã€‚æ‰€ä»¥å½“ä½ æŒ‰ä¸‹â€œå¼€æœºâ€æŒ‰é’®æ—¶ï¼Œå®ƒä¼šæ‰“å¼€â€œè¿™å°â€ç”µè§†æœºï¼Œè€Œä¸æ˜¯åˆ«çš„ç”µè§†æœºã€‚</p>
<p><strong>ç”¨é€”äºŒï¼šè§£å†³æˆå‘˜å˜é‡å’Œå‚æ•°ä¹‹é—´çš„å‘½åå†²çª</strong></p>
<p>å½“æˆå‘˜å‡½æ•°çš„å‚æ•°åä¸ç±»çš„æˆå‘˜å˜é‡åç›¸åŒæ—¶ï¼Œå°±ä¼šäº§ç”Ÿæ­§ä¹‰ã€‚ç¼–è¯‘å™¨å¯èƒ½ä¸çŸ¥é“ä½ æŒ‡çš„æ˜¯å‚æ•°è¿˜æ˜¯æˆå‘˜å˜é‡ã€‚</p>
<ul>
<li><p><strong>é—®é¢˜ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        value = value; <span class="comment">// å“ªä¸ª value æ˜¯æˆå‘˜å˜é‡ï¼Œå“ªä¸ªæ˜¯å‚æ•°ï¼Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p>åœ¨ä¸Šé¢çš„ <code>value = value;</code> è¯­å¥ä¸­ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¼šè®¤ä¸ºä¸¤ä¸ª <code>value</code> éƒ½æŒ‡å‘å‚æ•°ï¼Œå¯¼è‡´æˆå‘˜å˜é‡æ²¡æœ‰è¢«æ­£ç¡®èµ‹å€¼ã€‚è¿™é€šå¸¸ä¸ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ï¼Œä½†ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯â€”â€”æˆå‘˜å˜é‡çš„å€¼æ²¡æœ‰æŒ‰é¢„æœŸæ”¹å˜ã€‚</p>
</li>
<li><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä½¿ç”¨ <code>this</code> æŒ‡é’ˆæ˜ç¡®æŒ‡å‡ºå·¦è¾¹çš„ <code>value</code> æ˜¯å½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;value = value; <span class="comment">// this-&gt;value æŒ‡çš„æ˜¯æˆå‘˜å˜é‡</span></span><br><span class="line">                             <span class="comment">// å³è¾¹çš„ value æŒ‡çš„æ˜¯å‚æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>
<p><code>this-&gt;value</code> æ¸…æ™°åœ°å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œæŠŠå‚æ•° <code>value</code> çš„å€¼èµ‹ç»™â€˜è¿™ä¸ªå¯¹è±¡â€™çš„æˆå‘˜å˜é‡ <code>value</code>â€ã€‚</p>
</li>
</ul>
<p><strong>ç”¨é€”ä¸‰ï¼šå®ç°é“¾å¼è°ƒç”¨ (Chained Calls)</strong></p>
<p>é“¾å¼è°ƒç”¨å…è®¸ä½ åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè¿ç»­è°ƒç”¨å¤šä¸ªæ–¹æ³•ï¼Œä»£ç çœ‹èµ·æ¥æ›´æµç•…ã€‚ä¾‹å¦‚ <code>object.setName(&quot;Tom&quot;).setAge(3).setBreed(&quot;Cat&quot;);</code>ã€‚è¿™å¯ä»¥é€šè¿‡è®©setteræ–¹æ³•è¿”å›å¯¹å½“å‰å¯¹è±¡çš„å¼•ç”¨ (reference) æˆ–æŒ‡é’ˆæ¥å®ç°ã€‚</p>
<ul>
<li><p><strong>æ–¹æ³•Aï¼šè¿”å›æŒ‡å‘å½“å‰å¯¹è±¡çš„æŒ‡é’ˆ</strong></p>
<ul>
<li>æˆå‘˜å‡½æ•°ï¼ˆé€šå¸¸æ˜¯ setterï¼‰çš„è¿”å›ç±»å‹æ˜¯æŒ‡å‘ç±»æœ¬èº«çš„æŒ‡é’ˆ (e.g., <code>Dog*</code>)ã€‚</li>
<li>åœ¨å‡½æ•°æœ«å°¾ï¼Œ<code>return this;</code>ã€‚å› ä¸º <code>this</code> æœ¬èº«å°±æ˜¯æŒ‡å‘å½“å‰å¯¹è±¡çš„æŒ‡é’ˆã€‚</li>
<li>è°ƒç”¨æ–¹å¼ï¼š<code>dog_ptr-&gt;setName(&quot;Buddy&quot;)-&gt;setBreed(&quot;Golden Retriever&quot;)-&gt;setAge(5);</code><br>ï¼ˆæ³¨æ„è¿™é‡Œå› ä¸ºè¿”å›çš„æ˜¯æŒ‡é’ˆï¼Œæ‰€ä»¥åç»­è°ƒç”¨ç»§ç»­ä½¿ç”¨ <code>-&gt;</code>ï¼‰</li>
</ul>
</li>
<li><p><strong>æ–¹æ³•Bï¼šè¿”å›å½“å‰å¯¹è±¡çš„å¼•ç”¨</strong></p>
<ul>
<li>æˆå‘˜å‡½æ•°çš„è¿”å›ç±»å‹æ˜¯å¯¹ç±»æœ¬èº«çš„å¼•ç”¨ (e.g., <code>Dog&amp;</code>)ã€‚</li>
<li>åœ¨å‡½æ•°æœ«å°¾ï¼Œ<code>return *this;</code>ã€‚è¿™é‡Œ <code>this</code> æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œ<code>*this</code> æ˜¯å¯¹è¯¥æŒ‡é’ˆè§£å¼•ç”¨ï¼Œå¾—åˆ°å¯¹è±¡æœ¬èº«ï¼Œç„¶åè¿”å›è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚</li>
<li>è°ƒç”¨æ–¹å¼ï¼š<ul>
<li>å¦‚æœä»å¯¹è±¡æœ¬èº«å¼€å§‹ï¼š<code>my_dog.setName(&quot;Lucy&quot;).setBreed(&quot;Poodle&quot;).setAge(2);</code></li>
<li>å¦‚æœä»æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆå¼€å§‹ç¬¬ä¸€ä¸ªè°ƒç”¨ï¼Œåç»­è°ƒç”¨ä¼šå› ä¸ºè¿”å›å¼•ç”¨è€Œä½¿ç”¨ <code>.</code> æ“ä½œç¬¦ï¼š<br><code>dog_ptr-&gt;setName(&quot;Lucy&quot;).setBreed(&quot;Poodle&quot;).setAge(2);</code><br>è¿™é‡Œ <code>dog_ptr-&gt;setName(&quot;Lucy&quot;)</code> è¿”å›ä¸€ä¸ª <code>Dog&amp;</code>ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çš„ <code>.setBreed()</code> æ˜¯åœ¨å¼•ç”¨ä¸Šæ“ä½œçš„ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong><code>this</code> æŒ‡é’ˆçš„ç±»å‹</strong><br>åœ¨ä¸€ä¸ªé <code>const</code> æˆå‘˜å‡½æ•°ä¸­ï¼Œ<code>this</code> æŒ‡é’ˆçš„ç±»å‹æ˜¯ <code>ClassName* const</code>ã€‚è¿™æ„å‘³ç€ <code>this</code> æ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆâ€”â€”å®ƒæŒ‡å‘çš„å¯¹è±¡å¯ä»¥è¢«ä¿®æ”¹ï¼Œä½† <code>this</code> æŒ‡é’ˆæœ¬èº«ä¸èƒ½è¢«ä¿®æ”¹å»æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚<br>åœ¨ä¸€ä¸ª <code>const</code> æˆå‘˜å‡½æ•°ä¸­ï¼Œ<code>this</code> æŒ‡é’ˆçš„ç±»å‹æ˜¯ <code>const ClassName* const</code>ã€‚è¿™æ„å‘³ç€ <code>this</code> æŒ‡å‘ä¸€ä¸ªå¸¸é‡å¯¹è±¡ï¼Œå¹¶ä¸” <code>this</code> æŒ‡é’ˆæœ¬èº«ä¹Ÿæ˜¯å¸¸é‡ã€‚å› æ­¤ï¼Œåœ¨ <code>const</code> æˆå‘˜å‡½æ•°ä¸­ï¼Œä½ ä¸èƒ½ä¿®æ”¹å¯¹è±¡çš„æˆå‘˜å˜é‡ (é™¤éå®ƒä»¬è¢«å£°æ˜ä¸º <code>mutable</code>)ã€‚</p>
<h1 id="3-ä»£ç ç¤ºä¾‹"><a href="#3-ä»£ç ç¤ºä¾‹" class="headerlink" title="3. ä»£ç ç¤ºä¾‹"></a>3. ä»£ç ç¤ºä¾‹</h1><p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>Dog</code> ç±»æ¥æ¼”ç¤º <code>this</code> æŒ‡é’ˆçš„ç”¨æ³•ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string_view&gt; // ä¸ºäº†ä½¿ç”¨ string_view</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬å°†ç‹—ç‹—çš„å¹´é¾„ç”¨æŒ‡é’ˆè¡¨ç¤ºï¼Œæ¨¡ä»¿è§†é¢‘ä¸­çš„ä¾‹å­</span></span><br><span class="line"><span class="comment">// å®é™…é¡¹ç›®ä¸­ï¼Œé™¤éæœ‰ç‰¹æ®Šç†ç”±ï¼Œå¹´é¾„é€šå¸¸ç›´æ¥ç”¨ int å³å¯</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> dog_name;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> dog_breed;</span><br><span class="line">    <span class="keyword">int</span>* p_age; <span class="comment">// æŒ‡å‘å¹´é¾„çš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•° 1</span></span><br><span class="line">    Dog(<span class="built_in">std</span>::string_view name_param, <span class="built_in">std</span>::string_view breed_param, <span class="keyword">int</span> age_param) &#123;</span><br><span class="line">        dog_name = name_param;</span><br><span class="line">        dog_breed = breed_param;</span><br><span class="line">        p_age = <span class="keyword">new</span> <span class="keyword">int</span>(age_param); <span class="comment">// åŠ¨æ€åˆ†é…å†…å­˜ç»™å¹´é¾„</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ç‹—ç‹— "</span> &lt;&lt; dog_name &lt;&lt; <span class="string">" è¢«åˆ›å»ºäº†ï¼Œåœ°å€åœ¨: "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•° 2 (é‡è½½)</span></span><br><span class="line">    Dog(<span class="built_in">std</span>::string_view name_param) : Dog(name_param, <span class="string">"Unknown Breed"</span>, <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å§”æ‰˜æ„é€ å‡½æ•°ï¼Œthis çš„æ‰“å°ä¼šåœ¨ä¸Šé¢çš„æ„é€ å‡½æ•°ä¸­è¿›è¡Œ</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ç‹—ç‹— (åå­—ç‰ˆ) "</span> &lt;&lt; dog_name &lt;&lt; <span class="string">" æ„é€ å‡½æ•°è¢«è°ƒç”¨ã€‚"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ææ„å‡½æ•°</span></span><br><span class="line">    ~Dog() &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ç‹—ç‹— "</span> &lt;&lt; dog_name &lt;&lt; <span class="string">" åœ¨åœ°å€: "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">" è¢«é”€æ¯äº†ã€‚"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">delete</span> p_age; <span class="comment">// é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜</span></span><br><span class="line">        p_age = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print_info</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="comment">// å£°æ˜ä¸º const æˆå‘˜å‡½æ•°</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ç‹—ç‹—ä¿¡æ¯ (å¯¹è±¡åœ°å€: "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">"):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  åå­—: "</span> &lt;&lt; dog_name &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  å“ç§: "</span> &lt;&lt; dog_breed &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span> (p_age) &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  å¹´é¾„: "</span> &lt;&lt; *p_age &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  å¹´é¾„: (æœªçŸ¥)"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter: è§£å†³å‘½åå†²çª</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_dog_name_conflict</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> dog_name)</span> </span>&#123; <span class="comment">// å‚æ•°åä¸æˆå‘˜å˜é‡åç›¸åŒ</span></span><br><span class="line">        <span class="comment">// å¦‚æœå†™æˆ dog_name = dog_name; æˆå‘˜å˜é‡ä¸ä¼šè¢«æ”¹å˜</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;dog_name = dog_name; <span class="comment">// ä½¿ç”¨ this-&gt; æ˜ç¡®æŒ‡å®šæˆå‘˜å˜é‡</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"åå­—å·²æ›´æ–°ä¸º: "</span> &lt;&lt; <span class="keyword">this</span>-&gt;dog_name &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter: è¿”å› Dog* ç”¨äºé“¾å¼è°ƒç”¨ (æŒ‡é’ˆç‰ˆæœ¬)</span></span><br><span class="line">    <span class="function">Dog* <span class="title">set_name_ptr</span><span class="params">(<span class="built_in">std</span>::string_view name_param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;dog_name = name_param;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">// è¿”å›æŒ‡å‘å½“å‰å¯¹è±¡çš„æŒ‡é’ˆ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Dog* <span class="title">set_breed_ptr</span><span class="params">(<span class="built_in">std</span>::string_view breed_param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;dog_breed = breed_param;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Dog* <span class="title">set_age_ptr</span><span class="params">(<span class="keyword">int</span> age_param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(p_age) *<span class="keyword">this</span>-&gt;p_age = age_param;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">this</span>-&gt;p_age = <span class="keyword">new</span> <span class="keyword">int</span>(age_param);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter: è¿”å› Dog&amp; ç”¨äºé“¾å¼è°ƒç”¨ (å¼•ç”¨ç‰ˆæœ¬)</span></span><br><span class="line">    <span class="function">Dog&amp; <span class="title">set_name_ref</span><span class="params">(<span class="built_in">std</span>::string_view name_param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;dog_name = name_param;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>; <span class="comment">// è¿”å›å½“å‰å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Dog&amp; <span class="title">set_breed_ref</span><span class="params">(<span class="built_in">std</span>::string_view breed_param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;dog_breed = breed_param;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Dog&amp; <span class="title">set_age_ref</span><span class="params">(<span class="keyword">int</span> age_param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(p_age) *<span class="keyword">this</span>-&gt;p_age = age_param;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">this</span>-&gt;p_age = <span class="keyword">new</span> <span class="keyword">int</span>(age_param);</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- ç”¨é€”1ï¼šåœ¨æ„é€ /ææ„å‡½æ•°ä¸­æ‰“å°å¯¹è±¡åœ°å€ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="function">Dog <span class="title">dog1</span><span class="params">(<span class="string">"æ—ºè´¢"</span>, <span class="string">"ä¸­åç”°å›­çŠ¬"</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">    dog1.print_info();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- ç”¨é€”2ï¼šè§£å†³å‘½åå†²çª ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="function">Dog <span class="title">dog2</span><span class="params">(<span class="string">"å°ç™½"</span>, <span class="string">"è¨æ‘©è€¶"</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">    dog2.print_info();</span><br><span class="line">    dog2.set_dog_name_conflict(<span class="string">"å¤§ç™½"</span>); <span class="comment">// å‚æ•°å dog_name ä¸æˆå‘˜å˜é‡ dog_name å†²çª</span></span><br><span class="line">    dog2.print_info();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- ç”¨é€”3ï¼šé“¾å¼è°ƒç”¨ (è¿”å›æŒ‡é’ˆ) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    Dog* dog_ptr1 = <span class="keyword">new</span> Dog(<span class="string">"Buddy"</span>, <span class="string">"Labrador"</span>, <span class="number">1</span>);</span><br><span class="line">    dog_ptr1-&gt;print_info();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"é“¾å¼è®¾ç½®æ–°å±æ€§ (æŒ‡é’ˆ):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    dog_ptr1-&gt;set_name_ptr(<span class="string">"Max"</span>)</span><br><span class="line">            -&gt;set_breed_ptr(<span class="string">"German Shepherd"</span>)</span><br><span class="line">            -&gt;set_age_ptr(<span class="number">4</span>);</span><br><span class="line">    dog_ptr1-&gt;print_info();</span><br><span class="line">    <span class="keyword">delete</span> dog_ptr1;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--- ç”¨é€”3ï¼šé“¾å¼è°ƒç”¨ (è¿”å›å¼•ç”¨) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="function">Dog <span class="title">dog3</span><span class="params">(<span class="string">"Lucy"</span>, <span class="string">"Poodle"</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">    dog3.print_info();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"é“¾å¼è®¾ç½®æ–°å±æ€§ (å¼•ç”¨):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    dog3.set_name_ref(<span class="string">"Bella"</span>)</span><br><span class="line">        .set_breed_ref(<span class="string">"Beagle"</span>)</span><br><span class="line">        .set_age_ref(<span class="number">3</span>);</span><br><span class="line">    dog3.print_info();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ¼”ç¤ºä»æŒ‡é’ˆå¼€å§‹çš„é“¾å¼è°ƒç”¨ (è¿”å›å¼•ç”¨)</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- ä»æŒ‡é’ˆå¼€å§‹çš„é“¾å¼è°ƒç”¨ (è¿”å›å¼•ç”¨) ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    Dog* dog_ptr2 = <span class="keyword">new</span> Dog(<span class="string">"Charlie"</span>, <span class="string">"Boxer"</span>, <span class="number">1</span>);</span><br><span class="line">    dog_ptr2-&gt;print_info();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"é“¾å¼è®¾ç½®æ–°å±æ€§ (æŒ‡é’ˆå¼€å§‹ï¼Œå¼•ç”¨æ¥ç»­):"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    dog_ptr2-&gt;set_name_ref(<span class="string">"Cooper"</span>) <span class="comment">// ç¬¬ä¸€ä¸ªè°ƒç”¨é€šè¿‡æŒ‡é’ˆï¼Œè¿”å›å¼•ç”¨</span></span><br><span class="line">             .set_breed_ref(<span class="string">"Bulldog"</span>)  <span class="comment">// åç»­è°ƒç”¨åœ¨å¼•ç”¨ä¸Šä½¿ç”¨ .</span></span><br><span class="line">             .set_age_ref(<span class="number">5</span>);</span><br><span class="line">    dog_ptr2-&gt;print_info();</span><br><span class="line">    <span class="keyword">delete</span> dog_ptr2;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n--- main å‡½æ•°ç»“æŸ ---"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>ä»£ç è§£é‡Šï¼š</strong></p>
<ol>
<li><strong>æ„é€ å‡½æ•°ä¸ææ„å‡½æ•°ï¼š</strong> å†…éƒ¨éƒ½æ‰“å°äº† <code>this</code>ï¼Œä½ ä¼šçœ‹åˆ°æ¯ä¸ªå¯¹è±¡çš„å”¯ä¸€å†…å­˜åœ°å€ã€‚</li>
<li><strong><code>print_info()</code>ï¼š</strong> åŒæ ·æ‰“å°äº† <code>this</code>ï¼Œè¯æ˜åœ¨ä»»ä½•æˆå‘˜å‡½æ•°å†…éƒ½å¯ä»¥è®¿é—®å®ƒã€‚å®ƒè¢«å£°æ˜ä¸º <code>const</code>ï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°ä¸ä¼šä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ã€‚</li>
<li><strong><code>set_dog_name_conflict(std::string dog_name)</code>ï¼š</strong> å‚æ•° <code>dog_name</code> å’Œæˆå‘˜å˜é‡ <code>this-&gt;dog_name</code> åŒåï¼Œ<code>this-&gt;</code> ç”¨äºåŒºåˆ†ã€‚</li>
<li><strong><code>set_name_ptr</code>, <code>set_breed_ptr</code>, <code>set_age_ptr</code>ï¼š</strong> è¿™äº› setter å‡½æ•°è¿”å› <code>Dog*</code> (æŒ‡å‘Dogå¯¹è±¡çš„æŒ‡é’ˆ)ï¼Œå¹¶åœ¨æœ«å°¾ <code>return this;</code>ã€‚è¿™ä½¿å¾—å¯ä»¥è¿›è¡Œå¦‚ <code>dog_ptr1-&gt;set_name_ptr(&quot;...&quot;)-&gt;set_breed_ptr(&quot;...&quot;)</code> çš„é“¾å¼è°ƒç”¨ã€‚</li>
<li><strong><code>set_name_ref</code>, <code>set_breed_ref</code>, <code>set_age_ref</code>ï¼š</strong> è¿™äº› setter å‡½æ•°è¿”å› <code>Dog&amp;</code> (Dogå¯¹è±¡çš„å¼•ç”¨)ï¼Œå¹¶åœ¨æœ«å°¾ <code>return *this;</code> (è§£å¼•ç”¨<code>this</code>æŒ‡é’ˆå¾—åˆ°å¯¹è±¡æœ¬èº«ï¼Œç„¶åè¿”å›å…¶å¼•ç”¨)ã€‚è¿™ä½¿å¾—å¯ä»¥è¿›è¡Œå¦‚ <code>dog3.set_name_ref(&quot;...&quot;).set_breed_ref(&quot;...&quot;)</code> çš„é“¾å¼è°ƒç”¨ã€‚æ³¨æ„ï¼Œå³ä½¿ç¬¬ä¸€ä¸ªè°ƒç”¨æ˜¯é€šè¿‡æŒ‡é’ˆ (<code>dog_ptr2-&gt;set_name_ref(...)</code>)ï¼Œä¸€æ—¦è¿”å›äº†å¼•ç”¨ï¼Œåç»­çš„è°ƒç”¨å°±ä½¿ç”¨ç‚¹æ“ä½œç¬¦ (<code>.</code>)ã€‚</li>
</ol>
<h1 id="4-QA-é—ªå¡-Flash-Cards"><a href="#4-QA-é—ªå¡-Flash-Cards" class="headerlink" title="4. QA é—ªå¡ (Flash Cards)"></a>4. QA é—ªå¡ (Flash Cards)</h1><ul>
<li><p><strong>Q1: <code>this</code> æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>A1: <code>this</code> æ˜¯ä¸€ä¸ªæŒ‡å‘å½“å‰å¯¹è±¡å®ä¾‹çš„æŒ‡é’ˆ (pointer)ã€‚</li>
</ul>
</li>
<li><p><strong>Q2: åœ¨æˆå‘˜å‡½æ•°ä¸­ï¼Œå¦‚ä½•è®¿é—®å½“å‰å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Ÿ</strong></p>
<ul>
<li>A2: ç›´æ¥ä½¿ç”¨ <code>this</code> å…³é”®å­—ã€‚</li>
</ul>
</li>
<li><p><strong>Q3: å¦‚æœæˆå‘˜å‡½æ•°çš„å‚æ•°åå’Œæˆå‘˜å˜é‡åç›¸åŒï¼Œå¦‚ä½•æ˜ç¡®æŒ‡å®šæˆå‘˜å˜é‡ï¼Ÿ</strong></p>
<ul>
<li>A3: ä½¿ç”¨ <code>this-&gt;æˆå‘˜å˜é‡å = å‚æ•°å;</code> (e.g., <code>this-&gt;name = name;</code>)ã€‚</li>
</ul>
</li>
<li><p><strong>Q4: ä¸ºäº†å®ç°é“¾å¼è°ƒç”¨ï¼Œå¦‚æœsetterå‡½æ•°æƒ³è¿”å›æŒ‡å‘å½“å‰å¯¹è±¡çš„æŒ‡é’ˆï¼Œåº”è¯¥è¿”å›ä»€ä¹ˆï¼Ÿå‡½æ•°è¿”å›ç±»å‹åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>A4: åº”è¯¥ <code>return this;</code>ã€‚å‡½æ•°è¿”å›ç±»å‹åº”è¯¥æ˜¯ <code>ç±»å*</code> (e.g., <code>Dog*</code>)ã€‚</li>
</ul>
</li>
<li><p><strong>Q5: ä¸ºäº†å®ç°é“¾å¼è°ƒç”¨ï¼Œå¦‚æœsetterå‡½æ•°æƒ³è¿”å›å¯¹å½“å‰å¯¹è±¡çš„å¼•ç”¨ï¼Œåº”è¯¥è¿”å›ä»€ä¹ˆï¼Ÿå‡½æ•°è¿”å›ç±»å‹åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>A5: åº”è¯¥ <code>return *this;</code>ã€‚å‡½æ•°è¿”å›ç±»å‹åº”è¯¥æ˜¯ <code>ç±»å&amp;</code> (e.g., <code>Dog&amp;</code>)ã€‚</li>
</ul>
</li>
<li><p><strong>Q6: <code>this</code> æŒ‡é’ˆå¯ä»¥åœ¨é™æ€æˆå‘˜å‡½æ•° (static member function) ä¸­ä½¿ç”¨å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>A6: ä¸å¯ä»¥ã€‚é™æ€æˆå‘˜å‡½æ•°ä¸ä¸ä»»ä½•ç‰¹å®šçš„å¯¹è±¡å®ä¾‹ç›¸å…³è”ï¼Œå› æ­¤æ²¡æœ‰å½“å‰å¯¹è±¡çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ²¡æœ‰ <code>this</code> æŒ‡é’ˆã€‚</li>
</ul>
</li>
</ul>
<h1 id="5-å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯"><a href="#5-å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯" class="headerlink" title="5. å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯"></a>5. å¸¸è§è¯¯è§£æˆ–æ˜“çŠ¯é”™è¯¯</h1><ol>
<li><p><strong>å‘½åå†²çªæ—¶ä¸ä½¿ç”¨ <code>this</code>ï¼š</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> <code>void setName(std::string name) { name = name; }</code></li>
<li><strong>åæœï¼š</strong> è¿™é€šå¸¸ä¼šå°†å‚æ•° <code>name</code> èµ‹å€¼ç»™å®ƒè‡ªå·±ï¼Œæˆå‘˜å˜é‡ <code>this-&gt;name</code> æ²¡æœ‰è¢«æ›´æ–°ã€‚ç¨‹åºé€»è¾‘é”™è¯¯ï¼Œä½†ç¼–è¯‘å™¨å¯èƒ½ä¸æŠ¥é”™ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> <code>void setName(std::string name) { this-&gt;name = name; }</code></li>
</ul>
</li>
<li><p><strong>é“¾å¼è°ƒç”¨è¿”å›å¼•ç”¨æ—¶ï¼Œé”™è¯¯åœ°è¿”å›æŒ‡é’ˆï¼š</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> <code>Dog&amp; setName(std::string name) { this-&gt;name = name; return this; /* ç¼–è¯‘é”™è¯¯ */ }</code></li>
<li><strong>åæœï¼š</strong> ç±»å‹ä¸åŒ¹é…ã€‚å‡½æ•°å£°æ˜è¿”å› <code>Dog&amp;</code> (å¼•ç”¨)ï¼Œä½† <code>this</code> æ˜¯ <code>Dog*</code> (æŒ‡é’ˆ)ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> <code>Dog&amp; setName(std::string name) { this-&gt;name = name; return *this; }</code></li>
</ul>
</li>
<li><p><strong>é“¾å¼è°ƒç”¨è¿”å›æŒ‡é’ˆæ—¶ï¼Œé”™è¯¯åœ°è¿”å›è§£å¼•ç”¨çš„å¯¹è±¡ï¼š</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> <code>Dog* setName(std::string name) { this-&gt;name = name; return *this; /* ç¼–è¯‘é”™è¯¯ */ }</code></li>
<li><strong>åæœï¼š</strong> ç±»å‹ä¸åŒ¹é…ã€‚å‡½æ•°å£°æ˜è¿”å› <code>Dog*</code> (æŒ‡é’ˆ)ï¼Œä½† <code>*this</code> æ˜¯ <code>Dog</code> å¯¹è±¡æœ¬èº«ã€‚</li>
<li><strong>æ­£ç¡®ï¼š</strong> <code>Dog* setName(std::string name) { this-&gt;name = name; return this; }</code></li>
</ul>
</li>
<li><p><strong>åœ¨é™æ€æˆå‘˜å‡½æ•°ä¸­ä½¿ç”¨ <code>this</code>ï¼š</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">static_method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// std::cout &lt;&lt; this; // ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>åæœï¼š</strong> ç¼–è¯‘é”™è¯¯ã€‚é™æ€æˆå‘˜å‡½æ•°å±äºç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ç±»çš„ä»»ä½•ç‰¹å®šå¯¹è±¡ï¼Œå› æ­¤æ²¡æœ‰ <code>this</code> æŒ‡é’ˆã€‚</li>
</ul>
</li>
<li><p><strong>å¯¹ <code>this</code> æŒ‡é’ˆæœ¬èº«èµ‹å€¼ï¼š</strong></p>
<ul>
<li><strong>é”™è¯¯ï¼š</strong> <code>this = some_other_dog_address;</code></li>
<li><strong>åæœï¼š</strong> ç¼–è¯‘é”™è¯¯ã€‚<code>this</code> æ˜¯ä¸€ä¸ªå³å€¼ (rvalue) æˆ–æ›´å‡†ç¡®åœ°è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªprvalueï¼Œä¸èƒ½ä½œä¸ºèµ‹å€¼æ“ä½œçš„å·¦æ“ä½œæ•°ã€‚å®ƒæ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼Œå…¶æŒ‡å‘çš„åœ°å€åœ¨æˆå‘˜å‡½æ•°è°ƒç”¨æ—¶å°±å·²ç»ç¡®å®šï¼Œä¸èƒ½æ›´æ”¹å®ƒæŒ‡å‘åˆ«å¤„ã€‚</li>
</ul>
</li>
</ol>
<h1 id="6-ç¼–ç ç»ƒä¹ "><a href="#6-ç¼–ç ç»ƒä¹ " class="headerlink" title="6. ç¼–ç ç»ƒä¹ "></a>6. ç¼–ç ç»ƒä¹ </h1><p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>Gadget</code> ç±»çš„éª¨æ¶ã€‚è¯·ä½ å¡«å……ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿå·¥ä½œå¹¶æ¼”ç¤º <code>this</code> æŒ‡é’ˆçš„ç”¨æ³•ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string_view&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gadget</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> next_id; <span class="comment">// ç”¨äºç”Ÿæˆå”¯ä¸€çš„ ID</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°:</span></span><br><span class="line">    <span class="comment">// 1. æ¥æ”¶ä¸€ä¸ªåå­— (std::string_view name_param)</span></span><br><span class="line">    <span class="comment">// 2. å°†å‚æ•° name_param èµ‹å€¼ç»™æˆå‘˜å˜é‡ name (æ³¨æ„ï¼Œè¿™é‡Œå‚æ•°åå’Œæˆå‘˜å˜é‡åå¯ä»¥ç›¸åŒ)</span></span><br><span class="line">    <span class="comment">// 3. å°† Gadget::next_id èµ‹å€¼ç»™æˆå‘˜å˜é‡ idï¼Œç„¶åå°† Gadget::next_id è‡ªå¢1</span></span><br><span class="line">    <span class="comment">// 4. æ‰“å° "Gadget [name] created with ID [id] at address [this_address]"</span></span><br><span class="line">    Gadget(<span class="built_in">std</span>::string_view name) &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> ä½¿ç”¨ this æŒ‡é’ˆè§£å†³ name çš„èµ‹å€¼ (å¦‚æœå‚æ•°åå’Œæˆå‘˜å˜é‡åç›¸åŒ)</span></span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> èµ‹å€¼ id</span></span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> æ‰“å°åˆ›å»ºä¿¡æ¯ï¼ŒåŒ…æ‹¬ this æŒ‡é’ˆçš„å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Gadget() &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> æ‰“å° "Gadget [name] with ID [id] at address [this_address] destroyed"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter å‡½æ•° set_name:</span></span><br><span class="line">    <span class="comment">// 1. æ¥æ”¶ä¸€ä¸ªæ–°çš„åå­— (std::string_view new_name)</span></span><br><span class="line">    <span class="comment">// 2. æ›´æ–°æˆå‘˜å˜é‡ name</span></span><br><span class="line">    <span class="comment">// 3. è¿”å›å¯¹å½“å‰ Gadget å¯¹è±¡çš„å¼•ç”¨ (Gadget&amp;) ä»¥æ”¯æŒé“¾å¼è°ƒç”¨</span></span><br><span class="line">    <span class="function">Gadget&amp; <span class="title">set_name</span><span class="params">(<span class="built_in">std</span>::string_view new_name)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> æ›´æ–° name æˆå‘˜</span></span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> è¿”å› *this</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>; <span class="comment">// è¿™æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œä½ éœ€è¦å®Œæˆä¸Šé¢çš„ TODO</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Gadget ID: "</span> &lt;&lt; id &lt;&lt; <span class="string">", Name: "</span> &lt;&lt; <span class="keyword">this</span>-&gt;name </span><br><span class="line">                  &lt;&lt; <span class="string">", Living at: "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="keyword">int</span> Gadget::next_id = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Creating gadgets...\n"</span>;</span><br><span class="line">    <span class="function">Gadget <span class="title">g1</span><span class="params">(<span class="string">"Scanner"</span>)</span></span>;</span><br><span class="line">    <span class="function">Gadget <span class="title">g2</span><span class="params">(<span class="string">"Printer"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nDisplaying gadgets...\n"</span>;</span><br><span class="line">    g1.display();</span><br><span class="line">    g2.display();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nModifying and displaying g1 using chained calls...\n"</span>;</span><br><span class="line">    g1.set_name(<span class="string">"SuperScanner"</span>).set_name(<span class="string">"Advanced Scanner"</span>); <span class="comment">// é“¾å¼è°ƒç”¨</span></span><br><span class="line">    g1.display();</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nModifying g2...\n"</span>;</span><br><span class="line">    g2.set_name(<span class="string">"Laser Printer"</span>);</span><br><span class="line">    g2.display();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nEnd of main, gadgets will be destroyed.\n"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>è¯·ä½ å°è¯•å®Œæˆä¸Šé¢ä»£ç ä¸­æ ‡è®°ä¸º <code>// TODO:</code> çš„éƒ¨åˆ†ã€‚å®Œæˆåï¼Œæˆ‘ä¼šç»™ä½ è¯„åˆ†å¹¶æä¾›æ­£ç¡®çš„ç­”æ¡ˆå’Œè§£é‡Šã€‚ç¥ä½ ç¼–ç æ„‰å¿«ï¼</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-1"><a href="#ğŸ§‘â€ğŸ’»-User-1" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string_view&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gadget</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> next_id; <span class="comment">// ç”¨äºç”Ÿæˆå”¯ä¸€çš„ ID</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°:</span></span><br><span class="line">    <span class="comment">// 1. æ¥æ”¶ä¸€ä¸ªåå­— (std::string_view name_param)</span></span><br><span class="line">    <span class="comment">// 2. å°†å‚æ•° name_param èµ‹å€¼ç»™æˆå‘˜å˜é‡ name (æ³¨æ„ï¼Œè¿™é‡Œå‚æ•°åå’Œæˆå‘˜å˜é‡åå¯ä»¥ç›¸åŒ)</span></span><br><span class="line">    <span class="comment">// 3. å°† Gadget::next_id èµ‹å€¼ç»™æˆå‘˜å˜é‡ idï¼Œç„¶åå°† Gadget::next_id è‡ªå¢1</span></span><br><span class="line">    <span class="comment">// 4. æ‰“å° "Gadget [name] created with ID [id] at address [this_address]"</span></span><br><span class="line">    Gadget(<span class="built_in">std</span>::string_view name) &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> ä½¿ç”¨ this æŒ‡é’ˆè§£å†³ name çš„èµ‹å€¼ (å¦‚æœå‚æ•°åå’Œæˆå‘˜å˜é‡åç›¸åŒ)</span></span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> èµ‹å€¼ id</span></span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> æ‰“å°åˆ›å»ºä¿¡æ¯ï¼ŒåŒ…æ‹¬ this æŒ‡é’ˆçš„å€¼</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">        <span class="keyword">this</span>-&gt;next_id--;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Gadget ["</span> &lt;&lt; <span class="keyword">this</span>-&gt;name &lt;&lt;<span class="string">"] created with ID ["</span> &lt;&lt; <span class="keyword">this</span>-&gt;id &lt;&lt; <span class="string">"] at address ["</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">"]"</span>&lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Gadget() &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> æ‰“å° "Gadget [name] with ID [id] at address [this_address] destroyed"</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Gadget "</span>&lt;&lt; <span class="keyword">this</span>-&gt;name &lt;&lt; <span class="string">"with ID ["</span> &lt;&lt; <span class="keyword">this</span>-&gt;id &lt;&lt; <span class="string">"] at address ["</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">"] destroyed"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter å‡½æ•° set_name:</span></span><br><span class="line">    <span class="comment">// 1. æ¥æ”¶ä¸€ä¸ªæ–°çš„åå­— (std::string_view new_name)</span></span><br><span class="line">    <span class="comment">// 2. æ›´æ–°æˆå‘˜å˜é‡ name</span></span><br><span class="line">    <span class="comment">// 3. è¿”å›å¯¹å½“å‰ Gadget å¯¹è±¡çš„å¼•ç”¨ (Gadget&amp;) ä»¥æ”¯æŒé“¾å¼è°ƒç”¨</span></span><br><span class="line">    <span class="function">Gadget&amp; <span class="title">set_name</span><span class="params">(<span class="built_in">std</span>::string_view new_name)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> æ›´æ–° name æˆå‘˜</span></span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> è¿”å› *this</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;name = new_name;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>; <span class="comment">// è¿™æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œä½ éœ€è¦å®Œæˆä¸Šé¢çš„ TODO</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Gadget ID: "</span> &lt;&lt; id &lt;&lt; <span class="string">", Name: "</span> &lt;&lt; <span class="keyword">this</span>-&gt;name </span><br><span class="line">                  &lt;&lt; <span class="string">", Living at: "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="keyword">int</span> Gadget::next_id = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Creating gadgets...\n"</span>;</span><br><span class="line">    <span class="function">Gadget <span class="title">g1</span><span class="params">(<span class="string">"Scanner"</span>)</span></span>;</span><br><span class="line">    <span class="function">Gadget <span class="title">g2</span><span class="params">(<span class="string">"Printer"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nDisplaying gadgets...\n"</span>;</span><br><span class="line">    g1.display();</span><br><span class="line">    g2.display();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nModifying and displaying g1 using chained calls...\n"</span>;</span><br><span class="line">    g1.set_name(<span class="string">"SuperScanner"</span>).set_name(<span class="string">"Advanced Scanner"</span>); <span class="comment">// é“¾å¼è°ƒç”¨</span></span><br><span class="line">    g1.display();</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nModifying g2...\n"</span>;</span><br><span class="line">    g2.set_name(<span class="string">"Laser Printer"</span>);</span><br><span class="line">    g2.display();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nEnd of main, gadgets will be destroyed.\n"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<hr>
<h2 id="ğŸ¤–-Assistant-1"><a href="#ğŸ¤–-Assistant-1" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>éå¸¸å¥½ï¼ä½ å·²ç»å¾ˆæ¥è¿‘äº†ï¼Œå¹¶ä¸”å¯¹ <code>this</code> æŒ‡é’ˆåœ¨ <code>set_name</code> å’Œè®¿é—®æˆå‘˜å˜é‡ä¸­çš„åº”ç”¨æ˜¯æ­£ç¡®çš„ã€‚è®©æˆ‘ä»¬æ¥ä¸€èµ·çœ‹çœ‹ä½ çš„ä»£ç ï¼Œå¹¶è¿›è¡Œä¸€äº›å°è°ƒæ•´ã€‚</p>
<h1 id="7-ç”¨æˆ·è§£ç­”è¯„ä»·ã€æ­£ç¡®ç­”æ¡ˆåŠè§£é‡Š"><a href="#7-ç”¨æˆ·è§£ç­”è¯„ä»·ã€æ­£ç¡®ç­”æ¡ˆåŠè§£é‡Š" class="headerlink" title="7. ç”¨æˆ·è§£ç­”è¯„ä»·ã€æ­£ç¡®ç­”æ¡ˆåŠè§£é‡Š"></a>7. ç”¨æˆ·è§£ç­”è¯„ä»·ã€æ­£ç¡®ç­”æ¡ˆåŠè§£é‡Š</h1><p><strong>ä½ çš„è§£ç­”è¯„ä»·ï¼š</strong></p>
<ul>
<li><p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>åœ¨ <code>set_name</code> å‡½æ•°ä¸­ï¼Œä½ æ­£ç¡®åœ°æ›´æ–°äº†æˆå‘˜å˜é‡ <code>name</code> å¹¶é€šè¿‡ <code>return *this;</code> å®ç°äº†é“¾å¼è°ƒç”¨çš„è¦æ±‚ã€‚</li>
<li>åœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ï¼Œä½ å°è¯•ä½¿ç”¨ <code>this-&gt;name</code> å’Œ <code>this</code> æ¥å¼•ç”¨æˆå‘˜å’Œå¯¹è±¡åœ°å€ï¼Œæ–¹å‘æ˜¯æ­£ç¡®çš„ã€‚</li>
<li><code>main</code> å‡½æ•°ä¸­çš„æµ‹è¯•é€»è¾‘æ¸…æ™°ï¼Œèƒ½å¤ŸéªŒè¯é“¾å¼è°ƒç”¨ã€‚</li>
</ul>
</li>
<li><p><strong>å¾…æ”¹è¿›ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ„é€ å‡½æ•°ä¸­çš„ ID åˆ†é…é€»è¾‘ï¼š</strong><ul>
<li><code>this-&gt;next_id--;</code> è¿™ä¸€è¡Œæ˜¯é”™è¯¯çš„ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†å½“å‰ <code>Gadget::next_id</code> çš„å€¼èµ‹ç»™å½“å‰å¯¹è±¡çš„ <code>id</code> æˆå‘˜ï¼Œç„¶åå°† <code>Gadget::next_id</code> <em>å¢åŠ </em> 1ï¼Œä¸ºä¸‹ä¸€ä¸ªå¯¹è±¡åšå‡†å¤‡ã€‚</li>
<li>ä½ æ²¡æœ‰å°† <code>next_id</code> çš„å€¼èµ‹ç»™ <code>this-&gt;id</code>ã€‚</li>
</ul>
</li>
<li><strong>æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„æ‰“å°è¯­å¥ï¼š</strong><ul>
<li>æ„é€ å‡½æ•°ä¸­æ‰“å° <code>this-&gt;id</code> æ—¶ï¼Œç”±äº <code>id</code> å¯èƒ½æœªè¢«æ­£ç¡®åˆå§‹åŒ–ï¼ˆåœ¨ä½ ä¹‹å‰çš„ä»£ç ä¸­ï¼‰ï¼Œæ‰€ä»¥å¯èƒ½è¾“å‡ºä¸æ­£ç¡®çš„å€¼ã€‚</li>
<li>ææ„å‡½æ•°çš„æ‰“å°è¯­å¥ä¸­ â€œGadget â€œ å’Œ <code>this-&gt;name</code> ä¹‹é—´å°‘äº†ä¸€ä¸ª <code>[</code>ï¼Œâ€ with IDâ€ å‰é¢å°‘äº†ä¸€ä¸ªç©ºæ ¼ï¼Œå¯¼è‡´æ ¼å¼ä¸å¤ªç¾è§‚ã€‚</li>
</ul>
</li>
</ol>
</li>
</ul>
<p><strong>ç»¼åˆè¯„åˆ†ï¼š7/10</strong><br>ä½ å¯¹ <code>this</code> æŒ‡é’ˆç”¨äºé“¾å¼è°ƒç”¨å’ŒåŒºåˆ†æˆå‘˜å˜é‡çš„æ ¸å¿ƒæ¦‚å¿µç†è§£å¾—ä¸é”™ï¼Œä½†åœ¨é™æ€æˆå‘˜å’Œå¯¹è±¡IDçš„åˆå§‹åŒ–é€»è¾‘ä¸Šå‡ºäº†ä¸€äº›å·®é”™ã€‚</p>
<hr>
<p><strong>æ­£ç¡®ç­”æ¡ˆä¸è§£é‡Šï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string_view&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gadget</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> next_id; <span class="comment">// ç”¨äºç”Ÿæˆå”¯ä¸€çš„ ID (declaration)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°:</span></span><br><span class="line">    Gadget(<span class="built_in">std</span>::string_view name_param) &#123; <span class="comment">// å‚æ•°åå¯ä»¥ä¸æˆå‘˜å˜é‡ä¸åŒï¼Œä»¥é¿å…æ··æ·†ï¼Œæˆ–ä½¿ç”¨ this</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name_param;         <span class="comment">// ä½¿ç”¨ this-&gt;name æ˜ç¡®æ˜¯æˆå‘˜å˜é‡</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;id = Gadget::next_id;      <span class="comment">// 1. å°†é™æ€ next_id èµ‹å€¼ç»™å½“å‰å¯¹è±¡çš„ id</span></span><br><span class="line">                                         <span class="comment">// ä¹Ÿå¯ä»¥å†™æˆ this-&gt;id = next_id; å› ä¸ºåœ¨ç±»æˆå‘˜å‡½æ•°å†…éƒ¨å¯ä»¥ç›´æ¥è®¿é—®é™æ€æˆå‘˜</span></span><br><span class="line">        Gadget::next_id++;               <span class="comment">// 2. å°†é™æ€ next_id è‡ªå¢1ï¼Œä¸ºä¸‹ä¸€ä¸ªå¯¹è±¡å‡†å¤‡</span></span><br><span class="line">                                         <span class="comment">// ä¹Ÿå¯ä»¥å†™æˆ next_id++;</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Gadget ["</span> &lt;&lt; <span class="keyword">this</span>-&gt;name &lt;&lt; <span class="string">"] created with ID ["</span> &lt;&lt; <span class="keyword">this</span>-&gt;id </span><br><span class="line">                  &lt;&lt; <span class="string">"] at address ["</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">"]"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~Gadget() &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Gadget ["</span> &lt;&lt; <span class="keyword">this</span>-&gt;name &lt;&lt; <span class="string">"] with ID ["</span> &lt;&lt; <span class="keyword">this</span>-&gt;id </span><br><span class="line">                  &lt;&lt; <span class="string">"] at address ["</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">"] destroyed"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setter å‡½æ•° set_name:</span></span><br><span class="line">    <span class="function">Gadget&amp; <span class="title">set_name</span><span class="params">(<span class="built_in">std</span>::string_view new_name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;name = new_name; <span class="comment">// æ›´æ–° name æˆå‘˜</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;          <span class="comment">// è¿”å›å¯¹å½“å‰å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="comment">// æ ‡è®°ä¸º const å› ä¸ºå®ƒä¸ä¿®æ”¹å¯¹è±¡çŠ¶æ€</span></span><br><span class="line">        <span class="comment">// åœ¨ const æˆå‘˜å‡½æ•°ä¸­ï¼Œthis çš„ç±»å‹æ˜¯ const Gadget*</span></span><br><span class="line">        <span class="comment">// this-&gt;name å®é™…ä¸Šæ˜¯ (*this).name</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Gadget ID: "</span> &lt;&lt; <span class="keyword">this</span>-&gt;id &lt;&lt; <span class="string">", Name: "</span> &lt;&lt; <span class="keyword">this</span>-&gt;name </span><br><span class="line">                  &lt;&lt; <span class="string">", Living at: "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ (definition and initialization)</span></span><br><span class="line"><span class="keyword">int</span> Gadget::next_id = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Creating gadgets...\n"</span>;</span><br><span class="line">    <span class="function">Gadget <span class="title">g1</span><span class="params">(<span class="string">"Scanner"</span>)</span></span>;    <span class="comment">// g1.id åº”è¯¥ä¸º 1, Gadget::next_id å˜ä¸º 2</span></span><br><span class="line">    <span class="function">Gadget <span class="title">g2</span><span class="params">(<span class="string">"Printer"</span>)</span></span>;    <span class="comment">// g2.id åº”è¯¥ä¸º 2, Gadget::next_id å˜ä¸º 3</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nDisplaying gadgets...\n"</span>;</span><br><span class="line">    g1.display();</span><br><span class="line">    g2.display();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nModifying and displaying g1 using chained calls...\n"</span>;</span><br><span class="line">    g1.set_name(<span class="string">"SuperScanner"</span>).set_name(<span class="string">"Advanced Scanner"</span>); <span class="comment">// é“¾å¼è°ƒç”¨</span></span><br><span class="line">    g1.display();</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nModifying g2...\n"</span>;</span><br><span class="line">    g2.set_name(<span class="string">"Laser Printer"</span>);</span><br><span class="line">    g2.display();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\nEnd of main, gadgets will be destroyed.\n"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong>å…³é”®è§£é‡Šç‚¹ï¼š</strong></p>
<ol>
<li><p><strong>æ„é€ å‡½æ•° <code>Gadget(std::string_view name_param)</code>:</strong></p>
<ul>
<li><code>this-&gt;name = name_param;</code>: å¦‚æœå‚æ•°åå’Œæˆå‘˜å˜é‡åéƒ½æ˜¯ <code>name</code>ï¼Œé‚£ä¹ˆ <code>this-&gt;name = name;</code> æ˜¯å¿…é¡»çš„ï¼Œä»¥åŒºåˆ†æˆå‘˜å˜é‡å’Œå‚æ•°ã€‚è¿™é‡Œæˆ‘ç”¨äº† <code>name_param</code> ä½œä¸ºå‚æ•°åï¼Œæ­¤æ—¶ <code>this-&gt;name = name_param;</code> å’Œ <code>name = name_param;</code> æ•ˆæœç›¸åŒï¼Œä½†å‰è€…æ›´æ˜ç¡®åœ°æŒ‡å‡ºäº†æ˜¯åœ¨ç»™æˆå‘˜å˜é‡ <code>name</code> èµ‹å€¼ã€‚</li>
<li><code>this-&gt;id = Gadget::next_id;</code>: è¿™æ˜¯æ ¸å¿ƒã€‚<code>Gadget::next_id</code> (æˆ–ç®€å†™ä¸º <code>next_id</code>) æ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œå®ƒå±äºæ•´ä¸ªç±»ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰¹å®šå¯¹è±¡ã€‚æˆ‘ä»¬æŠŠå®ƒçš„<em>å½“å‰å€¼</em>èµ‹ç»™æ–°åˆ›å»ºå¯¹è±¡çš„ <code>id</code>ã€‚</li>
<li><code>Gadget::next_id++;</code>: ç„¶åï¼Œæˆ‘ä»¬å°†é™æ€çš„ <code>next_id</code> åŠ 1ï¼Œè¿™æ ·ä¸‹ä¸€ä¸ªåˆ›å»ºçš„ <code>Gadget</code> å¯¹è±¡å°±ä¼šè·å¾—ä¸€ä¸ªæ–°çš„ã€å”¯ä¸€çš„IDã€‚</li>
<li><code>this</code> åœ¨è¿™é‡Œçš„æ‰“å°ï¼š<code>std::cout &lt;&lt; &quot;Gadget [&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;] ... at address [&quot; &lt;&lt; this &lt;&lt; &quot;]&quot; &lt;&lt; std::endl;</code> æ­£ç¡®åœ°æ˜¾ç¤ºäº†å½“å‰åˆ›å»ºå¯¹è±¡çš„åç§°ã€åˆ†é…çš„IDä»¥åŠå…¶å†…å­˜åœ°å€ã€‚</li>
</ul>
</li>
<li><p><strong>ææ„å‡½æ•° <code>~Gadget()</code>:</strong></p>
<ul>
<li>æ‰“å°è¯­å¥ <code>std::cout &lt;&lt; &quot;Gadget [&quot; &lt;&lt; this-&gt;name &lt;&lt; &quot;] with ID [&quot; &lt;&lt; this-&gt;id &lt;&lt; &quot;] at address [&quot; &lt;&lt; this &lt;&lt; &quot;] destroyed&quot; &lt;&lt; std::endl;</code> ç°åœ¨å¯ä»¥æ­£ç¡®æ˜¾ç¤ºå¯¹è±¡çš„åç§°ã€ID å’Œåœ°å€ï¼Œå› ä¸º <code>id</code> åœ¨æ„é€ æ—¶å·²æ­£ç¡®åˆå§‹åŒ–ã€‚æ ¼å¼ä¹Ÿåšäº†å¾®è°ƒã€‚</li>
</ul>
</li>
<li><p><strong>Setter å‡½æ•° <code>set_name(std::string_view new_name)</code>:</strong></p>
<ul>
<li><code>this-&gt;name = new_name;</code>ï¼šæ­£ç¡®åœ°å°†æ–°åç§°èµ‹ç»™å¯¹è±¡çš„ <code>name</code> æˆå‘˜ã€‚</li>
<li><code>return *this;</code>ï¼šæ­£ç¡®åœ°è¿”å›å¯¹å½“å‰å¯¹è±¡ (<code>*this</code>) çš„å¼•ç”¨ï¼Œä»è€Œå…è®¸é“¾å¼è°ƒç”¨ã€‚</li>
</ul>
</li>
<li><p><strong><code>display() const</code>:</strong></p>
<ul>
<li>æˆ‘å°†æ­¤å‡½æ•°æ ‡è®°ä¸º <code>const</code>ï¼Œå› ä¸ºå®ƒåªæ˜¯æ˜¾ç¤ºä¿¡æ¯ï¼Œä¸åº”è¯¥ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ã€‚è¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚åœ¨ <code>const</code> æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œ<code>this</code> æŒ‡é’ˆçš„ç±»å‹æ˜¯ <code>const Gadget*</code>ï¼Œæ„å‘³ç€ä½ ä¸èƒ½é€šè¿‡ <code>this</code> ä¿®æ”¹é <code>mutable</code> æˆå‘˜å˜é‡ã€‚</li>
</ul>
</li>
<li><p><strong>é™æ€æˆå‘˜åˆå§‹åŒ– <code>int Gadget::next_id = 1;</code>:</strong></p>
<ul>
<li>è¿™æ˜¯é™æ€æˆå‘˜å˜é‡çš„å®šä¹‰å’Œåˆå§‹åŒ–ï¼Œå¿…é¡»åœ¨ç±»å£°æ˜ä¹‹å¤–è¿›è¡Œã€‚</li>
</ul>
</li>
</ol>
<p>ç°åœ¨ï¼Œå½“ä½ è¿è¡Œä¿®æ­£åçš„ä»£ç ï¼Œä½ ä¼šçœ‹åˆ° <code>g1</code> çš„ ID æ˜¯ 1ï¼Œ<code>g2</code> çš„ ID æ˜¯ 2ï¼Œå¹¶ä¸”é“¾å¼è°ƒç”¨èƒ½æ­£ç¡®å·¥ä½œã€‚</p>
<h1 id="8-å»ºè®®å’Œæ‰©å±•é—®é¢˜"><a href="#8-å»ºè®®å’Œæ‰©å±•é—®é¢˜" class="headerlink" title="8. å»ºè®®å’Œæ‰©å±•é—®é¢˜"></a>8. å»ºè®®å’Œæ‰©å±•é—®é¢˜</h1><p><strong>å»ºè®®ï¼š</strong></p>
<ol>
<li><strong>å‚æ•°å‘½åï¼š</strong> å½“æˆå‘˜å‡½æ•°å‚æ•°çš„ç”¨é€”æ˜¯åˆå§‹åŒ–æˆ–ä¿®æ”¹åŒåæˆå‘˜å˜é‡æ—¶ï¼Œä¸€ç§å¸¸è§çš„åšæ³•æ˜¯ç»™å‚æ•°ååŠ ä¸Šåç¼€ï¼ˆå¦‚ <code>_param</code>ã€<code>_in</code>ï¼‰æˆ–å‰ç¼€ï¼ˆå¦‚ <code>a_</code>ã€<code>p_</code>ï¼‰ï¼Œæˆ–è€…å°±ç”¨å®Œå…¨ç›¸åŒçš„åå­—ç„¶åä¾èµ– <code>this-&gt;</code> åŒºåˆ†ã€‚é€‰æ‹©ä¸€ç§ä½ è§‰å¾—æ¸…æ™°å¹¶åšæŒä¸‹å»ã€‚</li>
<li><strong>Const æ­£ç¡®æ€§ (Const Correctness)ï¼š</strong> å…»æˆå°†ä¸ä¿®æ”¹å¯¹è±¡çŠ¶æ€çš„æˆå‘˜å‡½æ•°å£°æ˜ä¸º <code>const</code> çš„å¥½ä¹ æƒ¯ã€‚è¿™èƒ½æé«˜ä»£ç çš„å¥å£®æ€§å’Œå¯è¯»æ€§ï¼Œå¹¶å…è®¸è¿™äº›å‡½æ•°è¢« <code>const</code> å¯¹è±¡è°ƒç”¨ã€‚</li>
<li><strong>ç†è§£é™æ€æˆå‘˜ (Static Members)ï¼š</strong> <code>static</code> æˆå‘˜å˜é‡ä¸å±äºä»»ä½•å•ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯ç”±ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«ã€‚<code>static</code> æˆå‘˜å‡½æ•°ä¸èƒ½è®¿é—®é <code>static</code> æˆå‘˜ï¼ˆåŒ…æ‹¬ <code>this</code> æŒ‡é’ˆï¼‰ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¸ç‰¹å®šå¯¹è±¡å®ä¾‹å…³è”ã€‚</li>
</ol>
<p><strong>æ‰©å±•é—®é¢˜ä¾›ä½ ç ”ç©¶ï¼š</strong></p>
<ol>
<li><p><strong><code>this</code> æŒ‡é’ˆä¸ <code>const</code> æˆå‘˜å‡½æ•°ï¼š</strong></p>
<ul>
<li>åœ¨ä¸€ä¸ª <code>const</code> æˆå‘˜å‡½æ•°ï¼ˆå¦‚ <code>void display() const;</code>ï¼‰å†…éƒ¨ï¼Œ<code>this</code> æŒ‡é’ˆçš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>å°è¯•åœ¨ä¸€ä¸ª <code>const</code> æˆå‘˜å‡½æ•°ä¸­ä¿®æ”¹ä¸€ä¸ªé <code>mutable</code> çš„æˆå‘˜å˜é‡ï¼Œçœ‹çœ‹ç¼–è¯‘å™¨ä¼šæŠ¥ä»€ä¹ˆé”™ï¼Ÿ<code>mutable</code> å…³é”®å­—åœ¨è¿™é‡Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</li>
</ul>
</li>
<li><p><strong>è¿”å› <code>*this</code> vs è¿”å› <code>this</code> çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰ï¼š</strong></p>
<ul>
<li>æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†è¿”å› <code>Dog&amp;</code> (é€šè¿‡ <code>return *this;</code>) å’Œè¿”å› <code>Dog*</code> (é€šè¿‡ <code>return this;</code>)ã€‚æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœä½ çš„ç±»è®¾è®¡ç›®æ ‡æ˜¯è®©ç”¨æˆ·ä¸»è¦é€šè¿‡å¯¹è±¡æœ¬èº«ï¼ˆè€Œä¸æ˜¯æŒ‡é’ˆï¼‰è¿›è¡Œé“¾å¼æ“ä½œï¼Œå“ªç§è¿”å›æ–¹å¼æ›´è‡ªç„¶ï¼Ÿå¦‚æœä¸»è¦æ˜¯é€šè¿‡æŒ‡é’ˆæ“ä½œå‘¢ï¼Ÿ</li>
</ul>
</li>
<li><p><strong><code>this</code> åœ¨ç»§æ‰¿ä¸­çš„è¡Œä¸ºï¼š</strong></p>
<ul>
<li>å¦‚æœ <code>Gadget</code> ç±»è¢«å¦ä¸€ä¸ªç±»ç»§æ‰¿ï¼ˆä¾‹å¦‚ <code>class AdvancedGadget : public Gadget { ... };</code>ï¼‰ï¼Œåœ¨ <code>AdvancedGadget</code> çš„æˆå‘˜å‡½æ•°ä¸­ï¼Œ<code>this</code> æŒ‡é’ˆæŒ‡å‘ä»€ä¹ˆï¼Ÿå®ƒèƒ½è®¿é—® <code>Gadget</code> çš„æˆå‘˜å—ï¼Ÿ</li>
</ul>
</li>
<li><p><strong>ç®­å¤´æ“ä½œç¬¦ <code>-&gt;</code> çš„é‡è½½ï¼š</strong></p>
<ul>
<li>C++å…è®¸é‡è½½ç®­å¤´æ“ä½œç¬¦ <code>operator-&gt;()</code>ã€‚ç ”ç©¶ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠå®ƒä¸ <code>this</code> æŒ‡é’ˆå’Œæ™ºèƒ½æŒ‡é’ˆ (smart pointers) çš„å…³ç³»ã€‚</li>
</ul>
</li>
<li><p><strong>éšå¼ <code>this</code> å‚æ•°ï¼š</strong></p>
<ul>
<li>ä¸ºä»€ä¹ˆè¯´éé™æ€æˆå‘˜å‡½æ•°éƒ½æœ‰ä¸€ä¸ªéšå¼çš„ <code>this</code> å‚æ•°ï¼Ÿç¼–è¯‘å™¨æ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ªçš„ï¼Ÿï¼ˆè¿™æ˜¯ä¸€ä¸ªæ›´åå‘ç¼–è¯‘å™¨å®ç°ç»†èŠ‚çš„é—®é¢˜ï¼Œä½†ç†è§£å®ƒæœ‰åŠ©äºåŠ æ·±è®¤è¯†ã€‚ï¼‰</li>
</ul>
</li>
</ol>
<p>ç»§ç»­åŠªåŠ›ï¼Œä½ åšå¾—å¾ˆå¥½ï¼è¿™äº›é—®é¢˜å°†å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ C++ çš„ä¸€äº›æ ¸å¿ƒæœºåˆ¶ã€‚å¦‚æœä½ å¯¹è¿™äº›é—®é¢˜æœ‰ä»»ä½•æ€è€ƒæˆ–å°è¯•ï¼Œæ¬¢è¿éšæ—¶åˆ†äº«ï¼</p>
<hr>
<h2 id="ğŸ§‘â€ğŸ’»-User-2"><a href="#ğŸ§‘â€ğŸ’»-User-2" class="headerlink" title="ğŸ§‘â€ğŸ’» User"></a>ğŸ§‘â€ğŸ’» User</h2><p>è§£ç­”æ‰©å±•é—®é¢˜</p>
<hr>
<h2 id="ğŸ¤–-Assistant-2"><a href="#ğŸ¤–-Assistant-2" class="headerlink" title="ğŸ¤– Assistant"></a>ğŸ¤– Assistant</h2><p>å¤ªæ£’äº†ï¼ä½ å¯¹çŸ¥è¯†çš„æ¸´æœ›éå¸¸å€¼å¾—ç§°èµã€‚è¿™äº›æ‰©å±•é—®é¢˜å°†å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ C++ çš„ä¸€äº›ç²¾å¦™ä¹‹å¤„ã€‚è®©æˆ‘ä»¬é€ä¸€è§£ç­”ï¼š</p>
<h1 id="è§£ç­”æ‰©å±•é—®é¢˜"><a href="#è§£ç­”æ‰©å±•é—®é¢˜" class="headerlink" title="è§£ç­”æ‰©å±•é—®é¢˜"></a>è§£ç­”æ‰©å±•é—®é¢˜</h1><hr>
<h2 id="1-this-æŒ‡é’ˆä¸-const-æˆå‘˜å‡½æ•°-member-function"><a href="#1-this-æŒ‡é’ˆä¸-const-æˆå‘˜å‡½æ•°-member-function" class="headerlink" title="1. this æŒ‡é’ˆä¸ const æˆå‘˜å‡½æ•° (member function)"></a>1. <code>this</code> æŒ‡é’ˆä¸ <code>const</code> æˆå‘˜å‡½æ•° (member function)</h2><ul>
<li><p><strong>åœ¨ä¸€ä¸ª <code>const</code> æˆå‘˜å‡½æ•°ï¼ˆå¦‚ <code>void display() const;</code>ï¼‰å†…éƒ¨ï¼Œ<code>this</code> æŒ‡é’ˆçš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>åœ¨ä¸€ä¸ª <code>const</code> æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œ<code>this</code> æŒ‡é’ˆçš„ç±»å‹ä¼šå˜ä¸ºæŒ‡å‘å¸¸é‡å¯¹è±¡çš„å¸¸é‡æŒ‡é’ˆã€‚å¦‚æœç±»åæ˜¯ <code>Gadget</code>ï¼Œé‚£ä¹ˆåœ¨ <code>const</code> æˆå‘˜å‡½æ•°ä¸­ï¼š</p>
<ul>
<li><code>this</code> çš„ç±»å‹æ˜¯ <code>const Gadget* const</code>ã€‚</li>
<li>ç¬¬ä¸€ä¸ª <code>const</code> (<code>const</code> Gadget) æ„å‘³ç€ <code>this</code> æŒ‡å‘ä¸€ä¸ªå¸¸é‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸èƒ½é€šè¿‡ <code>this</code> æŒ‡é’ˆæ¥ä¿®æ”¹å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼ˆé™¤éå®ƒä»¬è¢«å£°æ˜ä¸º <code>mutable</code>ï¼‰ã€‚</li>
<li>ç¬¬äºŒä¸ª <code>const</code> (Gadget* <code>const</code>) æ„å‘³ç€ <code>this</code> æŒ‡é’ˆæœ¬èº«æ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼Œå®ƒä¸èƒ½è¢«ä¿®æ”¹ä¸ºæŒ‡å‘å¦ä¸€ä¸ªä¸åŒçš„ <code>Gadget</code> å¯¹è±¡ï¼ˆä½†è¿™åœ¨æ‰€æœ‰æˆå‘˜å‡½æ•°ä¸­éƒ½æ˜¯å¦‚æ­¤ï¼Œ<code>this</code> æ€»æ˜¯æŒ‡å‘å½“å‰å¯¹è±¡ï¼Œä¸èƒ½é‡å®šå‘ï¼‰ã€‚</li>
</ul>
<p><strong>ç®€å•æ¥è¯´ï¼š</strong> åœ¨ <code>const</code> æˆå‘˜å‡½æ•°é‡Œï¼Œä½ æ‰¿è¯ºä¸ä¼šæ”¹å˜å¯¹è±¡çš„æ•°æ®æˆå‘˜ï¼Œæ‰€ä»¥ <code>this</code> æŒ‡é’ˆä¹Ÿåæ˜ äº†è¿™ä¸ªæ‰¿è¯ºï¼Œå®ƒæŒ‡å‘çš„å¯¹è±¡è¢«è§†ä¸ºå¸¸é‡ã€‚</p>
</li>
<li><p><strong>å°è¯•åœ¨ä¸€ä¸ª <code>const</code> æˆå‘˜å‡½æ•°ä¸­ä¿®æ”¹ä¸€ä¸ªé <code>mutable</code> çš„æˆå‘˜å˜é‡ï¼Œçœ‹çœ‹ç¼–è¯‘å™¨ä¼šæŠ¥ä»€ä¹ˆé”™ï¼Ÿ<code>mutable</code> å…³é”®å­—åœ¨è¿™é‡Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></p>
<p>å¦‚æœä½ å°è¯•åœ¨ <code>const</code> æˆå‘˜å‡½æ•°ä¸­ä¿®æ”¹ä¸€ä¸ªé <code>mutable</code> çš„æˆå‘˜å˜é‡ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚é”™è¯¯ä¿¡æ¯é€šå¸¸ä¼šæŒ‡å‡ºä½ æ­£åœ¨å°è¯•ä¿®æ”¹ä¸€ä¸ª <code>const</code> å¯¹è±¡æˆ–è€…åœ¨ä¸€ä¸ª <code>const</code> ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œäº†å†™æ“ä½œã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    <span class="keyword">mutable</span> <span class="keyword">int</span> mutable_value; <span class="comment">// å¯å˜æˆå‘˜ (mutable member)</span></span><br><span class="line">    <span class="keyword">int</span> another_value;</span><br><span class="line"></span><br><span class="line">    MyClass(<span class="keyword">int</span> v, <span class="keyword">int</span> mv, <span class="keyword">int</span> av) : value(v), mutable_value(mv), another_value(av) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">const_member_func</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="comment">// this-&gt;value = 100; // é”™è¯¯ï¼value ä¸æ˜¯ mutable çš„</span></span><br><span class="line">        <span class="comment">// error: assignment of member 'MyClass::value' in read-only object</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>-&gt;mutable_value = <span class="number">200</span>; <span class="comment">// æ­£ç¡®ï¼mutable_value æ˜¯å¯å˜çš„</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Inside const_member_func: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  value (not changed): "</span> &lt;&lt; <span class="keyword">this</span>-&gt;value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  mutable_value (changed): "</span> &lt;&lt; <span class="keyword">this</span>-&gt;mutable_value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">non_const_member_func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;value = <span class="number">50</span>;          <span class="comment">// æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;mutable_value = <span class="number">500</span>; <span class="comment">// æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;another_value = <span class="number">5</span>;   <span class="comment">// æ­£ç¡®</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Inside non_const_member_func, all values reset."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line">    obj.const_member_func();</span><br><span class="line">    <span class="comment">// obj.value ç°åœ¨ä»ç„¶æ˜¯ 10, obj.mutable_value å˜ä¸º 200</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">const</span> MyClass <span class="title">const_obj</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">    const_obj.const_member_func(); <span class="comment">// å¯ä»¥è°ƒç”¨ const æˆå‘˜å‡½æ•°</span></span><br><span class="line">    <span class="comment">// const_obj.non_const_member_func(); // é”™è¯¯ï¼ä¸èƒ½åœ¨ const å¯¹è±¡ä¸Šè°ƒç”¨é const æˆå‘˜å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><strong><code>mutable</code> å…³é”®å­—çš„ä½œç”¨ï¼š</strong><br><code>mutable</code> (å¯å˜çš„) å…³é”®å­—å…è®¸ä½ åœ¨ <code>const</code> æˆå‘˜å‡½æ•°ä¸­ä¿®æ”¹ç‰¹å®šçš„æˆå‘˜å˜é‡ã€‚è¿™åœ¨ä½ æœ‰ä¸€äº›å†…éƒ¨çŠ¶æ€ï¼Œå…¶æ”¹å˜ä¸å½±å“å¯¹è±¡çš„å¤–éƒ¨è§‚å¯ŸçŠ¶æ€ï¼ˆé€»è¾‘ä¸Šçš„å¸¸é‡æ€§ï¼‰æ—¶éå¸¸æœ‰ç”¨ã€‚<br>ä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>ç¼“å­˜ (Caching)ï¼š</strong> ä¸€ä¸ª <code>const</code> å‡½æ•°å¯èƒ½éœ€è¦è®¡ç®—ä¸€ä¸ªç»“æœï¼Œå¹¶å°†ç»“æœç¼“å­˜èµ·æ¥ä¾›ä¸‹æ¬¡ä½¿ç”¨ã€‚ç¼“å­˜çš„å†™å…¥æ“ä½œä¼šä¿®æ”¹æˆå‘˜å˜é‡ï¼Œä½†ä»å¤–éƒ¨çœ‹ï¼Œå¯¹è±¡çš„é€»è¾‘çŠ¶æ€æ²¡å˜ã€‚</li>
<li><strong>çº¿ç¨‹åŒæ­¥ï¼š</strong> <code>std::mutex</code> æˆå‘˜é€šå¸¸è¢«å£°æ˜ä¸º <code>mutable</code>ï¼Œè¿™æ ·å³ä½¿åœ¨ <code>const</code> æ–¹æ³•ä¸­ï¼Œä¹Ÿå¯ä»¥é”å®šå’Œè§£é”äº’æ–¥é”ä»¥ä¿æŠ¤å…±äº«æ•°æ®ï¼ˆå°½ç®¡è¿™ç§åœºæ™¯ä¸‹ï¼Œäº’æ–¥é”ä¿æŠ¤çš„æ•°æ®æœ¬èº«å¯èƒ½ä¸åº”è¯¥åœ¨ <code>const</code> æ–¹æ³•ä¸­è¢«ä¿®æ”¹ï¼‰ã€‚</li>
<li><strong>è°ƒè¯•è®¡æ•°å™¨æˆ–æ—¥å¿—è®°å½•ã€‚</strong></li>
</ul>
</li>
</ul>
<hr>
<h2 id="2-è¿”å›-this-Vs-è¿”å›-this-çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰"><a href="#2-è¿”å›-this-Vs-è¿”å›-this-çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰" class="headerlink" title="2. è¿”å› *this Vs è¿”å› this çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰"></a>2. è¿”å› <code>*this</code> Vs è¿”å› <code>this</code> çš„ç»†å¾®å·®åˆ«ï¼ˆç”¨äºé“¾å¼è°ƒç”¨ï¼‰</h2><ul>
<li><p><strong>è¿”å› <code>*this</code> (å³ <code>ClassName&amp;</code>ï¼Œè¿”å›å¼•ç”¨ (reference))</strong></p>
<ul>
<li><strong>è¯­ä¹‰ï¼š</strong> è¿”å›å½“å‰å¯¹è±¡æœ¬èº«çš„ä¸€ä¸ªåˆ«åã€‚</li>
<li><strong>é“¾å¼è°ƒç”¨è¯­æ³•ï¼š</strong> åç»­è°ƒç”¨ä½¿ç”¨ç‚¹æ“ä½œç¬¦ <code>.</code> (dot operator)ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">my_object.setValue(<span class="number">10</span>).setColor(<span class="string">"Red"</span>).print();</span><br><span class="line"><span class="comment">// æˆ–è€…å¦‚æœä»æŒ‡é’ˆå¼€å§‹ï¼Œç¬¬ä¸€ä¸ªæ˜¯ -&gt;ï¼Œåç»­å› ä¸ºè¿”å›å¼•ç”¨ï¼Œæ‰€ä»¥æ˜¯ .</span></span><br><span class="line">my_ptr-&gt;setValue(<span class="number">10</span>).setColor(<span class="string">"Red"</span>).print();</span><br></pre></td></tr></table></figure></div></li>
<li><strong>è‡ªç„¶åœºæ™¯ï¼š</strong><ul>
<li>å½“ç±»è®¾è®¡å¾—åƒå€¼ç±»å‹ (value types) æ—¶ï¼ˆä¾‹å¦‚ <code>std::string</code>ï¼Œå¾ˆå¤šSTLå®¹å™¨çš„ä¿®æ”¹æ“ä½œï¼‰ã€‚</li>
<li>å½“ç”¨æˆ·é€šå¸¸åœ¨æ ˆ (stack) ä¸Šåˆ›å»ºå¯¹è±¡ï¼Œæˆ–è€…é€šè¿‡å¯¹è±¡æœ¬èº«ï¼ˆè€Œä¸æ˜¯æŒ‡é’ˆï¼‰è¿›è¡Œæ“ä½œæ—¶ã€‚</li>
<li>è¿™ç§æ–¹å¼æ›´ç¬¦åˆå¾ˆå¤šç°ä»£C++åº“çš„è®¾è®¡é£æ ¼ï¼Œä¾‹å¦‚æ„å»ºå™¨æ¨¡å¼ (Builder Pattern) æˆ–è€…æµå¼æ¥å£ (Fluent Interface)ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>è¿”å› <code>this</code> (å³ <code>ClassName*</code>ï¼Œè¿”å›æŒ‡é’ˆ (pointer))</strong></p>
<ul>
<li><strong>è¯­ä¹‰ï¼š</strong> è¿”å›æŒ‡å‘å½“å‰å¯¹è±¡çš„æŒ‡é’ˆã€‚</li>
<li><strong>é“¾å¼è°ƒç”¨è¯­æ³•ï¼š</strong> åç»­è°ƒç”¨å¿…é¡»ä½¿ç”¨ç®­å¤´æ“ä½œç¬¦ <code>-&gt;</code> (arrow operator)ã€‚<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_ptr-&gt;setValue(<span class="number">10</span>)-&gt;setColor(<span class="string">"Red"</span>)-&gt;print();</span><br></pre></td></tr></table></figure></div></li>
<li><strong>è‡ªç„¶åœºæ™¯ï¼š</strong><ul>
<li>å½“ç±»ä¸»è¦é€šè¿‡åŠ¨æ€åˆ†é… (dynamic allocation) ï¼ˆä½¿ç”¨ <code>new</code>ï¼‰æ¥ç®¡ç†ï¼Œå¹¶ä¸”ç”¨æˆ·ä¸»è¦é€šè¿‡æŒ‡é’ˆä¸å¯¹è±¡äº¤äº’æ—¶ã€‚</li>
<li>åœ¨ä¸€äº›è€æ—§çš„C++ä»£ç åº“ä¸­å¯èƒ½æ›´å¸¸è§ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>å“ªç§æ›´è‡ªç„¶ï¼Ÿ</strong></p>
<ul>
<li><strong>æ™®éè®¤ä¸ºè¿”å›å¼•ç”¨ (<code>*this</code>) çš„æ–¹å¼æ›´ä¸ºç°ä»£å’Œè‡ªç„¶ï¼Œå°¤å…¶å¯¹äºéçº¯ç²¹æŒ‡é’ˆç®¡ç†çš„ç±»ã€‚</strong> å®ƒå…è®¸ç»Ÿä¸€çš„ <code>.</code> è°ƒç”¨è¯­æ³•ï¼ˆåœ¨å¯¹è±¡ä¸Šç›´æ¥è°ƒç”¨æ—¶ï¼‰ï¼Œå¹¶ä¸”æ›´ç¬¦åˆå€¼è¯­ä¹‰çš„ä¹ æƒ¯ã€‚</li>
<li>è¿”å›æŒ‡é’ˆ (<code>this</code>) å¼ºåˆ¶æ‰€æœ‰åç»­è°ƒç”¨éƒ½ä½¿ç”¨ <code>-&gt;</code>ï¼Œå¦‚æœä½ çš„ä»£ç ä¸»è¦å¤„ç†å¯¹è±¡æœ¬èº«è€ŒéæŒ‡é’ˆï¼Œè¿™å¯èƒ½ä¼šæ˜¾å¾—æœ‰äº›ä¸åè°ƒã€‚</li>
<li>ç„¶è€Œï¼Œå¦‚æœä½ çš„ç±»è®¾è®¡å°±æ˜¯å›´ç»•æŒ‡é’ˆæ“ä½œçš„ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹çš„ <code>setNext</code> æ–¹æ³•å¯èƒ½è¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œæˆ–è€…è¿”å› <code>this</code> æŒ‡é’ˆä»¥ä¾¿åœ¨æŒ‡é’ˆä¸Šç»§ç»­æ“ä½œï¼‰ï¼Œé‚£ä¹ˆè¿”å›æŒ‡é’ˆå¯èƒ½æ˜¯åˆé€‚çš„ã€‚</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong> é™¤éæœ‰ç‰¹å®šç†ç”±éœ€è¦è¿”å›æŒ‡é’ˆï¼ˆä¾‹å¦‚ï¼Œç±»æœ¬èº«å°±æ˜¯ä¸€ç§æŒ‡é’ˆåŒ…è£…å™¨ï¼Œæˆ–è€…APIè®¾è®¡å¼ºåˆ¶è¦æ±‚æŒ‡é’ˆè¯­ä¹‰ï¼‰ï¼Œå¦åˆ™<strong>ä¸ºé“¾å¼è°ƒç”¨è¿”å›å¼•ç”¨ (<code>ClassName&amp;</code>) é€šå¸¸æ˜¯æ›´æ¨èçš„åšæ³•</strong>ã€‚</p>
</li>
</ul>
<hr>
<h2 id="3-this-åœ¨ç»§æ‰¿-inheritance-ä¸­çš„è¡Œä¸º"><a href="#3-this-åœ¨ç»§æ‰¿-inheritance-ä¸­çš„è¡Œä¸º" class="headerlink" title="3. this åœ¨ç»§æ‰¿ (inheritance) ä¸­çš„è¡Œä¸º"></a>3. <code>this</code> åœ¨ç»§æ‰¿ (inheritance) ä¸­çš„è¡Œä¸º</h2><ul>
<li><p><strong>å¦‚æœ <code>Gadget</code> ç±»è¢«å¦ä¸€ä¸ªç±»ç»§æ‰¿ï¼ˆä¾‹å¦‚ <code>class AdvancedGadget : public Gadget { ... };</code>ï¼‰ï¼Œåœ¨ <code>AdvancedGadget</code> çš„æˆå‘˜å‡½æ•°ä¸­ï¼Œ<code>this</code> æŒ‡é’ˆæŒ‡å‘ä»€ä¹ˆï¼Ÿå®ƒèƒ½è®¿é—® <code>Gadget</code> çš„æˆå‘˜å—ï¼Ÿ</strong></p>
<ol>
<li><p><strong>åœ¨ <code>AdvancedGadget</code> çš„æˆå‘˜å‡½æ•°ä¸­ï¼Œ<code>this</code> æŒ‡é’ˆçš„ç±»å‹æ˜¯ <code>AdvancedGadget* const</code>ã€‚å®ƒæŒ‡å‘å½“å‰çš„ <code>AdvancedGadget</code> å¯¹è±¡ã€‚</strong></p>
</li>
<li><p><strong>æ˜¯çš„ï¼Œ<code>this</code> (å³ä¸€ä¸ª <code>AdvancedGadget*</code>) å¯ä»¥è®¿é—® <code>Gadget</code> çš„æˆå‘˜ï¼Œä½†éµå¾ªè®¿é—®æ§åˆ¶è§„åˆ™ï¼š</strong></p>
<ul>
<li>å®ƒå¯ä»¥è®¿é—® <code>Gadget</code> çš„ <code>public</code> (å…¬æœ‰çš„) æˆå‘˜ã€‚</li>
<li>å®ƒå¯ä»¥è®¿é—® <code>Gadget</code> çš„ <code>protected</code> (å—ä¿æŠ¤çš„) æˆå‘˜ã€‚</li>
<li>å®ƒ<strong>ä¸èƒ½</strong>ç›´æ¥è®¿é—® <code>Gadget</code> çš„ <code>private</code> (ç§æœ‰çš„) æˆå‘˜ã€‚ï¼ˆç§æœ‰æˆå‘˜åªèƒ½è¢«å…¶æ‰€å±ç±»çš„æˆå‘˜å‡½æ•°å’Œå‹å…ƒè®¿é—®ï¼‰ã€‚</li>
</ul>
</li>
</ol>
</li>
<li><p><strong>å¦‚æœä¸€ä¸ª <code>AdvancedGadget</code> å¯¹è±¡è°ƒç”¨äº†ä» <code>Gadget</code> ç»§æ‰¿æ¥çš„æˆå‘˜å‡½æ•°ï¼ˆè¯¥å‡½æ•°æœªåœ¨ <code>AdvancedGadget</code> ä¸­è¢«è¦†ç›– (override)ï¼‰ï¼Œé‚£ä¹ˆåœ¨é‚£ä¸ª <code>Gadget</code> çš„æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œ<code>this</code> æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªå…³é”®ç‚¹ï¼Œä¹Ÿæ˜¯å¤šæ€ (polymorphism) çš„åŸºç¡€ä¹‹ä¸€ï¼š</p>
<ul>
<li>å³ä½¿å‡½æ•°å®šä¹‰åœ¨åŸºç±» <code>Gadget</code> ä¸­ï¼Œå½“å®ƒè¢«ä¸€ä¸ª <code>AdvancedGadget</code> å¯¹è±¡è°ƒç”¨æ—¶ï¼Œ<strong><code>this</code> æŒ‡é’ˆä»ç„¶æŒ‡å‘é‚£ä¸ª <code>AdvancedGadget</code> å¯¹è±¡ã€‚</strong></li>
<li>ç„¶è€Œï¼Œåœ¨ <code>Gadget</code> çš„æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œ<code>this</code> æŒ‡é’ˆçš„<strong>é™æ€ç±»å‹</strong> (static type) æ˜¯ <code>Gadget* const</code>ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨è¿™ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸå†…ï¼Œä½ åªèƒ½é€šè¿‡ <code>this</code> æŒ‡é’ˆç›´æ¥è®¿é—® <code>Gadget</code> ç±»ä¸­å£°æ˜çš„æˆå‘˜ã€‚</li>
<li>å¦‚æœ <code>Gadget</code> ä¸­çš„å‡½æ•°æ˜¯è™šå‡½æ•° (virtual function)ï¼Œå¹¶ä¸”åœ¨ <code>AdvancedGadget</code> ä¸­è¢«è¦†ç›–äº†ï¼Œé‚£ä¹ˆé€šè¿‡åŸºç±»æŒ‡é’ˆï¼ˆåŒ…æ‹¬ <code>this</code>ï¼‰è°ƒç”¨è¯¥è™šå‡½æ•°æ—¶ï¼Œä¼šåŠ¨æ€åœ°è°ƒç”¨åˆ°æ´¾ç”Ÿç±»çš„ç‰ˆæœ¬ï¼Œ<code>this</code> æŒ‡é’ˆï¼ˆå°½ç®¡é™æ€ç±»å‹æ˜¯åŸºç±»æŒ‡é’ˆï¼‰å®é™…ä¸ŠæŒ‡å‘çš„æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå› æ­¤æ´¾ç”Ÿç±»ç‰ˆæœ¬çš„å‡½æ•°å¾—ä»¥æ­£ç¡®æ‰§è¡Œåœ¨æ´¾ç”Ÿç±»å¯¹è±¡ä¸Šã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> base_var = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print_base</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œï¼Œthis çš„é™æ€ç±»å‹æ˜¯ Base* const</span></span><br><span class="line">        <span class="comment">// ä½†å¦‚æœæ˜¯ç”± Derived å¯¹è±¡è°ƒç”¨çš„ï¼Œthis å®é™…æŒ‡å‘ Derived å¯¹è±¡</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Base::print_base() called. this points to address: "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  Base var: "</span> &lt;&lt; <span class="keyword">this</span>-&gt;base_var &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">// std::cout &lt;&lt; this-&gt;derived_var; // é”™è¯¯ï¼Base ä¸çŸ¥é“ derived_var</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">who_am_i</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="comment">// è™šå‡½æ•°</span></span><br><span class="line">         <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Base::who_am_i() says: I am a Base object at "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> derived_var = <span class="number">20</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print_derived</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œï¼Œthis çš„é™æ€ç±»å‹æ˜¯ Derived* const</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Derived::print_derived() called. this points to address: "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  Base var (accessible): "</span> &lt;&lt; <span class="keyword">this</span>-&gt;base_var &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// å¯ä»¥è®¿é—®åŸºç±»çš„ public/protected æˆå‘˜</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"  Derived var: "</span> &lt;&lt; <span class="keyword">this</span>-&gt;derived_var &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">who_am_i</span><span class="params">()</span> <span class="keyword">const</span> <span class="keyword">override</span> </span>&#123; <span class="comment">// è¦†ç›–è™šå‡½æ•°</span></span><br><span class="line">         <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Derived::who_am_i() says: I am a Derived object at "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Derived d_obj;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"d_obj address: "</span> &lt;&lt; &amp;d_obj &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    d_obj.print_base();    <span class="comment">// è°ƒç”¨åŸºç±»å‡½æ•°ï¼Œå†…éƒ¨ this æŒ‡å‘ d_obj</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    d_obj.print_derived(); <span class="comment">// è°ƒç”¨æ´¾ç”Ÿç±»å‡½æ•°ï¼Œå†…éƒ¨ this æŒ‡å‘ d_obj</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    Base* b_ptr = &amp;d_obj; <span class="comment">// åŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡</span></span><br><span class="line">    b_ptr-&gt;print_base();   <span class="comment">// å†…éƒ¨ this æŒ‡å‘ d_obj</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// b_ptr-&gt;print_derived(); // é”™è¯¯ï¼Base* ä¸çŸ¥é“ print_derived()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è™šå‡½æ•°æ¼”ç¤º</span></span><br><span class="line">    d_obj.who_am_i();      <span class="comment">// è°ƒç”¨ Derived::who_am_i(), this æŒ‡å‘ d_obj</span></span><br><span class="line">    b_ptr-&gt;who_am_i();     <span class="comment">// **åŠ¨æ€ç»‘å®š**ï¼è°ƒç”¨ Derived::who_am_i(), this æŒ‡å‘ d_obj</span></span><br><span class="line">                           <span class="comment">// å°½ç®¡ b_ptr æ˜¯ Base* ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>ä½ ä¼šæ³¨æ„åˆ°ï¼Œæ— è®ºè°ƒç”¨çš„æ˜¯ <code>d_obj.print_base()</code> è¿˜æ˜¯ <code>b_ptr-&gt;print_base()</code>ï¼Œæ‰“å°å‡ºçš„ <code>this</code> åœ°å€éƒ½å’Œ <code>&amp;d_obj</code> ç›¸åŒã€‚</p>
</li>
</ul>
<hr>
<h2 id="4-ç®­å¤´æ“ä½œç¬¦-gt-çš„é‡è½½-operator-overloading"><a href="#4-ç®­å¤´æ“ä½œç¬¦-gt-çš„é‡è½½-operator-overloading" class="headerlink" title="4. ç®­å¤´æ“ä½œç¬¦ -&gt; çš„é‡è½½ (operator overloading)"></a>4. ç®­å¤´æ“ä½œç¬¦ <code>-&gt;</code> çš„é‡è½½ (operator overloading)</h2><ul>
<li><p>C++å…è®¸ä½ ä¸ºç±»é‡è½½ç®­å¤´æ“ä½œç¬¦ <code>operator-&gt;()</code>ã€‚è¿™é€šå¸¸ç”¨äºå®ç°è¡Œä¸ºç±»ä¼¼æŒ‡é’ˆçš„ç±»ï¼Œæœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯æ™ºèƒ½æŒ‡é’ˆ (smart pointers) å¦‚ <code>std::unique_ptr</code> å’Œ <code>std::shared_ptr</code>ã€‚</p>
</li>
<li><p><strong>å¦‚ä½•å·¥ä½œï¼š</strong></p>
<ul>
<li><code>operator-&gt;()</code> å¿…é¡»æ˜¯ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„éé™æ€æˆå‘˜å‡½æ•° (non-static member function)ã€‚</li>
<li>å®ƒåº”è¯¥è¿”å›ä¸€ä¸ªåŸå§‹æŒ‡é’ˆ (raw pointer)ï¼Œæˆ–è€…è¿”å›å¦ä¸€ä¸ªé‡è½½äº† <code>operator-&gt;()</code> çš„å¯¹è±¡ã€‚</li>
<li>å½“ç¼–è¯‘å™¨é‡åˆ° <code>object_ptr-&gt;member</code> è¿™æ ·çš„è¡¨è¾¾å¼æ—¶ï¼š<ol>
<li>å®ƒä¼šè°ƒç”¨ <code>object_ptr.operator-&gt;()</code>ã€‚</li>
<li>å¦‚æœè¿™ä¸ªè°ƒç”¨è¿”å›ä¸€ä¸ªåŸå§‹æŒ‡é’ˆ <code>raw_ptr</code>ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼å°±ç­‰ä»·äº <code>raw_ptr-&gt;member</code>ã€‚</li>
<li>å¦‚æœè¿™ä¸ªè°ƒç”¨è¿”å›å¦ä¸€ä¸ªå¯¹è±¡ <code>another_object_ptr</code>ï¼ˆå®ƒä¹Ÿé‡è½½äº† <code>operator-&gt;()</code>ï¼‰ï¼Œé‚£ä¹ˆè¿‡ç¨‹ä¼šé‡å¤ï¼š<code>(object_ptr.operator-&gt;())-&gt;member</code> å˜æˆäº† <code>another_object_ptr-&gt;member</code>ï¼Œç„¶åå†æ¬¡è°ƒç”¨ <code>another_object_ptr.operator-&gt;()</code>ï¼Œç›´åˆ°æœ€ç»ˆè¿”å›ä¸€ä¸ªåŸå§‹æŒ‡é’ˆã€‚</li>
</ol>
</li>
</ul>
</li>
<li><p><strong>ä¸ <code>this</code> çš„å…³ç³»ï¼š</strong></p>
<ul>
<li><code>operator-&gt;()</code> æœ¬èº«æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥åœ¨å…¶å†…éƒ¨ï¼Œ<code>this</code> æŒ‡é’ˆæŒ‡å‘è°ƒç”¨ <code>operator-&gt;()</code> çš„é‚£ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡æœ¬èº«ã€‚</li>
<li><code>operator-&gt;()</code> çš„ç›®çš„æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘æ™ºèƒ½æŒ‡é’ˆæ‰€ç®¡ç†çš„å®é™…å¯¹è±¡çš„æŒ‡é’ˆã€‚</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹ï¼ˆä¸€ä¸ªéå¸¸ç®€åŒ–çš„æ™ºèƒ½æŒ‡é’ˆï¼‰ï¼š</strong></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyData</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> value = <span class="number">42</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">greet</span><span class="params">()</span> </span>&#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello from MyData! Value is "</span> &lt;&lt; value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleSmartPtr</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T* raw_ptr;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SimpleSmartPtr</span><span class="params">(T* p = <span class="literal">nullptr</span>)</span> : <span class="title">raw_ptr</span><span class="params">(p)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SimpleSmartPtr created, managing object at "</span> &lt;&lt; raw_ptr </span><br><span class="line">                  &lt;&lt; <span class="string">" (this smart ptr is at "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~SimpleSmartPtr() &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SimpleSmartPtr destroyed, deleting object at "</span> &lt;&lt; raw_ptr </span><br><span class="line">                  &lt;&lt; <span class="string">" (this smart ptr was at "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">")"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">delete</span> raw_ptr;</span><br><span class="line">        raw_ptr = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½ -&gt; æ“ä½œç¬¦</span></span><br><span class="line">    T* <span class="keyword">operator</span>-&gt;() <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SimpleSmartPtr::operator-&gt;() called (this smart ptr is at "</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="string">")"</span></span><br><span class="line">                  &lt;&lt; <span class="string">", returning raw_ptr: "</span> &lt;&lt; raw_ptr &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> raw_ptr; <span class="comment">// è¿”å›åŸå§‹æŒ‡é’ˆ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½ * æ“ä½œç¬¦ (è§£å¼•ç”¨)</span></span><br><span class="line">    T&amp; <span class="keyword">operator</span>*() <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SimpleSmartPtr::operator*() called, returning reference to object at "</span> &lt;&lt; raw_ptr &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> *raw_ptr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">SimpleSmartPtr&lt;MyData&gt; <span class="title">sptr</span><span class="params">(<span class="keyword">new</span> MyData())</span></span>;</span><br><span class="line"></span><br><span class="line">    sptr-&gt;greet(); <span class="comment">// ç¼–è¯‘å™¨ä¼šåš: (sptr.operator-&gt;())-&gt;greet()</span></span><br><span class="line">                   <span class="comment">// sptr.operator-&gt;() è¿”å› MyData*</span></span><br><span class="line">                   <span class="comment">// ç„¶ååœ¨ MyData* ä¸Šè°ƒç”¨ greet()</span></span><br><span class="line"></span><br><span class="line">    sptr-&gt;value = <span class="number">100</span>; <span class="comment">// (sptr.operator-&gt;())-&gt;value = 100;</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Value via smart pointer: "</span> &lt;&lt; sptr-&gt;value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    (*sptr).greet(); <span class="comment">// ä½¿ç”¨è§£å¼•ç”¨æ“ä½œç¬¦</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Value via dereference: "</span> &lt;&lt; (*sptr).value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>åœ¨ <code>sptr-&gt;greet()</code> ä¸­ï¼š</p>
<ol>
<li><code>sptr.operator-&gt;()</code> è¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œ<code>this</code> æŒ‡å‘ <code>sptr</code> å¯¹è±¡ã€‚å®ƒè¿”å› <code>sptr</code> å†…éƒ¨å­˜å‚¨çš„ <code>MyData*</code> ç±»å‹çš„ <code>raw_ptr</code>ã€‚</li>
<li>ç„¶åï¼Œ<code>greet()</code> æˆå‘˜å‡½æ•°åœ¨ <code>raw_ptr</code> æŒ‡å‘çš„ <code>MyData</code> å¯¹è±¡ä¸Šè¢«è°ƒç”¨ã€‚</li>
</ol>
</li>
</ul>
<hr>
<h2 id="5-éšå¼-this-å‚æ•°-implicit-parameter"><a href="#5-éšå¼-this-å‚æ•°-implicit-parameter" class="headerlink" title="5. éšå¼ this å‚æ•° (implicit parameter)"></a>5. éšå¼ <code>this</code> å‚æ•° (implicit parameter)</h2><ul>
<li><p><strong>ä¸ºä»€ä¹ˆè¯´éé™æ€æˆå‘˜å‡½æ•°éƒ½æœ‰ä¸€ä¸ªéšå¼çš„ <code>this</code> å‚æ•°ï¼Ÿ</strong><br>å½“ä½ è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„éé™æ€æˆå‘˜å‡½æ•°æ—¶ï¼Œä¾‹å¦‚ <code>my_object.my_method(arg1, arg2);</code>ï¼Œç¼–è¯‘å™¨éœ€è¦çŸ¥é“è¿™ä¸ªæ–¹æ³•åº”è¯¥æ“ä½œå“ªä¸ªå¯¹è±¡çš„æ•°æ®ã€‚<br>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œç¼–è¯‘å™¨åœ¨èƒŒåéšå¼åœ°å°†å¯¹è±¡çš„åœ°å€ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™è¯¥æˆå‘˜å‡½æ•°ã€‚è¿™ä¸ªéšå¼ä¼ é€’çš„åœ°å€åœ¨å‡½æ•°å†…éƒ¨å°±æˆä¸ºäº† <code>this</code> æŒ‡é’ˆã€‚</p>
</li>
<li><p><strong>ç¼–è¯‘å™¨æ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ªçš„ï¼Ÿï¼ˆæ¦‚å¿µä¸Šï¼‰</strong><br>ä½ å¯ä»¥å°†æˆå‘˜å‡½æ•°çš„è°ƒç”¨æƒ³è±¡æˆè¢«ç¼–è¯‘å™¨è½¬æ¢æˆäº†ç±»ä¼¼è¿™æ ·çš„æ™®é€šå‡½æ•°è°ƒç”¨ï¼š</p>
<ul>
<li>åŸå§‹è°ƒç”¨ï¼š<code>my_object.my_method(arg1, arg2);</code></li>
<li>ç¼–è¯‘å™¨è½¬æ¢ï¼ˆæ¦‚å¿µæ€§ï¼‰ï¼š<code>ClassName_my_method(&amp;my_object, arg1, arg2);</code><br>ï¼ˆæ³¨æ„ï¼šå®é™…çš„åç§°ä¿®é¥°/é‡è½½å†³è®® (name mangling/overload resolution) æ¯”è¿™å¤æ‚å¾—å¤šï¼Œä½†è¿™æœ‰åŠ©äºç†è§£æ¦‚å¿µã€‚ï¼‰</li>
</ul>
<p>åœ¨ <code>ClassName_my_method</code> å‡½æ•°ï¼ˆå³åŸæ¥çš„ <code>my_method</code>ï¼‰çš„å®ç°å†…éƒ¨ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼ªä»£ç ï¼Œè¡¨ç¤ºæˆå‘˜å‡½æ•° MyClass::my_method çš„è½¬æ¢åå½¢æ€</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ClassName_my_method</span><span class="params">(MyClass* <span class="keyword">const</span> this_ptr, ParamType1 arg1, ParamType2 arg2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨å‡½æ•°å†…éƒ¨ï¼Œ'this_ptr' å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ 'this'</span></span><br><span class="line">    <span class="comment">// ä¾‹å¦‚ï¼šthis_ptr-&gt;member_variable = arg1;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br>å¦‚æœæ²¡æœ‰ <code>this</code> æŒ‡é’ˆï¼Œæˆå‘˜å‡½æ•°å°†æ— æ³•åŒºåˆ†å®ƒåº”è¯¥æ“ä½œå“ªä¸ªå¯¹è±¡å®ä¾‹çš„æˆå‘˜å˜é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸¤ä¸ª <code>Dog</code> å¯¹è±¡ <code>dog1</code> å’Œ <code>dog2</code>ï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cpp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dog1.set_name(<span class="string">"Buddy"</span>);</span><br><span class="line">dog2.set_name(<span class="string">"Lucy"</span>);</span><br></pre></td></tr></table></figure></div>
<p><code>set_name</code> å‡½æ•°éœ€è¦çŸ¥é“æ˜¯å°† <code>&quot;Buddy&quot;</code> èµ‹ç»™ <code>dog1</code> çš„ <code>name</code> æˆå‘˜ï¼Œè¿˜æ˜¯å°† <code>&quot;Lucy&quot;</code> èµ‹ç»™ <code>dog2</code> çš„ <code>name</code> æˆå‘˜ã€‚<code>this</code> æŒ‡é’ˆæä¾›äº†è¿™ç§åŒºåˆ†ã€‚</p>
</li>
<li><p><strong>é™æ€æˆå‘˜å‡½æ•° (static member functions) çš„æƒ…å†µï¼š</strong><br>é™æ€æˆå‘˜å‡½æ•°ä¸ä¸ä»»ä½•ç‰¹å®šçš„å¯¹è±¡å®ä¾‹ç›¸å…³è”ã€‚å®ƒä»¬å±äºç±»æœ¬èº«ã€‚å› æ­¤ï¼Œå®ƒä»¬æ²¡æœ‰éšå¼çš„ <code>this</code> å‚æ•°ï¼Œä¹Ÿä¸èƒ½ç›´æ¥è®¿é—®éé™æ€æˆå‘˜å˜é‡ï¼ˆå› ä¸ºæ²¡æœ‰ <code>this</code> æ¥ç¡®å®šæ˜¯å“ªä¸ªå¯¹è±¡çš„éé™æ€æˆå‘˜ï¼‰ã€‚å®ƒä»¬åªèƒ½è®¿é—®å…¶ä»–é™æ€æˆå‘˜æˆ–é€šè¿‡æ˜¾å¼ä¼ é€’çš„å¯¹è±¡æŒ‡é’ˆ/å¼•ç”¨æ¥è®¿é—®éé™æ€æˆå‘˜ã€‚</p>
</li>
</ul>
<hr>
<p>å¸Œæœ›è¿™äº›è§£ç­”èƒ½å¤Ÿå¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ <code>this</code> æŒ‡é’ˆåŠå…¶ç›¸å…³çš„ C++ æ¦‚å¿µï¼è¿™äº›éƒ½æ˜¯éå¸¸æ ¸å¿ƒä¸”é‡è¦çš„çŸ¥è¯†ç‚¹ã€‚</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cpp/">Cpp    </a><a class="post-meta__tags" href="/tags/Coding/">Coding    </a><a class="post-meta__tags" href="/tags/Tutorial/">Tutorial    </a><a class="post-meta__tags" href="/tags/Developer/">Developer    </a><a class="post-meta__tags" href="/tags/Class/">Class    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2025/06/08/30-resources/coding/sql/sql-data-types-constraints-example/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>sql-data-types-constraints-example</span></div></a></div><div class="next-post pull_right"><a href="/2025/06/08/10-projects/cplusplus/lectures/301%20-%20%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>301 - æ‹·è´æ„é€ å‡½æ•°æ·±æ‹·è´</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/notes/é™æ€æˆå‘˜è®¿é—®æ§åˆ¶/" title="é™æ€æˆå‘˜è®¿é—®æ§åˆ¶"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">é™æ€æˆå‘˜è®¿é—®æ§åˆ¶</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/274 - default constructor/" title="274 - default constructor"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">274 - default constructor</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•/" title="277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">277 - IDE åˆ›å»º cpp ç±»æ–¹æ³•</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹/" title="278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">278 - cpp æŒ‡é’ˆç®¡ç†ç±»å¯¹è±¡ç¤ºä¾‹</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/256 - cpp decltype(auto)/" title="256 - cpp decltype(auto)"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">256 - cpp decltype(auto)</div></div></a></div><div class="relatedPosts_item"><a href="/2025/06/08/10-projects/cplusplus/lectures/282 - cppç»“æ„ä½“ä¸ç±»çš„åŒºåˆ«å’Œç”¨æ³•/" title="282 - cppç»“æ„ä½“ä¸ç±»çš„åŒºåˆ«å’Œç”¨æ³•"><img class="relatedPosts_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2025-06-08</div><div class="relatedPosts_title">282 - cppç»“æ„ä½“ä¸ç±»çš„åŒºåˆ«å’Œç”¨æ³•</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'xvMxbws16Erd8WUfqxkvHmb5-gzGzoHsz',
  appKey:'4U0Vo7NQIUL0eJzHdkPzdCDr',
  placeholder:'ä¸è¯´è¯çš„äººä¼šç–¯æ‰å—?',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/supersheepbear/blog_source@master/blog/image/20200202103940.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By supersheepbear</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="external nofollow noopener noreferrer"><span>Butterfly</span></a></div><div class="footer_custom_text">å¤–å‘å­¤ç‹¬è€…æ‚£è€…</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="canvas_nest" color="255,240,245" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>